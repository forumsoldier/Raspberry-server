!function(t,e,i){function n(t,e){return typeof t===e}function s(){var t,e,i,s,o,r,a;for(var l in y){if(t=[],e=y[l],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(s=n(e.fn,"function")?e.fn():e.fn,o=0;o<t.length;o++)r=t[o],a=r.split("."),1===a.length?S[a[0]]=s:2===a.length&&(!S[a[0]]||S[a[0]]instanceof Boolean||(S[a[0]]=new Boolean(S[a[0]])),S[a[0]][a[1]]=s),v.push((s?"":"no-")+a.join("-"))}}function o(t){var e=T.className,i=S._config.classPrefix||"",n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(n,"$1"+i+"js$2"),S._config.enableClasses&&(e+=" "+i+t.join(" "+i),T.className=e)}function r(){var t=e.body;return t||(t=k("body"),t.fake=!0),t}function a(t,e,i,n){var s,o,a,l,c="modernizr",h=k("div"),d=r();if(parseInt(i,10))for(;i--;)a=k("div"),a.id=n?n[i]:c+(i+1),h.appendChild(a);return s=["\xad",'<style id="s',c,'">',t,"</style>"].join(""),h.id=c,(d.fake?d:h).innerHTML+=s,d.appendChild(h),d.fake&&(d.style.background="",d.style.overflow="hidden",l=T.style.overflow,T.style.overflow="hidden",T.appendChild(d)),o=e(h,t),d.fake?(d.parentNode.removeChild(d),T.style.overflow=l,T.offsetHeight):h.parentNode.removeChild(h),!!o}function l(t,e){return!!~(""+t).indexOf(e)}function c(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function h(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(e,n){var s=e.length;if("CSS"in t&&"supports"in t.CSS){for(;s--;)if(t.CSS.supports(h(e[s]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];s--;)o.push("("+h(e[s])+":"+n+")");return o=o.join(" or "),a("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position})}return i}function u(t,e,s,o){function r(){c&&(delete A.style,delete A.modElem)}if(o=n(o,"undefined")?!1:o,!n(s,"undefined")){var a=d(t,s);if(!n(a,"undefined"))return a}var c,h,u,p;A.style||(c=!0,A.modElem=k("modernizr"),A.style=A.modElem.style);for(h in t)if(u=t[h],p=A.style[u],!l(u,"-")&&A.style[u]!==i){if(o||n(s,"undefined"))return r(),"pfx"==e?u:!0;try{A.style[u]=s}catch(m){}if(A.style[u]!=p)return r(),"pfx"==e?u:!0}return r(),!1}function p(t,e){return function(){return t.apply(e,arguments)}}function m(t,e,i){var s;for(var o in t)if(t[o]in e)return i===!1?t[o]:(s=e[t[o]],n(s,"function")?p(s,i||e):s);return!1}function f(t,e,i,s,o){var r=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+C.join(r+" ")+r).split(" ");return n(e,"string")||n(e,"undefined")?u(a,e,s,o):(a=(t+" "+L.join(r+" ")+r).split(" "),m(a,e,i))}function g(t,e,n){return f(t,i,i,e,n)}var v=[],y=[],b={_version:"v3.0.0pre",_config:{classPrefix:"mz-",enableClasses:!0,usePrefixes:!0},_q:[],on:function(t,e){setTimeout(function(){e(this[t])},0)},addTest:function(t,e,i){y.push({name:t,fn:e,options:i})},addAsyncTest:function(t){y.push({name:null,fn:t})}},S=function(){};S.prototype=b,S=new S,S.addTest("applicationcache","applicationCache"in t),S.addTest("history",function(){var e=navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")?t.history&&"pushState"in t.history:!1}),S.addTest("localstorage",function(){var t="modernizr";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}),S.addTest("svg",!!e.createElementNS&&!!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var E=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];b._prefixes=E;var T=e.documentElement,w="Webkit Moz O ms",L=b._config.usePrefixes?w.toLowerCase().split(" "):[];b._domPrefixes=L;var k=function(){return e.createElement.apply(e,arguments)};S.addTest("opacity",function(){var t=k("div"),e=t.style;return e.cssText=E.join("opacity:.55;"),/^0.55$/.test(e.opacity)}),S.addTest("rgba",function(){var t=k("div"),e=t.style;return e.cssText="background-color:rgba(150,255,150,.5)",(""+e.backgroundColor).indexOf("rgba")>-1});var _=b.testStyles=a,C=b._config.usePrefixes?w.split(" "):[];b._cssomPrefixes=C;var x={elem:k("modernizr")};S._q.push(function(){delete x.elem});var A={style:x.elem.style};S._q.unshift(function(){delete A.style});b.testProp=function(t,e,n){return u([t],i,e,n)};b.testAllProps=f,b.testAllProps=g,S.addTest("backgroundsize",g("backgroundSize","100%",!0)),S.addTest("cssanimations",g("animationName","a",!0)),S.addTest("csstransforms",g("transform","scale(1)",!0)),S.addTest("csstransforms3d",function(){var t=!!g("perspective","1px",!0),e=S._config.usePrefixes;if(t&&(!e||"webkitPerspective"in T.style)){var i="@media (transform-3d)";e&&(i+=",(-webkit-transform-3d)"),i+="{#modernizr{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0}}",_(i,function(e){t=9===e.offsetLeft&&5===e.offsetHeight})}return t}),S.addTest("csstransitions",g("transition","all",!0)),S.addTest("flexbox",g("flexBasis","1px",!0)),S.addTest("flexboxlegacy",g("boxDirection","reverse",!0));var I=b.prefixed=function(t,e,i){return-1!=t.indexOf("-")&&(t=c(t)),e?f(t,e,i):f(t,"pfx")};S.addTest("fullscreen",!(!I("exitFullscreen",e,!1)&&!I("cancelFullScreen",e,!1))),s(),o(v),delete b.addTest,delete b.addAsyncTest;for(var D=0;D<S._q.length;D++)S._q[D]();t.Modernizr=S}(this,document),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=se.type(t);return"function"===i||se.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(se.isFunction(e))return se.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return se.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ue.test(e))return se.filter(e,t,i);e=se.filter(e,t)}return se.grep(t,function(t){return se.inArray(t,e)>=0!==i})}function s(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=Se[t]={};return se.each(t.match(be)||[],function(t,i){e[i]=!0}),e}function r(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(me.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(r(),se.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(ke,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Le.test(i)?se.parseJSON(i):i}catch(s){}se.data(t,e,i)}else i=void 0}return i}function c(t){var e;for(e in t)if(("data"!==e||!se.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(se.acceptData(t)){var s,o,r=se.expando,a=t.nodeType,l=a?se.cache:t,c=a?t[r]:t[r]&&r;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return c||(c=a?t[r]=W.pop()||se.guid++:r),l[c]||(l[c]=a?{}:{toJSON:se.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[c]=se.extend(l[c],e):l[c].data=se.extend(l[c].data,e)),o=l[c],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[se.camelCase(e)]=i),"string"==typeof e?(s=o[e],null==s&&(s=o[se.camelCase(e)])):s=o,s}}function d(t,e,i){if(se.acceptData(t)){var n,s,o=t.nodeType,r=o?se.cache:t,a=o?t[se.expando]:se.expando;if(r[a]){if(e&&(n=i?r[a]:r[a].data)){se.isArray(e)?e=e.concat(se.map(e,se.camelCase)):e in n?e=[e]:(e=se.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!c(n):!se.isEmptyObject(n))return}(i||(delete r[a].data,c(r[a])))&&(o?se.cleanData([t],!0):ie.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}function u(){return!0}function p(){return!1}function m(){try{return me.activeElement}catch(t){}}function f(t){var e=Pe.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,s=0,o=typeof t.getElementsByTagName!==we?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==we?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||se.nodeName(n,e)?o.push(n):se.merge(o,g(n,e));return void 0===e||e&&se.nodeName(t,e)?se.merge([t],o):o}function v(t){Ie.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return se.nodeName(t,"table")&&se.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==se.find.attr(t,"type"))+"/"+t.type,t}function S(t){var e=Xe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function E(t,e){for(var i,n=0;null!=(i=t[n]);n++)se._data(i,"globalEval",!e||se._data(e[n],"globalEval"))}function T(t,e){if(1===e.nodeType&&se.hasData(t)){var i,n,s,o=se._data(t),r=se._data(e,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)se.event.add(e,i,a[i][n])}r.data&&(r.data=se.extend({},r.data))}}function w(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[se.expando]){s=se._data(e);for(n in s.events)se.removeEvent(e,n,s.handle);e.removeAttribute(se.expando)}"script"===i&&e.text!==t.text?(b(e).text=t.text,S(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!se.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ie.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function L(e,i){var n,s=se(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:se.css(s[0],"display");return s.detach(),o}function k(t){var e=me,i=Qe[t];return i||(i=L(t,e),"none"!==i&&i||(Ze=(Ze||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ze[0].contentWindow||Ze[0].contentDocument).document,e.write(),e.close(),i=L(t,e),Ze.detach()),Qe[t]=i),i}function _(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=ui.length;s--;)if(e=ui[s]+i,e in t)return e;return n}function x(t,e){for(var i,n,s,o=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(o[r]=se._data(n,"olddisplay"),i=n.style.display,e?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&xe(n)&&(o[r]=se._data(n,"olddisplay",k(n.nodeName)))):(s=xe(n),(i&&"none"!==i||!s)&&se._data(n,"olddisplay",s?i:se.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[r]||"":"none"));return t}function A(t,e,i){var n=li.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function I(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=se.css(t,i+Ce[o],!0,s)),n?("content"===i&&(r-=se.css(t,"padding"+Ce[o],!0,s)),"margin"!==i&&(r-=se.css(t,"border"+Ce[o]+"Width",!0,s))):(r+=se.css(t,"padding"+Ce[o],!0,s),"padding"!==i&&(r+=se.css(t,"border"+Ce[o]+"Width",!0,s)));return r}function D(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=ti(t),r=ie.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=ei(t,e,o),(0>s||null==s)&&(s=t.style[e]),ni.test(s))return s;n=r&&(ie.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+I(t,e,i||(r?"border":"content"),n,o)+"px"}function M(t,e,i,n,s){return new M.prototype.init(t,e,i,n,s)}function R(){return setTimeout(function(){pi=void 0}),pi=se.now()}function O(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=Ce[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function N(t,e,i){for(var n,s=(bi[e]||[]).concat(bi["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,e,t))return n}function P(t,e,i){var n,s,o,r,a,l,c,h,d=this,u={},p=t.style,m=t.nodeType&&xe(t),f=se._data(t,"fxshow");i.queue||(a=se._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,se.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=se.css(t,"display"),h="none"===c?se._data(t,"olddisplay")||k(t.nodeName):c,"inline"===h&&"none"===se.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==k(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],fi.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!f||void 0===f[n])continue;m=!0}u[n]=f&&f[n]||se.style(t,n)}else c=void 0;if(se.isEmptyObject(u))"inline"===("none"===c?k(t.nodeName):c)&&(p.display=c);else{f?"hidden"in f&&(m=f.hidden):f=se._data(t,"fxshow",{}),o&&(f.hidden=!m),m?se(t).show():d.done(function(){se(t).hide()}),d.done(function(){var e;se._removeData(t,"fxshow");for(e in u)se.style(t,e,u[e])});for(n in u)r=N(m?f[n]:0,n,d),n in f||(f[n]=r.start,m&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function U(t,e){var i,n,s,o,r;for(i in t)if(n=se.camelCase(i),s=e[n],o=t[i],se.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=se.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function F(t,e,i){var n,s,o=0,r=yi.length,a=se.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=pi||R(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(o);return a.notifyWith(t,[c,o,i]),1>o&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:se.extend({},e),opts:se.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pi||R(),duration:i.duration,tweens:[],createTween:function(e,i){var n=se.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(U(h,c.opts.specialEasing);r>o;o++)if(n=yi[o].call(c,t,h,c.opts))return n;return se.map(h,N,c),se.isFunction(c.opts.start)&&c.opts.start.call(t,c),se.fx.timer(se.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function $(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(be)||[];if(se.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function z(t,e,i,n){function s(a){var l;return o[a]=!0,se.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}var o={},r=t===Hi;return s(e.dataTypes[0])||!o["*"]&&s("*")}function B(t,e){var i,n,s=se.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&se.extend(!0,t,i),t}function j(t,e,i){for(var n,s,o,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(r in a)if(a[r]&&a[r].test(s)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}n||(n=r)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function H(t,e,i,n){var s,o,r,a,l,c={},h=t.dataTypes.slice();if(h[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=c[l+" "+o]||c["* "+o],!r)for(s in c)if(a=s.split(" "),a[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[s]:c[s]!==!0&&(o=a[0],h.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function V(t,e,i,n){var s;if(se.isArray(e))se.each(e,function(e,s){i||Xi.test(t)?n(t,s):V(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==se.type(e))n(t,e);else for(s in e)V(t+"["+s+"]",e[s],i,n)}function G(){try{return new t.XMLHttpRequest}catch(e){}}function q(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function X(t){return se.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var W=[],Y=W.slice,J=W.concat,K=W.push,Z=W.indexOf,Q={},te=Q.toString,ee=Q.hasOwnProperty,ie={},ne="1.11.1",se=function(t,e){return new se.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,re=/^-ms-/,ae=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};se.fn=se.prototype={jquery:ne,constructor:se,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Y.call(this)},pushStack:function(t){var e=se.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return se.each(this,t,e)},map:function(t){return this.pushStack(se.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:W.sort,splice:W.splice},se.extend=se.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||se.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(s=arguments[a]))for(n in s)t=r[n],i=s[n],r!==i&&(c&&i&&(se.isPlainObject(i)||(e=se.isArray(i)))?(e?(e=!1,o=t&&se.isArray(t)?t:[]):o=t&&se.isPlainObject(t)?t:{},r[n]=se.extend(c,o,i)):void 0!==i&&(r[n]=i));return r},se.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===se.type(t)},isArray:Array.isArray||function(t){return"array"===se.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!se.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==se.type(t)||t.nodeType||se.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Q[te.call(t)]||"object":typeof t},globalEval:function(e){e&&se.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(re,"ms-").replace(ae,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,r=t.length,a=i(t);if(n){if(a)for(;r>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(a)for(;r>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?se.merge(n,"string"==typeof t?[t]:t):K.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Z)return Z.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;)t[s++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;r>o;o++)n=!e(t[o],o),n!==a&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,r=t.length,a=i(t),l=[];if(a)for(;r>o;o++)s=e(t[o],o,n),null!=s&&l.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&l.push(s);return J.apply([],l)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(s=t[e],e=t,t=s),se.isFunction(t)?(i=Y.call(arguments,2),n=function(){return t.apply(e||this,i.concat(Y.call(arguments)))},n.guid=t.guid=t.guid||se.guid++,n):void 0},now:function(){return+new Date},support:ie}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Q["[object "+e+"]"]=e.toLowerCase()});var ce=function(t){function e(t,e,i,n){var s,o,r,a,l,c,d,p,m,f;if((e?e.ownerDocument||e:z)!==M&&D(e),e=e||M,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!n){if(s=ye.exec(t))if(r=s[1]){if(9===a){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&F(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return Q.apply(i,e.getElementsByTagName(t)),i;if((r=s[3])&&E.getElementsByClassName&&e.getElementsByClassName)return Q.apply(i,e.getElementsByClassName(r)),i}if(E.qsa&&(!N||!N.test(t))){if(p=d=$,m=e,f=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=k(t),(d=e.getAttribute("id"))?p=d.replace(Se,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);m=be.test(t)&&h(e.parentNode)||e,f=c.join(",")}if(f)try{return Q.apply(i,m.querySelectorAll(f)),i}catch(g){}finally{d||e.removeAttribute("id")}}}return C(t.replace(le,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>T.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[$]=!0,t}function s(t){var e=M.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)T.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||W)-(~t.sourceIndex||W);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function h(t){return t&&typeof t.getElementsByTagName!==X&&t}function d(){}function u(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=j++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,r){var a,l,c=[B,o];if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(l=e[$]||(e[$]={}),(a=l[n])&&a[0]===B&&a[1]===o)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,r))return!0}}}function m(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function f(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}function g(t,e,i,n,s){for(var o,r=[],a=0,l=t.length,c=null!=e;l>a;a++)(o=t[a])&&(!i||i(o,n,s))&&(r.push(o),c&&e.push(a));return r}function v(t,e,i,s,o,r){return s&&!s[$]&&(s=v(s)),o&&!o[$]&&(o=v(o,r)),n(function(n,r,a,l){var c,h,d,u=[],p=[],m=r.length,v=n||f(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:g(v,u,t,a,l),b=i?o||(n?t:m||s)?[]:r:y;if(i&&i(y,b,a,l),s)for(c=g(b,p),s(c,[],a,l),h=c.length;h--;)(d=c[h])&&(b[p[h]]=!(y[p[h]]=d));if(n){if(o||t){if(o){for(c=[],h=b.length;h--;)(d=b[h])&&c.push(y[h]=d);o(null,b=[],c,l)}for(h=b.length;h--;)(d=b[h])&&(c=o?ee.call(n,d):u[h])>-1&&(n[c]=!(r[c]=d))}}else b=g(b===r?b.splice(m,b.length):b),o?o(null,r,b,l):Q.apply(r,b)})}function y(t){for(var e,i,n,s=t.length,o=T.relative[t[0].type],r=o||T.relative[" "],a=o?1:0,l=p(function(t){return t===e},r,!0),c=p(function(t){return ee.call(e,t)>-1},r,!0),h=[function(t,i,n){return!o&&(n||i!==x)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];s>a;a++)if(i=T.relative[t[a].type])h=[p(m(h),i)];else{if(i=T.filter[t[a].type].apply(null,t[a].matches),i[$]){for(n=++a;s>n&&!T.relative[t[n].type];n++);return v(a>1&&m(h),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),i,n>a&&y(t.slice(a,n)),s>n&&y(t=t.slice(n)),s>n&&u(t))}h.push(i)}return m(h)}function b(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,l,c){var h,d,u,p=0,m="0",f=n&&[],v=[],y=x,b=n||o&&T.find.TAG("*",c),S=B+=null==y?1:Math.random()||.1,E=b.length;for(c&&(x=r!==M&&r);m!==E&&null!=(h=b[m]);m++){if(o&&h){for(d=0;u=t[d++];)if(u(h,r,a)){l.push(h);break}c&&(B=S)}s&&((h=!u&&h)&&p--,n&&f.push(h))}if(p+=m,s&&m!==p){for(d=0;u=i[d++];)u(f,v,r,a);if(n){if(p>0)for(;m--;)f[m]||v[m]||(v[m]=K.call(l));v=g(v)}Q.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(B=S,x=y),f};return s?n(r):r}var S,E,T,w,L,k,_,C,x,A,I,D,M,R,O,N,P,U,F,$="sizzle"+-new Date,z=t.document,B=0,j=0,H=i(),V=i(),G=i(),q=function(t,e){return t===e&&(I=!0),0},X="undefined",W=1<<31,Y={}.hasOwnProperty,J=[],K=J.pop,Z=J.push,Q=J.push,te=J.slice,ee=J.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=se.replace("w","w#"),re="\\["+ne+"*("+se+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),he=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(ae),pe=new RegExp("^"+oe+"$"),me={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,Se=/'|\\/g,Ee=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(J=te.call(z.childNodes),z.childNodes),J[z.childNodes.length].nodeType}catch(we){Q={apply:J.length?function(t,e){Z.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}E=e.support={},L=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:z,n=i.defaultView;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,R=i.documentElement,O=!L(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){D()},!1):n.attachEvent&&n.attachEvent("onunload",function(){D()})),E.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),E.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),E.getElementsByClassName=ve.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),E.getById=s(function(t){return R.appendChild(t).id=$,!i.getElementsByName||!i.getElementsByName($).length}),E.getById?(T.find.ID=function(t,e){if(typeof e.getElementById!==X&&O){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},T.filter.ID=function(t){var e=t.replace(Ee,Te);return function(t){return t.getAttribute("id")===e}}):(delete T.find.ID,T.filter.ID=function(t){var e=t.replace(Ee,Te);return function(t){var i=typeof t.getAttributeNode!==X&&t.getAttributeNode("id");return i&&i.value===e}}),T.find.TAG=E.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==X?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},T.find.CLASS=E.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==X&&O?e.getElementsByClassName(t):void 0},P=[],N=[],(E.qsa=ve.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||N.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(E.matchesSelector=ve.test(U=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&s(function(t){E.disconnectedMatch=U.call(t,"div"),U.call(t,"[s!='']:x"),P.push("!=",ae)}),N=N.length&&new RegExp(N.join("|")),P=P.length&&new RegExp(P.join("|")),e=ve.test(R.compareDocumentPosition),F=e||ve.test(R.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return I=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!E.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===z&&F(z,t)?-1:e===i||e.ownerDocument===z&&F(z,e)?1:A?ee.call(A,t)-ee.call(A,e):0:4&n?-1:1)}:function(t,e){if(t===e)return I=!0,0;var n,s=0,o=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!o||!a)return t===i?-1:e===i?1:o?-1:a?1:A?ee.call(A,t)-ee.call(A,e):0;if(o===a)return r(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?r(l[s],c[s]):l[s]===z?-1:c[s]===z?1:0},i):M},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==M&&D(t),i=i.replace(de,"='$1']"),!(!E.matchesSelector||!O||P&&P.test(i)||N&&N.test(i)))try{var n=U.call(t,i);if(n||E.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&D(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&D(t);var i=T.attrHandle[e.toLowerCase()],n=i&&Y.call(T.attrHandle,e.toLowerCase())?i(t,e,!O):void 0;return void 0!==n?n:E.attributes||!O?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(I=!E.detectDuplicates,A=!E.sortStable&&t.slice(0),t.sort(q),I){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return A=null,t},w=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=w(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=w(e);return i},T=e.selectors={cacheLength:50,createPseudo:n,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ee,Te),t[3]=(t[3]||t[4]||t[5]||"").replace(Ee,Te),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return me.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ue.test(i)&&(e=k(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))
}},filter:{TAG:function(t){var e=t.replace(Ee,Te).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==X&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var c,h,d,u,p,m,f=o!==r?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(o){for(;f;){for(d=e;d=d[f];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;m=f="only"===t&&!m&&"nextSibling"}return!0}if(m=[r?g.firstChild:g.lastChild],r&&y){for(h=g[$]||(g[$]={}),c=h[t]||[],p=c[0]===B&&c[1],u=c[0]===B&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[f]||(u=p=0)||m.pop();)if(1===d.nodeType&&++u&&d===e){h[t]=[B,p,u];break}}else if(y&&(c=(e[$]||(e[$]={}))[t])&&c[0]===B)u=c[1];else for(;(d=++p&&d&&d[f]||(u=p=0)||m.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++u||(y&&((d[$]||(d[$]={}))[t]=[B,u]),d!==e)););return u-=s,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(t,i){var s,o=T.pseudos[t]||T.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[$]?o(i):o.length>1?(s=[t,t,"",i],T.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)n=ee.call(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=_(t.replace(le,"$1"));return s[$]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ee,Te).toLowerCase(),function(e){var i;do if(i=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return fe.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},T.pseudos.nth=T.pseudos.eq;for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})T.pseudos[S]=l(S);return d.prototype=T.filters=T.pseudos,T.setFilters=new d,k=e.tokenize=function(t,i){var n,s,o,r,a,l,c,h=V[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=T.preFilter;a;){(!n||(s=ce.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=he.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(le," ")}),a=a.slice(n.length));for(r in T.filter)!(s=me[r].exec(a))||c[r]&&!(s=c[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):V(t,l).slice(0)},_=e.compile=function(t,e){var i,n=[],s=[],o=G[t+" "];if(!o){for(e||(e=k(t)),i=e.length;i--;)o=y(e[i]),o[$]?n.push(o):s.push(o);o=G(t,b(s,n)),o.selector=t}return o},C=e.select=function(t,e,i,n){var s,o,r,a,l,c="function"==typeof t&&t,d=!n&&k(t=c.selector||t);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&E.getById&&9===e.nodeType&&O&&T.relative[o[1].type]){if(e=(T.find.ID(r.matches[0].replace(Ee,Te),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=me.needsContext.test(t)?0:o.length;s--&&(r=o[s],!T.relative[a=r.type]);)if((l=T.find[a])&&(n=l(r.matches[0].replace(Ee,Te),be.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&u(o),!t)return Q.apply(i,n),i;break}}return(c||_(t,d))(n,e,!O,i,be.test(t)&&h(e.parentNode)||e),i},E.sortStable=$.split("").sort(q).join("")===$,E.detectDuplicates=!!I,D(),E.sortDetached=s(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),E.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);se.find=ce,se.expr=ce.selectors,se.expr[":"]=se.expr.pseudos,se.unique=ce.uniqueSort,se.text=ce.getText,se.isXMLDoc=ce.isXML,se.contains=ce.contains;var he=se.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^.[^:#\[\.,]*$/;se.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?se.find.matchesSelector(n,t)?[n]:[]:se.find.matches(t,se.grep(e,function(t){return 1===t.nodeType}))},se.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(se(t).filter(function(){for(e=0;s>e;e++)if(se.contains(n[e],this))return!0}));for(e=0;s>e;e++)se.find(t,n[e],i);return i=this.pushStack(s>1?se.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&he.test(t)?se(t):t||[],!1).length}});var pe,me=t.document,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=se.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:fe.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof se?e[0]:e,se.merge(this,se.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:me,!0)),de.test(i[1])&&se.isPlainObject(e))for(i in e)se.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=me.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pe.find(t);this.length=1,this[0]=n}return this.context=me,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):se.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(se):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),se.makeArray(t,this))};ge.prototype=se.fn,pe=se(me);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!se(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),se.fn.extend({has:function(t){var e,i=se(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(se.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],r=he.test(t)||"string"!=typeof t?se(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?se.unique(o):o)},index:function(t){return t?"string"==typeof t?se.inArray(this[0],se(t)):se.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(se.unique(se.merge(this.get(),se(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),se.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se.dir(t,"parentNode")},parentsUntil:function(t,e,i){return se.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return se.dir(t,"nextSibling")},prevAll:function(t){return se.dir(t,"previousSibling")},nextUntil:function(t,e,i){return se.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return se.dir(t,"previousSibling",i)},siblings:function(t){return se.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return se.sibling(t.firstChild)},contents:function(t){return se.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:se.merge([],t.childNodes)}},function(t,e){se.fn[t]=function(i,n){var s=se.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=se.filter(n,s)),this.length>1&&(ye[t]||(s=se.unique(s)),ve.test(t)&&(s=s.reverse())),this.pushStack(s)}});var be=/\S+/g,Se={};se.Callbacks=function(t){t="string"==typeof t?Se[t]||o(t):se.extend({},t);var e,i,n,s,r,a,l=[],c=!t.once&&[],h=function(o){for(i=t.memory&&o,n=!0,r=a||0,a=0,s=l.length,e=!0;l&&s>r;r++)if(l[r].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(c?c.length&&h(c.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(e){se.each(e,function(e,i){var n=se.type(i);"function"===n?t.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?s=l.length:i&&(a=n,h(i))}return this},remove:function(){return l&&se.each(arguments,function(t,i){for(var n;(n=se.inArray(i,l,n))>-1;)l.splice(n,1),e&&(s>=n&&s--,r>=n&&r--)}),this},has:function(t){return t?se.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||d.disable(),this},locked:function(){return!c},fireWith:function(t,i){return!l||n&&!c||(i=i||[],i=[t,i.slice?i.slice():i],e?c.push(i):h(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},se.extend({Deferred:function(t){var e=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return se.Deferred(function(i){se.each(e,function(e,o){var r=se.isFunction(t[e])&&t[e];s[o[1]](function(){var t=r&&r.apply(this,arguments);t&&se.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?se.extend(t,n):n}},s={};return n.pipe=n.then,se.each(e,function(t,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=Y.call(arguments),r=o.length,a=1!==r||t&&se.isFunction(t.promise)?r:0,l=1===a?t:se.Deferred(),c=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?Y.call(arguments):s,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&se.isFunction(o[s].promise)?o[s].promise().done(c(s,n,o)).fail(l.reject).progress(c(s,i,e)):--a;return a||l.resolveWith(n,o),l.promise()}});var Ee;se.fn.ready=function(t){return se.ready.promise().done(t),this},se.extend({isReady:!1,readyWait:1,holdReady:function(t){t?se.readyWait++:se.ready(!0)},ready:function(t){if(t===!0?!--se.readyWait:!se.isReady){if(!me.body)return setTimeout(se.ready);se.isReady=!0,t!==!0&&--se.readyWait>0||(Ee.resolveWith(me,[se]),se.fn.triggerHandler&&(se(me).triggerHandler("ready"),se(me).off("ready")))}}}),se.ready.promise=function(e){if(!Ee)if(Ee=se.Deferred(),"complete"===me.readyState)setTimeout(se.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{me.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&me.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!se.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}r(),se.ready()}}()}return Ee.promise(e)};var Te,we="undefined";for(Te in se(ie))break;ie.ownLast="0"!==Te,ie.inlineBlockNeedsLayout=!1,se(function(){var t,e,i,n;i=me.getElementsByTagName("body")[0],i&&i.style&&(e=me.createElement("div"),n=me.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==we&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=me.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),se.acceptData=function(t){var e=se.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?se.cache[t[se.expando]]:t[se.expando],!!t&&!c(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return d(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return d(t,e,!0)}}),se.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=se.data(o),1===o.nodeType&&!se._data(o,"parsedAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),l(o,n,s[n])));se._data(o,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){se.data(this,t)}):arguments.length>1?this.each(function(){se.data(this,t,e)}):o?l(o,t,se.data(o,t)):void 0},removeData:function(t){return this.each(function(){se.removeData(this,t)})}}),se.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=se._data(t,e),i&&(!n||se.isArray(i)?n=se._data(t,e,se.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=se.queue(t,e),n=i.length,s=i.shift(),o=se._queueHooks(t,e),r=function(){se.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return se._data(t,i)||se._data(t,i,{empty:se.Callbacks("once memory").add(function(){se._removeData(t,e+"queue"),se._removeData(t,i)})})}}),se.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?se.queue(this[0],t):void 0===e?this:this.each(function(){var i=se.queue(this,t,e);se._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&se.dequeue(this,t)})},dequeue:function(t){return this.each(function(){se.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=se.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=se._data(o[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=["Top","Right","Bottom","Left"],xe=function(t,e){return t=e||t,"none"===se.css(t,"display")||!se.contains(t.ownerDocument,t)},Ae=se.access=function(t,e,i,n,s,o,r){var a=0,l=t.length,c=null==i;if("object"===se.type(i)){s=!0;for(a in i)se.access(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,se.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(se(t),i)})),e))for(;l>a;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:c?e.call(t):l?e(t[0],i):o},Ie=/^(?:checkbox|radio)$/i;!function(){var t=me.createElement("input"),e=me.createElement("div"),i=me.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),ie.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(n){ie.deleteExpando=!1}}}(),function(){var e,i,n=me.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ie[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ie[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var De=/^(?:input|select|textarea)$/i,Me=/^key/,Re=/^(?:mouse|pointer|contextmenu)|click/,Oe=/^(?:focusinfocus|focusoutblur)$/,Ne=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(t,e,i,n,s){var o,r,a,l,c,h,d,u,p,m,f,g=se._data(t);if(g){for(i.handler&&(l=i,i=l.handler,s=l.selector),i.guid||(i.guid=se.guid++),(r=g.events)||(r=g.events={}),(h=g.handle)||(h=g.handle=function(t){return typeof se===we||t&&se.event.triggered===t.type?void 0:se.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(be)||[""],a=e.length;a--;)o=Ne.exec(e[a])||[],p=f=o[1],m=(o[2]||"").split(".").sort(),p&&(c=se.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,c=se.event.special[p]||{},d=se.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&se.expr.match.needsContext.test(s),namespace:m.join(".")},l),(u=r[p])||(u=r[p]=[],u.delegateCount=0,c.setup&&c.setup.call(t,n,m,h)!==!1||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,d):u.push(d),se.event.global[p]=!0);t=null}},remove:function(t,e,i,n,s){var o,r,a,l,c,h,d,u,p,m,f,g=se.hasData(t)&&se._data(t);if(g&&(h=g.events)){for(e=(e||"").match(be)||[""],c=e.length;c--;)if(a=Ne.exec(e[c])||[],p=f=a[1],m=(a[2]||"").split(".").sort(),p){for(d=se.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,u=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=u.length;o--;)r=u[o],!s&&f!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(u.splice(o,1),r.selector&&u.delegateCount--,d.remove&&d.remove.call(t,r));l&&!u.length&&(d.teardown&&d.teardown.call(t,m,g.handle)!==!1||se.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)se.event.remove(t,p+e[c],i,n,!0);se.isEmptyObject(h)&&(delete g.handle,se._removeData(t,"events"))}},trigger:function(e,i,n,s){var o,r,a,l,c,h,d,u=[n||me],p=ee.call(e,"type")?e.type:e,m=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=h=n=n||me,3!==n.nodeType&&8!==n.nodeType&&!Oe.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),r=p.indexOf(":")<0&&"on"+p,e=e[se.expando]?e:new se.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:se.makeArray(i,[e]),c=se.event.special[p]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!se.isWindow(n)){for(l=c.delegateType||p,Oe.test(l+p)||(a=a.parentNode);a;a=a.parentNode)u.push(a),h=a;h===(n.ownerDocument||me)&&u.push(h.defaultView||h.parentWindow||t)}for(d=0;(a=u[d++])&&!e.isPropagationStopped();)e.type=d>1?l:c.bindType||p,o=(se._data(a,"events")||{})[e.type]&&se._data(a,"handle"),o&&o.apply(a,i),o=r&&a[r],o&&o.apply&&se.acceptData(a)&&(e.result=o.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!s&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(u.pop(),i)===!1)&&se.acceptData(n)&&r&&n[p]&&!se.isWindow(n)){h=n[r],h&&(n[r]=null),se.event.triggered=p;try{n[p]()}catch(f){}se.event.triggered=void 0,h&&(n[r]=h)}return e.result}},dispatch:function(t){t=se.event.fix(t);var e,i,n,s,o,r=[],a=Y.call(arguments),l=(se._data(this,"events")||{})[t.type]||[],c=se.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(r=se.event.handlers.call(this,t,l),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(n=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((se.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(s=[],o=0;a>o;o++)n=e[o],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?se(i,this).index(l)>=0:se.find(i,this,null,[l]).length),s[i]&&s.push(n);s.length&&r.push({elem:l,handlers:s})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},fix:function(t){if(t[se.expando])return t;var e,i,n,s=t.type,o=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Re.test(s)?this.mouseHooks:Me.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new se.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||me),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||me,s=n.documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return se.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=se.extend(new se.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?se.event.trigger(s,null,e):se.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},se.removeEvent=me.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===we&&(t[n]=null),t.detachEvent(n,i))},se.Event=function(t,e){return this instanceof se.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:p):this.type=t,e&&se.extend(this,e),this.timeStamp=t&&t.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(t,e)},se.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){se.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!se.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ie.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:void se.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=se.nodeName(e,"input")||se.nodeName(e,"button")?e.form:void 0;i&&!se._data(i,"submitBubbles")&&(se.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),se._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&se.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return se.nodeName(this,"form")?!1:void se.event.remove(this,"._submit")}}),ie.changeBubbles||(se.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,t,!0)})),!1):void se.event.add(this,"beforeactivate._change",function(t){var e=t.target;De.test(e.nodeName)&&!se._data(e,"changeBubbles")&&(se.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||se.event.simulate("change",this.parentNode,t,!0)}),se._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!De.test(this.nodeName)}}),ie.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){se.event.simulate(e,t.target,se.event.fix(t),!0)};se.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=se._data(n,e);s||n.addEventListener(t,i,!0),se._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=se._data(n,e)-1;s?se._data(n,e,s):(n.removeEventListener(t,i,!0),se._removeData(n,e))}}}),se.fn.extend({on:function(t,e,i,n,s){var o,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===s&&(r=n,n=function(t){return se().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=se.guid++)),this.each(function(){se.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,se(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){se.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){se.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?se.event.trigger(t,e,i,!0):void 0}});var Pe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ue=/ jQuery\d+="(?:null|\d+)"/g,Fe=new RegExp("<(?:"+Pe+")[\\s/>]","i"),$e=/^\s+/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Be=/<([\w:]+)/,je=/<tbody/i,He=/<|&#?\w+;/,Ve=/<(?:script|style|link)/i,Ge=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Je=f(me),Ke=Je.appendChild(me.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,se.extend({clone:function(t,e,i){var n,s,o,r,a,l=se.contains(t.ownerDocument,t);if(ie.html5Clone||se.isXMLDoc(t)||!Fe.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Ke.innerHTML=t.outerHTML,Ke.removeChild(o=Ke.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||se.isXMLDoc(t)))for(n=g(o),a=g(t),r=0;null!=(s=a[r]);++r)n[r]&&w(s,n[r]);if(e)if(i)for(a=a||g(t),n=n||g(o),r=0;null!=(s=a[r]);r++)T(s,n[r]);else T(t,o);return n=g(o,"script"),n.length>0&&E(n,!l&&g(t,"script")),n=a=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,r,a,l,c,h,d=t.length,u=f(e),p=[],m=0;d>m;m++)if(o=t[m],o||0===o)if("object"===se.type(o))se.merge(p,o.nodeType?[o]:o);else if(He.test(o)){for(a=a||u.appendChild(e.createElement("div")),l=(Be.exec(o)||["",""])[1].toLowerCase(),h=Ye[l]||Ye._default,a.innerHTML=h[1]+o.replace(ze,"<$1></$2>")+h[2],s=h[0];s--;)a=a.lastChild;if(!ie.leadingWhitespace&&$e.test(o)&&p.push(e.createTextNode($e.exec(o)[0])),!ie.tbody)for(o="table"!==l||je.test(o)?"<table>"!==h[1]||je.test(o)?0:a:a.firstChild,s=o&&o.childNodes.length;s--;)se.nodeName(c=o.childNodes[s],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(se.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=u.lastChild}else p.push(e.createTextNode(o));for(a&&u.removeChild(a),ie.appendChecked||se.grep(g(p,"input"),v),m=0;o=p[m++];)if((!n||-1===se.inArray(o,n))&&(r=se.contains(o.ownerDocument,o),a=g(u.appendChild(o),"script"),r&&E(a),i))for(s=0;o=a[s++];)qe.test(o.type||"")&&i.push(o);return a=null,u},cleanData:function(t,e){for(var i,n,s,o,r=0,a=se.expando,l=se.cache,c=ie.deleteExpando,h=se.event.special;null!=(i=t[r]);r++)if((e||se.acceptData(i))&&(s=i[a],o=s&&l[s])){if(o.events)for(n in o.events)h[n]?se.event.remove(i,n):se.removeEvent(i,n,o.handle);l[s]&&(delete l[s],c?delete i[a]:typeof i.removeAttribute!==we?i.removeAttribute(a):i[a]=null,W.push(s))}}}),se.fn.extend({text:function(t){return Ae(this,function(t){return void 0===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);
e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?se.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||se.cleanData(g(i)),i.parentNode&&(e&&se.contains(i.ownerDocument,i)&&E(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&se.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&se.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return se.clone(this,t,e)})},html:function(t){return Ae(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Ue,""):void 0;if(!("string"!=typeof t||Ve.test(t)||!ie.htmlSerialize&&Fe.test(t)||!ie.leadingWhitespace&&$e.test(t)||Ye[(Be.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(ze,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(se.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,se.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=J.apply([],t);var i,n,s,o,r,a,l=0,c=this.length,h=this,d=c-1,u=t[0],p=se.isFunction(u);if(p||c>1&&"string"==typeof u&&!ie.checkClone&&Ge.test(u))return this.each(function(i){var n=h.eq(i);p&&(t[0]=u.call(this,i,n.html())),n.domManip(t,e)});if(c&&(a=se.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(o=se.map(g(a,"script"),b),s=o.length;c>l;l++)n=a,l!==d&&(n=se.clone(n,!0,!0),s&&se.merge(o,g(n,"script"))),e.call(this[l],n,l);if(s)for(r=o[o.length-1].ownerDocument,se.map(o,S),l=0;s>l;l++)n=o[l],qe.test(n.type||"")&&!se._data(n,"globalEval")&&se.contains(r,n)&&(n.src?se._evalUrl&&se._evalUrl(n.src):se.globalEval((n.text||n.textContent||n.innerHTML||"").replace(We,"")));a=i=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){se.fn[t]=function(t){for(var i,n=0,s=[],o=se(t),r=o.length-1;r>=n;n++)i=n===r?this:this.clone(!0),se(o[n])[e](i),K.apply(s,i.get());return this.pushStack(s)}});var Ze,Qe={};!function(){var t;ie.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=me.getElementsByTagName("body")[0],i&&i.style?(e=me.createElement("div"),n=me.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==we&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(me.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var ti,ei,ii=/^margin/,ni=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),si=/^(top|right|bottom|left)$/;t.getComputedStyle?(ti=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ei=function(t,e,i){var n,s,o,r,a=t.style;return i=i||ti(t),r=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==r||se.contains(t.ownerDocument,t)||(r=se.style(t,e)),ni.test(r)&&ii.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0===r?r:r+""}):me.documentElement.currentStyle&&(ti=function(t){return t.currentStyle},ei=function(t,e,i){var n,s,o,r,a=t.style;return i=i||ti(t),r=i?i[e]:void 0,null==r&&a&&a[e]&&(r=a[e]),ni.test(r)&&!si.test(e)&&(n=a.left,s=t.runtimeStyle,o=s&&s.left,o&&(s.left=t.currentStyle.left),a.left="fontSize"===e?"1em":r,r=a.pixelLeft+"px",a.left=n,o&&(s.left=o)),void 0===r?r:r+""||"auto"}),function(){function e(){var e,i,n,s;i=me.getElementsByTagName("body")[0],i&&i.style&&(e=me.createElement("div"),n=me.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=r=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,r="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,s=e.appendChild(me.createElement("div")),s.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=e.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===s[0].offsetHeight,a&&(s[0].style.display="",s[1].style.display="none",a=0===s[0].offsetHeight),i.removeChild(n))}var i,n,s,o,r,a,l;i=me.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=i.getElementsByTagName("a")[0],n=s&&s.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,se.extend(ie,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==r&&e(),r},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),se.swap=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s};var oi=/alpha\([^)]*\)/i,ri=/opacity\s*=\s*([^)]*)/,ai=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+_e+")(.*)$","i"),ci=new RegExp("^([+-])=("+_e+")","i"),hi={position:"absolute",visibility:"hidden",display:"block"},di={letterSpacing:"0",fontWeight:"400"},ui=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ei(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=se.camelCase(e),l=t.style;if(e=se.cssProps[a]||(se.cssProps[a]=C(l,a)),r=se.cssHooks[e]||se.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:l[e];if(o=typeof i,"string"===o&&(s=ci.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(se.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||se.cssNumber[a]||(i+="px"),ie.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(i=r.set(t,i,n)))))try{l[e]=i}catch(c){}}},css:function(t,e,i,n){var s,o,r,a=se.camelCase(e);return e=se.cssProps[a]||(se.cssProps[a]=C(t.style,a)),r=se.cssHooks[e]||se.cssHooks[a],r&&"get"in r&&(o=r.get(t,!0,i)),void 0===o&&(o=ei(t,e,n)),"normal"===o&&e in di&&(o=di[e]),""===i||i?(s=parseFloat(o),i===!0||se.isNumeric(s)?s||0:o):o}}),se.each(["height","width"],function(t,e){se.cssHooks[e]={get:function(t,i,n){return i?ai.test(se.css(t,"display"))&&0===t.offsetWidth?se.swap(t,hi,function(){return D(t,e,n)}):D(t,e,n):void 0},set:function(t,i,n){var s=n&&ti(t);return A(t,i,n?I(t,e,n,ie.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,s),s):0)}}}),ie.opacity||(se.cssHooks.opacity={get:function(t,e){return ri.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=se.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===se.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oi.test(o)?o.replace(oi,s):o+" "+s)}}),se.cssHooks.marginRight=_(ie.reliableMarginRight,function(t,e){return e?se.swap(t,{display:"inline-block"},ei,[t,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(t,e){se.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+Ce[n]+e]=o[n]||o[n-2]||o[0];return s}},ii.test(t)||(se.cssHooks[t+e].set=A)}),se.fn.extend({css:function(t,e){return Ae(this,function(t,e,i){var n,s,o={},r=0;if(se.isArray(e)){for(n=ti(t),s=e.length;s>r;r++)o[e[r]]=se.css(t,e[r],!1,n);return o}return void 0!==i?se.style(t,e,i):se.css(t,e)},t,e,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){xe(this)?se(this).show():se(this).hide()})}}),se.Tween=M,M.prototype={constructor:M,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(se.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,i=M.propHooks[this.prop];return this.pos=e=this.options.duration?se.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=se.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){se.fx.step[t.prop]?se.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[se.cssProps[t.prop]]||se.cssHooks[t.prop])?se.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},se.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},se.fx=M.prototype.init,se.fx.step={};var pi,mi,fi=/^(?:toggle|show|hide)$/,gi=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),vi=/queueHooks$/,yi=[P],bi={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=gi.exec(e),o=s&&s[3]||(se.cssNumber[t]?"":"px"),r=(se.cssNumber[t]||"px"!==o&&+n)&&gi.exec(se.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,se.style(i.elem,t,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};se.Animation=se.extend(F,{tweener:function(t,e){se.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],bi[i]=bi[i]||[],bi[i].unshift(e)},prefilter:function(t,e){e?yi.unshift(t):yi.push(t)}}),se.speed=function(t,e,i){var n=t&&"object"==typeof t?se.extend({},t):{complete:i||!i&&e||se.isFunction(t)&&t,duration:t,easing:i&&e||e&&!se.isFunction(e)&&e};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(t,e,i,n){return this.filter(xe).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=se.isEmptyObject(t),o=se.speed(e,i,n),r=function(){var e=F(this,se.extend({},t),o);(s||se._data(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=se.timers,r=se._data(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&vi.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&se.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=se._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=se.timers,r=n?n.length:0;for(i.finish=!0,se.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(t,e){var i=se.fn[e];se.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(O(e,!0),t,n,s)}}),se.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){se.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),se.timers=[],se.fx.tick=function(){var t,e=se.timers,i=0;for(pi=se.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||se.fx.stop(),pi=void 0},se.fx.timer=function(t){se.timers.push(t),t()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){mi||(mi=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(mi),mi=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,e){return t=se.fx?se.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,s;e=me.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=me.createElement("select"),s=i.appendChild(me.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==e.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!t.value,ie.optSelected=s.selected,ie.enctype=!!me.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!s.disabled,t=me.createElement("input"),t.setAttribute("value",""),ie.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ie.radioValue="t"===t.value}();var Si=/\r/g;se.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=se.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,se(this).val()):t,null==s?s="":"number"==typeof s?s+="":se.isArray(s)&&(s=se.map(s,function(t){return null==t?"":t+""})),e=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=se.valHooks[s.type]||se.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(Si,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(t){var e=se.find.attr(t,"value");return null!=e?e:se.trim(se.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,r=o?null:[],a=o?s+1:n.length,l=0>s?a:o?s:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==s||(ie.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&se.nodeName(i.parentNode,"optgroup"))){if(e=se(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,s=t.options,o=se.makeArray(e),r=s.length;r--;)if(n=s[r],se.inArray(se.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(t,e){return se.isArray(e)?t.checked=se.inArray(se(t).val(),e)>=0:void 0}},ie.checkOn||(se.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ei,Ti,wi=se.expr.attrHandle,Li=/^(?:checked|selected)$/i,ki=ie.getSetAttribute,_i=ie.input;se.fn.extend({attr:function(t,e){return Ae(this,se.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){se.removeAttr(this,t)})}}),se.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===we?se.prop(t,e,i):(1===o&&se.isXMLDoc(t)||(e=e.toLowerCase(),n=se.attrHooks[e]||(se.expr.match.bool.test(e)?Ti:Ei)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=se.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void se.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(be);if(o&&1===t.nodeType)for(;i=o[s++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)?_i&&ki||!Li.test(i)?t[n]=!1:t[se.camelCase("default-"+i)]=t[n]=!1:se.attr(t,i,""),t.removeAttribute(ki?i:n)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&se.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),Ti={set:function(t,e,i){return e===!1?se.removeAttr(t,i):_i&&ki||!Li.test(i)?t.setAttribute(!ki&&se.propFix[i]||i,i):t[se.camelCase("default-"+i)]=t[i]=!0,i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(t,e){var i=wi[e]||se.find.attr;wi[e]=_i&&ki||!Li.test(e)?function(t,e,n){var s,o;return n||(o=wi[e],wi[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,wi[e]=o),s}:function(t,e,i){return i?void 0:t[se.camelCase("default-"+e)]?e.toLowerCase():null}}),_i&&ki||(se.attrHooks.value={set:function(t,e,i){return se.nodeName(t,"input")?void(t.defaultValue=e):Ei&&Ei.set(t,e,i)}}),ki||(Ei={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},wi.id=wi.name=wi.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},se.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:Ei.set},se.attrHooks.contenteditable={set:function(t,e,i){Ei.set(t,""===e?!1:e,i)}},se.each(["width","height"],function(t,e){se.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ie.style||(se.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ci=/^(?:input|select|textarea|button|object)$/i,xi=/^(?:a|area)$/i;se.fn.extend({prop:function(t,e){return Ae(this,se.prop,t,e,arguments.length>1)},removeProp:function(t){return t=se.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return o=1!==r||!se.isXMLDoc(t),o&&(e=se.propFix[e]||e,s=se.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=se.find.attr(t,"tabindex");return e?parseInt(e,10):Ci.test(t.nodeName)||xi.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||se.each(["href","src"],function(t,e){se.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(se.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ie.enctype||(se.propFix.enctype="encoding");var Ai=/[\t\r\n\f]/g;se.fn.extend({addClass:function(t){var e,i,n,s,o,r,a=0,l=this.length,c="string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(be)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ai," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=se.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,s,o,r,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(be)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ai," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");r=t?se.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(se.isFunction(t)?function(i){se(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=se(this),o=t.match(be)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===we||"boolean"===i)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||t===!1?"":se._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ai," ").indexOf(e)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){se.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),se.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Ii=se.now(),Di=/\?/,Mi=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=se.trim(e+"");return s&&!se.trim(s.replace(Mi,function(t,e,s,o){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!o-!s,"")}))?Function("return "+s)():se.error("Invalid JSON: "+e)},se.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(s){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+e),i};var Ri,Oi,Ni=/#.*$/,Pi=/([?&])_=[^&]*/,Ui=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$i=/^(?:GET|HEAD)$/,zi=/^\/\//,Bi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ji={},Hi={},Vi="*/".concat("*");try{Oi=location.href}catch(Gi){Oi=me.createElement("a"),Oi.href="",Oi=Oi.href}Ri=Bi.exec(Oi.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oi,type:"GET",isLocal:Fi.test(Ri[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,se.ajaxSettings),e):B(se.ajaxSettings,t)},ajaxPrefilter:$(ji),ajaxTransport:$(Hi),ajax:function(t,e){function i(t,e,i,n){var s,h,v,y,S,T=e;2!==b&&(b=2,a&&clearTimeout(a),c=void 0,r=n||"",E.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(y=j(d,E,i)),y=H(d,y,E,s),s?(d.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(se.lastModified[o]=S),S=E.getResponseHeader("etag"),S&&(se.etag[o]=S)),204===t||"HEAD"===d.type?T="nocontent":304===t?T="notmodified":(T=y.state,h=y.data,v=y.error,s=!v)):(v=T,(t||!T)&&(T="error",0>t&&(t=0))),E.status=t,E.statusText=(e||T)+"",s?m.resolveWith(u,[h,T,E]):m.rejectWith(u,[E,T,v]),E.statusCode(g),g=void 0,l&&p.trigger(s?"ajaxSuccess":"ajaxError",[E,d,s?h:v]),f.fireWith(u,[E,T]),l&&(p.trigger("ajaxComplete",[E,d]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,r,a,l,c,h,d=se.ajaxSetup({},e),u=d.context||d,p=d.context&&(u.nodeType||u.jquery)?se(u):se.event,m=se.Deferred(),f=se.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,S="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!h)for(h={};e=Ui.exec(r);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||S;return c&&c.abort(e),i(0,e),this}};if(m.promise(E).complete=f.add,E.success=E.done,E.error=E.fail,d.url=((t||d.url||Oi)+"").replace(Ni,"").replace(zi,Ri[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=se.trim(d.dataType||"*").toLowerCase().match(be)||[""],null==d.crossDomain&&(n=Bi.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Ri[1]&&n[2]===Ri[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ri[3]||("http:"===Ri[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=se.param(d.data,d.traditional)),z(ji,d,e,E),2===b)return E;l=d.global,l&&0===se.active++&&se.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!$i.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Di.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Pi.test(o)?o.replace(Pi,"$1_="+Ii++):o+(Di.test(o)?"&":"?")+"_="+Ii++)),d.ifModified&&(se.lastModified[o]&&E.setRequestHeader("If-Modified-Since",se.lastModified[o]),se.etag[o]&&E.setRequestHeader("If-None-Match",se.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||e.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Vi+"; q=0.01":""):d.accepts["*"]);for(s in d.headers)E.setRequestHeader(s,d.headers[s]);if(d.beforeSend&&(d.beforeSend.call(u,E,d)===!1||2===b))return E.abort();S="abort";for(s in{success:1,error:1,complete:1})E[s](d[s]);if(c=z(Hi,d,e,E)){E.readyState=1,l&&p.trigger("ajaxSend",[E,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){E.abort("timeout")},d.timeout));try{b=1,c.send(v,i)}catch(T){if(!(2>b))throw T;i(-1,T)}}else i(-1,"No Transport");return E},getJSON:function(t,e,i){return se.get(t,e,i,"json")},getScript:function(t,e){return se.get(t,void 0,e,"script")}}),se.each(["get","post"],function(t,e){se[e]=function(t,i,n,s){return se.isFunction(i)&&(s=s||n,n=i,i=void 0),se.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){se.fn[e]=function(t){return this.on(e,t)}}),se._evalUrl=function(t){return se.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(t){if(se.isFunction(t))return this.each(function(e){se(this).wrapAll(t.call(this,e))});if(this[0]){var e=se(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(se.isFunction(t)?function(e){se(this).wrapInner(t.call(this,e))}:function(){var e=se(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=se.isFunction(t);return this.each(function(i){se(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||se.css(t,"display"))},se.expr.filters.visible=function(t){return!se.expr.filters.hidden(t)};var qi=/%20/g,Xi=/\[\]$/,Wi=/\r?\n/g,Yi=/^(?:submit|button|image|reset|file)$/i,Ji=/^(?:input|select|textarea|keygen)/i;se.param=function(t,e){var i,n=[],s=function(t,e){e=se.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(t)||t.jquery&&!se.isPlainObject(t))se.each(t,function(){s(this.name,this.value)});else for(i in t)V(i,t[i],e,s);return n.join("&").replace(qi,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=se.prop(this,"elements");return t?se.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!se(this).is(":disabled")&&Ji.test(this.nodeName)&&!Yi.test(t)&&(this.checked||!Ie.test(t))}).map(function(t,e){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(t){return{name:e.name,value:t.replace(Wi,"\r\n")}}):{name:e.name,value:i.replace(Wi,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&G()||q()}:G;var Ki=0,Zi={},Qi=se.ajaxSettings.xhr();t.ActiveXObject&&se(t).on("unload",function(){for(var t in Zi)Zi[t](void 0,!0)}),ie.cors=!!Qi&&"withCredentials"in Qi,Qi=ie.ajax=!!Qi,Qi&&se.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(i,n){var s,o=t.xhr(),r=++Ki;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(t.hasContent&&t.data||null),e=function(i,s){var a,l,c;if(e&&(s||4===o.readyState))if(delete Zi[r],e=void 0,o.onreadystatechange=se.noop,s)4!==o.readyState&&o.abort();else{c={},a=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(h){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Zi[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return se.globalEval(t),t}}}),se.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),se.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=me.head||se("head")[0]||me.documentElement;return{send:function(n,s){e=me.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||se.expando+"_"+Ii++;return this[t]=!0,t}}),se.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=se.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(en,"$1"+s):e.jsonp!==!1&&(e.url+=(Di.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||se.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,tn.push(s)),r&&se.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),se.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||me;var n=de.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=se.buildFragment([t],e,s),s&&s.length&&se(s).remove(),se.merge([],n.childNodes))
};var nn=se.fn.load;se.fn.load=function(t,e,i){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var n,s,o,r=this,a=t.indexOf(" ");return a>=0&&(n=se.trim(t.slice(a,t.length)),t=t.slice(0,a)),se.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),r.length>0&&se.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,r.html(n?se("<div>").append(se.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,s||[t.responseText,e,t])}),this},se.expr.filters.animated=function(t){return se.grep(se.timers,function(e){return t===e.elem}).length};var sn=t.document.documentElement;se.offset={setOffset:function(t,e,i){var n,s,o,r,a,l,c,h=se.css(t,"position"),d=se(t),u={};"static"===h&&(t.style.position="relative"),a=d.offset(),o=se.css(t,"top"),l=se.css(t,"left"),c=("absolute"===h||"fixed"===h)&&se.inArray("auto",[o,l])>-1,c?(n=d.position(),r=n.top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(l)||0),se.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+r),null!=e.left&&(u.left=e.left-a.left+s),"using"in e?e.using.call(t,u):d.css(u)}},se.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){se.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(o)return e=o.documentElement,se.contains(e,s)?(typeof s.getBoundingClientRect!==we&&(n=s.getBoundingClientRect()),i=X(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===se.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),se.nodeName(t[0],"html")||(i=t.offset()),i.top+=se.css(t[0],"borderTopWidth",!0),i.left+=se.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-se.css(n,"marginTop",!0),left:e.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||sn;t&&!se.nodeName(t,"html")&&"static"===se.css(t,"position");)t=t.offsetParent;return t||sn})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);se.fn[t]=function(n){return Ae(this,function(t,n,s){var o=X(t);return void 0===s?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?se(o).scrollLeft():s,i?s:se(o).scrollTop()):t[n]=s)},t,n,arguments.length,null)}}),se.each(["top","left"],function(t,e){se.cssHooks[e]=_(ie.pixelPosition,function(t,i){return i?(i=ei(t,e),ni.test(i)?se(t).position()[e]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(t,e){se.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){se.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||s===!0?"margin":"border");return Ae(this,function(e,i,n){var s;return se.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?se.css(e,i,r):se.style(e,i,n,r)},e,o?n:void 0,o,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var on=t.jQuery,rn=t.$;return se.noConflict=function(e){return t.$===se&&(t.$=rn),e&&t.jQuery===se&&(t.jQuery=on),se},typeof e===we&&(t.jQuery=t.$=se),se}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var s,o,r,a,l,c,h,d;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===e?null:a,c=n.data("with-credentials")||null,h=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),o=n.attr("action"),r=n.serializeArray();var u=n.data("ujs:submit-button");u&&(r.push(u),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),o=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",o=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(s=n.data("method"),o=i.href(n),r=n.data("params")||null);return d={type:s||"GET",data:r,dataType:h,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[t,s])?void n.trigger("ajax:send",t):!1},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),o&&(d.url=o),i.ajax(d)}return!1},handleMethod:function(n){var s=i.href(n),o=n.data("method"),r=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+s+'"></form>'),h='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&a!==e&&(h+='<input name="'+l+'" value="'+a+'" type="hidden" />'),r&&c.attr("target",r),c.hide().append(h).appendTo("body"),c.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),s=!1;return n?(i.fire(t,"confirm")&&(s=i.confirm(n),e=i.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,i,n){var s,o,r=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(s=t(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!o==!n){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;r=r.add(s)}}),r.length?r:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var s=t(this),o=s.data("method"),r=s.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(s))return i.stopEverything(n);if(!a&&s.is(i.linkDisableSelector)&&i.disableElement(s),s.data("remote")!==e){if(a&&(!o||"GET"===o)&&!r)return!0;var l=i.handleRemote(s);return l===!1?i.enableElement(s):l.error(function(){i.enableElement(s)}),!1}return s.data("method")?(i.handleMethod(s),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var s=i.handleRemote(n);return s===!1?i.enableFormElement(n):s.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s,o,r=t(this),a=r.data("remote")!==e;if(!i.allowAction(r))return i.stopEverything(n);if(r.attr("novalidate")==e&&(s=i.blankInputs(r,i.requiredInputSelector),s&&i.fire(r,"ajax:aborted:required",[s])))return i.stopEverything(n);if(a){if(o=i.nonBlankInputs(r,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(r)},13);var l=i.fire(r,"ajax:aborted:file",[o]);return l||setTimeout(function(){i.enableFormElements(r)},13),l}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var s=n.attr("name"),o=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.katex=t()}}(function(){return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return s(i?i:t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e){var i=t("./src/ParseError"),n=t("./src/Settings"),s=t("./src/buildTree"),o=t("./src/parseTree"),r=t("./src/utils"),a=function(t,e,i){r.clearNode(e);var a=new n(i),l=o(t,a),c=s(l,t,a).toNode();e.appendChild(c)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),a=function(){throw new i("KaTeX doesn't work in quirks mode.")});var l=function(t,e){var i=new n(e),r=o(t,i);return s(r,t,i).toMarkup()},c=function(t,e){var i=new n(e);return o(t,i)};e.exports={render:a,renderToString:l,__parse:c,ParseError:i}},{"./src/ParseError":6,"./src/Settings":8,"./src/buildTree":13,"./src/parseTree":22,"./src/utils":25}],2:[function(t,e){"use strict";function i(t){if(!t.__matchAtRelocatable){var e=t.source+"|()",i="g"+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"");t.__matchAtRelocatable=new RegExp(e,i)}return t.__matchAtRelocatable}function n(t,e,n){if(t.global||t.sticky)throw new Error("matchAt(...): Only non-global regexes are supported");var s=i(t);s.lastIndex=n;var o=s.exec(e);return null==o[o.length-1]?(o.length=o.length-1,o):null}e.exports=n},{}],3:[function(t,e){function i(t){this.input=t,this.pos=0}function n(t,e,i,n){this.text=t,this.start=e,this.end=i,this.lexer=n}var s=t("match-at"),o=t("./ParseError");n.prototype.range=function(t,e){return t.lexer!==this.lexer?new n(e):new n(e,this.start,t.end,this.lexer)};var r=new RegExp("([ \r\n	]+)|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff]|[\ud800-\udbff][\udc00-\udfff]|\\\\(?:[a-zA-Z]+|[^\ud800-\udfff]))");i.prototype.lex=function(){var t=this.input,e=this.pos;if(e===t.length)return new n("EOF",e,e,this);var i=s(r,t,e);if(null===i)throw new o("Unexpected character: '"+t[e]+"'",new n(t[e],e,e+1,this));var a=i[2]||" ",l=this.pos;this.pos+=i[0].length;var c=this.pos;return new n(a,l,c,this)},e.exports=i},{"./ParseError":6,"match-at":2}],4:[function(t,e){function i(t,e){this.lexer=new n(t),this.macros=e,this.stack=[],this.discardedWhiteSpace=[]}var n=t("./Lexer");i.prototype.nextToken=function(){for(;;){0===this.stack.length&&this.stack.push(this.lexer.lex());var t=this.stack.pop(),e=t.text;if("\\"!==e.charAt(0)||!this.macros.hasOwnProperty(e))return t;var i=this.macros[e];if("string"==typeof i){var s=new n(i);i=[];for(var o=s.lex();"EOF"!==o.text;)i.push(o),o=s.lex();i.reverse(),this.macros[e]=i}this.stack=this.stack.concat(i)}},i.prototype.get=function(t){this.discardedWhiteSpace=[];var e=this.nextToken();if(t)for(;" "===e.text;)this.discardedWhiteSpace.push(e),e=this.nextToken();return e},i.prototype.unget=function(t){for(this.stack.push(t);0!==this.discardedWhiteSpace.length;)this.stack.push(this.discardedWhiteSpace.pop())},e.exports=i},{"./Lexer":3}],5:[function(t,e){function i(t){this.style=t.style,this.color=t.color,this.size=t.size,this.phantom=t.phantom,this.font=t.font,this.parentStyle=void 0===t.parentStyle?t.style:t.parentStyle,this.parentSize=void 0===t.parentSize?t.size:t.parentSize}i.prototype.extend=function(t){var e={style:this.style,size:this.size,color:this.color,parentStyle:this.style,parentSize:this.size,phantom:this.phantom,font:this.font};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return new i(e)},i.prototype.withStyle=function(t){return this.extend({style:t})},i.prototype.withSize=function(t){return this.extend({size:t})},i.prototype.withColor=function(t){return this.extend({color:t})},i.prototype.withPhantom=function(){return this.extend({phantom:!0})},i.prototype.withFont=function(t){return this.extend({font:t||this.font})},i.prototype.reset=function(){return this.extend({})};var n={"katex-blue":"#6495ed","katex-orange":"#ffa500","katex-pink":"#ff00af","katex-red":"#df0030","katex-green":"#28ae7b","katex-gray":"gray","katex-purple":"#9d38bd","katex-blueA":"#ccfaff","katex-blueB":"#80f6ff","katex-blueC":"#63d9ea","katex-blueD":"#11accd","katex-blueE":"#0c7f99","katex-tealA":"#94fff5","katex-tealB":"#26edd5","katex-tealC":"#01d1c1","katex-tealD":"#01a995","katex-tealE":"#208170","katex-greenA":"#b6ffb0","katex-greenB":"#8af281","katex-greenC":"#74cf70","katex-greenD":"#1fab54","katex-greenE":"#0d923f","katex-goldA":"#ffd0a9","katex-goldB":"#ffbb71","katex-goldC":"#ff9c39","katex-goldD":"#e07d10","katex-goldE":"#a75a05","katex-redA":"#fca9a9","katex-redB":"#ff8482","katex-redC":"#f9685d","katex-redD":"#e84d39","katex-redE":"#bc2612","katex-maroonA":"#ffbde0","katex-maroonB":"#ff92c6","katex-maroonC":"#ed5fa6","katex-maroonD":"#ca337c","katex-maroonE":"#9e034e","katex-purpleA":"#ddd7ff","katex-purpleB":"#c6b9fc","katex-purpleC":"#aa87ff","katex-purpleD":"#7854ab","katex-purpleE":"#543b78","katex-mintA":"#f5f9e8","katex-mintB":"#edf2df","katex-mintC":"#e0e5cc","katex-grayA":"#f6f7f7","katex-grayB":"#f0f1f2","katex-grayC":"#e3e5e6","katex-grayD":"#d6d8da","katex-grayE":"#babec2","katex-grayF":"#888d93","katex-grayG":"#626569","katex-grayH":"#3b3e40","katex-grayI":"#21242c","katex-kaBlue":"#314453","katex-kaGreen":"#71B307"};i.prototype.getColor=function(){return this.phantom?"transparent":n[this.color]||this.color},e.exports=i},{}],6:[function(t,e){function i(t,e){var n,s,o="KaTeX parse error: "+t;if(e&&e.lexer&&e.start<=e.end){var r=e.lexer.input;n=e.start,s=e.end,o+=n===r.length?" at end of input: ":" at position "+(n+1)+": ";var a,l=r.slice(n,s).replace(/[^]/g,"$&\u0332");a=n>15?"\u2026"+r.slice(n-15,n):r.slice(0,n);var c;c=s+15<r.length?r.slice(s,s+15)+"\u2026":r.slice(s),o+=a+l+c}var h=new Error(o);return h.name="ParseError",h.__proto__=i.prototype,h.position=n,h}i.prototype.__proto__=Error.prototype,e.exports=i},{}],7:[function(t,e){function i(t,e){this.gullet=new r(t,e.macros),this.settings=e,this.leftrightDepth=0}function n(t,e,i){this.result=t,this.isFunction=e,this.token=i}var s=t("./functions"),o=t("./environments"),r=t("./MacroExpander"),a=t("./symbols"),l=t("./utils"),c=t("./unicodeRegexes").cjkRegex,h=t("./parseData"),d=t("./ParseError"),u=h.ParseNode;i.prototype.expect=function(t,e){if(this.nextToken.text!==t)throw new d("Expected '"+t+"', got '"+this.nextToken.text+"'",this.nextToken);e!==!1&&this.consume()},i.prototype.consume=function(){this.nextToken=this.gullet.get("math"===this.mode)},i.prototype.switchMode=function(t){this.gullet.unget(this.nextToken),this.mode=t,this.consume()},i.prototype.parse=function(){this.mode="math",this.consume();var t=this.parseInput();return t},i.prototype.parseInput=function(){var t=this.parseExpression(!1);return this.expect("EOF",!1),t};var p=["}","\\end","\\right","&","\\\\","\\cr"];i.prototype.parseExpression=function(t,e){for(var i=[];;){var n=this.nextToken;if(-1!==p.indexOf(n.text))break;if(e&&n.text===e)break;if(t&&s[n.text]&&s[n.text].infix)break;var o=this.parseAtom();if(!o){if(!this.settings.throwOnError&&"\\"===n.text[0]){var r=this.handleUnsupportedCmd();i.push(r);continue}break}i.push(o)}return this.handleInfixNodes(i)},i.prototype.handleInfixNodes=function(t){for(var e,i=-1,n=0;n<t.length;n++){var s=t[n];if("infix"===s.type){if(-1!==i)throw new d("only one infix operator per group",s.value.token);i=n,e=s.value.replaceWith}}if(-1!==i){var o,r,a=t.slice(0,i),l=t.slice(i+1);o=1===a.length&&"ordgroup"===a[0].type?a[0]:new u("ordgroup",a,this.mode),r=1===l.length&&"ordgroup"===l[0].type?l[0]:new u("ordgroup",l,this.mode);var c=this.callFunction(e,[o,r],null);return[new u(c.type,c,this.mode)]}return t};var m=1;i.prototype.handleSupSubscript=function(t){var e=this.nextToken,i=e.text;this.consume();var n=this.parseGroup();if(n){if(n.isFunction){var o=s[n.result].greediness;if(o>m)return this.parseFunction(n);throw new d("Got function '"+n.result+"' with no arguments as "+t,e)}return n.result}if(this.settings.throwOnError||"\\"!==this.nextToken.text[0])throw new d("Expected group after '"+i+"'",e);return this.handleUnsupportedCmd()},i.prototype.handleUnsupportedCmd=function(){for(var t=this.nextToken.text,e=[],i=0;i<t.length;i++)e.push(new u("textord",t[i],"text"));var n=new u("text",{body:e,type:"text"},this.mode),s=new u("color",{color:this.settings.errorColor,value:[n],type:"color"},this.mode);return this.consume(),s},i.prototype.parseAtom=function(){var t=this.parseImplicitGroup();if("text"===this.mode)return t;for(var e,i;;){var n=this.nextToken;if("\\limits"===n.text||"\\nolimits"===n.text){if(!t||"op"!==t.type)throw new d("Limit controls must follow a math operator",n);var s="\\limits"===n.text;t.value.limits=s,t.value.alwaysHandleSupSub=!0,this.consume()}else if("^"===n.text){if(e)throw new d("Double superscript",n);e=this.handleSupSubscript("superscript")}else if("_"===n.text){if(i)throw new d("Double subscript",n);i=this.handleSupSubscript("subscript")}else{if("'"!==n.text)break;var o=new u("textord","\\prime",this.mode),r=[o];for(this.consume();"'"===this.nextToken.text;)r.push(o),this.consume();e=new u("ordgroup",r,this.mode)}}return e||i?new u("supsub",{base:t,sup:e,sub:i},this.mode):t};var f=["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],g=["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"];i.prototype.parseImplicitGroup=function(){var t=this.parseSymbol();if(null==t)return this.parseFunction();var e,i=t.result;if("\\left"===i){var n=this.parseFunction(t);++this.leftrightDepth,e=this.parseExpression(!1),--this.leftrightDepth,this.expect("\\right",!1);var s=this.parseFunction();return new u("leftright",{body:e,left:n.value.value,right:s.value.value},this.mode)}if("\\begin"===i){var r=this.parseFunction(t),a=r.value.name;if(!o.hasOwnProperty(a))throw new d("No such environment: "+a,r.value.nameGroup);var c=o[a],h=this.parseArguments("\\begin{"+a+"}",c),p={mode:this.mode,envName:a,parser:this,positions:h.pop()},m=c.handler(p,h);this.expect("\\end",!1);var v=this.nextToken,y=this.parseFunction();if(y.value.name!==a)throw new d("Mismatch: \\begin{"+a+"} matched by \\end{"+y.value.name+"}",v);return m.position=y.position,m}return l.contains(f,i)?(e=this.parseExpression(!1),new u("sizing",{size:"size"+(l.indexOf(f,i)+1),value:e},this.mode)):l.contains(g,i)?(e=this.parseExpression(!0),new u("styling",{style:i.slice(1,i.length-5),value:e},this.mode)):this.parseFunction(t)},i.prototype.parseFunction=function(t){if(t||(t=this.parseGroup()),t){if(t.isFunction){var e=t.result,i=s[e];if("text"===this.mode&&!i.allowedInText)throw new d("Can't use function '"+e+"' in text mode",t.token);var n=this.parseArguments(e,i),o=t.token,r=this.callFunction(e,n,n.pop(),o);return new u(r.type,r,this.mode)}return t.result}return null},i.prototype.callFunction=function(t,e,i,n){var o={funcName:t,parser:this,positions:i,token:n};return s[t].handler(o,e)},i.prototype.parseArguments=function(t,e){var i=e.numArgs+e.numOptionalArgs;if(0===i)return[[this.pos]];for(var o=e.greediness,r=[this.pos],a=[],l=0;i>l;l++){var c,h=this.nextToken,u=e.argTypes&&e.argTypes[l];if(l<e.numOptionalArgs){if(c=u?this.parseGroupOfType(u,!0):this.parseGroup(!0),!c){a.push(null),r.push(this.pos);continue}}else if(c=u?this.parseGroupOfType(u):this.parseGroup(),!c){if(this.settings.throwOnError||"\\"!==this.nextToken.text[0])throw new d("Expected group after '"+t+"'",h);c=new n(this.handleUnsupportedCmd(this.nextToken.text),!1)}var p;if(c.isFunction){var m=s[c.result].greediness;if(!(m>o))throw new d("Got function '"+c.result+"' as argument to '"+t+"'",h);p=this.parseFunction(c)}else p=c.result;a.push(p),r.push(this.pos)}return a.push(r),a},i.prototype.parseGroupOfType=function(t,e){var i=this.mode;if("original"===t&&(t=i),"color"===t)return this.parseColorGroup(e);if("size"===t)return this.parseSizeGroup(e);if(this.switchMode(t),"text"===t)for(;" "===this.nextToken.text;)this.consume();var n=this.parseGroup(e);return this.switchMode(i),n},i.prototype.parseStringGroup=function(t,e){if(e&&"["!==this.nextToken.text)return null;var i=this.mode;this.mode="text",this.expect(e?"[":"{");for(var n="",s=this.nextToken,o=s;this.nextToken.text!==(e?"]":"}");){if("EOF"===this.nextToken.text)throw new d("Unexpected end of input in "+t,s.range(this.nextToken,n));o=this.nextToken,n+=o.text,this.consume()}return this.mode=i,this.expect(e?"]":"}"),s.range(o,n)},i.prototype.parseRegexGroup=function(t,e){var i=this.mode;this.mode="text";for(var n=this.nextToken,s=n,o="";"EOF"!==this.nextToken.text&&t.test(o+this.nextToken.text);)s=this.nextToken,o+=s.text,this.consume();if(""===o)throw new d("Invalid "+e+": '"+n.text+"'",n);return this.mode=i,n.range(s,o)},i.prototype.parseColorGroup=function(t){var e=this.parseStringGroup("color",t);if(!e)return null;var i=/^(#[a-z0-9]+|[a-z]+)$/i.exec(e.text);if(!i)throw new d("Invalid color: '"+e.text+"'",e);return new n(new u("color",i[0],this.mode),!1)},i.prototype.parseSizeGroup=function(t){var e;if(e=t||"{"===this.nextToken.text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2}$/,"size"),!e)return null;var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!i)throw new d("Invalid size: '"+e.text+"'",e);var s={number:+(i[1]+i[2]),unit:i[3]};if("em"!==s.unit&&"ex"!==s.unit&&"mu"!==s.unit)throw new d("Invalid unit: '"+s.unit+"'",e);return new n(new u("color",s,this.mode),!1)},i.prototype.parseGroup=function(t){var e=this.nextToken;if(this.nextToken.text===(t?"[":"{")){this.consume();var i=this.parseExpression(!1,t?"]":null),s=this.nextToken;return this.expect(t?"]":"}"),"text"===this.mode&&this.formLigatures(i),new n(new u("ordgroup",i,this.mode,e,s),!1)}return t?null:this.parseSymbol()},i.prototype.formLigatures=function(t){var e,i=t.length-1;for(e=0;i>e;++e){var n=t[e],s=n.value;"-"===s&&"-"===t[e+1].value&&(i>e+1&&"-"===t[e+2].value?(t.splice(e,3,new u("textord","---","text",n,t[e+2])),i-=2):(t.splice(e,2,new u("textord","--","text",n,t[e+1])),i-=1)),"'"!==s&&"`"!==s||t[e+1].value!==s||(t.splice(e,2,new u("textord",s+s,"text",n,t[e+1])),i-=1)}},i.prototype.parseSymbol=function(){var t=this.nextToken;return s[t.text]?(this.consume(),new n(t.text,!0,t)):a[this.mode][t.text]?(this.consume(),new n(new u(a[this.mode][t.text].group,t.text,this.mode,t),!1,t)):"text"===this.mode&&c.test(t.text)?(this.consume(),new n(new u("textord",t.text,this.mode,t),!1,t)):null},i.prototype.ParseNode=u,e.exports=i},{"./MacroExpander":4,"./ParseError":6,"./environments":16,"./functions":19,"./parseData":21,"./symbols":23,"./unicodeRegexes":24,"./utils":25}],8:[function(t,e){function i(t,e){return void 0===t?e:t}function n(t){t=t||{},this.displayMode=i(t.displayMode,!1),this.throwOnError=i(t.throwOnError,!0),this.errorColor=i(t.errorColor,"#cc0000"),this.macros=t.macros||{}}e.exports=n},{}],9:[function(t,e){function i(t,e,i,n){this.id=t,this.size=e,this.cramped=n,this.sizeMultiplier=i,this.metrics=o[e>0?e-1:0]}var n,s=t("./fontMetrics.js").sigmas,o=[{},{},{}];for(var r in s)if(s.hasOwnProperty(r))for(n=0;3>n;n++)o[n][r]=s[r][n];for(n=0;3>n;n++)o[n].emPerEx=s.xHeight[n]/s.quad[n];i.prototype.sup=function(){return v[y[this.id]]},i.prototype.sub=function(){return v[b[this.id]]},i.prototype.fracNum=function(){return v[S[this.id]]},i.prototype.fracDen=function(){return v[E[this.id]]},i.prototype.cramp=function(){return v[T[this.id]]},i.prototype.cls=function(){return f[this.size]+(this.cramped?" cramped":" uncramped")},i.prototype.reset=function(){return g[this.size]},i.prototype.isTight=function(){return this.size>=2};var a=0,l=1,c=2,h=3,d=4,u=5,p=6,m=7,f=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],g=["reset-textstyle","reset-textstyle","reset-scriptstyle","reset-scriptscriptstyle"],v=[new i(a,0,1,!1),new i(l,0,1,!0),new i(c,1,1,!1),new i(h,1,1,!0),new i(d,2,.7,!1),new i(u,2,.7,!0),new i(p,3,.5,!1),new i(m,3,.5,!0)],y=[d,u,d,u,p,m,p,m],b=[u,u,u,u,m,m,m,m],S=[c,h,d,u,p,m,p,m],E=[h,h,u,u,m,m,m,m],T=[l,l,h,h,u,u,m,m];e.exports={DISPLAY:v[a],TEXT:v[c],SCRIPT:v[d],SCRIPTSCRIPT:v[p]}},{"./fontMetrics.js":17}],10:[function(t,e){var i=t("./domTree"),n=t("./fontMetrics"),s=t("./symbols"),o=t("./utils"),r=["\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega"],a=["\u0131","\u0237","\xa3"],l=function(t,e,o,r,a){s[o][t]&&s[o][t].replace&&(t=s[o][t].replace);var l,c=n.getCharacterMetrics(t,e);if(c){var h=c.italic;"text"===o&&(h=0),l=new i.symbolNode(t,c.height,c.depth,h,c.skew,a)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+t+"' in style '"+e+"'"),l=new i.symbolNode(t,0,0,0,0,a);return r&&(r.style.isTight()&&l.classes.push("mtight"),r.getColor()&&(l.style.color=r.getColor())),l},c=function(t,e,i,n){return"\\"===t||"main"===s[e][t].font?l(t,"Main-Regular",e,i,n):l(t,"AMS-Regular",e,i,n.concat(["amsrm"]))},h=function(t,e,i,n,s){if("mathord"===s)return d(t,e,i,n);if("textord"===s)return l(t,"Main-Regular",e,i,n.concat(["mathrm"]));throw new Error("unexpected type: "+s+" in mathDefault")},d=function(t,e,i,n){return/[0-9]/.test(t.charAt(0))||o.contains(a,t)||o.contains(r,t)?l(t,"Main-Italic",e,i,n.concat(["mainit"])):l(t,"Math-Italic",e,i,n.concat(["mathit"]))},u=function(t,e,i){var r=t.mode,c=t.value;s[r][c]&&s[r][c].replace&&(c=s[r][c].replace);var u=["mord"],p=e.font;if(p){if("mathit"===p||o.contains(a,c))return d(c,r,e,u);var m=E[p].fontName;return n.getCharacterMetrics(c,m)?l(c,m,r,e,u.concat([p])):h(c,r,e,u,i)}return h(c,r,e,u,i)},p=function(t){var e=0,i=0,n=0;if(t.children)for(var s=0;s<t.children.length;s++)t.children[s].height>e&&(e=t.children[s].height),t.children[s].depth>i&&(i=t.children[s].depth),t.children[s].maxFontSize>n&&(n=t.children[s].maxFontSize);t.height=e,t.depth=i,t.maxFontSize=n},m=function(t,e,n){var s=new i.span(t,e,n);return p(s),s},f=function(t,e){t.children=e.concat(t.children),p(t)},g=function(t){var e=new i.documentFragment(t);return p(e),e},v=function(t,e){var n=m([],[new i.symbolNode("\u200b")]);n.style.fontSize=e/t.style.sizeMultiplier+"em";var s=m(["fontsize-ensurer","reset-"+t.size,"size5"],[n]);return s},y=function(t,e,n,s){var o,r,a;if("individualShift"===e){var l=t;for(t=[l[0]],o=-l[0].shift-l[0].elem.depth,r=o,a=1;a<l.length;a++){var c=-l[a].shift-r-l[a].elem.depth,h=c-(l[a-1].elem.height+l[a-1].elem.depth);r+=c,t.push({type:"kern",size:h}),t.push(l[a])}}else if("top"===e){var d=n;for(a=0;a<t.length;a++)d-="kern"===t[a].type?t[a].size:t[a].elem.height+t[a].elem.depth;o=d}else o="bottom"===e?-n:"shift"===e?-t[0].elem.depth-n:"firstBaseline"===e?-t[0].elem.depth:0;var u=0;for(a=0;a<t.length;a++)"elem"===t[a].type&&(u=Math.max(u,t[a].elem.maxFontSize));var p=v(s,u),f=[];for(r=o,a=0;a<t.length;a++)if("kern"===t[a].type)r+=t[a].size;else{var g=t[a].elem,y=-g.depth-r;r+=g.height+g.depth;var b=m([],[p,g]);b.height-=y,b.depth+=y,b.style.top=y+"em",f.push(b)}var S=m(["baseline-fix"],[p,new i.symbolNode("\u200b")]);f.push(S);var E=m(["vlist"],f);return E.height=Math.max(r,E.height),E.depth=Math.max(-o,E.depth),E},b={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49},S={"\\qquad":{size:"2em",className:"qquad"},"\\quad":{size:"1em",className:"quad"},"\\enspace":{size:"0.5em",className:"enspace"},"\\;":{size:"0.277778em",className:"thickspace"},"\\:":{size:"0.22222em",className:"mediumspace"},"\\,":{size:"0.16667em",className:"thinspace"},"\\!":{size:"-0.16667em",className:"negativethinspace"}},E={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}};e.exports={fontMap:E,makeSymbol:l,mathsym:c,makeSpan:m,makeFragment:g,makeVList:y,makeOrd:u,prependChildren:f,sizingMultiplier:b,spacingFunctions:S}},{"./domTree":15,"./fontMetrics":17,"./symbols":23,"./utils":25}],11:[function(t,e){var i=t("./ParseError"),n=t("./Style"),s=t("./buildCommon"),o=t("./delimiter"),r=t("./domTree"),a=t("./fontMetrics"),l=t("./utils"),c=s.makeSpan,h=function(t){return t instanceof r.span&&"mspace"===t.classes[0]},d=function(t){return t&&"mbin"===t.classes[0]},u=function(t,e){return t?l.contains(["mbin","mopen","mrel","mop","mpunct"],t.classes[0]):e},p=function(t,e){return t?l.contains(["mrel","mclose","mpunct"],t.classes[0]):e},m=function(t,e,i){for(var n=[],o=0;o<t.length;o++){var a=t[o],l=T(a,e);l instanceof r.documentFragment?Array.prototype.push.apply(n,l.children):n.push(l)}var m=null;for(o=0;o<n.length;o++)h(n[o])?(m=m||[],m.push(n[o]),n.splice(o,1),o--):m&&(n[o]instanceof r.symbolNode&&(n[o]=c([].concat(n[o].classes),[n[o]])),s.prependChildren(n[o],m),m=null);for(m&&Array.prototype.push.apply(n,m),o=0;o<n.length;o++)d(n[o])&&(u(n[o-1],i)||p(n[o+1],i))&&(n[o].classes[0]="mord");return n},f=function(t){if(t instanceof r.documentFragment){if(t.children.length)return f(t.children[t.children.length-1])}else if(l.contains(["mord","mop","mbin","mrel","mopen","mclose","mpunct","minner"],t.classes[0]))return t.classes[0];return null},g=function(t,e){return t?"op"===t.type?t.value.limits&&(e.style.size===n.DISPLAY.size||t.value.alwaysHandleSupSub):"accent"===t.type?y(t.value.base):null:!1},v=function(t){return t?"ordgroup"===t.type?1===t.value.length?v(t.value[0]):t:"color"===t.type?1===t.value.value.length?v(t.value.value[0]):t:"font"===t.type?v(t.value.body):t:!1
},y=function(t){var e=v(t);return"mathord"===e.type||"textord"===e.type||"bin"===e.type||"rel"===e.type||"inner"===e.type||"open"===e.type||"close"===e.type||"punct"===e.type},b=function(t,e){return c(e.concat(["sizing","reset-"+t.size,"size5",t.style.reset(),n.TEXT.cls(),"nulldelimiter"]))},S={};S.mathord=function(t,e){return s.makeOrd(t,e,"mathord")},S.textord=function(t,e){return s.makeOrd(t,e,"textord")},S.bin=function(t,e){return s.mathsym(t.value,t.mode,e,["mbin"])},S.rel=function(t,e){return s.mathsym(t.value,t.mode,e,["mrel"])},S.open=function(t,e){return s.mathsym(t.value,t.mode,e,["mopen"])},S.close=function(t,e){return s.mathsym(t.value,t.mode,e,["mclose"])},S.inner=function(t,e){return s.mathsym(t.value,t.mode,e,["minner"])},S.punct=function(t,e){return s.mathsym(t.value,t.mode,e,["mpunct"])},S.ordgroup=function(t,e){return c(["mord",e.style.cls()],m(t.value,e.reset(),!0),e)},S.text=function(t,e){for(var i=e.withFont(t.value.style),n=m(t.value.body,i,!0),s=0;s<n.length-1;s++)n[s].tryCombine(n[s+1])&&(n.splice(s+1,1),s--);return c(["mord","text",i.style.cls()],n,i)},S.color=function(t,e){var i=m(t.value.value,e.withColor(t.value.color),!1);return new s.makeFragment(i)},S.supsub=function(t,e){if(g(t.value.base,e))return S[t.value.base.type](t,e);var i,o,l,h,d,u=T(t.value.base,e.reset()),p=e.style;t.value.sup&&(d=e.withStyle(p.sup()),l=T(t.value.sup,d),i=c([p.reset(),p.sup().cls()],[l],d)),t.value.sub&&(d=e.withStyle(p.sub()),h=T(t.value.sub,d),o=c([p.reset(),p.sub().cls()],[h],d));var m,v;y(t.value.base)?(m=0,v=0):(m=u.height-p.metrics.supDrop,v=u.depth+p.metrics.subDrop);var b;b=p===n.DISPLAY?p.metrics.sup1:p.cramped?p.metrics.sup3:p.metrics.sup2;var E,w=n.TEXT.sizeMultiplier*p.sizeMultiplier,L=.5/a.metrics.ptPerEm/w+"em";if(t.value.sup)if(t.value.sub){m=Math.max(m,b,l.depth+.25*p.metrics.xHeight),v=Math.max(v,p.metrics.sub2);var k=a.metrics.defaultRuleThickness;if(m-l.depth-(h.height-v)<4*k){v=4*k-(m-l.depth)+h.height;var _=.8*p.metrics.xHeight-(m-l.depth);_>0&&(m+=_,v-=_)}E=s.makeVList([{type:"elem",elem:o,shift:v},{type:"elem",elem:i,shift:-m}],"individualShift",null,e),u instanceof r.symbolNode&&(E.children[0].style.marginLeft=-u.italic+"em"),E.children[0].style.marginRight=L,E.children[1].style.marginRight=L}else m=Math.max(m,b,l.depth+.25*p.metrics.xHeight),E=s.makeVList([{type:"elem",elem:i}],"shift",-m,e),E.children[0].style.marginRight=L;else v=Math.max(v,p.metrics.sub1,h.height-.8*p.metrics.xHeight),E=s.makeVList([{type:"elem",elem:o}],"shift",v,e),E.children[0].style.marginRight=L,u instanceof r.symbolNode&&(E.children[0].style.marginLeft=-u.italic+"em");var C=f(u)||"mord";return c([C],[u,c(["msupsub"],[E])],e)},S.genfrac=function(t,e){var i=e.style;"display"===t.value.size?i=n.DISPLAY:"text"===t.value.size&&(i=n.TEXT);var r,l=i.fracNum(),h=i.fracDen();r=e.withStyle(l);var d=T(t.value.numer,r),u=c([i.reset(),l.cls()],[d],r);r=e.withStyle(h);var p,m=T(t.value.denom,r),f=c([i.reset(),h.cls()],[m],r);p=t.value.hasBarLine?a.metrics.defaultRuleThickness/e.style.sizeMultiplier:0;var g,v,y;i.size===n.DISPLAY.size?(g=i.metrics.num1,v=p>0?3*p:7*a.metrics.defaultRuleThickness,y=i.metrics.denom1):(p>0?(g=i.metrics.num2,v=p):(g=i.metrics.num3,v=3*a.metrics.defaultRuleThickness),y=i.metrics.denom2);var S;if(0===p){var E=g-d.depth-(m.height-y);v>E&&(g+=.5*(v-E),y+=.5*(v-E)),S=s.makeVList([{type:"elem",elem:f,shift:y},{type:"elem",elem:u,shift:-g}],"individualShift",null,e)}else{var w=i.metrics.axisHeight;g-d.depth-(w+.5*p)<v&&(g+=v-(g-d.depth-(w+.5*p))),w-.5*p-(m.height-y)<v&&(y+=v-(w-.5*p-(m.height-y)));var L=c([e.style.reset(),n.TEXT.cls(),"frac-line"]);L.height=p;var k=-(w-.5*p);S=s.makeVList([{type:"elem",elem:f,shift:y},{type:"elem",elem:L,shift:k},{type:"elem",elem:u,shift:-g}],"individualShift",null,e)}S.height*=i.sizeMultiplier/e.style.sizeMultiplier,S.depth*=i.sizeMultiplier/e.style.sizeMultiplier;var _;_=i.size===n.DISPLAY.size?i.metrics.delim1:i.metrics.delim2;var C,x;return C=null==t.value.leftDelim?b(e,["mopen"]):o.customSizedDelim(t.value.leftDelim,_,!0,e.withStyle(i),t.mode,["mopen"]),x=null==t.value.rightDelim?b(e,["mclose"]):o.customSizedDelim(t.value.rightDelim,_,!0,e.withStyle(i),t.mode,["mclose"]),c(["mord",e.style.reset(),i.cls()],[C,c(["mfrac"],[S]),x],e)};var E=function(t,e){var i=t.number;return"ex"===t.unit?i*=e.metrics.emPerEx:"mu"===t.unit&&(i/=18),i};S.array=function(t,e){var n,o,r=t.value.body.length,h=0,d=new Array(r),u=e.style,p=1/a.metrics.ptPerEm,m=5*p,f=12*p,g=l.deflt(t.value.arraystretch,1),v=g*f,y=.7*v,b=.3*v,S=0;for(n=0;n<t.value.body.length;++n){var w=t.value.body[n],L=y,k=b;h<w.length&&(h=w.length);var _=new Array(w.length);for(o=0;o<w.length;++o){var C=T(w[o],e);k<C.depth&&(k=C.depth),L<C.height&&(L=C.height),_[o]=C}var x=0;t.value.rowGaps[n]&&(x=E(t.value.rowGaps[n].value,u),x>0&&(x+=b,x>k&&(k=x),x=0)),_.height=L,_.depth=k,S+=L,_.pos=S,S+=k+x,d[n]=_}var A,I,D=S/2+u.metrics.axisHeight,M=t.value.cols||[],R=[];for(o=0,I=0;h>o||I<M.length;++o,++I){for(var O=M[I]||{},N=!0;"separator"===O.type;){if(N||(A=c(["arraycolsep"],[]),A.style.width=a.metrics.doubleRuleSep+"em",R.push(A)),"|"!==O.separator)throw new i("Invalid separator type: "+O.separator);var P=c(["vertical-separator"],[]);P.style.height=S+"em",P.style.verticalAlign=-(S-D)+"em",R.push(P),I++,O=M[I]||{},N=!1}if(!(o>=h)){var U;(o>0||t.value.hskipBeforeAndAfter)&&(U=l.deflt(O.pregap,m),0!==U&&(A=c(["arraycolsep"],[]),A.style.width=U+"em",R.push(A)));var F=[];for(n=0;r>n;++n){var $=d[n],z=$[o];if(z){var B=$.pos-D;z.depth=$.depth,z.height=$.height,F.push({type:"elem",elem:z,shift:B})}}F=s.makeVList(F,"individualShift",null,e),F=c(["col-align-"+(O.align||"c")],[F]),R.push(F),(h-1>o||t.value.hskipBeforeAndAfter)&&(U=l.deflt(O.postgap,m),0!==U&&(A=c(["arraycolsep"],[]),A.style.width=U+"em",R.push(A)))}}return d=c(["mtable"],R),c(["mord"],[d],e)},S.spacing=function(t,e){return"\\ "===t.value||"\\space"===t.value||" "===t.value||"~"===t.value?"text"===t.mode?s.makeOrd(t,e,"textord"):c(["mspace"],[s.mathsym(t.value,t.mode,e)],e):c(["mspace",s.spacingFunctions[t.value].className],[],e)},S.llap=function(t,e){var i=c(["inner"],[T(t.value.body,e.reset())]),n=c(["fix"],[]);return c(["mord","llap",e.style.cls()],[i,n],e)},S.rlap=function(t,e){var i=c(["inner"],[T(t.value.body,e.reset())]),n=c(["fix"],[]);return c(["mord","rlap",e.style.cls()],[i,n],e)},S.op=function(t,e){var i,o,r=!1;"supsub"===t.type&&(i=t.value.sup,o=t.value.sub,t=t.value.base,r=!0);var h=e.style,d=["\\smallint"],u=!1;h.size===n.DISPLAY.size&&t.value.symbol&&!l.contains(d,t.value.body)&&(u=!0);var p,f=0,g=0;if(t.value.symbol){var v=u?"Size2-Regular":"Size1-Regular";p=s.makeSymbol(t.value.body,v,"math",e,["mop","op-symbol",u?"large-op":"small-op"]),f=(p.height-p.depth)/2-h.metrics.axisHeight*h.sizeMultiplier,g=p.italic}else if(t.value.value){var y=m(t.value.value,e,!0);p=c(["mop"],y,e)}else{for(var b=[],S=1;S<t.value.body.length;S++)b.push(s.mathsym(t.value.body[S],t.mode));p=c(["mop"],b,e)}if(r){p=c([],[p]);var E,w,L,k,_;if(i){_=e.withStyle(h.sup());var C=T(i,_);E=c([h.reset(),h.sup().cls()],[C],_),w=Math.max(a.metrics.bigOpSpacing1,a.metrics.bigOpSpacing3-C.depth)}if(o){_=e.withStyle(h.sub());var x=T(o,_);L=c([h.reset(),h.sub().cls()],[x],_),k=Math.max(a.metrics.bigOpSpacing2,a.metrics.bigOpSpacing4-x.height)}var A,I,D;if(i)if(o){if(!i&&!o)return p;D=a.metrics.bigOpSpacing5+L.height+L.depth+k+p.depth+f,A=s.makeVList([{type:"kern",size:a.metrics.bigOpSpacing5},{type:"elem",elem:L},{type:"kern",size:k},{type:"elem",elem:p},{type:"kern",size:w},{type:"elem",elem:E},{type:"kern",size:a.metrics.bigOpSpacing5}],"bottom",D,e),A.children[0].style.marginLeft=-g+"em",A.children[2].style.marginLeft=g+"em"}else D=p.depth+f,A=s.makeVList([{type:"elem",elem:p},{type:"kern",size:w},{type:"elem",elem:E},{type:"kern",size:a.metrics.bigOpSpacing5}],"bottom",D,e),A.children[1].style.marginLeft=g+"em";else I=p.height-f,A=s.makeVList([{type:"kern",size:a.metrics.bigOpSpacing5},{type:"elem",elem:L},{type:"kern",size:k},{type:"elem",elem:p}],"top",I,e),A.children[0].style.marginLeft=-g+"em";return c(["mop","op-limits"],[A],e)}return t.value.symbol&&(p.style.top=f+"em"),p},S.mod=function(t,e){var i=[];if("bmod"===t.value.modType?(e.style.isTight()||i.push(c(["mspace","negativemediumspace"],[],e)),i.push(c(["mspace","thickspace"],[],e))):i.push(e.style.size===n.DISPLAY.size?c(["mspace","quad"],[],e):"mod"===t.value.modType?c(["mspace","twelvemuspace"],[],e):c(["mspace","eightmuspace"],[],e)),("pod"===t.value.modType||"pmod"===t.value.modType)&&i.push(s.mathsym("(",t.mode)),"pod"!==t.value.modType){var o=[s.mathsym("m",t.mode),s.mathsym("o",t.mode),s.mathsym("d",t.mode)];"bmod"===t.value.modType?(i.push(c(["mbin"],o,e)),i.push(c(["mspace","thickspace"],[],e)),e.style.isTight()||i.push(c(["mspace","negativemediumspace"],[],e))):(Array.prototype.push.apply(i,o),i.push(c(["mspace","sixmuspace"],[],e)))}return t.value.value&&Array.prototype.push.apply(i,m(t.value.value,e,!1)),("pod"===t.value.modType||"pmod"===t.value.modType)&&i.push(s.mathsym(")",t.mode)),s.makeFragment(i)},S.katex=function(t,e){var i=c(["k"],[s.mathsym("K",t.mode)],e),n=c(["a"],[s.mathsym("A",t.mode)],e);n.height=.75*(n.height+.2),n.depth=.75*(n.height-.2);var o=c(["t"],[s.mathsym("T",t.mode)],e),r=c(["e"],[s.mathsym("E",t.mode)],e);r.height=r.height-.2155,r.depth=r.depth+.2155;var a=c(["x"],[s.mathsym("X",t.mode)],e);return c(["mord","katex-logo"],[i,n,o,r,a],e)},S.overline=function(t,e){var i=e.style,o=T(t.value.body,e.withStyle(i.cramp())),r=a.metrics.defaultRuleThickness/i.sizeMultiplier,l=c([i.reset(),n.TEXT.cls(),"overline-line"]);l.height=r,l.maxFontSize=1;var h=s.makeVList([{type:"elem",elem:o},{type:"kern",size:3*r},{type:"elem",elem:l},{type:"kern",size:r}],"firstBaseline",null,e);return c(["mord","overline"],[h],e)},S.underline=function(t,e){var i=e.style,o=T(t.value.body,e),r=a.metrics.defaultRuleThickness/i.sizeMultiplier,l=c([i.reset(),n.TEXT.cls(),"underline-line"]);l.height=r,l.maxFontSize=1;var h=s.makeVList([{type:"kern",size:r},{type:"elem",elem:l},{type:"kern",size:3*r},{type:"elem",elem:o}],"top",o.height,e);return c(["mord","underline"],[h],e)},S.sqrt=function(t,e){var i=e.style,r=T(t.value.body,e.withStyle(i.cramp())),l=a.metrics.defaultRuleThickness/i.sizeMultiplier,h=c([i.reset(),n.TEXT.cls(),"sqrt-line"],[],e);h.height=l,h.maxFontSize=1;var d=l;i.id<n.TEXT.id&&(d=i.metrics.xHeight);var u=l+d/4,p=(r.height+r.depth)*i.sizeMultiplier,m=p+u+l,f=c(["sqrt-sign"],[o.customSizedDelim("\\surd",m,!1,e,t.mode)],e),g=f.height+f.depth-l;g>r.height+r.depth+u&&(u=(u+g-r.height-r.depth)/2);var v=-(r.height+u+l)+f.height;f.style.top=v+"em",f.height-=v,f.depth+=v;var y;if(y=0===r.height&&0===r.depth?c():s.makeVList([{type:"elem",elem:r},{type:"kern",size:u},{type:"elem",elem:h},{type:"kern",size:l}],"firstBaseline",null,e),t.value.index){var b=e.withStyle(n.SCRIPTSCRIPT),S=T(t.value.index,b),E=c([i.reset(),n.SCRIPTSCRIPT.cls()],[S],b),w=Math.max(f.height,y.height),L=Math.max(f.depth,y.depth),k=.6*(w-L),_=s.makeVList([{type:"elem",elem:E}],"shift",-k,e),C=c(["root"],[_]);return c(["mord","sqrt"],[C,f,y],e)}return c(["mord","sqrt"],[f,y],e)},S.sizing=function(t,e){var i=m(t.value.value,e.withSize(t.value.size),!1),n=e.style,o=s.sizingMultiplier[t.value.size];o*=n.sizeMultiplier;for(var r=0;r<i.length;r++){var a=l.indexOf(i[r].classes,"sizing");0>a?(i[r].classes.push("sizing","reset-"+e.size,t.value.size,n.cls()),i[r].maxFontSize=o):i[r].classes[a+1]==="reset-"+t.value.size&&(i[r].classes[a+1]="reset-"+e.size)}return s.makeFragment(i)},S.styling=function(t,e){for(var i={display:n.DISPLAY,text:n.TEXT,script:n.SCRIPT,scriptscript:n.SCRIPTSCRIPT},o=i[t.value.style],r=e.withStyle(o),a=m(t.value.value,r,!1),c=0;c<a.length;c++){var h=l.indexOf(a[c].classes,o.reset());0>h?a[c].classes.push(e.style.reset(),o.cls()):a[c].classes[h]=e.style.reset()}return new s.makeFragment(a)},S.font=function(t,e){var i=t.value.font;return T(t.value.body,e.withFont(i))},S.delimsizing=function(t,e){var i=t.value.value;return"."===i?c([t.value.mclass]):o.sizedDelim(i,t.value.size,e,t.mode,[t.value.mclass])},S.leftright=function(t,e){for(var i=m(t.value.body,e.reset(),!0),n=0,s=0,r=!1,a=0;a<i.length;a++)i[a].isMiddle?r=!0:(n=Math.max(i[a].height,n),s=Math.max(i[a].depth,s));var l=e.style;n*=l.sizeMultiplier,s*=l.sizeMultiplier;var h;if(h="."===t.value.left?b(e,["mopen"]):o.leftRightDelim(t.value.left,n,s,e,t.mode,["mopen"]),i.unshift(h),r)for(a=1;a<i.length;a++)i[a].isMiddle&&(i[a]=o.leftRightDelim(i[a].isMiddle.value,n,s,i[a].isMiddle.options,t.mode,[]));var d;return d="."===t.value.right?b(e,["mclose"]):o.leftRightDelim(t.value.right,n,s,e,t.mode,["mclose"]),i.push(d),c(["minner",l.cls()],i,e)},S.middle=function(t,e){var i;return"."===t.value.value?i=b(e,[]):(i=o.sizedDelim(t.value.value,1,e,t.mode,[]),i.isMiddle={value:t.value.value,options:e}),i},S.rule=function(t,e){var i=c(["mord","rule"],[],e),n=e.style,s=0;t.value.shift&&(s=E(t.value.shift,n));var o=E(t.value.width,n),r=E(t.value.height,n);return s/=n.sizeMultiplier,o/=n.sizeMultiplier,r/=n.sizeMultiplier,i.style.borderRightWidth=o+"em",i.style.borderTopWidth=r+"em",i.style.bottom=s+"em",i.width=o,i.height=r+s,i.depth=-s,i},S.kern=function(t,e){var i=c(["mord","rule"],[],e),n=e.style,s=0;return t.value.dimension&&(s=E(t.value.dimension,n)),s/=n.sizeMultiplier,i.style.marginLeft=s+"em",i},S.accent=function(t,e){var i,n=t.value.base,o=e.style;if("supsub"===t.type){var r=t;t=r.value.base,n=t.value.base,r.value.base=n,i=T(r,e.reset())}var a,l=T(n,e.withStyle(o.cramp()));if(y(n)){var h=v(n),d=T(h,e.withStyle(o.cramp()));a=d.skew}else a=0;var u=Math.min(l.height,o.metrics.xHeight),p=s.makeSymbol(t.value.accent,"Main-Regular","math",e);p.italic=0;var m="\\vec"===t.value.accent?"accent-vec":null,f=c(["accent-body",m],[c([],[p])]);f=s.makeVList([{type:"elem",elem:l},{type:"kern",size:-u},{type:"elem",elem:f}],"firstBaseline",null,e),f.children[1].style.marginLeft=2*a+"em";var g=c(["mord","accent"],[f],e);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},S.phantom=function(t,e){var i=m(t.value.value,e.withPhantom(),!1);return new s.makeFragment(i)},S.mclass=function(t,e){var i=m(t.value.value,e,!0);return c([t.value.mclass],i,e)};var T=function(t,e){if(!t)return c();if(S[t.type]){var n,o=S[t.type](t,e);return e.style!==e.parentStyle&&(n=e.style.sizeMultiplier/e.parentStyle.sizeMultiplier,o.height*=n,o.depth*=n),e.size!==e.parentSize&&(n=s.sizingMultiplier[e.size]/s.sizingMultiplier[e.parentSize],o.height*=n,o.depth*=n),o}throw new i("Got group of unknown type: '"+t.type+"'")},w=function(t,e){t=JSON.parse(JSON.stringify(t));var i=m(t,e,!0),n=c(["base",e.style.cls()],i,e),s=c(["strut"]),o=c(["strut","bottom"]);s.style.height=n.height+"em",o.style.height=n.height+n.depth+"em",o.style.verticalAlign=-n.depth+"em";var r=c(["katex-html"],[s,o,n]);return r.setAttribute("aria-hidden","true"),r};e.exports=w},{"./ParseError":6,"./Style":9,"./buildCommon":10,"./delimiter":14,"./domTree":15,"./fontMetrics":17,"./utils":25}],12:[function(t,e){var i=t("./buildCommon"),n=t("./fontMetrics"),s=t("./mathMLTree"),o=t("./ParseError"),r=t("./symbols"),a=t("./utils"),l=i.makeSpan,c=i.fontMap,h=function(t,e){return r[e][t]&&r[e][t].replace&&(t=r[e][t].replace),new s.TextNode(t)},d=function(t,e){var i=e.font;if(!i)return null;var s=t.mode;if("mathit"===i)return"italic";var o=t.value;if(a.contains(["\\imath","\\jmath"],o))return null;r[s][o]&&r[s][o].replace&&(o=r[s][o].replace);var l=c[i].fontName;return n.getCharacterMetrics(o,l)?c[e.font].variant:null},u={};u.mathord=function(t,e){var i=new s.MathNode("mi",[h(t.value,t.mode)]),n=d(t,e);return n&&i.setAttribute("mathvariant",n),i},u.textord=function(t,e){var i,n=h(t.value,t.mode),o=d(t,e)||"normal";return/[0-9]/.test(t.value)?(i=new s.MathNode("mn",[n]),e.font&&i.setAttribute("mathvariant",o)):(i=new s.MathNode("mi",[n]),i.setAttribute("mathvariant",o)),i},u.bin=function(t){var e=new s.MathNode("mo",[h(t.value,t.mode)]);return e},u.rel=function(t){var e=new s.MathNode("mo",[h(t.value,t.mode)]);return e},u.open=function(t){var e=new s.MathNode("mo",[h(t.value,t.mode)]);return e},u.close=function(t){var e=new s.MathNode("mo",[h(t.value,t.mode)]);return e},u.inner=function(t){var e=new s.MathNode("mo",[h(t.value,t.mode)]);return e},u.punct=function(t){var e=new s.MathNode("mo",[h(t.value,t.mode)]);return e.setAttribute("separator","true"),e},u.ordgroup=function(t,e){var i=p(t.value,e),n=new s.MathNode("mrow",i);return n},u.text=function(t,e){var i=p(t.value.body,e),n=new s.MathNode("mtext",i);return n},u.color=function(t,e){var i=p(t.value.value,e),n=new s.MathNode("mstyle",i);return n.setAttribute("mathcolor",t.value.color),n},u.supsub=function(t,e){var i=[m(t.value.base,e)];t.value.sub&&i.push(m(t.value.sub,e)),t.value.sup&&i.push(m(t.value.sup,e));var n;n=t.value.sub?t.value.sup?"msubsup":"msub":"msup";var o=new s.MathNode(n,i);return o},u.genfrac=function(t,e){var i=new s.MathNode("mfrac",[m(t.value.numer,e),m(t.value.denom,e)]);if(t.value.hasBarLine||i.setAttribute("linethickness","0px"),null!=t.value.leftDelim||null!=t.value.rightDelim){var n=[];if(null!=t.value.leftDelim){var o=new s.MathNode("mo",[new s.TextNode(t.value.leftDelim)]);o.setAttribute("fence","true"),n.push(o)}if(n.push(i),null!=t.value.rightDelim){var r=new s.MathNode("mo",[new s.TextNode(t.value.rightDelim)]);r.setAttribute("fence","true"),n.push(r)}var a=new s.MathNode("mrow",n);return a}return i},u.array=function(t,e){return new s.MathNode("mtable",t.value.body.map(function(t){return new s.MathNode("mtr",t.map(function(t){return new s.MathNode("mtd",[m(t,e)])}))}))},u.sqrt=function(t,e){var i;return i=t.value.index?new s.MathNode("mroot",[m(t.value.body,e),m(t.value.index,e)]):new s.MathNode("msqrt",[m(t.value.body,e)])},u.leftright=function(t,e){var i=p(t.value.body,e);if("."!==t.value.left){var n=new s.MathNode("mo",[h(t.value.left,t.mode)]);n.setAttribute("fence","true"),i.unshift(n)}if("."!==t.value.right){var o=new s.MathNode("mo",[h(t.value.right,t.mode)]);o.setAttribute("fence","true"),i.push(o)}var r=new s.MathNode("mrow",i);return r},u.middle=function(t){var e=new s.MathNode("mo",[h(t.value.middle,t.mode)]);return e.setAttribute("fence","true"),e},u.accent=function(t,e){var i=new s.MathNode("mo",[h(t.value.accent,t.mode)]),n=new s.MathNode("mover",[m(t.value.base,e),i]);return n.setAttribute("accent","true"),n},u.spacing=function(t){var e;return"\\ "===t.value||"\\space"===t.value||" "===t.value||"~"===t.value?e=new s.MathNode("mtext",[new s.TextNode("\xa0")]):(e=new s.MathNode("mspace"),e.setAttribute("width",i.spacingFunctions[t.value].size)),e},u.op=function(t,e){var i;return i=t.value.symbol?new s.MathNode("mo",[h(t.value.body,t.mode)]):t.value.value?new s.MathNode("mo",p(t.value.value,e)):new s.MathNode("mi",[new s.TextNode(t.value.body.slice(1))])},u.mod=function(t,e){var i=[];if(("pod"===t.value.modType||"pmod"===t.value.modType)&&i.push(new s.MathNode("mo",[h("(",t.mode)])),"pod"!==t.value.modType&&i.push(new s.MathNode("mo",[h("mod",t.mode)])),t.value.value){var n=new s.MathNode("mspace");n.setAttribute("width","0.333333em"),i.push(n),i=i.concat(p(t.value.value,e))}return("pod"===t.value.modType||"pmod"===t.value.modType)&&i.push(new s.MathNode("mo",[h(")",t.mode)])),new s.MathNode("mo",i)},u.katex=function(){var t=new s.MathNode("mtext",[new s.TextNode("KaTeX")]);return t},u.font=function(t,e){var i=t.value.font;return m(t.value.body,e.withFont(i))},u.delimsizing=function(t){var e=[];"."!==t.value.value&&e.push(h(t.value.value,t.mode));var i=new s.MathNode("mo",e);return"mopen"===t.value.mclass||"mclose"===t.value.mclass?i.setAttribute("fence","true"):i.setAttribute("fence","false"),i},u.styling=function(t,e){var i=p(t.value.value,e),n=new s.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},r=o[t.value.style];return n.setAttribute("scriptlevel",r[0]),n.setAttribute("displaystyle",r[1]),n},u.sizing=function(t,e){var n=p(t.value.value,e),o=new s.MathNode("mstyle",n);return o.setAttribute("mathsize",i.sizingMultiplier[t.value.size]+"em"),o},u.overline=function(t,e){var i=new s.MathNode("mo",[new s.TextNode("\u203e")]);i.setAttribute("stretchy","true");var n=new s.MathNode("mover",[m(t.value.body,e),i]);return n.setAttribute("accent","true"),n},u.underline=function(t,e){var i=new s.MathNode("mo",[new s.TextNode("\u203e")]);i.setAttribute("stretchy","true");var n=new s.MathNode("munder",[m(t.value.body,e),i]);return n.setAttribute("accentunder","true"),n},u.rule=function(){var t=new s.MathNode("mrow");return t},u.kern=function(){var t=new s.MathNode("mrow");return t},u.llap=function(t,e){var i=new s.MathNode("mpadded",[m(t.value.body,e)]);return i.setAttribute("lspace","-1width"),i.setAttribute("width","0px"),i},u.rlap=function(t,e){var i=new s.MathNode("mpadded",[m(t.value.body,e)]);return i.setAttribute("width","0px"),i},u.phantom=function(t,e){var i=p(t.value.value,e);return new s.MathNode("mphantom",i)},u.mclass=function(t,e){var i=p(t.value.value,e);return new s.MathNode("mstyle",i)};var p=function(t,e){for(var i=[],n=0;n<t.length;n++){var s=t[n];i.push(m(s,e))}return i},m=function(t,e){if(!t)return new s.MathNode("mrow");if(u[t.type])return u[t.type](t,e);throw new o("Got group of unknown type: '"+t.type+"'")},f=function(t,e,i){var n=p(t,i),o=new s.MathNode("mrow",n),r=new s.MathNode("annotation",[new s.TextNode(e)]);r.setAttribute("encoding","application/x-tex");var a=new s.MathNode("semantics",[o,r]),c=new s.MathNode("math",[a]);return l(["katex-mathml"],[c])};e.exports=f},{"./ParseError":6,"./buildCommon":10,"./fontMetrics":17,"./mathMLTree":20,"./symbols":23,"./utils":25}],13:[function(t,e){var i=t("./buildHTML"),n=t("./buildMathML"),s=t("./buildCommon"),o=t("./Options"),r=t("./Settings"),a=t("./Style"),l=s.makeSpan,c=function(t,e,s){s=s||new r({});var c=a.TEXT;s.displayMode&&(c=a.DISPLAY);var h=new o({style:c,size:"size5"}),d=n(t,e,h),u=i(t,h),p=l(["katex"],[d,u]);return s.displayMode?l(["katex-display"],[p]):p};e.exports=c},{"./Options":5,"./Settings":8,"./Style":9,"./buildCommon":10,"./buildHTML":11,"./buildMathML":12}],14:[function(t,e){var i=t("./ParseError"),n=t("./Style"),s=t("./buildCommon"),o=t("./fontMetrics"),r=t("./symbols"),a=t("./utils"),l=s.makeSpan,c=function(t,e){return r.math[t]&&r.math[t].replace?o.getCharacterMetrics(r.math[t].replace,e):o.getCharacterMetrics(t,e)},h=function(t,e,i,n){return s.makeSymbol(t,"Size"+e+"-Regular",i,n)},d=function(t,e,i,n){n=n||[];var s=l(n.concat(["style-wrap",i.style.reset(),e.cls()]),[t],i),o=e.sizeMultiplier/i.style.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=e.sizeMultiplier,s},u=function(t,e,i,n,o,r){var a=s.makeSymbol(t,"Main-Regular",o,n),l=d(a,e,n,r);if(i){var c=(1-n.style.sizeMultiplier/e.sizeMultiplier)*n.style.metrics.axisHeight;l.style.top=c+"em",l.height-=c,l.depth+=c}return l},p=function(t,e,i,s,o,r){var a=h(t,e,o,s),c=d(l(["delimsizing","size"+e],[a],s),n.TEXT,s,r);if(i){var u=(1-s.style.sizeMultiplier)*s.style.metrics.axisHeight;c.style.top=u+"em",c.height-=u,c.depth+=u}return c},m=function(t,e,i){var n;"Size1-Regular"===e?n="delim-size1":"Size4-Regular"===e&&(n="delim-size4");var o=l(["delimsizinginner",n],[l([],[s.makeSymbol(t,e,i)])]);return{type:"elem",elem:o}},f=function(t,e,i,o,r,a){var h,u,p,f;h=p=f=t,u=null;var g="Size1-Regular";"\\uparrow"===t?p=f="\u23d0":"\\Uparrow"===t?p=f="\u2016":"\\downarrow"===t?h=p="\u23d0":"\\Downarrow"===t?h=p="\u2016":"\\updownarrow"===t?(h="\\uparrow",p="\u23d0",f="\\downarrow"):"\\Updownarrow"===t?(h="\\Uparrow",p="\u2016",f="\\Downarrow"):"["===t||"\\lbrack"===t?(h="\u23a1",p="\u23a2",f="\u23a3",g="Size4-Regular"):"]"===t||"\\rbrack"===t?(h="\u23a4",p="\u23a5",f="\u23a6",g="Size4-Regular"):"\\lfloor"===t?(p=h="\u23a2",f="\u23a3",g="Size4-Regular"):"\\lceil"===t?(h="\u23a1",p=f="\u23a2",g="Size4-Regular"):"\\rfloor"===t?(p=h="\u23a5",f="\u23a6",g="Size4-Regular"):"\\rceil"===t?(h="\u23a4",p=f="\u23a5",g="Size4-Regular"):"("===t?(h="\u239b",p="\u239c",f="\u239d",g="Size4-Regular"):")"===t?(h="\u239e",p="\u239f",f="\u23a0",g="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(h="\u23a7",u="\u23a8",f="\u23a9",p="\u23aa",g="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(h="\u23ab",u="\u23ac",f="\u23ad",p="\u23aa",g="Size4-Regular"):"\\lgroup"===t?(h="\u23a7",f="\u23a9",p="\u23aa",g="Size4-Regular"):"\\rgroup"===t?(h="\u23ab",f="\u23ad",p="\u23aa",g="Size4-Regular"):"\\lmoustache"===t?(h="\u23a7",f="\u23ad",p="\u23aa",g="Size4-Regular"):"\\rmoustache"===t?(h="\u23ab",f="\u23a9",p="\u23aa",g="Size4-Regular"):"\\surd"===t&&(h="\ue001",f="\u23b7",p="\ue000",g="Size4-Regular");var v=c(h,g),y=v.height+v.depth,b=c(p,g),S=b.height+b.depth,E=c(f,g),T=E.height+E.depth,w=0,L=1;if(null!==u){var k=c(u,g);w=k.height+k.depth,L=2}var _=y+T+w,C=Math.ceil((e-_)/(L*S)),x=_+C*L*S,A=o.style.metrics.axisHeight;i&&(A*=o.style.sizeMultiplier);var I=x/2-A,D=[];D.push(m(f,g,r));var M;if(null===u)for(M=0;C>M;M++)D.push(m(p,g,r));else{for(M=0;C>M;M++)D.push(m(p,g,r));for(D.push(m(u,g,r)),M=0;C>M;M++)D.push(m(p,g,r))}D.push(m(h,g,r));var R=s.makeVList(D,"bottom",I,o);return d(l(["delimsizing","mult"],[R],o),n.TEXT,o,a)},g=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],v=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],y=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],b=[0,1.2,1.8,2.4,3],S=function(t,e,n,s,o){if("<"===t||"\\lt"===t?t="\\langle":(">"===t||"\\gt"===t)&&(t="\\rangle"),a.contains(g,t)||a.contains(y,t))return p(t,e,!1,n,s,o);if(a.contains(v,t))return f(t,b[e],!1,n,s,o);throw new i("Illegal delimiter: '"+t+"'")},E=[{type:"small",style:n.SCRIPTSCRIPT},{type:"small",style:n.SCRIPT},{type:"small",style:n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],T=[{type:"small",style:n.SCRIPTSCRIPT},{type:"small",style:n.SCRIPT},{type:"small",style:n.TEXT},{type:"stack"}],w=[{type:"small",style:n.SCRIPTSCRIPT},{type:"small",style:n.SCRIPT},{type:"small",style:n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],L=function(t){return"small"===t.type?"Main-Regular":"large"===t.type?"Size"+t.size+"-Regular":"stack"===t.type?"Size4-Regular":void 0},k=function(t,e,i,n){for(var s=Math.min(2,3-n.style.size),o=s;o<i.length&&"stack"!==i[o].type;o++){var r=c(t,L(i[o])),a=r.height+r.depth;if("small"===i[o].type&&(a*=i[o].style.sizeMultiplier),a>e)return i[o]}return i[i.length-1]},_=function(t,e,i,n,s,o){"<"===t||"\\lt"===t?t="\\langle":(">"===t||"\\gt"===t)&&(t="\\rangle");var r;r=a.contains(y,t)?E:a.contains(g,t)?w:T;var l=k(t,e,r,n);return"small"===l.type?u(t,l.style,i,n,s,o):"large"===l.type?p(t,l.size,i,n,s,o):"stack"===l.type?f(t,e,i,n,s,o):void 0},C=function(t,e,i,n,s,r){var a=n.style.metrics.axisHeight*n.style.sizeMultiplier,l=901,c=5/o.metrics.ptPerEm,h=Math.max(e-a,i+a),d=Math.max(h/500*l,2*h-c);return _(t,d,!0,n,s,r)};e.exports={sizedDelim:S,customSizedDelim:_,leftRightDelim:C}},{"./ParseError":6,"./Style":9,"./buildCommon":10,"./fontMetrics":17,"./symbols":23,"./utils":25}],15:[function(t,e){function i(t,e,i){this.classes=t||[],this.children=e||[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={},this.attributes={},i&&(i.style.isTight()&&this.classes.push("mtight"),i.getColor()&&(this.style.color=i.getColor()))}function n(t){this.children=t||[],this.height=0,this.depth=0,this.maxFontSize=0}function s(t,e,i,n,s,r,a){this.value=t||"",this.height=e||0,this.depth=i||0,this.italic=n||0,this.skew=s||0,this.classes=r||[],this.style=a||{},this.maxFontSize=0,o.cjkRegex.test(t)&&this.classes.push(o.hangulRegex.test(t)?"hangul_fallback":"cjk_fallback"),/[\xee\xef\xed\xec]/.test(this.value)&&(this.value=l[this.value])}var o=t("./unicodeRegexes"),r=t("./utils"),a=function(t){t=t.slice();for(var e=t.length-1;e>=0;e--)t[e]||t.splice(e,1);return t.join(" ")};i.prototype.setAttribute=function(t,e){this.attributes[t]=e},i.prototype.tryCombine=function(){return!1},i.prototype.toNode=function(){var t=document.createElement("span");t.className=a(this.classes);for(var e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t.style[e]=this.style[e]);for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&t.setAttribute(i,this.attributes[i]);for(var n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t},i.prototype.toMarkup=function(){var t="<span";this.classes.length&&(t+=' class="',t+=r.escape(a(this.classes)),t+='"');var e="";for(var i in this.style)this.style.hasOwnProperty(i)&&(e+=r.hyphenate(i)+":"+this.style[i]+";");e&&(t+=' style="'+r.escape(e)+'"');for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="',t+=r.escape(this.attributes[n]),t+='"');t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</span>"},n.prototype.toNode=function(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},n.prototype.toMarkup=function(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t};var l={"\xee":"\u0131\u0302","\xef":"\u0131\u0308","\xed":"\u0131\u0301","\xec":"\u0131\u0300"};s.prototype.tryCombine=function(t){if(!t||!(t instanceof s)||this.italic>0||a(this.classes)!==a(t.classes)||this.skew!==t.skew||this.maxFontSize!==t.maxFontSize)return!1;for(var e in this.style)if(this.style.hasOwnProperty(e)&&this.style[e]!==t.style[e])return!1;for(e in t.style)if(t.style.hasOwnProperty(e)&&this.style[e]!==t.style[e])return!1;return this.value+=t.value,this.height=Math.max(this.height,t.height),this.depth=Math.max(this.depth,t.depth),this.italic=t.italic,!0},s.prototype.toNode=function(){var t=document.createTextNode(this.value),e=null;this.italic>0&&(e=document.createElement("span"),e.style.marginRight=this.italic+"em"),this.classes.length>0&&(e=e||document.createElement("span"),e.className=a(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(e=e||document.createElement("span"),e.style[i]=this.style[i]);return e?(e.appendChild(t),e):t},s.prototype.toMarkup=function(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=r.escape(a(this.classes)),e+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=r.hyphenate(n)+":"+this.style[n]+";");i&&(t=!0,e+=' style="'+r.escape(i)+'"');var s=r.escape(this.value);return t?(e+=">",e+=s,e+="</span>"):s},e.exports={span:i,documentFragment:n,symbolNode:s}},{"./unicodeRegexes":24,"./utils":25}],16:[function(t,e){function i(t,e){for(var i=[],n=[i],s=[];;){var r=t.parseExpression(!1,null);i.push(new a("ordgroup",r,t.mode));var l=t.nextToken.text;if("&"===l)t.consume();else{if("\\end"===l)break;if("\\\\"!==l&&"\\cr"!==l)throw new o("Expected & or \\\\ or \\end",t.nextToken);var c=t.parseFunction();s.push(c.value.size),i=[],n.push(i)}}return e.body=n,e.rowGaps=s,new a(e.type,e,t.mode)}function n(t,i,n){"string"==typeof t&&(t=[t]),"number"==typeof i&&(i={numArgs:i});for(var s={numArgs:i.numArgs||0,argTypes:i.argTypes,greediness:1,allowedInText:!!i.allowedInText,numOptionalArgs:i.numOptionalArgs||0,handler:n},o=0;o<t.length;++o)e.exports[t[o]]=s}var s=t("./parseData"),o=t("./ParseError"),r=t("./Style"),a=s.ParseNode;n("array",{numArgs:1},function(t,e){var n=e[0];n=n.value.map?n.value:[n];var s=n.map(function(t){var e=t.value;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};throw new o("Unknown column alignment: "+t.value,t)}),r={type:"array",cols:s,hskipBeforeAndAfter:!0};return r=i(t.parser,r)}),n(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],{},function(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName],n={type:"array",hskipBeforeAndAfter:!1};return n=i(t.parser,n),e&&(n=new a("leftright",{body:[n],left:e[0],right:e[1]},t.mode)),n}),n("cases",{},function(t){var e={type:"array",arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:r.TEXT.metrics.quad},{type:"align",align:"l",pregap:0,postgap:0}]};return e=i(t.parser,e),e=new a("leftright",{body:[e],left:"\\{",right:"."},t.mode)}),n("aligned",{},function(t){var e={type:"array",cols:[]};e=i(t.parser,e);var n=new a("ordgroup",[],t.mode),s=0;e.value.body.forEach(function(t){var e;for(e=1;e<t.length;e+=2)t[e].value.unshift(n);
s<t.length&&(s=t.length)});for(var o=0;s>o;++o){var r="r",l=0;o%2===1?r="l":o>0&&(l=2),e.value.cols[o]={type:"align",align:r,pregap:l,postgap:0}}return e})},{"./ParseError":6,"./Style":9,"./parseData":21}],17:[function(t,e){var i=(t("./Style"),t("./unicodeRegexes").cjkRegex),n={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25]},s=.04,o=.111,r=.166,a=.2,l=.6,c=.1,h=10,d=2/h,u={defaultRuleThickness:s,bigOpSpacing1:o,bigOpSpacing2:r,bigOpSpacing3:a,bigOpSpacing4:l,bigOpSpacing5:c,ptPerEm:h,doubleRuleSep:d},p=t("./fontMetricsData"),m={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"A","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xde":"o","\xdf":"B","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"a","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xfe":"o","\xff":"y","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"},f=function(t,e){var n=t.charCodeAt(0);t[0]in m?n=m[t[0]].charCodeAt(0):i.test(t[0])&&(n="M".charCodeAt(0));var s=p[e][n];return s?{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}:void 0};e.exports={metrics:u,sigmas:n,getCharacterMetrics:f}},{"./Style":9,"./fontMetricsData":18,"./unicodeRegexes":24}],18:[function(t,e){e.exports={"AMS-Regular":{65:[0,.68889,0,0],66:[0,.68889,0,0],67:[0,.68889,0,0],68:[0,.68889,0,0],69:[0,.68889,0,0],70:[0,.68889,0,0],71:[0,.68889,0,0],72:[0,.68889,0,0],73:[0,.68889,0,0],74:[.16667,.68889,0,0],75:[0,.68889,0,0],76:[0,.68889,0,0],77:[0,.68889,0,0],78:[0,.68889,0,0],79:[.16667,.68889,0,0],80:[0,.68889,0,0],81:[.16667,.68889,0,0],82:[0,.68889,0,0],83:[0,.68889,0,0],84:[0,.68889,0,0],85:[0,.68889,0,0],86:[0,.68889,0,0],87:[0,.68889,0,0],88:[0,.68889,0,0],89:[0,.68889,0,0],90:[0,.68889,0,0],107:[0,.68889,0,0],165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:[0,.68889,0,0],295:[0,.68889,0,0],710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:[.08167,.58167,0,0],1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:[0,.68889,0,0],8487:[0,.68889,0,0],8498:[0,.68889,0,0],8502:[0,.68889,0,0],8503:[0,.68889,0,0],8504:[0,.68889,0,0],8513:[0,.68889,0,0],8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:[0,.69224,0,0],8625:[0,.69224,0,0],8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:[0,.68889,0,0],8709:[.08167,.58167,0,0],8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:[.08167,.58167,0,0],8733:[0,.69224,0,0],8736:[0,.69224,0,0],8737:[0,.69224,0,0],8738:[.03517,.52239,0,0],8739:[.08167,.58167,0,0],8740:[.25142,.74111,0,0],8741:[.08167,.58167,0,0],8742:[.25142,.74111,0,0],8756:[0,.69224,0,0],8757:[0,.69224,0,0],8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:[.08167,.58167,0,0],8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:[0,.69224,0,0],8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:[0,.69224,0,0],8873:[0,.69224,0,0],8874:[0,.69224,0,0],8876:[0,.68889,0,0],8877:[0,.68889,0,0],8878:[0,.68889,0,0],8879:[0,.68889,0,0],8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:[.08167,.58167,0,0],8905:[.08167,.58167,0,0],8906:[.08167,.58167,0,0],8907:[0,.69224,0,0],8908:[0,.69224,0,0],8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:[0,.69224,0,0],8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:[0,.69224,0,0],9488:[0,.69224,0,0],9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:[0,.69224,0,0],10016:[0,.69224,0,0],10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:[.08167,.58167,0,0],57351:[.08167,.58167,0,0],57352:[.08167,.58167,0,0],57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:[0,.64444,0,0],55:[.19444,.43056,0,0],56:[0,.64444,0,0],57:[.19444,.43056,0,0],65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889]},"Fraktur-Regular":{33:[0,.69141,0,0],34:[0,.69141,0,0],38:[0,.69141,0,0],39:[0,.69141,0,0],40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:[0,.47534,0,0],49:[0,.47534,0,0],50:[0,.47534,0,0],51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:[0,.69141,0,0],55:[.18906,.47534,0,0],56:[0,.69141,0,0],57:[.18906,.47534,0,0],58:[0,.47534,0,0],59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:[0,.69141,0,0],65:[0,.69141,0,0],66:[0,.69141,0,0],67:[0,.69141,0,0],68:[0,.69141,0,0],69:[0,.69141,0,0],70:[.12604,.69141,0,0],71:[0,.69141,0,0],72:[.06302,.69141,0,0],73:[0,.69141,0,0],74:[.12604,.69141,0,0],75:[0,.69141,0,0],76:[0,.69141,0,0],77:[0,.69141,0,0],78:[0,.69141,0,0],79:[0,.69141,0,0],80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:[0,.69141,0,0],83:[0,.69141,0,0],84:[0,.69141,0,0],85:[0,.69141,0,0],86:[0,.69141,0,0],87:[0,.69141,0,0],88:[0,.69141,0,0],89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:[0,.69141,0,0],97:[0,.47534,0,0],98:[0,.69141,0,0],99:[0,.47534,0,0],100:[0,.62119,0,0],101:[0,.47534,0,0],102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:[0,.69141,0,0],106:[0,.69141,0,0],107:[0,.69141,0,0],108:[0,.69141,0,0],109:[0,.47534,0,0],110:[0,.47534,0,0],111:[0,.47534,0,0],112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:[0,.47534,0,0],115:[0,.47534,0,0],116:[0,.62119,0,0],117:[0,.47534,0,0],118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],8216:[0,.69141,0,0],8217:[0,.69141,0,0],58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:[0,.69141,0,0],58118:[0,.62119,0,0],58119:[0,.47534,0,0]},"Main-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:[0,.44444,0,0],46:[0,.15556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.44444,0,0],59:[.19444,.44444,0,0],60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,0,0],67:[0,.68611,0,0],68:[0,.68611,0,0],69:[0,.68611,0,0],70:[0,.68611,0,0],71:[0,.68611,0,0],72:[0,.68611,0,0],73:[0,.68611,0,0],74:[0,.68611,0,0],75:[0,.68611,0,0],76:[0,.68611,0,0],77:[0,.68611,0,0],78:[0,.68611,0,0],79:[0,.68611,0,0],80:[0,.68611,0,0],81:[.19444,.68611,0,0],82:[0,.68611,0,0],83:[0,.68611,0,0],84:[0,.68611,0,0],85:[0,.68611,0,0],86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:[0,.68611,0,0],89:[0,.68611,.02875,0],90:[0,.68611,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.13444,.03194,0],96:[0,.69444,0,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,0,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:[0,.44444,0,0],121:[.19444,.44444,.01597,0],122:[0,.44444,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],172:[0,.44444,0,0],175:[0,.59611,0,0],176:[0,.69444,0,0],177:[.13333,.63333,0,0],180:[0,.69444,0,0],215:[.13333,.63333,0,0],247:[.13333,.63333,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.59611,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.69444,0,0],772:[0,.59611,0,0],774:[0,.69444,0,0],775:[0,.69444,0,0],776:[0,.69444,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],824:[.19444,.69444,0,0],915:[0,.68611,0,0],916:[0,.68611,0,0],920:[0,.68611,0,0],923:[0,.68611,0,0],926:[0,.68611,0,0],928:[0,.68611,0,0],931:[0,.68611,0,0],933:[0,.68611,0,0],934:[0,.68611,0,0],936:[0,.68611,0,0],937:[0,.68611,0,0],8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8242:[0,.55556,0,0],8407:[0,.72444,.15486,0],8463:[0,.69444,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,0],8472:[.19444,.44444,0,0],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.10889,.39111,0,0],8593:[.19444,.69444,0,0],8594:[-.10889,.39111,0,0],8595:[.19444,.69444,0,0],8596:[-.10889,.39111,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:[.19444,.69444,0,0],8658:[-.10889,.39111,0,0],8659:[.19444,.69444,0,0],8660:[-.10889,.39111,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.06389,0],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68611,0,0],8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:[0,.44444,0,0],8734:[0,.44444,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:[.19444,.69444,0,0],8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:[0,.55556,0,0],8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:[.19444,.69444,0,0],9657:[-.02778,.47222,0,0],9661:[.19444,.69444,0,0],9667:[-.02778,.47222,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10815:[0,.68611,0,0],10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0]},"Main-Italic":{33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:[0,.68333,0,0],66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:[0,.68333,0,0],77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],163:[0,.69444,0,0],305:[0,.43056,0,.02778],567:[.19444,.43056,0,.08334],768:[0,.69444,0,0],769:[0,.69444,.09694,0],770:[0,.69444,.06646,0],771:[0,.66786,.11585,0],772:[0,.56167,.10333,0],774:[0,.69444,.10806,0],775:[0,.66786,.11752,0],776:[0,.66786,.10474,0],778:[0,.69444,0,0],779:[0,.69444,.1225,0],780:[0,.62847,.08295,0],915:[0,.68333,.13305,0],916:[0,.68333,0,0],920:[0,.68333,.09403,0],923:[0,.68333,0,0],926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:[0,.68889,0,0]},"Main-Regular":{32:[0,0,0,0],33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68333,0,0],66:[0,.68333,0,0],67:[0,.68333,0,0],68:[0,.68333,0,0],69:[0,.68333,0,0],70:[0,.68333,0,0],71:[0,.68333,0,0],72:[0,.68333,0,0],73:[0,.68333,0,0],74:[0,.68333,0,0],75:[0,.68333,0,0],76:[0,.68333,0,0],77:[0,.68333,0,0],78:[0,.68333,0,0],79:[0,.68333,0,0],80:[0,.68333,0,0],81:[.19444,.68333,0,0],82:[0,.68333,0,0],83:[0,.68333,0,0],84:[0,.68333,0,0],85:[0,.68333,0,0],86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:[0,.68333,0,0],89:[0,.68333,.025,0],90:[0,.68333,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.12056,.02778,0],96:[0,.69444,0,0],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,0],100:[0,.69444,0,0],101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:[0,.69444,0,0],105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.31786,0,0],160:[0,0,0,0],168:[0,.66786,0,0],172:[0,.43056,0,0],175:[0,.56778,0,0],176:[0,.69444,0,0],177:[.08333,.58333,0,0],180:[0,.69444,0,0],215:[.08333,.58333,0,0],247:[.08333,.58333,0,0],305:[0,.43056,0,0],567:[.19444,.43056,0,0],710:[0,.69444,0,0],711:[0,.62847,0,0],713:[0,.56778,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.66786,0,0],730:[0,.69444,0,0],732:[0,.66786,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.66786,0,0],772:[0,.56778,0,0],774:[0,.69444,0,0],775:[0,.66786,0,0],776:[0,.66786,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.62847,0,0],824:[.19444,.69444,0,0],915:[0,.68333,0,0],916:[0,.68333,0,0],920:[0,.68333,0,0],923:[0,.68333,0,0],926:[0,.68333,0,0],928:[0,.68333,0,0],931:[0,.68333,0,0],933:[0,.68333,0,0],934:[0,.68333,0,0],936:[0,.68333,0,0],937:[0,.68333,0,0],8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8230:[0,.12,0,0],8242:[0,.55556,0,0],8407:[0,.71444,.15382,0],8463:[0,.68889,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.13313,.36687,0,0],8593:[.19444,.69444,0,0],8594:[-.13313,.36687,0,0],8595:[.19444,.69444,0,0],8596:[-.13313,.36687,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:[.19444,.69444,0,0],8658:[-.13313,.36687,0,0],8659:[.19444,.69444,0,0],8660:[-.13313,.36687,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.05556,.08334],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68333,0,0],8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:[.19444,.69444,0,0],8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8800:[.215,.716,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:[0,.55556,0,0],8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:[.19444,.69444,0,0],9657:[-.03472,.46528,0,0],9661:[.19444,.69444,0,0],9667:[-.03472,.46528,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:[0,.68333,0,0],10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0]},"Math-BoldItalic":{47:[.19444,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:[0,.68611,0,0],72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:[0,.68611,0,0],77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:[0,.69444,0,0],105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:[0,.44444,0,0],121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],915:[0,.68611,.15972,0],916:[0,.68611,0,0],920:[0,.68611,.03194,0],923:[0,.68611,0,0],926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:[0,.68611,0,0],936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:[0,.44444,0,0],946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:[0,.44444,0,0],950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:[0,.44444,0,0],954:[0,.44444,0,0],955:[0,.69444,0,0],956:[.19444,.44444,0,0],957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:[0,.44444,0,0],960:[0,.44444,.03704,0],961:[.19444,.44444,0,0],962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:[.19444,.44444,0,0],967:[.19444,.44444,0,0],968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:[0,.69444,0,0],981:[.19444,.69444,0,0],982:[0,.44444,.03194,0],1009:[.19444,.44444,0,0],1013:[0,.44444,0,0]},"Math-Italic":{47:[.19444,.69444,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"Math-Regular":{65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"SansSerif-Regular":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:[0,.44444,0,0],46:[0,.08333,0,0],47:[.25,.75,0,0],48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:[0,.44444,0,0],59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.125,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:[0,.69444,0,0],89:[0,.69444,.025,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.09444,.02778,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:[0,.69444,0,0],105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,.01389,0],115:[0,.44444,0,0],116:[0,.57143,0,0],117:[0,.44444,0,0],118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:[0,.44444,0,0],121:[.19444,.44444,.01389,0],122:[0,.44444,0,0],126:[.35,.32659,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.67659,0,0],772:[0,.60889,0,0],774:[0,.69444,0,0],775:[0,.67937,0,0],776:[0,.67937,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"Script-Regular":{65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0]},"Size1-Regular":{40:[.35001,.85,0,0],41:[.35001,.85,0,0],47:[.35001,.85,0,0],91:[.35001,.85,0,0],92:[.35001,.85,0,0],93:[.35001,.85,0,0],123:[.35001,.85,0,0],125:[.35001,.85,0,0],710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:[.25001,.75,0,0],8720:[.25001,.75,0,0],8721:[.25001,.75,0,0],8730:[.35001,.85,0,0],8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:[.25001,.75,0,0],8897:[.25001,.75,0,0],8898:[.25001,.75,0,0],8899:[.25001,.75,0,0],8968:[.35001,.85,0,0],8969:[.35001,.85,0,0],8970:[.35001,.85,0,0],8971:[.35001,.85,0,0],9168:[-99e-5,.601,0,0],10216:[.35001,.85,0,0],10217:[.35001,.85,0,0],10752:[.25001,.75,0,0],10753:[.25001,.75,0,0],10754:[.25001,.75,0,0],10756:[.25001,.75,0,0],10758:[.25001,.75,0,0]},"Size2-Regular":{40:[.65002,1.15,0,0],41:[.65002,1.15,0,0],47:[.65002,1.15,0,0],91:[.65002,1.15,0,0],92:[.65002,1.15,0,0],93:[.65002,1.15,0,0],123:[.65002,1.15,0,0],125:[.65002,1.15,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8719:[.55001,1.05,0,0],8720:[.55001,1.05,0,0],8721:[.55001,1.05,0,0],8730:[.65002,1.15,0,0],8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:[.55001,1.05,0,0],8897:[.55001,1.05,0,0],8898:[.55001,1.05,0,0],8899:[.55001,1.05,0,0],8968:[.65002,1.15,0,0],8969:[.65002,1.15,0,0],8970:[.65002,1.15,0,0],8971:[.65002,1.15,0,0],10216:[.65002,1.15,0,0],10217:[.65002,1.15,0,0],10752:[.55001,1.05,0,0],10753:[.55001,1.05,0,0],10754:[.55001,1.05,0,0],10756:[.55001,1.05,0,0],10758:[.55001,1.05,0,0]},"Size3-Regular":{40:[.95003,1.45,0,0],41:[.95003,1.45,0,0],47:[.95003,1.45,0,0],91:[.95003,1.45,0,0],92:[.95003,1.45,0,0],93:[.95003,1.45,0,0],123:[.95003,1.45,0,0],125:[.95003,1.45,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8730:[.95003,1.45,0,0],8968:[.95003,1.45,0,0],8969:[.95003,1.45,0,0],8970:[.95003,1.45,0,0],8971:[.95003,1.45,0,0],10216:[.95003,1.45,0,0],10217:[.95003,1.45,0,0]},"Size4-Regular":{40:[1.25003,1.75,0,0],41:[1.25003,1.75,0,0],47:[1.25003,1.75,0,0],91:[1.25003,1.75,0,0],92:[1.25003,1.75,0,0],93:[1.25003,1.75,0,0],123:[1.25003,1.75,0,0],125:[1.25003,1.75,0,0],710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:[1.25003,1.75,0,0],8968:[1.25003,1.75,0,0],8969:[1.25003,1.75,0,0],8970:[1.25003,1.75,0,0],8971:[1.25003,1.75,0,0],9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:[.65002,1.15,0,0],9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:[.65002,1.15,0,0],9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:[1.25003,1.75,0,0],10217:[1.25003,1.75,0,0],57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{33:[0,.61111,0,0],34:[0,.61111,0,0],35:[0,.61111,0,0],36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:[0,.61111,0,0],39:[0,.61111,0,0],40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:[0,.61111,0,0],49:[0,.61111,0,0],50:[0,.61111,0,0],51:[0,.61111,0,0],52:[0,.61111,0,0],53:[0,.61111,0,0],54:[0,.61111,0,0],55:[0,.61111,0,0],56:[0,.61111,0,0],57:[0,.61111,0,0],58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:[0,.61111,0,0],64:[0,.61111,0,0],65:[0,.61111,0,0],66:[0,.61111,0,0],67:[0,.61111,0,0],68:[0,.61111,0,0],69:[0,.61111,0,0],70:[0,.61111,0,0],71:[0,.61111,0,0],72:[0,.61111,0,0],73:[0,.61111,0,0],74:[0,.61111,0,0],75:[0,.61111,0,0],76:[0,.61111,0,0],77:[0,.61111,0,0],78:[0,.61111,0,0],79:[0,.61111,0,0],80:[0,.61111,0,0],81:[.13889,.61111,0,0],82:[0,.61111,0,0],83:[0,.61111,0,0],84:[0,.61111,0,0],85:[0,.61111,0,0],86:[0,.61111,0,0],87:[0,.61111,0,0],88:[0,.61111,0,0],89:[0,.61111,0,0],90:[0,.61111,0,0],91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:[0,.61111,0,0],95:[.09514,0,0,0],96:[0,.61111,0,0],97:[0,.43056,0,0],98:[0,.61111,0,0],99:[0,.43056,0,0],100:[0,.61111,0,0],101:[0,.43056,0,0],102:[0,.61111,0,0],103:[.22222,.43056,0,0],104:[0,.61111,0,0],105:[0,.61111,0,0],106:[.22222,.61111,0,0],107:[0,.61111,0,0],108:[0,.61111,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:[0,.61111,0,0],127:[0,.61111,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],768:[0,.61111,0,0],769:[0,.61111,0,0],770:[0,.61111,0,0],771:[0,.61111,0,0],772:[0,.56555,0,0],774:[0,.61111,0,0],776:[0,.61111,0,0],778:[0,.61111,0,0],780:[0,.56597,0,0],915:[0,.61111,0,0],916:[0,.61111,0,0],920:[0,.61111,0,0],923:[0,.61111,0,0],926:[0,.61111,0,0],928:[0,.61111,0,0],931:[0,.61111,0,0],933:[0,.61111,0,0],934:[0,.61111,0,0],936:[0,.61111,0,0],937:[0,.61111,0,0],2018:[0,.61111,0,0],2019:[0,.61111,0,0],8242:[0,.61111,0,0]}}
},{}],19:[function(t,e){function i(t,i,n){"string"==typeof t&&(t=[t]),"number"==typeof i&&(i={numArgs:i});for(var s={numArgs:i.numArgs,argTypes:i.argTypes,greediness:void 0===i.greediness?1:i.greediness,allowedInText:!!i.allowedInText,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,handler:n},o=0;o<t.length;++o)e.exports[t[o]]=s}var n=t("./utils"),s=t("./ParseError"),o=t("./parseData"),r=o.ParseNode,a=function(t){return"ordgroup"===t.type?t.value:[t]};i("\\sqrt",{numArgs:1,numOptionalArgs:1},function(t,e){var i=e[0],n=e[1];return{type:"sqrt",body:n,index:i}});var l={"\\text":void 0,"\\textrm":"mathrm","\\textsf":"mathsf","\\texttt":"mathtt","\\textnormal":"mathrm","\\textbf":"mathbf","\\textit":"textit"};i(["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textit"],{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0},function(t,e){var i=e[0];return{type:"text",body:a(i),style:l[t.funcName]}}),i("\\color",{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},function(t,e){var i=e[0],n=e[1];return{type:"color",color:i.value,value:a(n)}}),i("\\overline",{numArgs:1},function(t,e){var i=e[0];return{type:"overline",body:i}}),i("\\underline",{numArgs:1},function(t,e){var i=e[0];return{type:"underline",body:i}}),i("\\rule",{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},function(t,e){var i=e[0],n=e[1],s=e[2];return{type:"rule",shift:i&&i.value,width:n.value,height:s.value}}),i(["\\kern","\\mkern"],{numArgs:1,argTypes:["size"]},function(t,e){return{type:"kern",dimension:e[0].value}}),i("\\KaTeX",{numArgs:0},function(){return{type:"katex"}}),i("\\phantom",{numArgs:1},function(t,e){var i=e[0];return{type:"phantom",value:a(i)}}),i(["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],{numArgs:1},function(t,e){var i=e[0];return{type:"mclass",mclass:"m"+t.funcName.substr(5),value:a(i)}}),i("\\stackrel",{numArgs:2},function(t,e){var i=e[0],n=e[1],s=new r("op",{type:"op",limits:!0,alwaysHandleSupSub:!0,symbol:!1,value:a(n)},n.mode),o=new r("supsub",{base:s,sup:i,sub:null},i.mode);return{type:"mclass",mclass:"mrel",value:[o]}}),i("\\bmod",{numArgs:0},function(){return{type:"mod",modType:"bmod",value:null}}),i(["\\pod","\\pmod","\\mod"],{numArgs:1},function(t,e){var i=e[0];return{type:"mod",modType:t.funcName.substr(1),value:a(i)}});var c={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},h=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","<",">","\\langle","\\rangle","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],d={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak"};i(["\\blue","\\orange","\\pink","\\red","\\green","\\gray","\\purple","\\blueA","\\blueB","\\blueC","\\blueD","\\blueE","\\tealA","\\tealB","\\tealC","\\tealD","\\tealE","\\greenA","\\greenB","\\greenC","\\greenD","\\greenE","\\goldA","\\goldB","\\goldC","\\goldD","\\goldE","\\redA","\\redB","\\redC","\\redD","\\redE","\\maroonA","\\maroonB","\\maroonC","\\maroonD","\\maroonE","\\purpleA","\\purpleB","\\purpleC","\\purpleD","\\purpleE","\\mintA","\\mintB","\\mintC","\\grayA","\\grayB","\\grayC","\\grayD","\\grayE","\\grayF","\\grayG","\\grayH","\\grayI","\\kaBlue","\\kaGreen"],{numArgs:1,allowedInText:!0,greediness:3},function(t,e){var i=e[0];return{type:"color",color:"katex-"+t.funcName.slice(1),value:a(i)}}),i(["\\arcsin","\\arccos","\\arctan","\\arg","\\cos","\\cosh","\\cot","\\coth","\\csc","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\tan","\\tanh"],{numArgs:0},function(t){return{type:"op",limits:!1,symbol:!1,body:t.funcName}}),i(["\\det","\\gcd","\\inf","\\lim","\\liminf","\\limsup","\\max","\\min","\\Pr","\\sup"],{numArgs:0},function(t){return{type:"op",limits:!0,symbol:!1,body:t.funcName}}),i(["\\int","\\iint","\\iiint","\\oint"],{numArgs:0},function(t){return{type:"op",limits:!1,symbol:!0,body:t.funcName}}),i(["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint"],{numArgs:0},function(t){return{type:"op",limits:!0,symbol:!0,body:t.funcName}}),i("\\mathop",{numArgs:1},function(t,e){var i=e[0];return{type:"op",limits:!1,symbol:!1,value:a(i)}}),i(["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac"],{numArgs:2,greediness:2},function(t,e){var i,n=e[0],s=e[1],o=null,r=null,a="auto";switch(t.funcName){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",r=")";break;default:throw new Error("Unrecognized genfrac command")}switch(t.funcName){case"\\dfrac":case"\\dbinom":a="display";break;case"\\tfrac":case"\\tbinom":a="text"}return{type:"genfrac",numer:n,denom:s,hasBarLine:i,leftDelim:o,rightDelim:r,size:a}}),i(["\\llap","\\rlap"],{numArgs:1,allowedInText:!0},function(t,e){var i=e[0];return{type:t.funcName.slice(1),body:i}});var u=function(t,e){if(n.contains(h,t.value))return t;throw new s("Invalid delimiter: '"+t.value+"' after '"+e.funcName+"'",t)};i(["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],{numArgs:1},function(t,e){var i=u(e[0],t);return{type:"delimsizing",size:c[t.funcName].size,mclass:c[t.funcName].mclass,value:i.value}}),i(["\\left","\\right"],{numArgs:1},function(t,e){var i=u(e[0],t);return{type:"leftright",value:i.value}}),i("\\middle",{numArgs:1},function(t,e){var i=u(e[0],t);if(!t.parser.leftrightDepth)throw new s("\\middle without preceding \\left",i);return{type:"middle",value:i.value}}),i(["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],0,null),i(["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],0,null),i(["\\mathrm","\\mathit","\\mathbf","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],{numArgs:1,greediness:2},function(t,e){var i=e[0],n=t.funcName;return n in d&&(n=d[n]),{type:"font",font:n.slice(1),body:i}}),i(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot"],{numArgs:1},function(t,e){var i=e[0];return{type:"accent",accent:t.funcName,base:i}}),i(["\\over","\\choose","\\atop"],{numArgs:0,infix:!0},function(t){var e;switch(t.funcName){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",replaceWith:e,token:t.token}}),i(["\\\\","\\cr"],{numArgs:0,numOptionalArgs:1,argTypes:["size"]},function(t,e){var i=e[0];return{type:"cr",size:i}}),i(["\\begin","\\end"],{numArgs:1,argTypes:["text"]},function(t,e){var i=e[0];if("ordgroup"!==i.type)throw new s("Invalid environment name",i);for(var n="",o=0;o<i.value.length;++o)n+=i.value[o].value;return{type:"environment",name:n,nameGroup:i}})},{"./ParseError":6,"./parseData":21,"./utils":25}],20:[function(t,e){function i(t,e){this.type=t,this.attributes={},this.children=e||[]}function n(t){this.text=t}var s=t("./utils");i.prototype.setAttribute=function(t,e){this.attributes[t]=e},i.prototype.toNode=function(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},i.prototype.toMarkup=function(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=s.escape(this.attributes[e]),t+='"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">"},n.prototype.toNode=function(){return document.createTextNode(this.text)},n.prototype.toMarkup=function(){return s.escape(this.text)},e.exports={MathNode:i,TextNode:n}},{"./utils":25}],21:[function(t,e){function i(t,e,i,n,s){this.type=t,this.value=e,this.mode=i,!n||s&&s.lexer!==n.lexer||(this.lexer=n.lexer,this.start=n.start,this.end=(s||n).end)}e.exports={ParseNode:i}},{}],22:[function(t,e){var i=t("./Parser"),n=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new i(t,e);return n.parse()};e.exports=n},{"./Parser":7}],23:[function(t,e){function i(t,i,n,s,o){e.exports[t][o]={font:i,group:n,replace:s}}e.exports={math:{},text:{}};var n="math",s="text",o="main",r="ams",a="accent",l="bin",c="close",h="inner",d="mathord",u="op",p="open",m="punct",f="rel",g="spacing",v="textord";i(n,o,f,"\u2261","\\equiv"),i(n,o,f,"\u227a","\\prec"),i(n,o,f,"\u227b","\\succ"),i(n,o,f,"\u223c","\\sim"),i(n,o,f,"\u22a5","\\perp"),i(n,o,f,"\u2aaf","\\preceq"),i(n,o,f,"\u2ab0","\\succeq"),i(n,o,f,"\u2243","\\simeq"),i(n,o,f,"\u2223","\\mid"),i(n,o,f,"\u226a","\\ll"),i(n,o,f,"\u226b","\\gg"),i(n,o,f,"\u224d","\\asymp"),i(n,o,f,"\u2225","\\parallel"),i(n,o,f,"\u22c8","\\bowtie"),i(n,o,f,"\u2323","\\smile"),i(n,o,f,"\u2291","\\sqsubseteq"),i(n,o,f,"\u2292","\\sqsupseteq"),i(n,o,f,"\u2250","\\doteq"),i(n,o,f,"\u2322","\\frown"),i(n,o,f,"\u220b","\\ni"),i(n,o,f,"\u221d","\\propto"),i(n,o,f,"\u22a2","\\vdash"),i(n,o,f,"\u22a3","\\dashv"),i(n,o,f,"\u220b","\\owns"),i(n,o,m,".","\\ldotp"),i(n,o,m,"\u22c5","\\cdotp"),i(n,o,v,"#","\\#"),i(s,o,v,"#","\\#"),i(n,o,v,"&","\\&"),i(s,o,v,"&","\\&"),i(n,o,v,"\u2135","\\aleph"),i(n,o,v,"\u2200","\\forall"),i(n,o,v,"\u210f","\\hbar"),i(n,o,v,"\u2203","\\exists"),i(n,o,v,"\u2207","\\nabla"),i(n,o,v,"\u266d","\\flat"),i(n,o,v,"\u2113","\\ell"),i(n,o,v,"\u266e","\\natural"),i(n,o,v,"\u2663","\\clubsuit"),i(n,o,v,"\u2118","\\wp"),i(n,o,v,"\u266f","\\sharp"),i(n,o,v,"\u2662","\\diamondsuit"),i(n,o,v,"\u211c","\\Re"),i(n,o,v,"\u2661","\\heartsuit"),i(n,o,v,"\u2111","\\Im"),i(n,o,v,"\u2660","\\spadesuit"),i(n,o,v,"\u2020","\\dag"),i(n,o,v,"\u2021","\\ddag"),i(n,o,c,"\u23b1","\\rmoustache"),i(n,o,p,"\u23b0","\\lmoustache"),i(n,o,c,"\u27ef","\\rgroup"),i(n,o,p,"\u27ee","\\lgroup"),i(n,o,l,"\u2213","\\mp"),i(n,o,l,"\u2296","\\ominus"),i(n,o,l,"\u228e","\\uplus"),i(n,o,l,"\u2293","\\sqcap"),i(n,o,l,"\u2217","\\ast"),i(n,o,l,"\u2294","\\sqcup"),i(n,o,l,"\u25ef","\\bigcirc"),i(n,o,l,"\u2219","\\bullet"),i(n,o,l,"\u2021","\\ddagger"),i(n,o,l,"\u2240","\\wr"),i(n,o,l,"\u2a3f","\\amalg"),i(n,o,f,"\u27f5","\\longleftarrow"),i(n,o,f,"\u21d0","\\Leftarrow"),i(n,o,f,"\u27f8","\\Longleftarrow"),i(n,o,f,"\u27f6","\\longrightarrow"),i(n,o,f,"\u21d2","\\Rightarrow"),i(n,o,f,"\u27f9","\\Longrightarrow"),i(n,o,f,"\u2194","\\leftrightarrow"),i(n,o,f,"\u27f7","\\longleftrightarrow"),i(n,o,f,"\u21d4","\\Leftrightarrow"),i(n,o,f,"\u27fa","\\Longleftrightarrow"),i(n,o,f,"\u21a6","\\mapsto"),i(n,o,f,"\u27fc","\\longmapsto"),i(n,o,f,"\u2197","\\nearrow"),i(n,o,f,"\u21a9","\\hookleftarrow"),i(n,o,f,"\u21aa","\\hookrightarrow"),i(n,o,f,"\u2198","\\searrow"),i(n,o,f,"\u21bc","\\leftharpoonup"),i(n,o,f,"\u21c0","\\rightharpoonup"),i(n,o,f,"\u2199","\\swarrow"),i(n,o,f,"\u21bd","\\leftharpoondown"),i(n,o,f,"\u21c1","\\rightharpoondown"),i(n,o,f,"\u2196","\\nwarrow"),i(n,o,f,"\u21cc","\\rightleftharpoons"),i(n,r,f,"\u226e","\\nless"),i(n,r,f,"\ue010","\\nleqslant"),i(n,r,f,"\ue011","\\nleqq"),i(n,r,f,"\u2a87","\\lneq"),i(n,r,f,"\u2268","\\lneqq"),i(n,r,f,"\ue00c","\\lvertneqq"),i(n,r,f,"\u22e6","\\lnsim"),i(n,r,f,"\u2a89","\\lnapprox"),i(n,r,f,"\u2280","\\nprec"),i(n,r,f,"\u22e0","\\npreceq"),i(n,r,f,"\u22e8","\\precnsim"),i(n,r,f,"\u2ab9","\\precnapprox"),i(n,r,f,"\u2241","\\nsim"),i(n,r,f,"\ue006","\\nshortmid"),i(n,r,f,"\u2224","\\nmid"),i(n,r,f,"\u22ac","\\nvdash"),i(n,r,f,"\u22ad","\\nvDash"),i(n,r,f,"\u22ea","\\ntriangleleft"),i(n,r,f,"\u22ec","\\ntrianglelefteq"),i(n,r,f,"\u228a","\\subsetneq"),i(n,r,f,"\ue01a","\\varsubsetneq"),i(n,r,f,"\u2acb","\\subsetneqq"),i(n,r,f,"\ue017","\\varsubsetneqq"),i(n,r,f,"\u226f","\\ngtr"),i(n,r,f,"\ue00f","\\ngeqslant"),i(n,r,f,"\ue00e","\\ngeqq"),i(n,r,f,"\u2a88","\\gneq"),i(n,r,f,"\u2269","\\gneqq"),i(n,r,f,"\ue00d","\\gvertneqq"),i(n,r,f,"\u22e7","\\gnsim"),i(n,r,f,"\u2a8a","\\gnapprox"),i(n,r,f,"\u2281","\\nsucc"),i(n,r,f,"\u22e1","\\nsucceq"),i(n,r,f,"\u22e9","\\succnsim"),i(n,r,f,"\u2aba","\\succnapprox"),i(n,r,f,"\u2246","\\ncong"),i(n,r,f,"\ue007","\\nshortparallel"),i(n,r,f,"\u2226","\\nparallel"),i(n,r,f,"\u22af","\\nVDash"),i(n,r,f,"\u22eb","\\ntriangleright"),i(n,r,f,"\u22ed","\\ntrianglerighteq"),i(n,r,f,"\ue018","\\nsupseteqq"),i(n,r,f,"\u228b","\\supsetneq"),i(n,r,f,"\ue01b","\\varsupsetneq"),i(n,r,f,"\u2acc","\\supsetneqq"),i(n,r,f,"\ue019","\\varsupsetneqq"),i(n,r,f,"\u22ae","\\nVdash"),i(n,r,f,"\u2ab5","\\precneqq"),i(n,r,f,"\u2ab6","\\succneqq"),i(n,r,f,"\ue016","\\nsubseteqq"),i(n,r,l,"\u22b4","\\unlhd"),i(n,r,l,"\u22b5","\\unrhd"),i(n,r,f,"\u219a","\\nleftarrow"),i(n,r,f,"\u219b","\\nrightarrow"),i(n,r,f,"\u21cd","\\nLeftarrow"),i(n,r,f,"\u21cf","\\nRightarrow"),i(n,r,f,"\u21ae","\\nleftrightarrow"),i(n,r,f,"\u21ce","\\nLeftrightarrow"),i(n,r,f,"\u25b3","\\vartriangle"),i(n,r,v,"\u210f","\\hslash"),i(n,r,v,"\u25bd","\\triangledown"),i(n,r,v,"\u25ca","\\lozenge"),i(n,r,v,"\u24c8","\\circledS"),i(n,r,v,"\xae","\\circledR"),i(n,r,v,"\u2221","\\measuredangle"),i(n,r,v,"\u2204","\\nexists"),i(n,r,v,"\u2127","\\mho"),i(n,r,v,"\u2132","\\Finv"),i(n,r,v,"\u2141","\\Game"),i(n,r,v,"k","\\Bbbk"),i(n,r,v,"\u2035","\\backprime"),i(n,r,v,"\u25b2","\\blacktriangle"),i(n,r,v,"\u25bc","\\blacktriangledown"),i(n,r,v,"\u25a0","\\blacksquare"),i(n,r,v,"\u29eb","\\blacklozenge"),i(n,r,v,"\u2605","\\bigstar"),i(n,r,v,"\u2222","\\sphericalangle"),i(n,r,v,"\u2201","\\complement"),i(n,r,v,"\xf0","\\eth"),i(n,r,v,"\u2571","\\diagup"),i(n,r,v,"\u2572","\\diagdown"),i(n,r,v,"\u25a1","\\square"),i(n,r,v,"\u25a1","\\Box"),i(n,r,v,"\u25ca","\\Diamond"),i(n,r,v,"\xa5","\\yen"),i(n,r,v,"\u2713","\\checkmark"),i(n,r,v,"\u2136","\\beth"),i(n,r,v,"\u2138","\\daleth"),i(n,r,v,"\u2137","\\gimel"),i(n,r,v,"\u03dd","\\digamma"),i(n,r,v,"\u03f0","\\varkappa"),i(n,r,p,"\u250c","\\ulcorner"),i(n,r,c,"\u2510","\\urcorner"),i(n,r,p,"\u2514","\\llcorner"),i(n,r,c,"\u2518","\\lrcorner"),i(n,r,f,"\u2266","\\leqq"),i(n,r,f,"\u2a7d","\\leqslant"),i(n,r,f,"\u2a95","\\eqslantless"),i(n,r,f,"\u2272","\\lesssim"),i(n,r,f,"\u2a85","\\lessapprox"),i(n,r,f,"\u224a","\\approxeq"),i(n,r,l,"\u22d6","\\lessdot"),i(n,r,f,"\u22d8","\\lll"),i(n,r,f,"\u2276","\\lessgtr"),i(n,r,f,"\u22da","\\lesseqgtr"),i(n,r,f,"\u2a8b","\\lesseqqgtr"),i(n,r,f,"\u2251","\\doteqdot"),i(n,r,f,"\u2253","\\risingdotseq"),i(n,r,f,"\u2252","\\fallingdotseq"),i(n,r,f,"\u223d","\\backsim"),i(n,r,f,"\u22cd","\\backsimeq"),i(n,r,f,"\u2ac5","\\subseteqq"),i(n,r,f,"\u22d0","\\Subset"),i(n,r,f,"\u228f","\\sqsubset"),i(n,r,f,"\u227c","\\preccurlyeq"),i(n,r,f,"\u22de","\\curlyeqprec"),i(n,r,f,"\u227e","\\precsim"),i(n,r,f,"\u2ab7","\\precapprox"),i(n,r,f,"\u22b2","\\vartriangleleft"),i(n,r,f,"\u22b4","\\trianglelefteq"),i(n,r,f,"\u22a8","\\vDash"),i(n,r,f,"\u22aa","\\Vvdash"),i(n,r,f,"\u2323","\\smallsmile"),i(n,r,f,"\u2322","\\smallfrown"),i(n,r,f,"\u224f","\\bumpeq"),i(n,r,f,"\u224e","\\Bumpeq"),i(n,r,f,"\u2267","\\geqq"),i(n,r,f,"\u2a7e","\\geqslant"),i(n,r,f,"\u2a96","\\eqslantgtr"),i(n,r,f,"\u2273","\\gtrsim"),i(n,r,f,"\u2a86","\\gtrapprox"),i(n,r,l,"\u22d7","\\gtrdot"),i(n,r,f,"\u22d9","\\ggg"),i(n,r,f,"\u2277","\\gtrless"),i(n,r,f,"\u22db","\\gtreqless"),i(n,r,f,"\u2a8c","\\gtreqqless"),i(n,r,f,"\u2256","\\eqcirc"),i(n,r,f,"\u2257","\\circeq"),i(n,r,f,"\u225c","\\triangleq"),i(n,r,f,"\u223c","\\thicksim"),i(n,r,f,"\u2248","\\thickapprox"),i(n,r,f,"\u2ac6","\\supseteqq"),i(n,r,f,"\u22d1","\\Supset"),i(n,r,f,"\u2290","\\sqsupset"),i(n,r,f,"\u227d","\\succcurlyeq"),i(n,r,f,"\u22df","\\curlyeqsucc"),i(n,r,f,"\u227f","\\succsim"),i(n,r,f,"\u2ab8","\\succapprox"),i(n,r,f,"\u22b3","\\vartriangleright"),i(n,r,f,"\u22b5","\\trianglerighteq"),i(n,r,f,"\u22a9","\\Vdash"),i(n,r,f,"\u2223","\\shortmid"),i(n,r,f,"\u2225","\\shortparallel"),i(n,r,f,"\u226c","\\between"),i(n,r,f,"\u22d4","\\pitchfork"),i(n,r,f,"\u221d","\\varpropto"),i(n,r,f,"\u25c0","\\blacktriangleleft"),i(n,r,f,"\u2234","\\therefore"),i(n,r,f,"\u220d","\\backepsilon"),i(n,r,f,"\u25b6","\\blacktriangleright"),i(n,r,f,"\u2235","\\because"),i(n,r,f,"\u22d8","\\llless"),i(n,r,f,"\u22d9","\\gggtr"),i(n,r,l,"\u22b2","\\lhd"),i(n,r,l,"\u22b3","\\rhd"),i(n,r,f,"\u2242","\\eqsim"),i(n,o,f,"\u22c8","\\Join"),i(n,r,f,"\u2251","\\Doteq"),i(n,r,l,"\u2214","\\dotplus"),i(n,r,l,"\u2216","\\smallsetminus"),i(n,r,l,"\u22d2","\\Cap"),i(n,r,l,"\u22d3","\\Cup"),i(n,r,l,"\u2a5e","\\doublebarwedge"),i(n,r,l,"\u229f","\\boxminus"),i(n,r,l,"\u229e","\\boxplus"),i(n,r,l,"\u22c7","\\divideontimes"),i(n,r,l,"\u22c9","\\ltimes"),i(n,r,l,"\u22ca","\\rtimes"),i(n,r,l,"\u22cb","\\leftthreetimes"),i(n,r,l,"\u22cc","\\rightthreetimes"),i(n,r,l,"\u22cf","\\curlywedge"),i(n,r,l,"\u22ce","\\curlyvee"),i(n,r,l,"\u229d","\\circleddash"),i(n,r,l,"\u229b","\\circledast"),i(n,r,l,"\u22c5","\\centerdot"),i(n,r,l,"\u22ba","\\intercal"),i(n,r,l,"\u22d2","\\doublecap"),i(n,r,l,"\u22d3","\\doublecup"),i(n,r,l,"\u22a0","\\boxtimes"),i(n,r,f,"\u21e2","\\dashrightarrow"),i(n,r,f,"\u21e0","\\dashleftarrow"),i(n,r,f,"\u21c7","\\leftleftarrows"),i(n,r,f,"\u21c6","\\leftrightarrows"),i(n,r,f,"\u21da","\\Lleftarrow"),i(n,r,f,"\u219e","\\twoheadleftarrow"),i(n,r,f,"\u21a2","\\leftarrowtail"),i(n,r,f,"\u21ab","\\looparrowleft"),i(n,r,f,"\u21cb","\\leftrightharpoons"),i(n,r,f,"\u21b6","\\curvearrowleft"),i(n,r,f,"\u21ba","\\circlearrowleft"),i(n,r,f,"\u21b0","\\Lsh"),i(n,r,f,"\u21c8","\\upuparrows"),i(n,r,f,"\u21bf","\\upharpoonleft"),i(n,r,f,"\u21c3","\\downharpoonleft"),i(n,r,f,"\u22b8","\\multimap"),i(n,r,f,"\u21ad","\\leftrightsquigarrow"),i(n,r,f,"\u21c9","\\rightrightarrows"),i(n,r,f,"\u21c4","\\rightleftarrows"),i(n,r,f,"\u21a0","\\twoheadrightarrow"),i(n,r,f,"\u21a3","\\rightarrowtail"),i(n,r,f,"\u21ac","\\looparrowright"),i(n,r,f,"\u21b7","\\curvearrowright"),i(n,r,f,"\u21bb","\\circlearrowright"),i(n,r,f,"\u21b1","\\Rsh"),i(n,r,f,"\u21ca","\\downdownarrows"),i(n,r,f,"\u21be","\\upharpoonright"),i(n,r,f,"\u21c2","\\downharpoonright"),i(n,r,f,"\u21dd","\\rightsquigarrow"),i(n,r,f,"\u21dd","\\leadsto"),i(n,r,f,"\u21db","\\Rrightarrow"),i(n,r,f,"\u21be","\\restriction"),i(n,o,v,"\u2018","`"),i(n,o,v,"$","\\$"),i(s,o,v,"$","\\$"),i(n,o,v,"%","\\%"),i(s,o,v,"%","\\%"),i(n,o,v,"_","\\_"),i(s,o,v,"_","\\_"),i(n,o,v,"\u2220","\\angle"),i(n,o,v,"\u221e","\\infty"),i(n,o,v,"\u2032","\\prime"),i(n,o,v,"\u25b3","\\triangle"),i(n,o,v,"\u0393","\\Gamma"),i(n,o,v,"\u0394","\\Delta"),i(n,o,v,"\u0398","\\Theta"),i(n,o,v,"\u039b","\\Lambda"),i(n,o,v,"\u039e","\\Xi"),i(n,o,v,"\u03a0","\\Pi"),i(n,o,v,"\u03a3","\\Sigma"),i(n,o,v,"\u03a5","\\Upsilon"),i(n,o,v,"\u03a6","\\Phi"),i(n,o,v,"\u03a8","\\Psi"),i(n,o,v,"\u03a9","\\Omega"),i(n,o,v,"\xac","\\neg"),i(n,o,v,"\xac","\\lnot"),i(n,o,v,"\u22a4","\\top"),i(n,o,v,"\u22a5","\\bot"),i(n,o,v,"\u2205","\\emptyset"),i(n,r,v,"\u2205","\\varnothing"),i(n,o,d,"\u03b1","\\alpha"),i(n,o,d,"\u03b2","\\beta"),i(n,o,d,"\u03b3","\\gamma"),i(n,o,d,"\u03b4","\\delta"),i(n,o,d,"\u03f5","\\epsilon"),i(n,o,d,"\u03b6","\\zeta"),i(n,o,d,"\u03b7","\\eta"),i(n,o,d,"\u03b8","\\theta"),i(n,o,d,"\u03b9","\\iota"),i(n,o,d,"\u03ba","\\kappa"),i(n,o,d,"\u03bb","\\lambda"),i(n,o,d,"\u03bc","\\mu"),i(n,o,d,"\u03bd","\\nu"),i(n,o,d,"\u03be","\\xi"),i(n,o,d,"o","\\omicron"),i(n,o,d,"\u03c0","\\pi"),i(n,o,d,"\u03c1","\\rho"),i(n,o,d,"\u03c3","\\sigma"),i(n,o,d,"\u03c4","\\tau"),i(n,o,d,"\u03c5","\\upsilon"),i(n,o,d,"\u03d5","\\phi"),i(n,o,d,"\u03c7","\\chi"),i(n,o,d,"\u03c8","\\psi"),i(n,o,d,"\u03c9","\\omega"),i(n,o,d,"\u03b5","\\varepsilon"),i(n,o,d,"\u03d1","\\vartheta"),i(n,o,d,"\u03d6","\\varpi"),i(n,o,d,"\u03f1","\\varrho"),i(n,o,d,"\u03c2","\\varsigma"),i(n,o,d,"\u03c6","\\varphi"),i(n,o,l,"\u2217","*"),i(n,o,l,"+","+"),i(n,o,l,"\u2212","-"),i(n,o,l,"\u22c5","\\cdot"),i(n,o,l,"\u2218","\\circ"),i(n,o,l,"\xf7","\\div"),i(n,o,l,"\xb1","\\pm"),i(n,o,l,"\xd7","\\times"),i(n,o,l,"\u2229","\\cap"),i(n,o,l,"\u222a","\\cup"),i(n,o,l,"\u2216","\\setminus"),i(n,o,l,"\u2227","\\land"),i(n,o,l,"\u2228","\\lor"),i(n,o,l,"\u2227","\\wedge"),i(n,o,l,"\u2228","\\vee"),i(n,o,v,"\u221a","\\surd"),i(n,o,p,"(","("),i(n,o,p,"[","["),i(n,o,p,"\u27e8","\\langle"),i(n,o,p,"\u2223","\\lvert"),i(n,o,p,"\u2225","\\lVert"),i(n,o,c,")",")"),i(n,o,c,"]","]"),i(n,o,c,"?","?"),i(n,o,c,"!","!"),i(n,o,c,"\u27e9","\\rangle"),i(n,o,c,"\u2223","\\rvert"),i(n,o,c,"\u2225","\\rVert"),i(n,o,f,"=","="),i(n,o,f,"<","<"),i(n,o,f,">",">"),i(n,o,f,":",":"),i(n,o,f,"\u2248","\\approx"),i(n,o,f,"\u2245","\\cong"),i(n,o,f,"\u2265","\\ge"),i(n,o,f,"\u2265","\\geq"),i(n,o,f,"\u2190","\\gets"),i(n,o,f,">","\\gt"),i(n,o,f,"\u2208","\\in"),i(n,o,f,"\u2209","\\notin"),i(n,o,f,"\u2282","\\subset"),i(n,o,f,"\u2283","\\supset"),i(n,o,f,"\u2286","\\subseteq"),i(n,o,f,"\u2287","\\supseteq"),i(n,r,f,"\u2288","\\nsubseteq"),i(n,r,f,"\u2289","\\nsupseteq"),i(n,o,f,"\u22a8","\\models"),i(n,o,f,"\u2190","\\leftarrow"),i(n,o,f,"\u2264","\\le"),i(n,o,f,"\u2264","\\leq"),i(n,o,f,"<","\\lt"),i(n,o,f,"\u2260","\\ne"),i(n,o,f,"\u2260","\\neq"),i(n,o,f,"\u2192","\\rightarrow"),i(n,o,f,"\u2192","\\to"),i(n,r,f,"\u2271","\\ngeq"),i(n,r,f,"\u2270","\\nleq"),i(n,o,g,null,"\\!"),i(n,o,g,"\xa0","\\ "),i(n,o,g,"\xa0","~"),i(n,o,g,null,"\\,"),i(n,o,g,null,"\\:"),i(n,o,g,null,"\\;"),i(n,o,g,null,"\\enspace"),i(n,o,g,null,"\\qquad"),i(n,o,g,null,"\\quad"),i(n,o,g,"\xa0","\\space"),i(n,o,m,",",","),i(n,o,m,";",";"),i(n,o,m,":","\\colon"),i(n,r,l,"\u22bc","\\barwedge"),i(n,r,l,"\u22bb","\\veebar"),i(n,o,l,"\u2299","\\odot"),i(n,o,l,"\u2295","\\oplus"),i(n,o,l,"\u2297","\\otimes"),i(n,o,v,"\u2202","\\partial"),i(n,o,l,"\u2298","\\oslash"),i(n,r,l,"\u229a","\\circledcirc"),i(n,r,l,"\u22a1","\\boxdot"),i(n,o,l,"\u25b3","\\bigtriangleup"),i(n,o,l,"\u25bd","\\bigtriangledown"),i(n,o,l,"\u2020","\\dagger"),i(n,o,l,"\u22c4","\\diamond"),i(n,o,l,"\u22c6","\\star"),i(n,o,l,"\u25c3","\\triangleleft"),i(n,o,l,"\u25b9","\\triangleright"),i(n,o,p,"{","\\{"),i(s,o,v,"{","\\{"),i(n,o,c,"}","\\}"),i(s,o,v,"}","\\}"),i(n,o,p,"{","\\lbrace"),i(n,o,c,"}","\\rbrace"),i(n,o,p,"[","\\lbrack"),i(n,o,c,"]","\\rbrack"),i(n,o,p,"\u230a","\\lfloor"),i(n,o,c,"\u230b","\\rfloor"),i(n,o,p,"\u2308","\\lceil"),i(n,o,c,"\u2309","\\rceil"),i(n,o,v,"\\","\\backslash"),i(n,o,v,"\u2223","|"),i(n,o,v,"\u2223","\\vert"),i(n,o,v,"\u2225","\\|"),i(n,o,v,"\u2225","\\Vert"),i(n,o,f,"\u2191","\\uparrow"),i(n,o,f,"\u21d1","\\Uparrow"),i(n,o,f,"\u2193","\\downarrow"),i(n,o,f,"\u21d3","\\Downarrow"),i(n,o,f,"\u2195","\\updownarrow"),i(n,o,f,"\u21d5","\\Updownarrow"),i(n,n,u,"\u2210","\\coprod"),i(n,n,u,"\u22c1","\\bigvee"),i(n,n,u,"\u22c0","\\bigwedge"),i(n,n,u,"\u2a04","\\biguplus"),i(n,n,u,"\u22c2","\\bigcap"),i(n,n,u,"\u22c3","\\bigcup"),i(n,n,u,"\u222b","\\int"),i(n,n,u,"\u222b","\\intop"),i(n,n,u,"\u222c","\\iint"),i(n,n,u,"\u222d","\\iiint"),i(n,n,u,"\u220f","\\prod"),i(n,n,u,"\u2211","\\sum"),i(n,n,u,"\u2a02","\\bigotimes"),i(n,n,u,"\u2a01","\\bigoplus"),i(n,n,u,"\u2a00","\\bigodot"),i(n,n,u,"\u222e","\\oint"),i(n,n,u,"\u2a06","\\bigsqcup"),i(n,n,u,"\u222b","\\smallint"),i(s,o,h,"\u2026","\\textellipsis"),i(n,o,h,"\u2026","\\mathellipsis"),i(s,o,h,"\u2026","\\ldots"),i(n,o,h,"\u2026","\\ldots"),i(n,o,h,"\u22ef","\\cdots"),i(n,o,h,"\u22f1","\\ddots"),i(n,o,v,"\u22ee","\\vdots"),i(n,o,a,"\xb4","\\acute"),i(n,o,a,"`","\\grave"),i(n,o,a,"\xa8","\\ddot"),i(n,o,a,"~","\\tilde"),i(n,o,a,"\xaf","\\bar"),i(n,o,a,"\u02d8","\\breve"),i(n,o,a,"\u02c7","\\check"),i(n,o,a,"^","\\hat"),i(n,o,a,"\u20d7","\\vec"),i(n,o,a,"\u02d9","\\dot"),i(n,o,d,"\u0131","\\imath"),i(n,o,d,"\u0237","\\jmath"),i(s,o,v,"\u2013","--"),i(s,o,v,"\u2014","---"),i(s,o,v,"\u2018","`"),i(s,o,v,"\u2019","'"),i(s,o,v,"\u201c","``"),i(s,o,v,"\u201d","''"),i(n,o,v,"\xb0","\\degree"),i(s,o,v,"\xb0","\\degree"),i(n,o,d,"\xa3","\\pounds"),i(n,r,v,"\u2720","\\maltese"),i(s,r,v,"\u2720","\\maltese"),i(s,o,g,"\xa0","\\ "),i(s,o,g,"\xa0"," "),i(s,o,g,"\xa0","~");var y,b,S='0123456789/@."';for(y=0;y<S.length;y++)b=S.charAt(y),i(n,o,v,b,b);var E='0123456789!@*()-=+[]";:?/.,';for(y=0;y<E.length;y++)b=E.charAt(y),i(s,o,v,b,b);var T="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(y=0;y<T.length;y++)b=T.charAt(y),i(n,o,d,b,b),i(s,o,v,b,b);for(y=192;214>=y;y++)b=String.fromCharCode(y),i(s,o,v,b,b);for(y=216;246>=y;y++)b=String.fromCharCode(y),i(s,o,v,b,b);for(y=248;255>=y;y++)b=String.fromCharCode(y),i(s,o,v,b,b);for(y=1040;1103>=y;y++)b=String.fromCharCode(y),i(s,o,v,b,b);i(s,o,v,"\u2013","\u2013"),i(s,o,v,"\u2014","\u2014"),i(s,o,v,"\u2018","\u2018"),i(s,o,v,"\u2019","\u2019"),i(s,o,v,"\u201c","\u201c"),i(s,o,v,"\u201d","\u201d")},{}],24:[function(t,e){var i=/[\uAC00-\uD7AF]/,n=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/;e.exports={cjkRegex:n,hangulRegex:i}},{}],25:[function(t,e){function i(t){return u[t]}function n(t){return(""+t).replace(p,i)}function s(t){o(t,"")}var o,r=Array.prototype.indexOf,a=function(t,e){if(null==t)return-1;if(r&&t.indexOf===r)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},l=function(t,e){return-1!==a(t,e)},c=function(t,e){return void 0===t?e:t},h=/([A-Z])/g,d=function(t){return t.replace(h,"-$1").toLowerCase()},u={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},p=/[&><"']/g;if("undefined"!=typeof document){var m=document.createElement("span");o="textContent"in m?function(t,e){t.textContent=e}:function(t,e){t.innerText=e}}e.exports={contains:l,deflt:c,escape:n,hyphenate:d,indexOf:a,setTextContent:o,clearNode:s}},{}]},{},[1])(1)}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.renderMathInElement=t()}}(function(){return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return s(i?i:t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e){var i=t("./splitAtDelimiters"),n=function(t,e){for(var n=[{type:"text",data:t}],s=0;s<e.length;s++){var o=e[s];n=i(n,o.left,o.right,o.display||!1)}return n},s=function(t,e){for(var i=n(t,e),s=document.createDocumentFragment(),o=0;o<i.length;o++)if("text"===i[o].type)s.appendChild(document.createTextNode(i[o].data));else{var r=document.createElement("span"),a=i[o].data;try{katex.render(a,r,{displayMode:i[o].display})}catch(l){if(!(l instanceof katex.ParseError))throw l;console.error("KaTeX auto-render: Failed to parse `"+i[o].data+"` with ",l),s.appendChild(document.createTextNode(i[o].rawData));continue}s.appendChild(r)}return s},o=function(t,e,i){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(3===r.nodeType){var a=s(r.textContent,e);n+=a.childNodes.length-1,t.replaceChild(a,r)}else if(1===r.nodeType){var l=-1===i.indexOf(r.nodeName.toLowerCase());l&&o(r,e,i)}}},r={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code"]},a=function(t){for(var e,i,n=1,s=arguments.length;s>n;n++){e=arguments[n];for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l=function(t,e){if(!t)throw new Error("No element provided to render");e=a({},r,e),o(t,e.delimiters,e.ignoredTags)};e.exports=l},{"./splitAtDelimiters":2}],2:[function(t,e){var i=function(t,e,i){for(var n=i,s=0,o=t.length;n<e.length;){var r=e[n];if(0>=s&&e.slice(n,n+o)===t)return n;"\\"===r?n++:"{"===r?s++:"}"===r&&s--,n++}return-1},n=function(t,e,n,s){for(var o=[],r=0;r<t.length;r++)if("text"===t[r].type){var a,l=t[r].data,c=!0,h=0;for(a=l.indexOf(e),-1!==a&&(h=a,o.push({type:"text",data:l.slice(0,h)}),c=!1);;){if(c){if(a=l.indexOf(e,h),-1===a)break;o.push({type:"text",data:l.slice(h,a)}),h=a}else{if(a=i(n,l,h+e.length),-1===a)break;o.push({type:"math",data:l.slice(h+e.length,a),rawData:l.slice(h,a+n.length),display:s}),h=a+n.length}c=!c}o.push({type:"text",data:l.slice(h)})}else o.push(t[r]);return o};e.exports=n},{}]},{},[1])(1)}),function(t){t.extend({debounce:function(t,e,i,n){3==arguments.length&&"boolean"!=typeof i&&(n=i,i=!1);var s;return function(){var o=arguments;n=n||this,i&&!s&&t.apply(n,o),clearTimeout(s),s=setTimeout(function(){i||t.apply(n,o),s=null},e)}},throttle:function(t,e,i){var n,s,o;return function(){s=arguments,o=!0,i=i||this,n||function(){o?(t.apply(i,s),o=!1,n=setTimeout(arguments.callee,e)):n=null}()}}})}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,s){return jQuery.easing[jQuery.easing.def](t,e,i,n,s)},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*s-o)*Math.PI/r))+i},easeOutElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin(2*(e*s-o)*Math.PI/r)+n+i},easeInOutElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(2==(e/=s/2))return i+n;if(r||(r=.3*s*1.5),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return 1>e?-.5*a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*s-o)*Math.PI/r)+i:a*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*s-o)*Math.PI/r)*.5+n+i},easeInBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*(e/=s)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*((e=e/s-1)*e*((o+1)*e+o)+1)+i},easeInOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),(e/=s/2)<1?n/2*e*e*(((o*=1.525)+1)*e-o)+i:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i},easeInBounce:function(t,e,i,n,s){return n-jQuery.easing.easeOutBounce(t,s-e,0,n,s)+i},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?7.5625*n*e*e+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i
},easeInOutBounce:function(t,e,i,n,s){return s/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,n,s)+i:.5*jQuery.easing.easeOutBounce(t,2*e-s,0,n,s)+.5*n+i}}),function(){var t,e,i,n,s,o,r,a,l,c,h,d,u,p,m,f,g,v,y,b=[].slice,S=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=jQuery,t.payment={},t.payment.fn={},t.fn.payment=function(){var e,i;return i=arguments[0],e=2<=arguments.length?b.call(arguments,1):[],t.payment.fn[i].apply(this,e)},s=/(\d{1,4})/g,n=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:s,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:s,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:s,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:s,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:s,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:s,length:[13,14,15,16],cvcLength:[3],luhn:!0}],e=function(t){var e,i,s;for(t=(t+"").replace(/\D/g,""),i=0,s=n.length;s>i;i++)if(e=n[i],e.pattern.test(t))return e},i=function(t){var e,i,s;for(i=0,s=n.length;s>i;i++)if(e=n[i],e.type===t)return e},u=function(t){var e,i,n,s,o,r;for(n=!0,s=0,i=(t+"").split("").reverse(),o=0,r=i.length;r>o;o++)e=i[o],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),s+=e;return s%10===0},d=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document&&null!=(e=document.selection)&&"function"==typeof e.createRange?e.createRange().text:void 0)?!0:!1},p=function(e){return setTimeout(function(){var i,n;return i=t(e.currentTarget),n=i.val(),n=t.payment.formatCardNumber(n),i.val(n)})},a=function(i){var n,s,o,r,a,l,c;return o=String.fromCharCode(i.which),!/^\d+$/.test(o)||(n=t(i.currentTarget),c=n.val(),s=e(c+o),r=(c.replace(/\D/g,"")+o).length,l=16,s&&(l=s.length[s.length.length-1]),r>=l||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==c.length)?void 0:(a=s&&"amex"===s.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,a.test(c)?(i.preventDefault(),n.val(c+" "+o)):a.test(c+o)?(i.preventDefault(),n.val(c+o+" ")):void 0)},o=function(e){var i,n;return i=t(e.currentTarget),n=i.val(),e.meta||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==n.length?void 0:8===e.which&&/\s\d?$/.test(n)?(e.preventDefault(),i.val(n.replace(/\s\d?$/,""))):void 0},l=function(e){var i,n,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(i=t(e.currentTarget),s=i.val()+n,/^\d$/.test(s)&&"0"!==s&&"1"!==s?(e.preventDefault(),i.val("0"+s+" / ")):/^\d\d$/.test(s)?(e.preventDefault(),i.val(""+s+" / ")):void 0):void 0},c=function(e){var i,n,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(i=t(e.currentTarget),s=i.val(),/^\d\d$/.test(s)?i.val(""+s+" / "):void 0):void 0},h=function(e){var i,n,s;return n=String.fromCharCode(e.which),"/"===n?(i=t(e.currentTarget),s=i.val(),/^\d$/.test(s)&&"0"!==s?i.val("0"+s+" / "):void 0):void 0},r=function(e){var i,n;if(!e.meta&&(i=t(e.currentTarget),n=i.val(),8===e.which&&(null==i.prop("selectionStart")||i.prop("selectionStart")===n.length)))return/\s\/\s?\d?$/.test(n)?(e.preventDefault(),i.val(n.replace(/\s\/\s?\d?$/,""))):void 0},v=function(t){var e;return t.metaKey||t.ctrlKey?!0:32===t.which?!1:0===t.which?!0:t.which<33?!0:(e=String.fromCharCode(t.which),!!/[\d\s]/.test(e))},f=function(i){var n,s,o,r;return n=t(i.currentTarget),o=String.fromCharCode(i.which),/^\d+$/.test(o)&&!d(n)?(r=(n.val()+o).replace(/\D/g,""),s=e(r),s?r.length<=s.length[s.length.length-1]:r.length<=16):void 0},g=function(e){var i,n,s;return i=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!d(i)?(s=i.val()+n,s=s.replace(/\D/g,""),s.length>6?!1:void 0):void 0},m=function(e){var i,n,s;return i=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)?(s=i.val()+n,s.length<=4):void 0},y=function(e){var i,s,o,r,a;return i=t(e.currentTarget),a=i.val(),r=t.payment.cardType(a)||"unknown",i.hasClass(r)?void 0:(s=function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)o=n[t],i.push(o.type);return i}(),i.removeClass("unknown"),i.removeClass(s.join(" ")),i.addClass(r),i.toggleClass("identified","unknown"!==r),i.trigger("payment.cardType",r))},t.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",m),this},t.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",g),this.on("keypress",l),this.on("keypress",h),this.on("keypress",c),this.on("keydown",r),this},t.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",f),this.on("keypress",a),this.on("keydown",o),this.on("keyup",y),this.on("paste",p),this},t.payment.fn.restrictNumeric=function(){return this.on("keypress",v),this},t.payment.fn.cardExpiryVal=function(){return t.payment.cardExpiryVal(t(this).val())},t.payment.cardExpiryVal=function(t){var e,i,n,s;return t=t.replace(/\s/g,""),s=t.split("/",2),e=s[0],n=s[1],2===(null!=n?n.length:void 0)&&/^\d+$/.test(n)&&(i=(new Date).getFullYear(),i=i.toString().slice(0,2),n=i+n),e=parseInt(e,10),n=parseInt(n,10),{month:e,year:n}},t.payment.validateCardNumber=function(t){var i,n;return t=(t+"").replace(/\s+|-/g,""),/^\d+$/.test(t)?(i=e(t),i?(n=t.length,S.call(i.length,n)>=0&&(i.luhn===!1||u(t))):!1):!1},t.payment.validateCardExpiry=function(e,i){var n,s,o,r;return"object"==typeof e&&"month"in e&&(r=e,e=r.month,i=r.year),e&&i?(e=t.trim(e),i=t.trim(i),/^\d+$/.test(e)&&/^\d+$/.test(i)&&parseInt(e,10)<=12?(2===i.length&&(o=(new Date).getFullYear(),o=o.toString().slice(0,2),i=o+i),s=new Date(i,e),n=new Date,s.setMonth(s.getMonth()-1),s.setMonth(s.getMonth()+1,1),s>n):!1):!1},t.payment.validateCardCVC=function(e,n){var s,o;return e=t.trim(e),/^\d+$/.test(e)?n?(s=e.length,S.call(null!=(o=i(n))?o.cvcLength:void 0,s)>=0):e.length>=3&&e.length<=4:!1},t.payment.cardType=function(t){var i;return t?(null!=(i=e(t))?i.type:void 0)||null:null},t.payment.formatCardNumber=function(t){var i,n,s,o;return(i=e(t))?(s=i.length[i.length.length-1],t=t.replace(/\D/g,""),t=t.slice(0,+s+1||9e9),i.format.global?null!=(o=t.match(i.format))?o.join(" "):void 0:(n=i.format.exec(t),null!=n&&n.shift(),null!=n?n.join(" "):void 0)):t}}.call(this),function(t){t.fn.changeElementType=function(e){this.each(function(i,n){var s={};t.each(n.attributes,function(t,e){s[e.nodeName]=e.nodeValue});var o=t("<"+e+"/>",s).append(t(n).contents());return t(n).replaceWith(o),o})}}(jQuery),function(t,e,i){"function"==typeof define&&define.amd?define(["jquery"],function(n){return i(n,t,e),n.mobile}):i(t.jQuery,t,e)}(this,document,function(t,e,i){!function(t,e,i,n){function s(t){for(;t&&"undefined"!=typeof t.originalEvent;)t=t.originalEvent;return t}function o(e,i){var o,r,a,l,c,h,d,u,p,m=e.type;if(e=t.Event(e),e.type=i,o=e.originalEvent,r=t.event.props,m.search(/^(mouse|click)/)>-1&&(r=I),o)for(d=r.length,l;d;)l=r[--d],e[l]=o[l];if(m.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==m.search(/^touch/)&&(a=s(o),m=a.touches,c=a.changedTouches,h=m&&m.length?m[0]:c&&c.length?c[0]:n))for(u=0,p=x.length;p>u;u++)l=x[u],e[l]=h[l];return e}function r(e){for(var i,n,s={};e;){i=t.data(e,k);for(n in i)i[n]&&(s[n]=s.hasVirtualBinding=!0);e=e.parentNode}return s}function a(e,i){for(var n;e;){if(n=t.data(e,k),n&&(!i||n[i]))return e;e=e.parentNode}return null}function l(){F=!1}function c(){F=!0}function h(){j=0,P.length=0,U=!1,c()}function d(){l()}function u(){p(),M=setTimeout(function(){M=0,h()},t.vmouse.resetTimerDuration)}function p(){M&&(clearTimeout(M),M=0)}function m(e,i,n){var s;return(n&&n[e]||!n&&a(i.target,e))&&(s=o(i,e),t(i.target).trigger(s)),s}function f(e){var i,n=t.data(e.target,_);U||j&&j===n||(i=m("v"+e.type,e),i&&(i.isDefaultPrevented()&&e.preventDefault(),i.isPropagationStopped()&&e.stopPropagation(),i.isImmediatePropagationStopped()&&e.stopImmediatePropagation()))}function g(e){var i,n,o,a=s(e).touches;a&&1===a.length&&(i=e.target,n=r(i),n.hasVirtualBinding&&(j=B++,t.data(i,_,j),p(),d(),N=!1,o=s(e).touches[0],R=o.pageX,O=o.pageY,m("vmouseover",e,n),m("vmousedown",e,n)))}function v(t){F||(N||m("vmousecancel",t,r(t.target)),N=!0,u())}function y(e){if(!F){var i=s(e).touches[0],n=N,o=t.vmouse.moveDistanceThreshold,a=r(e.target);N=N||Math.abs(i.pageX-R)>o||Math.abs(i.pageY-O)>o,N&&!n&&m("vmousecancel",e,a),m("vmousemove",e,a),u()}}function b(t){if(!F){c();var e,i,n=r(t.target);m("vmouseup",t,n),N||(e=m("vclick",t,n),e&&e.isDefaultPrevented()&&(i=s(t).changedTouches[0],P.push({touchID:j,x:i.clientX,y:i.clientY}),U=!0)),m("vmouseout",t,n),N=!1,u()}}function S(e){var i,n=t.data(e,k);if(n)for(i in n)if(n[i])return!0;return!1}function E(){}function T(e){var i=e.substr(1);return{setup:function(){S(this)||t.data(this,k,{});var n=t.data(this,k);n[e]=!0,D[e]=(D[e]||0)+1,1===D[e]&&z.bind(i,f),t(this).bind(i,E),$&&(D.touchstart=(D.touchstart||0)+1,1===D.touchstart&&z.bind("touchstart",g).bind("touchend",b).bind("touchmove",y).bind("scroll",v))},teardown:function(){--D[e],D[e]||z.unbind(i,f),$&&(--D.touchstart,D.touchstart||z.unbind("touchstart",g).unbind("touchmove",y).unbind("touchend",b).unbind("scroll",v));var n=t(this),s=t.data(this,k);s&&(s[e]=!1),n.unbind(i,E),S(this)||n.removeData(k)}}}var w,L,k="virtualMouseBindings",_="virtualTouchID",C="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),x="clientX clientY pageX pageY screenX screenY".split(" "),A=t.event.mouseHooks?t.event.mouseHooks.props:[],I=t.event.props.concat(A),D={},M=0,R=0,O=0,N=!1,P=[],U=!1,F=!1,$="addEventListener"in i,z=t(i),B=1,j=0;for(t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},L=0;L<C.length;L++)t.event.special[C[L]]=T(C[L]);$&&i.addEventListener("click",function(e){var i,n,s,o,r,a,l=P.length,c=e.target;if(l)for(i=e.clientX,n=e.clientY,w=t.vmouse.clickDistanceThreshold,s=c;s;){for(o=0;l>o;o++)if(r=P[o],a=0,s===c&&Math.abs(r.x-i)<w&&Math.abs(r.y-n)<w||t.data(s,_)===r.touchID)return e.preventDefault(),void e.stopPropagation();s=s.parentNode}},!0)}(t,e,i)}),jQuery.extend({highlight:function(t,e,i,n){if(3===t.nodeType){var s=t.data.match(e);if(s){var o=document.createElement(i||"span");o.className=n||"highlight";var r=t.splitText(s.index);r.splitText(s[0].length);var a=r.cloneNode(!0);return o.appendChild(a),r.parentNode.replaceChild(o,r),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==i.toUpperCase()||t.className!==n))for(var l=0;l<t.childNodes.length;l++)l+=jQuery.highlight(t.childNodes[l],e,i,n);return 0}}),jQuery.fn.unhighlight=function(t){var e={className:"highlight",element:"span"};return jQuery.extend(e,t),this.find(e.element+"."+e.className).each(function(){var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()},jQuery.fn.highlight=function(t,e){var i={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(jQuery.extend(i,e),t.constructor===String&&(t=[t]),t=jQuery.grep(t,function(t){return""!=t}),t=jQuery.map(t,function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==t.length)return this;var n=i.caseSensitive?"":"i",s="("+t.join("|")+")";i.wordsOnly&&(s="\\b"+s+"\\b");var o=new RegExp(s,n);return this.each(function(){jQuery.highlight(this,o,i.element,i.className)})},function(){var t=!1,e=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!t&&this.init&&this.init.apply(this,arguments)}var s=this.prototype;t=!0;var o=new this;t=!1;for(var r in i)o[r]="function"==typeof i[r]&&"function"==typeof s[r]&&e.test(i[r])?function(t,e){return function(){var i=this._super;this._super=s[t];var n=e.apply(this,arguments);return this._super=i,n}}(r,i[r]):i[r];return n.prototype=o,n.constructor=n,n.extend=arguments.callee,n}}(),function(t){"function"==typeof define?define(function(){t()}):t()}(function(t){if(!Function.prototype.bind){var e=Array.prototype.slice;Function.prototype.bind=function(){function t(){if(this instanceof t){var s=Object.create(i.prototype);return i.apply(s,n.concat(e.call(arguments))),s}return i.call.apply(i,n.concat(e.call(arguments)))}var i=this;if("function"!=typeof i.apply||"function"!=typeof i.call)return new TypeError;var n=e.call(arguments);return t.length="function"==typeof i?Math.max(i.length-n.length,0):0,t}}var i,n,s,o,r,a=Function.prototype.call,l=Object.prototype,c=a.bind(l.hasOwnProperty);(r=c(l,"__defineGetter__"))&&(i=a.bind(l.__defineGetter__),n=a.bind(l.__defineSetter__),s=a.bind(l.__lookupGetter__),o=a.bind(l.__lookupSetter__)),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=+this.length,n=0;i>n;n++)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var i=+this.length;if("function"!=typeof t)throw new TypeError;for(var n=Array(i),s=0;i>s;s++)s in this&&(n[s]=t.call(e,this[s],s,this));return n}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i=[],n=0;n<this.length;n++)t.call(e,this[n])&&i.push(this[n]);return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0;i<this.length;i++)if(!t.call(e,this[i]))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0;i<this.length;i++)if(t.call(e,this[i]))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=+this.length;if("function"!=typeof t)throw new TypeError;if(0===e&&1===arguments.length)throw new TypeError;var i=0;if(arguments.length>=2)var n=arguments[1];else for(;;){if(i in this){n=this[i++];break}if(++i>=e)throw new TypeError}for(;e>i;i++)i in this&&(n=t.call(null,n,this[i],i,this));return n}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=+this.length;if("function"!=typeof t)throw new TypeError;if(0===e&&1===arguments.length)throw new TypeError;var i;if(e-=1,arguments.length>=2)i=arguments[1];else for(;;){if(e in this){i=this[e--];break}if(--e<0)throw new TypeError}for(;e>=0;e--)e in this&&(i=t.call(null,i,this[e],e,this));return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i=this.length;if(!i)return-1;var n=e||0;if(n>=i)return-1;for(0>n&&(n+=i);i>n;n++)if(n in this&&t===this[n])return n;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t,e){var i=this.length;if(!i)return-1;var n=e||i;for(0>n&&(n+=i),n=Math.min(n,i-1);n>=0;n--)if(n in this&&t===this[n])return n;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||t.constructor.prototype}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,i){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(!c(e,i))return t;var n,a,h;if(n={enumerable:!0,configurable:!0},r){var d=e.__proto__;if(e.__proto__=l,a=s(e,i),h=o(e,i),e.__proto__=d,a||h)return a&&(n.get=a),h&&(n.set=h),n}return n.value=e[i],n}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create||(Object.create=function(t,e){var i;if(null===t)i={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");i=function(){},i.prototype=t,i=new i,i.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties(i,e),i}),Object.defineProperty||(Object.defineProperty=function(t,e,a){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=typeof a||null===a)throw new TypeError("Property description must be an object: "+a);if(c(a,"value"))r&&(s(t,e)||o(t,e))&&(t.__proto__=l,delete t[e]),t[e]=a.value;else{if(!r)throw new TypeError("getters & setters can not be defined on this javascript engine");c(a,"get")&&i(t,e,a.get),c(a,"set")&&n(t,e,a.set)}return t}),Object.defineProperties||(Object.defineProperties=function(t,e){for(var i in e)c(e,i)&&Object.defineProperty(t,i,e[i]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(h){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(){return!0}),!Object.keys){var d,u=!0,p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],m=p.length;for(d in{toString:null})u=!1;Object.keys=function v(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e,v=[];for(e in t)c(t,e)&&v.push(e);if(u)for(e=0;m>e;e++){var i=p[e];c(t,i)&&v.push(i)}return v}}if(Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1)+"-"+this.getUTCDate()+"T"+this.getUTCHours()+":"+this.getUTCMinutes()+":"+this.getUTCSeconds()+"Z"}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(){if("function"!=typeof this.toISOString)throw new TypeError;return this.toISOString()}),isNaN(Date.parse("T00:00"))&&(Date=function(e){var i,n=function(t,i,s,o,r,a,l){var c=arguments.length;return this instanceof e?(c=1===c&&String(t)===t?new e(n.parse(t)):c>=7?new e(t,i,s,o,r,a,l):c>=6?new e(t,i,s,o,r,a):c>=5?new e(t,i,s,o,r):c>=4?new e(t,i,s,o):c>=3?new e(t,i,s):c>=2?new e(t,i):c>=1?new e(t):new e,c.constructor=n,c):e.apply(this,arguments)},s=RegExp("^(?:((?:[+-]\\d\\d)?\\d\\d\\d\\d)(?:-(\\d\\d)(?:-(\\d\\d))?)?)?(?:T(\\d\\d):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?)?(?:Z|([+-])(\\d\\d):(\\d\\d))?$");for(i in e)n[i]=e[i];return n.now=e.now,n.UTC=e.UTC,n.prototype=e.prototype,n.prototype.constructor=n,n.parse=function(i){var n=s.exec(i);if(n){n.shift();for(var o=n[0]===t,r=0;10>r;r++)7!==r&&(n[r]=+(n[r]||(3>r?1:0)),1===r&&n[r]--);return o?1e3*(60*(60*n[3]+n[4])+n[5])+n[6]:(o=6e4*(60*n[8]+n[9]),"-"===n[6]&&(o=-o),e.UTC.apply(this,n.slice(0,7))+o)}return e.parse.apply(this,arguments)},n}(Date)),!String.prototype.trim){var f=/^\s\s*/,g=/\s\s*$/;String.prototype.trim=function(){return String(this).replace(f,"").replace(g,"")}}}),"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],s=Object,o=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,e)},c=function(t){for(var e=o.call(t.className),i=e?e.split(/\s+/):[],n=0,s=i.length;s>n;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},h=c[i]=[],d=function(){return new c(this)};if(a[i]=Error[i],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==l(this,t)},h.add=function(t){t+="",-1===l(this,t)&&(this.push(t),this._updateClassName())},h.remove=function(t){t+="";var e=l(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},h.toggle=function(t){t+="",-1===l(this,t)?this.add(t):this.remove(t)},h.toString=function(){return this.join(" ")},s.defineProperty){var u={get:d,enumerable:!0,configurable:!0};try{s.defineProperty(n,e,u)}catch(p){-2146823252===p.number&&(u.enumerable=!1,s.defineProperty(n,e,u))}}else s[i].__defineGetter__&&n.__defineGetter__(e,d)}(self),function(t){function e(t,e,i,n,s){this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this._priority=s||0}function i(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function n(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){n.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,i,n,s){var o,r=this._indexOfListener(t,n);if(-1!==r){if(o=this._bindings[r],o.isOnce()!==i)throw new Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,i,n,s),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i._listener===t&&i.context===e)return n;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return i(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return i(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){i(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=e),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=n;s.Signal=n,"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:t.signals=s}(this);var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,o,r,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;o>i;i+=1)r[i]=str(i,l)||"null";return s=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,l),s&&r.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&r.push(quote(n)+(gap?": ":":")+s));return s=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t){function e(t,e){return function(i){return l(t.call(this,i),e)}}function i(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function n(){}function s(t){r(this,t)}function o(t){var e=t.years||t.year||t.y||0,i=t.months||t.month||t.M||0,n=t.weeks||t.week||t.w||0,s=t.days||t.day||t.d||0,o=t.hours||t.hour||t.h||0,r=t.minutes||t.minute||t.m||0,a=t.seconds||t.second||t.s||0,l=t.milliseconds||t.millisecond||t.ms||0;this._input=t,this._milliseconds=+l+1e3*a+6e4*r+36e5*o,this._days=+s+7*n,this._months=+i+12*e,this._data={},this._bubble()}function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function c(t,e,i,n){var s,o,r=e._milliseconds,a=e._days,l=e._months;r&&t._d.setTime(+t._d+r*i),(a||l)&&(s=t.minute(),o=t.hour()),a&&t.date(t.date()+a*i),l&&t.month(t.month()+l*i),r&&!n&&U.updateOffset(t),(a||l)&&(t.minute(s),t.hour(o))}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){var i,n=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;n>i;i++)~~t[i]!==~~e[i]&&o++;return o+s}function u(t){return t?le[t]||t.toLowerCase().replace(/(.)s$/,"$1"):t}function p(t,e){return e.abbr=t,B[t]||(B[t]=new n),B[t].set(e),B[t]}function m(t){delete B[t]}function f(t){if(!t)return U.fn._lang;if(!B[t]&&j)try{require("./lang/"+t)}catch(e){return U.fn._lang}return B[t]||U.fn._lang}function g(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function v(t){var e,i,n=t.match(G);for(e=0,i=n.length;i>e;e++)n[e]=ue[n[e]]?ue[n[e]]:g(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function y(t,e){return e=b(e,t.lang()),ce[e]||(ce[e]=v(e)),ce[e](t)}function b(t,e){function i(t){return e.longDateFormat(t)||t}for(var n=5;n--&&(q.lastIndex=0,q.test(t));)t=t.replace(q,i);return t}function S(t,e){switch(t){case"DDDD":return Y;case"YYYY":return J;case"YYYYY":return K;case"S":case"SS":case"SSS":case"DDD":return W;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Z;case"a":case"A":return f(e._l)._meridiemParse;case"X":return ee;case"Z":case"ZZ":return Q;case"T":return te;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return X;default:return new RegExp(t.replace("\\",""))}}function E(t){var e=(Q.exec(t)||[])[0],i=(e+"").match(oe)||["-",0,0],n=+(60*i[1])+~~i[2];return"+"===i[0]?-n:n}function T(t,e,i){var n,s=i._a;switch(t){case"M":case"MM":null!=e&&(s[1]=~~e-1);break;case"MMM":case"MMMM":n=f(i._l).monthsParse(e),null!=n?s[1]=n:i._isValid=!1;break;case"D":case"DD":null!=e&&(s[2]=~~e);break;case"DDD":case"DDDD":null!=e&&(s[1]=0,s[2]=~~e);break;case"YY":s[0]=~~e+(~~e>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~e;break;case"a":case"A":i._isPm=f(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[3]=~~e;break;case"m":case"mm":s[4]=~~e;break;case"s":case"ss":s[5]=~~e;break;case"S":case"SS":case"SSS":s[6]=~~(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=E(e)}null==e&&(i._isValid=!1)}function w(t){var e,i,n,s=[];if(!t._d){for(n=k(t),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];s[3]+=~~((t._tzm||0)/60),s[4]+=~~((t._tzm||0)%60),i=new Date(0),t._useUTC?(i.setUTCFullYear(s[0],s[1],s[2]),i.setUTCHours(s[3],s[4],s[5],s[6])):(i.setFullYear(s[0],s[1],s[2]),i.setHours(s[3],s[4],s[5],s[6])),t._d=i}}function L(t){var e=t._i;t._d||(t._a=[e.years||e.year||e.y,e.months||e.month||e.M,e.days||e.day||e.d,e.hours||e.hour||e.h,e.minutes||e.minute||e.m,e.seconds||e.second||e.s,e.milliseconds||e.millisecond||e.ms],w(t))}function k(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function _(t){var e,i,n,s=f(t._l),o=""+t._i;for(n=b(t._f,s).match(G),t._a=[],e=0;e<n.length;e++)i=(S(n[e],t).exec(o)||[])[0],i&&(o=o.slice(o.indexOf(i)+i.length)),ue[n[e]]&&T(n[e],i,t);o&&(t._il=o),t._isPm&&t._a[3]<12&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),w(t)}function C(t){var e,i,n,o,a,l=99;for(o=0;o<t._f.length;o++)e=r({},t),e._f=t._f[o],_(e),i=new s(e),a=d(e._a,i.toArray()),i._il&&(a+=i._il.length),l>a&&(l=a,n=i);r(t,n)}function x(t){var e,i=t._i,n=ie.exec(i);if(n){for(t._f="YYYY-MM-DD"+(n[2]||" "),e=0;4>e;e++)if(se[e][1].exec(i)){t._f+=se[e][0];break}Q.exec(i)&&(t._f+=" Z"),_(t)}else t._d=new Date(i)}function A(e){var i=e._i,n=H.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?x(e):h(i)?(e._a=i.slice(0),w(e)):i instanceof Date?e._d=new Date(+i):"object"==typeof i?L(e):e._d=new Date(i)}function I(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function D(t,e,i){var n=z(Math.abs(t)/1e3),s=z(n/60),o=z(s/60),r=z(o/24),a=z(r/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",z(r/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=i,I.apply({},l)}function M(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=U(t).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function R(t){var e=t._i,i=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=f().preparse(e)),U.isMoment(e)?(t=r({},e),t._d=new Date(+e._d)):i?h(i)?C(t):_(t):A(t),new s(t))}function O(t,e){U.fn[t]=U.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),U.updateOffset(this),this):this._d["get"+i+e]()}}function N(t){U.duration.fn[t]=function(){return this._data[t]}}function P(t,e){U.duration.fn["as"+t]=function(){return+this/e}}for(var U,F,$="2.2.1",z=Math.round,B={},j="undefined"!=typeof module&&module.exports,H=/^\/?Date\((\-?\d+)/i,V=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,G=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,q=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,X=/\d\d?/,W=/\d{1,3}/,Y=/\d{3}/,J=/\d{1,4}/,K=/[+\-]?\d{1,6}/,Z=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Q=/Z|[\+\-]\d\d:?\d\d/i,te=/T/i,ee=/[\+\-]?\d+(\.\d{1,3})?/,ie=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ne="YYYY-MM-DDTHH:mm:ssZ",se=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],oe=/([\+\-]|\d\d)/gi,re="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ae={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},le={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},ce={},he="DDD w W M D d".split(" "),de="M D H h m s w W".split(" "),ue={M:function(){return this.month()+1
},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(t/60),2)+":"+l(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};he.length;)F=he.pop(),ue[F+"o"]=i(ue[F],F);for(;de.length;)F=de.pop(),ue[F+F]=e(ue[F],2);for(ue.DDDD=e(ue.DDD,3),r(n.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=U.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=U([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return M(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),U=function(t,e,i){return R({_i:t,_f:e,_l:i,_isUTC:!1})},U.utc=function(t,e,i){return R({_useUTC:!0,_isUTC:!0,_l:i,_i:t,_f:e}).utc()},U.unix=function(t){return U(1e3*t)},U.duration=function(t,e){var i,n,s=U.isDuration(t),r="number"==typeof t,a=s?t._input:r?{}:t,l=V.exec(t);return r?e?a[e]=t:a.milliseconds=t:l&&(i="-"===l[1]?-1:1,a={y:0,d:~~l[2]*i,h:~~l[3]*i,m:~~l[4]*i,s:~~l[5]*i,ms:~~l[6]*i}),n=new o(a),s&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},U.version=$,U.defaultFormat=ne,U.updateOffset=function(){},U.lang=function(t,e){return t?(t=t.toLowerCase(),t=t.replace("_","-"),e?p(t,e):null===e?(m(t),t="en"):B[t]||f(t),void(U.duration.fn._lang=U.fn._lang=f(t))):U.fn._lang._abbr},U.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),f(t)},U.isMoment=function(t){return t instanceof s},U.isDuration=function(t){return t instanceof o},r(U.fn=s.prototype,{clone:function(){return U(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return y(U(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?U.utc(this._a):U(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var t,e=this._a,i=(this._isUTC?U.utc(this._a):U(this._a)).toArray();for(t=6;t>=0&&e[t]===i[t];--t);return t},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=y(this,t||U.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?U.duration(+e,t):U.duration(t,e),c(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?U.duration(+e,t):U.duration(t,e),c(this,i,-1),this},diff:function(t,e,i){var n,s,o=this._isUTC?U(t).zone(this._offset||0):U(t).local(),r=6e4*(this.zone()-o.zone());return e=u(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-U(this).startOf("month")-(o-U(o).startOf("month")))/n,s-=6e4*(this.zone()-U(this).startOf("month").zone()-(o.zone()-U(o).startOf("month").zone()))/n,"year"===e&&(s/=12)):(n=this-o,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?s:a(s)},from:function(t,e){return U.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(U(),t)},calendar:function(){var t=this.diff(U().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?"string"==typeof t&&(t=this.lang().weekdaysParse(t),"number"!=typeof t)?this:this.add({d:t-e}):e},month:function(t){var e,i=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+i+"Month"](t),this.date(Math.min(e,this.daysInMonth())),U.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(t){switch(t=u(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoweek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=u(t),this.startOf(t).add("isoweek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+U(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+U(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+U(t).startOf(e)},min:function(t){return t=U.apply(null,arguments),this>t?this:t},max:function(t){return t=U.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=E(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&c(this,U.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(t){return t=t?U(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return U.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=z((U(this).startOf("day")-U(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=M(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=M(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=M(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=u(t),this[t.toLowerCase()]()},set:function(t,e){t=u(t),this[t.toLowerCase()](e)},lang:function(e){return e===t?this._lang:(this._lang=f(e),this)}}),F=0;F<re.length;F++)O(re[F].toLowerCase().replace(/s$/,""),re[F]);O("year","FullYear"),U.fn.days=U.fn.day,U.fn.months=U.fn.month,U.fn.weeks=U.fn.week,U.fn.isoWeeks=U.fn.isoWeek,U.fn.toJSON=U.fn.toISOString,r(U.duration.fn=o.prototype,{_bubble:function(){var t,e,i,n,s=this._milliseconds,o=this._days,r=this._months,l=this._data;l.milliseconds=s%1e3,t=a(s/1e3),l.seconds=t%60,e=a(t/60),l.minutes=e%60,i=a(e/60),l.hours=i%24,o+=a(i/24),l.days=o%30,r+=a(o/30),l.months=r%12,n=a(r/12),l.years=n},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(t){var e=+this,i=D(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=U.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=U.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=u(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=u(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:U.fn.lang});for(F in ae)ae.hasOwnProperty(F)&&(P(F,ae[F]),N(F.toLowerCase()));P("Weeks",6048e5),U.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},U.lang("en",{ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),j&&(module.exports=U),"undefined"==typeof ender&&(this.moment=U),"function"==typeof define&&define.amd&&define("moment",[],function(){return U})}.call(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var s=["opacity",e,~~(100*t),i,n].join("-"),o=.01+i/n*100,r=Math.max(1-(1-t)/e*(100-o),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[s]||(u.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+r+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",u.cssRules.length),d[s]=1),s}function n(t,e){var i,n,s=t.style;if(void 0!==s[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<h.length;n++)if(i=h[n]+e,void 0!==s[i])return i}function s(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function o(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function r(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t){return"undefined"==typeof this?new a(t):void(this.opts=o(t||{},a.defaults,p))}function l(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,n){function o(){return s(i("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function r(t,r,a){e(d,e(s(o(),{rotation:360/n.lines*t+"deg",left:~~r}),e(s(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),i("fill",{color:n.color,opacity:n.opacity}),i("stroke",{opacity:0}))))}var a,l=n.length+n.width,c=2*l,h=2*-(n.width+n.length)+"px",d=s(o(),{position:"absolute",top:h,left:h});if(n.shadow)for(a=1;a<=n.lines;a++)r(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=n.lines;a++)r(a);return e(t,d)},a.prototype.opacity=function(t,e,i,n){var s=t.firstChild;n=n.shadow&&n.lines||0,s&&e+n<s.childNodes.length&&(s=s.childNodes[e+n],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=i))}}var c,h=["webkit","Moz","ms","O"],d={},u=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},o(a.prototype,{spin:function(e){this.stop();var i,n,o=this,a=o.opts,l=o.el=s(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),h=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),n=r(e),i=r(l),s(l,{left:("auto"==a.left?n.x-i.x+(e.offsetWidth>>1):parseInt(a.left,10)+h)+"px",top:("auto"==a.top?n.y-i.y+(e.offsetHeight>>1):parseInt(a.top,10)+h)+"px"})),l.setAttribute("role","progressbar"),o.lines(l,o.opts),!c){var d,u=0,p=(a.lines-1)*(1-a.direction)/2,m=a.fps,f=m/a.speed,g=(1-a.opacity)/(f*a.trail/100),v=f/a.lines;!function y(){u++;for(var t=0;t<a.lines;t++)d=Math.max(1-(u+(a.lines-t)*v)%f*g,a.opacity),o.opacity(l,t*a.direction+p,d,a);o.timeout=o.el&&setTimeout(y,~~(1e3/m))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,o){function r(e,i){return s(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var a,l=0,h=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)a=s(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&i(o.opacity,o.trail,h+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(a,s(r("#000","0 0 4px #000"),{top:"2px"})),e(n,e(a,r(o.color,"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var m=s(t("group"),{behavior:"url(#default#VML)"});return!n(m,"transform")&&m.adj?l():c=n(m,"animation"),a}),function(t,e){"object"==typeof exports?module.exports=e(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],e):t.Ladda=e(t.Spinner)}(this,function(t){"use strict";function e(t){if("undefined"==typeof t)return void console.warn("Ladda button target must be defined.");t.querySelector(".ladda-label")||(t.innerHTML='<span class="ladda-label">'+t.innerHTML+"</span>");var e,i=t.querySelector(".ladda-spinner");i||(i=document.createElement("span"),i.className="ladda-spinner"),t.appendChild(i);var n,s={start:function(){return e||(e=r(t)),t.setAttribute("disabled",""),t.setAttribute("data-loading",""),clearTimeout(n),e.spin(i),this.setProgress(0),this},startAfter:function(t){return clearTimeout(n),n=setTimeout(function(){s.start()},t),this},stop:function(){return t.removeAttribute("disabled"),t.removeAttribute("data-loading"),clearTimeout(n),e&&(n=setTimeout(function(){e.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(e){e=Math.max(Math.min(e,1),0);var i=t.querySelector(".ladda-progress");0===e&&i&&i.parentNode?i.parentNode.removeChild(i):(i||(i=document.createElement("div"),i.className="ladda-progress",t.appendChild(i)),i.style.width=(e||0)*t.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),t.setAttribute("disabled",""),this},isLoading:function(){return t.hasAttribute("data-loading")},remove:function(){clearTimeout(n),t.removeAttribute("disabled",""),t.removeAttribute("data-loading",""),e&&(e.stop(),e=null);for(var i=0,o=l.length;o>i;i++)if(s===l[i]){l.splice(i,1);break}}};return l.push(s),s}function i(t,e){for(;t.parentNode&&t.tagName!==e;)t=t.parentNode;return e===t.tagName?t:void 0}function n(t){for(var e=["input","textarea","select"],i=[],n=0;n<e.length;n++)for(var s=t.getElementsByTagName(e[n]),o=0;o<s.length;o++)s[o].hasAttribute("required")&&i.push(s[o]);return i}function s(t,s){s=s||{};var o=[];"string"==typeof t?o=a(document.querySelectorAll(t)):"object"==typeof t&&"string"==typeof t.nodeName&&(o=[t]);for(var r=0,l=o.length;l>r;r++)!function(){var t=o[r];if("function"==typeof t.addEventListener){var a=e(t),l=-1;t.addEventListener("click",function(){var e=!0,o=i(t,"FORM");if("undefined"!=typeof o)for(var r=n(o),c=0;c<r.length;c++)""===r[c].value.replace(/^\s+|\s+$/g,"")&&(e=!1),"checkbox"!==r[c].type&&"radio"!==r[c].type||r[c].checked||(e=!1);e&&(a.startAfter(1),"number"==typeof s.timeout&&(clearTimeout(l),l=setTimeout(a.stop,s.timeout)),"function"==typeof s.callback&&s.callback.apply(null,[a]))},!1)}}()}function o(){for(var t=0,e=l.length;e>t;t++)l[t].stop()}function r(e){var i,n=e.offsetHeight;0===n&&(n=parseFloat(window.getComputedStyle(e).height)),n>32&&(n*=.8),e.hasAttribute("data-spinner-size")&&(n=parseInt(e.getAttribute("data-spinner-size"),10)),e.hasAttribute("data-spinner-color")&&(i=e.getAttribute("data-spinner-color"));var s=12,o=.2*n,r=.6*o,a=7>o?2:3;return new t({color:i||"#fff",lines:s,radius:o,length:r,width:a,zIndex:"auto",top:"auto",left:"auto",className:""})}function a(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var l=[];return{bind:s,create:e,stopAll:o}}),function(t,e){function i(t,e,i){return t.addEventListener?void t.addEventListener(e,i,!1):void t.attachEvent("on"+e,i)}function n(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return L[t.which]?L[t.which]:k[t.which]?k[t.which]:String.fromCharCode(t.which).toLowerCase()}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function o(t){t=t||{};var e,i=!1;for(e in I)t[e]?i=!0:I[e]=0;i||(R=!1)}function r(t,e,i,n,o,r){var a,l,c=[],h=i.type;if(!x[t])return[];for("keyup"==h&&p(t)&&(e=[t]),a=0;a<x[t].length;++a)if(l=x[t][a],(n||!l.seq||I[l.seq]==l.level)&&h==l.action&&("keypress"==h&&!i.metaKey&&!i.ctrlKey||s(e,l.modifiers))){var d=!n&&l.combo==o,u=n&&l.seq==n&&l.level==r;(d||u)&&x[t].splice(a,1),c.push(l)}return c}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function l(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function c(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function h(t,e,i,n){N.stopCallback(e,e.target||e.srcElement,i,n)||t(e,i)===!1&&(l(e),c(e))}function d(t,e,i){var n,s=r(t,e,i),a={},l=0,c=!1;for(n=0;n<s.length;++n)s[n].seq&&(l=Math.max(l,s[n].level));for(n=0;n<s.length;++n)if(s[n].seq){if(s[n].level!=l)continue;c=!0,a[s[n].seq]=1,h(s[n].callback,i,s[n].combo,s[n].seq)}else c||h(s[n].callback,i,s[n].combo);var d="keypress"==i.type&&M;i.type!=R||p(t)||d||o(a),M=c&&"keydown"==i.type}function u(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=n(t);if(e)return"keyup"==t.type&&D===e?void(D=!1):void N.handleKey(e,a(t),t)}function p(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(){clearTimeout(w),w=setTimeout(o,1e3)}function f(){if(!T){T={};for(var t in L)t>95&&112>t||L.hasOwnProperty(t)&&(T[L[t]]=t)}return T}function g(t,e,i){return i||(i=f()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function v(t,e,i,s){function r(e){return function(){R=e,++I[t],m()}}function a(e){h(i,e,t),"keyup"!==s&&(D=n(e)),setTimeout(o,10)}I[t]=0;for(var l=0;l<e.length;++l){var c=l+1===e.length,d=c?a:r(s||b(e[l+1]).action);S(e[l],d,s,t,l)}}function y(t){return"+"===t?["+"]:t.split("+")}function b(t,e){var i,n,s,o=[];for(i=y(t),s=0;s<i.length;++s)n=i[s],C[n]&&(n=C[n]),e&&"keypress"!=e&&_[n]&&(n=_[n],o.push("shift")),p(n)&&o.push(n);return e=g(n,o,e),{key:n,modifiers:o,action:e}}function S(t,e,i,n,s){A[t+":"+i]=e,t=t.replace(/\s+/g," ");var o,a=t.split(" ");return a.length>1?void v(t,a,e,i):(o=b(t,i),x[o.key]=x[o.key]||[],r(o.key,o.modifiers,{type:o.action},n,t,s),void x[o.key][n?"unshift":"push"]({callback:e,modifiers:o.modifiers,action:o.action,seq:n,level:s,combo:t}))}function E(t,e,i){for(var n=0;n<t.length;++n)S(t[n],e,i)}for(var T,w,L={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},C={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x={},A={},I={},D=!1,M=!1,R=!1,O=1;20>O;++O)L[111+O]="f"+O;for(O=0;9>=O;++O)L[O+96]=O;i(e,"keypress",u),i(e,"keydown",u),i(e,"keyup",u);var N={bind:function(t,e,i){return t=t instanceof Array?t:[t],E(t,e,i),this},unbind:function(t,e){return N.bind(t,function(){},e)},trigger:function(t,e){return A[t+":"+e]&&A[t+":"+e]({},t),this},reset:function(){return x={},A={},this},stopCallback:function(t,e){return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},handleKey:d};t.Mousetrap=N,"function"==typeof define&&define.amd&&define(N)}(window,document),function(t,e,i,n){"use strict";function s(t,e,i){return setTimeout(h(t,i),e)}function o(t,e,i){return Array.isArray(t)?(r(t,i[e],i),!0):!1}function r(t,e,i){var s;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}function a(t,e,i){for(var s=Object.keys(e),o=0;o<s.length;)(!i||i&&t[s[o]]===n)&&(t[s[o]]=e[s[o]]),o++;return t}function l(t,e){return a(t,e,!0)}function c(t,e,i){var n,s=e.prototype;n=t.prototype=Object.create(s),n.constructor=t,n._super=s,i&&a(n,i)}function h(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==he?t.apply(e?e[0]||n:n,e):t}function u(t,e){return t===n?e:t}function p(t,e,i){r(v(e),function(e){t.addEventListener(e,i,!1)})}function m(t,e,i){r(v(e),function(e){t.removeEventListener(e,i,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function S(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];y(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function E(t,e){for(var i,s,o=e[0].toUpperCase()+e.slice(1),r=0;r<le.length;){if(i=le[r],s=i?i+o:e,s in t)return s;r++}return n}function T(){return me++}function w(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function L(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&i.handler(e)},this.init()}function k(t){var e,i=t.options.inputClass;return new(e=i?i:ve?$:ye?j:ge?V:F)(t,_)}function _(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Le&&n-s===0,r=e&(_e|Ce)&&n-s===0;i.isFirst=!!o,i.isFinal=!!r,o&&(t.session={}),i.eventType=e,C(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function C(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=I(e)),s>1&&!i.firstMultiple?i.firstMultiple=I(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,a=r?r.center:o.center,l=e.center=D(n);e.timeStamp=pe(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=N(a,l),e.distance=O(a,l),x(i,e),e.offsetDirection=R(e.deltaX,e.deltaY),e.scale=r?U(r.pointers,n):1,e.rotation=r?P(r.pointers,n):0,A(i,e);var c=t.element;f(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function x(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};(e.eventType===Le||o.eventType===_e)&&(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function A(t,e){var i,s,o,r,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Ce&&(l>we||a.velocity===n)){var c=a.deltaX-e.deltaX,h=a.deltaY-e.deltaY,d=M(l,c,h);s=d.x,o=d.y,i=ue(d.x)>ue(d.y)?d.x:d.y,r=R(c,h),t.lastInterval=e}else i=a.velocity,s=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=r}function I(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:de(t.pointers[i].clientX),clientY:de(t.pointers[i].clientY)},i++;return{timeStamp:pe(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:de(t[0].clientX),y:de(t[0].clientY)};for(var i=0,n=0,s=0;e>s;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:de(i/e),y:de(n/e)}}function M(t,e,i){return{x:e/t||0,y:i/t||0}}function R(t,e){return t===e?xe:ue(t)>=ue(e)?t>0?Ae:Ie:e>0?De:Me}function O(t,e,i){i||(i=Pe);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function N(t,e,i){i||(i=Pe);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function P(t,e){return N(e[1],e[0],Ue)-N(t[1],t[0],Ue)}function U(t,e){return O(e[0],e[1],Ue)/O(t[0],t[1],Ue)}function F(){this.evEl=$e,this.evWin=ze,this.allow=!0,this.pressed=!1,L.apply(this,arguments)}function $(){this.evEl=He,this.evWin=Ve,L.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function z(){this.evTarget=qe,this.evWin=Xe,this.started=!1,L.apply(this,arguments)}function B(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(_e|Ce)&&(i=S(i.concat(n),"identifier",!0)),[i,n]}function j(){this.evTarget=Ye,this.targetIds={},L.apply(this,arguments)}function H(t,e){var i=b(t.touches),n=this.targetIds;if(e&(Le|ke)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,r=b(t.changedTouches),a=[],l=this.target;if(o=i.filter(function(t){return f(t.target,l)}),e===Le)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<r.length;)n[r[s].identifier]&&a.push(r[s]),e&(_e|Ce)&&delete n[r[s].identifier],s++;return a.length?[S(o.concat(a),"identifier",!0),a]:void 0}function V(){L.apply(this,arguments);var t=h(this.handler,this);this.touch=new j(this.manager,t),this.mouse=new F(this.manager,t)}function G(t,e){this.manager=t,this.set(e)}function q(t){if(g(t,ei))return ei;var e=g(t,ii),i=g(t,ni);return e&&i?ii+" "+ni:e||i?e?ii:ni:g(t,ti)?ti:Qe}function X(t){this.id=T(),this.manager=null,this.options=l(t||{},this.defaults),this.options.enable=u(this.options.enable,!0),this.state=si,this.simultaneous={},this.requireFail=[]}function W(t){return t&ci?"cancel":t&ai?"end":t&ri?"move":t&oi?"start":""}function Y(t){return t==Me?"down":t==De?"up":t==Ae?"left":t==Ie?"right":""}function J(t,e){var i=e.manager;return i?i.get(t):t}function K(){X.apply(this,arguments)}function Z(){K.apply(this,arguments),this.pX=null,this.pY=null}function Q(){K.apply(this,arguments)}function te(){X.apply(this,arguments),this._timer=null,this._input=null}function ee(){K.apply(this,arguments)}function ie(){K.apply(this,arguments)}function ne(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(t,e){return e=e||{},e.recognizers=u(e.recognizers,se.defaults.preset),new oe(t,e)}function oe(t,e){e=e||{},this.options=l(e,se.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=k(this),this.touchAction=new G(this,this.options.touchAction),re(this,!0),r(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function re(t,e){var i=t.element;r(t.options.cssProps,function(t,n){i.style[E(i.style,n)]=e?t:""})}function ae(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var le=["","webkit","moz","MS","ms","o"],ce=e.createElement("div"),he="function",de=Math.round,ue=Math.abs,pe=Date.now,me=1,fe=/mobile|tablet|ip(ad|hone|od)|android/i,ge="ontouchstart"in t,ve=E(t,"PointerEvent")!==n,ye=ge&&fe.test(navigator.userAgent),be="touch",Se="pen",Ee="mouse",Te="kinect",we=25,Le=1,ke=2,_e=4,Ce=8,xe=1,Ae=2,Ie=4,De=8,Me=16,Re=Ae|Ie,Oe=De|Me,Ne=Re|Oe,Pe=["x","y"],Ue=["clientX","clientY"];L.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)}};var Fe={mousedown:Le,mousemove:ke,mouseup:_e},$e="mousedown",ze="mousemove mouseup";c(F,L,{handler:function(t){var e=Fe[t.type];e&Le&&0===t.button&&(this.pressed=!0),e&ke&&1!==t.which&&(e=_e),this.pressed&&this.allow&&(e&_e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Ee,srcEvent:t}))}});var Be={pointerdown:Le,pointermove:ke,pointerup:_e,pointercancel:Ce,pointerout:Ce},je={2:be,3:Se,4:Ee,5:Te},He="pointerdown",Ve="pointermove pointerup pointercancel";t.MSPointerEvent&&(He="MSPointerDown",Ve="MSPointerMove MSPointerUp MSPointerCancel"),c($,L,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Be[n],o=je[t.pointerType]||t.pointerType,r=o==be,a=y(e,t.pointerId,"pointerId");s&Le&&(0===t.button||r)?0>a&&(e.push(t),a=e.length-1):s&(_e|Ce)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var Ge={touchstart:Le,touchmove:ke,touchend:_e,touchcancel:Ce},qe="touchstart",Xe="touchstart touchmove touchend touchcancel";c(z,L,{handler:function(t){var e=Ge[t.type];if(e===Le&&(this.started=!0),this.started){var i=B.call(this,t,e);e&(_e|Ce)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:be,srcEvent:t})}}});var We={touchstart:Le,touchmove:ke,touchend:_e,touchcancel:Ce},Ye="touchstart touchmove touchend touchcancel";c(j,L,{handler:function(t){var e=We[t.type],i=H.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:be,srcEvent:t})
}}),c(V,L,{handler:function(t,e,i){var n=i.pointerType==be,s=i.pointerType==Ee;if(n)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(_e|Ce)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Je=E(ce.style,"touchAction"),Ke=Je!==n,Ze="compute",Qe="auto",ti="manipulation",ei="none",ii="pan-x",ni="pan-y";G.prototype={set:function(t){t==Ze&&(t=this.compute()),Ke&&(this.manager.element.style[Je]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),q(t.join(" "))},preventDefaults:function(t){if(!Ke){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,s=g(n,ei),o=g(n,ni),r=g(n,ii);return s||o&&i&Re||r&&i&Oe?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var si=1,oi=2,ri=4,ai=8,li=ai,ci=16,hi=32;X.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=J(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?W(n):""),t)}var i=this,n=this.state;ai>n&&e(!0),e(),n>=ai&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=hi)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(hi|si)))return!1;t++}return!0},recognize:function(t){var e=a({},t);return d(this.options.enable,[this,e])?(this.state&(li|ci|hi)&&(this.state=si),this.state=this.process(e),void(this.state&(oi|ri|ai|ci)&&this.tryEmit(e))):(this.reset(),void(this.state=hi))},process:function(){},getTouchAction:function(){},reset:function(){}},c(K,X,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(oi|ri),s=this.attrTest(t);return n&&(i&Ce||!s)?e|ci:n||s?i&_e?e|ai:e&oi?e|ri:oi:hi}}),c(Z,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ne},getTouchAction:function(){var t=this.options.direction,e=[];return t&Re&&e.push(ni),t&Oe&&e.push(ii),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&Re?(s=0===o?xe:0>o?Ae:Ie,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?xe:0>r?De:Me,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return K.prototype.attrTest.call(this,t)&&(this.state&oi||!(this.state&oi)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Y(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),c(Q,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oi)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),c(te,X,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Qe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(_e|Ce)&&!o)this.reset();else if(t.eventType&Le)this.reset(),this._timer=s(function(){this.state=li,this.tryEmit()},e.time,this);else if(t.eventType&_e)return li;return hi},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===li&&(t&&t.eventType&_e?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pe(),this.manager.emit(this.options.event,this._input)))}}),c(ee,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oi)}}),c(ie,K,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Re|Oe,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Re|Oe)?e=t.velocity:i&Re?e=t.velocityX:i&Oe&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&ue(e)>this.options.velocity&&t.eventType&_e},emit:function(t){var e=Y(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(ne,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ti]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Le&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=_e)return this.failTimeout();var r=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=s(function(){this.state=li,this.tryEmit()},e.interval,this),oi):li}return hi},failTimeout:function(){return this._timer=s(function(){this.state=hi},this.options.interval,this),hi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==li&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.4",se.defaults={domEvents:!1,touchAction:Ze,enable:!0,inputTarget:null,inputClass:null,preset:[[ee,{enable:!1}],[Q,{enable:!1},["rotate"]],[ie,{direction:Re}],[Z,{direction:Re},["swipe"]],[ne],[ne,{event:"doubletap",taps:2},["tap"]],[te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var di=1,ui=2;oe.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ui:di},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&li)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===ui||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(oi|ri|ai)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof X)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return r(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return r(v(t),function(t){e?i[t].splice(y(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ae(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&re(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(se,{INPUT_START:Le,INPUT_MOVE:ke,INPUT_END:_e,INPUT_CANCEL:Ce,STATE_POSSIBLE:si,STATE_BEGAN:oi,STATE_CHANGED:ri,STATE_ENDED:ai,STATE_RECOGNIZED:li,STATE_CANCELLED:ci,STATE_FAILED:hi,DIRECTION_NONE:xe,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:Ie,DIRECTION_UP:De,DIRECTION_DOWN:Me,DIRECTION_HORIZONTAL:Re,DIRECTION_VERTICAL:Oe,DIRECTION_ALL:Ne,Manager:oe,Input:L,TouchAction:G,TouchInput:j,MouseInput:F,PointerEventInput:$,TouchMouseInput:V,SingleTouchInput:z,Recognizer:X,AttrRecognizer:K,Tap:ne,Pan:Z,Swipe:ie,Pinch:Q,Rotate:ee,Press:te,on:p,off:m,each:r,merge:l,extend:a,inherit:c,bindFn:h,prefixed:E}),typeof define==he&&define.amd?define(function(){return se}):"undefined"!=typeof module&&module.exports?module.exports=se:t[i]=se}(window,document,"Hammer");var CryptoJS=CryptoJS||function(t,e){var i={},n=i.lib={},s=function(){},o=n.Base={extend:function(t){s.prototype=this;var e=new s;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=e?i:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var s=0;t>s;s++)e[n+s>>>2]|=(i[s>>>2]>>>24-8*(s%4)&255)<<24-8*((n+s)%4);else if(65535<i.length)for(s=0;t>s;s+=4)e[n+s>>>2]=i[s>>>2];else e.push.apply(e,i);return this.sigBytes+=t,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-8*(i%4),e.length=t.ceil(i/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var i=[],n=0;e>n;n+=4)i.push(4294967296*t.random()|0);return new r.init(i,e)}}),a=i.enc={},l=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;t>n;n++){var s=e[n>>>2]>>>24-8*(n%4)&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new r.init(i,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;t>n;n++)i.push(String.fromCharCode(e[n>>>2]>>>24-8*(n%4)&255));return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new r.init(i,e)}},h=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,a=s/(4*o),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,s=t.min(4*e,s),e){for(var l=0;e>l;l+=o)this._doProcessBlock(n,l);l=n.splice(0,e),i.sigBytes-=s}return new r.init(l,s)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new u.HMAC.init(t,i).finalize(e)}}});var u=i.algo={};return i}(Math);!function(t){function e(t,e,i,n,s,o,r){return t=t+(e&i|~e&n)+s+r,(t<<o|t>>>32-o)+e}function i(t,e,i,n,s,o,r){return t=t+(e&n|i&~n)+s+r,(t<<o|t>>>32-o)+e}function n(t,e,i,n,s,o,r){return t=t+(e^i^n)+s+r,(t<<o|t>>>32-o)+e}function s(t,e,i,n,s,o,r){return t=t+(i^(e|~n))+s+r,(t<<o|t>>>32-o)+e}for(var o=CryptoJS,r=o.lib,a=r.WordArray,l=r.Hasher,r=o.algo,c=[],h=0;64>h;h++)c[h]=4294967296*t.abs(t.sin(h+1))|0;r=r.MD5=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,o){for(var r=0;16>r;r++){var a=o+r,l=t[a];t[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var r=this._hash.words,a=t[o+0],l=t[o+1],h=t[o+2],d=t[o+3],u=t[o+4],p=t[o+5],m=t[o+6],f=t[o+7],g=t[o+8],v=t[o+9],y=t[o+10],b=t[o+11],S=t[o+12],E=t[o+13],T=t[o+14],w=t[o+15],L=r[0],k=r[1],_=r[2],C=r[3],L=e(L,k,_,C,a,7,c[0]),C=e(C,L,k,_,l,12,c[1]),_=e(_,C,L,k,h,17,c[2]),k=e(k,_,C,L,d,22,c[3]),L=e(L,k,_,C,u,7,c[4]),C=e(C,L,k,_,p,12,c[5]),_=e(_,C,L,k,m,17,c[6]),k=e(k,_,C,L,f,22,c[7]),L=e(L,k,_,C,g,7,c[8]),C=e(C,L,k,_,v,12,c[9]),_=e(_,C,L,k,y,17,c[10]),k=e(k,_,C,L,b,22,c[11]),L=e(L,k,_,C,S,7,c[12]),C=e(C,L,k,_,E,12,c[13]),_=e(_,C,L,k,T,17,c[14]),k=e(k,_,C,L,w,22,c[15]),L=i(L,k,_,C,l,5,c[16]),C=i(C,L,k,_,m,9,c[17]),_=i(_,C,L,k,b,14,c[18]),k=i(k,_,C,L,a,20,c[19]),L=i(L,k,_,C,p,5,c[20]),C=i(C,L,k,_,y,9,c[21]),_=i(_,C,L,k,w,14,c[22]),k=i(k,_,C,L,u,20,c[23]),L=i(L,k,_,C,v,5,c[24]),C=i(C,L,k,_,T,9,c[25]),_=i(_,C,L,k,d,14,c[26]),k=i(k,_,C,L,g,20,c[27]),L=i(L,k,_,C,E,5,c[28]),C=i(C,L,k,_,h,9,c[29]),_=i(_,C,L,k,f,14,c[30]),k=i(k,_,C,L,S,20,c[31]),L=n(L,k,_,C,p,4,c[32]),C=n(C,L,k,_,g,11,c[33]),_=n(_,C,L,k,b,16,c[34]),k=n(k,_,C,L,T,23,c[35]),L=n(L,k,_,C,l,4,c[36]),C=n(C,L,k,_,u,11,c[37]),_=n(_,C,L,k,f,16,c[38]),k=n(k,_,C,L,y,23,c[39]),L=n(L,k,_,C,E,4,c[40]),C=n(C,L,k,_,a,11,c[41]),_=n(_,C,L,k,d,16,c[42]),k=n(k,_,C,L,m,23,c[43]),L=n(L,k,_,C,v,4,c[44]),C=n(C,L,k,_,S,11,c[45]),_=n(_,C,L,k,w,16,c[46]),k=n(k,_,C,L,h,23,c[47]),L=s(L,k,_,C,a,6,c[48]),C=s(C,L,k,_,f,10,c[49]),_=s(_,C,L,k,T,15,c[50]),k=s(k,_,C,L,p,21,c[51]),L=s(L,k,_,C,S,6,c[52]),C=s(C,L,k,_,d,10,c[53]),_=s(_,C,L,k,y,15,c[54]),k=s(k,_,C,L,l,21,c[55]),L=s(L,k,_,C,g,6,c[56]),C=s(C,L,k,_,w,10,c[57]),_=s(_,C,L,k,m,15,c[58]),k=s(k,_,C,L,E,21,c[59]),L=s(L,k,_,C,u,6,c[60]),C=s(C,L,k,_,b,10,c[61]),_=s(_,C,L,k,h,15,c[62]),k=s(k,_,C,L,v,21,c[63]);r[0]=r[0]+L|0,r[1]=r[1]+k|0,r[2]=r[2]+_|0,r[3]=r[3]+C|0},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,s=8*e.sigBytes;i[s>>>5]|=128<<24-s%32;var o=t.floor(n/4294967296);for(i[(s+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[(s+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(i.length+1),this._process(),e=this._hash,i=e.words,n=0;4>n;n++)s=i[n],i[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);return e},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}}),o.MD5=l._createHelper(r),o.HmacMD5=l._createHmacHelper(r)}(Math),function(){function t(t){var i={r:0,g:0,b:0},s=1,r=!1,a=!1;return"string"==typeof t&&(t=M(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(i=e(t.r,t.g,t.b),r=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=A(t.s),t.v=A(t.v),i=o(t.h,t.s,t.v),r=!0,a="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=A(t.s),t.l=A(t.l),i=n(t.h,t.s,t.l),r=!0,a="hsl"),t.hasOwnProperty("a")&&(s=t.a)),s=T(s),{ok:r,format:t.format||a,r:F(255,$(i.r,0)),g:F(255,$(i.g,0)),b:F(255,$(i.b,0)),a:s}}function e(t,e,i){return{r:255*w(t,255),g:255*w(e,255),b:255*w(i,255)}}function i(t,e,i){t=w(t,255),e=w(e,255),i=w(i,255);var n,s,o=$(t,e,i),r=F(t,e,i),a=(o+r)/2;if(o==r)n=s=0;else{var l=o-r;switch(s=a>.5?l/(2-o-r):l/(o+r),o){case t:n=(e-i)/l+(i>e?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:s,l:a}}function n(t,e,i){function n(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}var s,o,r;if(t=w(t,360),e=w(e,100),i=w(i,100),0===e)s=o=r=i;else{var a=.5>i?i*(1+e):i+e-i*e,l=2*i-a;s=n(l,a,t+1/3),o=n(l,a,t),r=n(l,a,t-1/3)}return{r:255*s,g:255*o,b:255*r}}function s(t,e,i){t=w(t,255),e=w(e,255),i=w(i,255);var n,s,o=$(t,e,i),r=F(t,e,i),a=o,l=o-r;if(s=0===o?0:l/o,o==r)n=0;else{switch(o){case t:n=(e-i)/l+(i>e?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:s,v:a}}function o(t,e,i){t=6*w(t,360),e=w(e,100),i=w(i,100);var n=P.floor(t),s=t-n,o=i*(1-e),r=i*(1-s*e),a=i*(1-(1-s)*e),l=n%6,c=[i,r,o,o,a,i][l],h=[a,i,i,r,o,o][l],d=[o,o,a,i,i,r][l];return{r:255*c,g:255*h,b:255*d}}function r(t,e,i,n){var s=[x(U(t).toString(16)),x(U(e).toString(16)),x(U(i).toString(16))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function a(t,e,i,n){var s=[x(I(n)),x(U(t).toString(16)),x(U(e).toString(16)),x(U(i).toString(16))];return s.join("")}function l(t,e){e=0===e?0:e||10;var i=B(t).toHsl();return i.s-=e/100,i.s=L(i.s),B(i)}function c(t,e){e=0===e?0:e||10;var i=B(t).toHsl();return i.s+=e/100,i.s=L(i.s),B(i)}function h(t){return B(t).desaturate(100)}function d(t,e){e=0===e?0:e||10;var i=B(t).toHsl();return i.l+=e/100,i.l=L(i.l),B(i)}function u(t,e){e=0===e?0:e||10;var i=B(t).toRgb();return i.r=$(0,F(255,i.r-U(255*-(e/100)))),i.g=$(0,F(255,i.g-U(255*-(e/100)))),i.b=$(0,F(255,i.b-U(255*-(e/100)))),B(i)}function p(t,e){e=0===e?0:e||10;var i=B(t).toHsl();return i.l-=e/100,i.l=L(i.l),B(i)}function m(t,e){var i=B(t).toHsl(),n=(U(i.h)+e)%360;return i.h=0>n?360+n:n,B(i)}function f(t){var e=B(t).toHsl();return e.h=(e.h+180)%360,B(e)}function g(t){var e=B(t).toHsl(),i=e.h;return[B(t),B({h:(i+120)%360,s:e.s,l:e.l}),B({h:(i+240)%360,s:e.s,l:e.l})]}function v(t){var e=B(t).toHsl(),i=e.h;return[B(t),B({h:(i+90)%360,s:e.s,l:e.l}),B({h:(i+180)%360,s:e.s,l:e.l}),B({h:(i+270)%360,s:e.s,l:e.l})]}function y(t){var e=B(t).toHsl(),i=e.h;return[B(t),B({h:(i+72)%360,s:e.s,l:e.l}),B({h:(i+216)%360,s:e.s,l:e.l})]}function b(t,e,i){e=e||6,i=i||30;var n=B(t).toHsl(),s=360/i,o=[B(t)];for(n.h=(n.h-(s*e>>1)+720)%360;--e;)n.h=(n.h+s)%360,o.push(B(n));return o}function S(t,e){e=e||6;for(var i=B(t).toHsv(),n=i.h,s=i.s,o=i.v,r=[],a=1/e;e--;)r.push(B({h:n,s:s,v:o})),o=(o+a)%1;return r}function E(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function T(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function w(t,e){_(t)&&(t="100%");var i=C(t);return t=F(e,$(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),P.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function L(t){return F(1,$(0,t))}function k(t){return parseInt(t,16)}function _(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function C(t){return"string"==typeof t&&-1!=t.indexOf("%")}function x(t){return 1==t.length?"0"+t:""+t}function A(t){return 1>=t&&(t=100*t+"%"),t}function I(t){return Math.round(255*parseFloat(t)).toString(16)}function D(t){return k(t)/255}function M(t){t=t.replace(R,"").replace(O,"").toLowerCase();var e=!1;if(j[t])t=j[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=V.rgb.exec(t))?{r:i[1],g:i[2],b:i[3]}:(i=V.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=V.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=V.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=V.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=V.hex8.exec(t))?{a:D(i[1]),r:k(i[2]),g:k(i[3]),b:k(i[4]),format:e?"name":"hex8"}:(i=V.hex6.exec(t))?{r:k(i[1]),g:k(i[2]),b:k(i[3]),format:e?"name":"hex"}:(i=V.hex3.exec(t))?{r:k(i[1]+""+i[1]),g:k(i[2]+""+i[2]),b:k(i[3]+""+i[3]),format:e?"name":"hex"}:!1}var R=/^[\s,#]+/,O=/\s+$/,N=0,P=Math,U=P.round,F=P.min,$=P.max,z=P.random,B=function G(e,i){if(e=e?e:"",i=i||{},e instanceof G)return e;if(!(this instanceof G))return new G(e,i);var n=t(e);this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=U(100*this._a)/100,this._format=i.format||n.format,this._gradientType=i.gradientType,this._r<1&&(this._r=U(this._r)),this._g<1&&(this._g=U(this._g)),this._b<1&&(this._b=U(this._b)),this._ok=n.ok,this._tc_id=N++};B.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=T(t),this._roundA=U(100*this._a)/100,this},toHsv:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=s(this._r,this._g,this._b),e=U(360*t.h),i=U(100*t.s),n=U(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=i(this._r,this._g,this._b),e=U(360*t.h),n=U(100*t.s),s=U(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+s+"%)":"hsla("+e+", "+n+"%, "+s+"%, "+this._roundA+")"},toHex:function(t){return r(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return a(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:U(this._r),g:U(this._g),b:U(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+U(this._r)+", "+U(this._g)+", "+U(this._b)+")":"rgba("+U(this._r)+", "+U(this._g)+", "+U(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:U(100*w(this._r,255))+"%",g:U(100*w(this._g,255))+"%",b:U(100*w(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+U(100*w(this._r,255))+"%, "+U(100*w(this._g,255))+"%, "+U(100*w(this._b,255))+"%)":"rgba("+U(100*w(this._r,255))+"%, "+U(100*w(this._g,255))+"%, "+U(100*w(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:H[r(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+a(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var s=B(t);i=s.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0,s=!e&&n&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return s?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(m,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(b,arguments)},complement:function(){return this._applyCombination(f,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(g,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},B.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:A(t[n]));t=i}return B(t,e)},B.equals=function(t,e){return t&&e?B(t).toRgbString()==B(e).toRgbString():!1},B.random=function(){return B.fromRatio({r:z(),g:z(),b:z()})},B.mix=function(t,e,i){i=0===i?0:i||50;var n,s=B(t).toRgb(),o=B(e).toRgb(),r=i/100,a=2*r-1,l=o.a-s.a;n=a*l==-1?a:(a+l)/(1+a*l),n=(n+1)/2;var c=1-n,h={r:o.r*n+s.r*c,g:o.g*n+s.g*c,b:o.b*n+s.b*c,a:o.a*r+s.a*(1-r)};return B(h)},B.readability=function(t,e){var i=B(t),n=B(e),s=i.toRgb(),o=n.toRgb(),r=i.getBrightness(),a=n.getBrightness(),l=Math.max(s.r,o.r)-Math.min(s.r,o.r)+Math.max(s.g,o.g)-Math.min(s.g,o.g)+Math.max(s.b,o.b)-Math.min(s.b,o.b);return{brightness:Math.abs(r-a),color:l}},B.isReadable=function(t,e){var i=B.readability(t,e);return i.brightness>125&&i.color>500},B.mostReadable=function(t,e){for(var i=null,n=0,s=!1,o=0;o<e.length;o++){var r=B.readability(t,e[o]),a=r.brightness>125&&r.color>500,l=3*(r.brightness/125)+r.color/500;(a&&!s||a&&s&&l>n||!a&&!s&&l>n)&&(s=a,n=l,i=B(e[o]))}return i};var j=B.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},H=B.hexNames=E(j),V=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",s="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=B:"function"==typeof define&&define.amd?define(function(){return B}):window.tinycolor=B}(),function(){function t(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}var i=["\n"];for(ix=0;100>ix;ix++)i.push(i[ix]+e);return i}function e(){this.step="    ",this.shift=t(this.step)}function i(t,e){return e-(t.replace(/\(/g,"").length-t.replace(/\)/g,"").length)}function n(t,e){return t.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+e+e+"AND ").replace(/ BETWEEN /gi,"~::~"+e+"BETWEEN ").replace(/ CASE /gi,"~::~"+e+"CASE ").replace(/ ELSE /gi,"~::~"+e+"ELSE ").replace(/ END /gi,"~::~"+e+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+e+"ON ").replace(/ OR /gi,"~::~"+e+e+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+e+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+e).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+e+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}e.prototype.xml=function(e,i){var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),s=n.length,o=!1,r=0,a="",l=0,c=i?t(i):this.shift;for(l=0;s>l;l++)n[l].search(/<!/)>-1?(a+=c[r]+n[l],o=!0,(n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1||n[l].search(/!DOCTYPE/)>-1)&&(o=!1)):n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1?(a+=n[l],o=!1):/^<\w/.exec(n[l-1])&&/^<\/\w/.exec(n[l])&&/^<[\w:\-\.\,]+/.exec(n[l-1])==/^<\/[\w:\-\.\,]+/.exec(n[l])[0].replace("/","")?(a+=n[l],o||r--):n[l].search(/<\w/)>-1&&-1==n[l].search(/<\//)&&-1==n[l].search(/\/>/)?a=a+=o?n[l]:c[r++]+n[l]:n[l].search(/<\w/)>-1&&n[l].search(/<\//)>-1?a=a+=o?n[l]:c[r]+n[l]:n[l].search(/<\//)>-1?a=a+=o?n[l]:c[--r]+n[l]:n[l].search(/\/>/)>-1?a=a+=o?n[l]:c[r]+n[l]:a+=n[l].search(/<\?/)>-1?c[r]+n[l]:n[l].search(/xmlns\:/)>-1||n[l].search(/xmlns\=/)>-1?c[r]+n[l]:n[l];return"\n"==a[0]?a.slice(1):a},e.prototype.json=function(t,e){var e=e?e:this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},e.prototype.css=function(e,i){var n=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),s=n.length,o=0,r="",a=0,l=i?t(i):this.shift;for(a=0;s>a;a++)r+=/\{/.exec(n[a])?l[o++]+n[a]:/\}/.exec(n[a])?l[--o]+n[a]:/\*\\/.exec(n[a])?l[o]+n[a]:l[o]+n[a];return r.replace(/^\n{1,}/,"")},e.prototype.sql=function(e,s){var o=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),r=o.length,a=[],l=0,c=this.step,h=0,d="",u=0,p=s?t(s):this.shift;for(u=0;r>u;u++)a=a.concat(u%2?o[u]:n(o[u],c));for(r=a.length,u=0;r>u;u++){h=i(a[u],h),/\s{0,}\s{0,}SELECT\s{0,}/.exec(a[u])&&(a[u]=a[u].replace(/\,/g,",\n"+c+c)),/\s{0,}\s{0,}SET\s{0,}/.exec(a[u])&&(a[u]=a[u].replace(/\,/g,",\n"+c+c)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(a[u])?(l++,d+=p[l]+a[u]):/\'/.exec(a[u])?(1>h&&l&&l--,d+=a[u]):(d+=p[l]+a[u],1>h&&l&&l--)
}return d=d.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},e.prototype.xmlmin=function(t,e){var i=e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return i.replace(/>\s{0,}</g,"><")},e.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},e.prototype.cssmin=function(t,e){var i=e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return i.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},e.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},window.vkbeautify=new e}(),function(t,e){function i(t){return t.call.apply(t.bind,arguments)}function n(t,e){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function s(){return s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:n,s.apply(null,arguments)}function o(t,e){this.J=t,this.t=e||t,this.C=this.t.document}function r(t,i,n){t=t.C.getElementsByTagName(i)[0],t||(t=e.documentElement),t&&t.lastChild&&t.insertBefore(n,t.lastChild)}function a(t,e){function i(){t.C.body?e():setTimeout(i,0)}i()}function l(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),s=0;s<e.length;s+=1){for(var o=!1,r=0;r<n.length;r+=1)if(e[s]===n[r]){o=!0;break}o||n.push(e[s])}for(e=[],s=0;s<n.length;s+=1){for(o=!1,r=0;r<i.length;r+=1)if(n[s]===i[r]){o=!0;break}o||e.push(n[s])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(t,e){for(var i=t.className.split(/\s+/),n=0,s=i.length;s>n;n++)if(i[n]==e)return!0;return!1}function h(t){if("string"==typeof t.ma)return t.ma;var e=t.t.location.protocol;return"about:"==e&&(e=t.J.location.protocol),"https:"==e?"https:":"http:"}function d(t,e){var i=t.createElement("link",{rel:"stylesheet",href:e}),n=!1;i.onload=function(){n||(n=!0)},i.onerror=function(){n||(n=!0)},r(t,"head",i)}function u(e,i,n,s){var o=e.C.getElementsByTagName("head")[0];if(o){var r=e.createElement("script",{src:i}),a=!1;return r.onload=r.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&o.removeChild(r))},o.appendChild(r),t.setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},s||5e3),r}return null}function p(t,e){this.X=t,this.fa=e}function m(t,e,i,n){this.c=null!=t?t:null,this.g=null!=e?e:null,this.A=null!=i?i:null,this.e=null!=n?n:null}function f(t){t=K.exec(t);var e=null,i=null,n=null,s=null;return t&&(null!==t[1]&&t[1]&&(e=parseInt(t[1],10)),null!==t[2]&&t[2]&&(i=parseInt(t[2],10)),null!==t[3]&&t[3]&&(n=parseInt(t[3],10)),null!==t[4]&&t[4]&&(s=/^[0-9]+$/.test(t[4])?parseInt(t[4],10):t[4])),new m(e,i,n,s)}function g(t,e,i,n,s,o,r,a){this.M=t,this.k=a}function v(t){this.a=t}function y(t){var e=E(t.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=e?(/BB\d{2}/.test(e)&&(e="BlackBerry"),e):(t=E(t.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1),""!=t?("Mac_PowerPC"==t?t="Macintosh":"PlayStation"==t&&(t="Linux"),t):"Unknown")}function b(t){var e=E(t.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(e||(e=E(t.a,/Windows Phone( OS)? ([^;)]+)/,2))||(e=E(t.a,/(iPhone )?OS ([\d_]+)/,2)))return e;if(e=E(t.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var e=e.split(/\s/),i=0;i<e.length;i+=1)if(/^[\d\._]+$/.test(e[i]))return e[i];return(t=E(t.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?t:"Unknown"}function S(t){var e=y(t),i=f(b(t)),n=f(E(t.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),s="Unknown",o=new m,o="Unknown",r=!1;return/OPR\/[\d.]+/.test(t.a)?s="Opera":-1!=t.a.indexOf("Chrome")||-1!=t.a.indexOf("CrMo")||-1!=t.a.indexOf("CriOS")?s="Chrome":/Silk\/\d/.test(t.a)?s="Silk":"BlackBerry"==e||"Android"==e?s="BuiltinBrowser":-1!=t.a.indexOf("PhantomJS")?s="PhantomJS":-1!=t.a.indexOf("Safari")?s="Safari":-1!=t.a.indexOf("AdobeAIR")?s="AdobeAIR":-1!=t.a.indexOf("PlayStation")&&(s="BuiltinBrowser"),"BuiltinBrowser"==s?o="Unknown":"Silk"==s?o=E(t.a,/Silk\/([\d\._]+)/,1):"Chrome"==s?o=E(t.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=t.a.indexOf("Version/")?o=E(t.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==s?o=E(t.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==s?o=E(t.a,/OPR\/([\d.]+)/,1):"PhantomJS"==s&&(o=E(t.a,/PhantomJS\/([\d.]+)/,1)),o=f(o),r="AdobeAIR"==s?2<o.c||2==o.c&&5<=o.g:"BlackBerry"==e?10<=i.c:"Android"==e?2<i.c||2==i.c&&1<i.g:526<=n.c||525<=n.c&&13<=n.g,new g(s,0,0,0,0,0,0,new p(r,536>n.c||536==n.c&&11>n.g))}function E(t,e,i){return(t=t.match(e))&&t[i]?t[i]:""}function T(t){this.la=t||"-"}function w(t,e){this.M=t,this.Y=4,this.N="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.N=i[1],this.Y=parseInt(i[2],10))}function L(t){return t.N+t.Y}function k(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function _(t,e){this.d=t,this.p=t.t.document.documentElement,this.P=e,this.j="wf",this.h=new T("-"),this.ga=!1!==e.events,this.B=!1!==e.classes}function C(t){if(t.B){var e=c(t.p,t.h.e(t.j,"active")),i=[],n=[t.h.e(t.j,"loading")];e||i.push(t.h.e(t.j,"inactive")),l(t.p,i,n)}x(t,"inactive")}function x(t,e,i){t.ga&&t.P[e]&&(i?t.P[e](i.getName(),L(i)):t.P[e]())}function A(){this.w={}}function I(t,e){this.d=t,this.G=e,this.m=this.d.createElement("span",{"aria-hidden":"true"},this.G)}function D(t){r(t.d,"body",t.m)}function M(t){var e;e=[];for(var i=t.M.split(/,\s*/),n=0;n<i.length;n++){var s=i[n].replace(/['"]/g,"");e.push(-1==s.indexOf(" ")?s:"'"+s+"'")}return e=e.join(","),i="normal","o"===t.N?i="oblique":"i"===t.N&&(i="italic"),"display:block;position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+e+";"+("font-style:"+i+";font-weight:"+(t.Y+"00")+";")}function R(t,e,i,n,s,o,r,a){this.Z=t,this.ja=e,this.d=i,this.s=n,this.G=a||"BESbswy",this.k=s,this.I={},this.W=o||3e3,this.ba=r||null,this.F=this.D=null,t=new I(this.d,this.G),D(t);for(var l in Q)Q.hasOwnProperty(l)&&(e=new w(Q[l],L(this.s)),e=M(e),t.m.style.cssText=e,this.I[Q[l]]=t.m.offsetWidth);t.remove()}function O(t,e,i){for(var n in Q)if(Q.hasOwnProperty(n)&&e===t.I[Q[n]]&&i===t.I[Q[n]])return!0;return!1}function N(t){var e=t.D.m.offsetWidth,i=t.F.m.offsetWidth;e===t.I.serif&&i===t.I["sans-serif"]||t.k.fa&&O(t,e,i)?J()-t.na>=t.W?t.k.fa&&O(t,e,i)&&(null===t.ba||t.ba.hasOwnProperty(t.s.getName()))?U(t,t.Z):U(t,t.ja):P(t):U(t,t.Z)}function P(t){setTimeout(s(function(){N(this)},t),25)}function U(t,e){t.D.remove(),t.F.remove(),e(t.s)}function F(t,e,i,n){this.d=e,this.u=i,this.R=0,this.da=this.aa=!1,this.W=n,this.k=t.k}function $(t,e,i,n,o){if(i=i||{},0===e.length&&o)C(t.u);else for(t.R+=e.length,o&&(t.aa=o),o=0;o<e.length;o++){var r=e[o],a=i[r.getName()],c=t.u,h=r;c.B&&l(c.p,[c.h.e(c.j,h.getName(),L(h).toString(),"loading")]),x(c,"fontloading",h),c=null,c=new R(s(t.ha,t),s(t.ia,t),t.d,r,t.k,t.W,n,a),c.start()}}function z(t){0==--t.R&&t.aa&&(t.da?(t=t.u,t.B&&l(t.p,[t.h.e(t.j,"active")],[t.h.e(t.j,"loading"),t.h.e(t.j,"inactive")]),x(t,"active")):C(t.u))}function B(t){this.J=t,this.v=new A,this.oa=new v(t.navigator.userAgent),this.a=this.oa.parse(),this.T=this.U=0,this.Q=this.S=!0}function j(t,e,i,n,s){var o=0==--t.U;(t.Q||t.S)&&setTimeout(function(){$(e,i,n||null,s||null,o)},0)}function H(t,e,i){this.O=t?t:e+te,this.q=[],this.V=[],this.ea=i||""}function V(t){this.q=t,this.ca=[],this.L={}}function G(t,e){this.a=new v(navigator.userAgent).parse(),this.d=t,this.f=e}function q(t,e){this.d=t,this.f=e,this.o=[]}function X(t,e){this.d=t,this.f=e,this.o=[]}function W(t,e){this.d=t,this.f=e,this.o=[]}function Y(t,e){this.d=t,this.f=e}var J=Date.now||function(){return+new Date};o.prototype.createElement=function(t,e,i){if(t=this.C.createElement(t),e)for(var n in e)e.hasOwnProperty(n)&&("style"==n?t.style.cssText=e[n]:t.setAttribute(n,e[n]));return i&&t.appendChild(this.C.createTextNode(i)),t};var K=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;m.prototype.compare=function(t){return this.c>t.c||this.c===t.c&&this.g>t.g||this.c===t.c&&this.g===t.g&&this.A>t.A?1:this.c<t.c||this.c===t.c&&this.g<t.g||this.c===t.c&&this.g===t.g&&this.A<t.A?-1:0},m.prototype.toString=function(){return[this.c,this.g||"",this.A||"",this.e||""].join("")},g.prototype.getName=function(){return this.M};var Z=new g("Unknown",0,0,0,0,0,0,new p(!1,!1));v.prototype.parse=function(){var t;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){t=y(this);var e=f(b(this)),i=null,n=E(this.a,/Trident\/([\d\w\.]+)/,1),i=f(-1!=this.a.indexOf("MSIE")?E(this.a,/MSIE ([\d\w\.]+)/,1):E(this.a,/rv:([\d\w\.]+)/,1));""!=n&&f(n),t=new g("MSIE",0,0,0,0,0,0,new p("Windows"==t&&6<=i.c||"Windows Phone"==t&&8<=e.c,!1))}else if(-1!=this.a.indexOf("Opera"))t:if(t=f(E(this.a,/Presto\/([\d\w\.]+)/,1)),f(b(this)),null!==t.c||f(E(this.a,/rv:([^\)]+)/,1)),-1!=this.a.indexOf("Opera Mini/"))t=f(E(this.a,/Opera Mini\/([\d\.]+)/,1)),t=new g("OperaMini",0,0,0,y(this),0,0,new p(!1,!1));else{if(-1!=this.a.indexOf("Version/")&&(t=f(E(this.a,/Version\/([\d\.]+)/,1)),null!==t.c)){t=new g("Opera",0,0,0,y(this),0,0,new p(10<=t.c,!1));break t}t=f(E(this.a,/Opera[\/ ]([\d\.]+)/,1)),t=null!==t.c?new g("Opera",0,0,0,y(this),0,0,new p(10<=t.c,!1)):new g("Opera",0,0,0,y(this),0,0,new p(!1,!1))}else/OPR\/[\d.]+/.test(this.a)?t=S(this):/AppleWeb(K|k)it/.test(this.a)?t=S(this):-1!=this.a.indexOf("Gecko")?(t="Unknown",e=new m,f(b(this)),e=!1,-1!=this.a.indexOf("Firefox")?(t="Firefox",e=f(E(this.a,/Firefox\/([\d\w\.]+)/,1)),e=3<=e.c&&5<=e.g):-1!=this.a.indexOf("Mozilla")&&(t="Mozilla"),i=f(E(this.a,/rv:([^\)]+)/,1)),e||(e=1<i.c||1==i.c&&9<i.g||1==i.c&&9==i.g&&2<=i.A),t=new g(t,0,0,0,y(this),0,0,new p(e,!1))):t=Z;return t},T.prototype.e=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.la)},w.prototype.getName=function(){return this.M},I.prototype.remove=function(){var t=this.m;t.parentNode&&t.parentNode.removeChild(t)};var Q={ra:"serif",qa:"sans-serif",pa:"monospace"};R.prototype.start=function(){this.D=new I(this.d,this.G),D(this.D),this.F=new I(this.d,this.G),D(this.F),this.na=J();var t=new w(this.s.getName()+",serif",L(this.s)),t=M(t);this.D.m.style.cssText=t,t=new w(this.s.getName()+",sans-serif",L(this.s)),t=M(t),this.F.m.style.cssText=t,N(this)},F.prototype.ha=function(t){var e=this.u;e.B&&l(e.p,[e.h.e(e.j,t.getName(),L(t).toString(),"active")],[e.h.e(e.j,t.getName(),L(t).toString(),"loading"),e.h.e(e.j,t.getName(),L(t).toString(),"inactive")]),x(e,"fontactive",t),this.da=!0,z(this)},F.prototype.ia=function(t){var e=this.u;if(e.B){var i=c(e.p,e.h.e(e.j,t.getName(),L(t).toString(),"active")),n=[],s=[e.h.e(e.j,t.getName(),L(t).toString(),"loading")];i||n.push(e.h.e(e.j,t.getName(),L(t).toString(),"inactive")),l(e.p,n,s)}x(e,"fontinactive",t),z(this)},B.prototype.load=function(t){this.d=new o(this.J,t.context||this.J),this.S=!1!==t.events,this.Q=!1!==t.classes;var e=new _(this.d,t),i=[],n=t.timeout;e.B&&l(e.p,[e.h.e(e.j,"loading")]),x(e,"loading");var r,i=this.v,a=this.d,c=[];for(r in t)if(t.hasOwnProperty(r)){var h=i.w[r];h&&c.push(h(t[r],a))}for(i=c,this.T=this.U=i.length,t=new F(this.a,this.d,e,n),n=0,r=i.length;r>n;n++)a=i[n],a.K(this.a,s(this.ka,this,a,e,t))},B.prototype.ka=function(t,e,i,n){var s=this;n?t.load(function(t,e,n){j(s,i,t,e,n)}):(t=0==--this.U,this.T--,t&&0==this.T?C(e):(this.Q||this.S)&&$(i,[],{},null,t))};var te="//fonts.googleapis.com/css";H.prototype.e=function(){if(0==this.q.length)throw Error("No fonts to load!");if(-1!=this.O.indexOf("kit="))return this.O;for(var t=this.q.length,e=[],i=0;t>i;i++)e.push(this.q[i].replace(/ /g,"+"));return t=this.O+"?family="+e.join("%7C"),0<this.V.length&&(t+="&subset="+this.V.join(",")),0<this.ea.length&&(t+="&text="+encodeURIComponent(this.ea)),t};var ee={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},ie={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ne={i:"i",italic:"i",n:"n",normal:"n"},se=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;V.prototype.parse=function(){for(var t=this.q.length,e=0;t>e;e++){var i=this.q[e].split(":"),n=i[0].replace(/\+/g," "),s=["n4"];if(2<=i.length){var o,r=i[1];if(o=[],r)for(var r=r.split(","),a=r.length,l=0;a>l;l++){var c;if(c=r[l],c.match(/^[\w-]+$/)){c=se.exec(c.toLowerCase());var h=void 0;if(null==c)h="";else{if(h=void 0,h=c[1],null==h||""==h)h="4";else var d=ie[h],h=d?d:isNaN(h)?"4":h.substr(0,1);c=c[2],h=[null==c||""==c?"n":ne[c],h].join("")}c=h}else c="";c&&o.push(c)}0<o.length&&(s=o),3==i.length&&(i=i[2],o=[],i=i?i.split(","):o,0<i.length&&(i=ee[i[0]])&&(this.L[n]=i))}for(this.L[n]||(i=ee[n])&&(this.L[n]=i),i=0;i<s.length;i+=1)this.ca.push(new w(n,s[i]))}};var oe={Arimo:!0,Cousine:!0,Tinos:!0};G.prototype.K=function(t,e){e(t.k.X)},G.prototype.load=function(t){var e=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?a(e,s(this.$,this,t)):this.$(t)},G.prototype.$=function(t){for(var e=this.d,i=new H(this.f.api,h(e),this.f.text),n=this.f.families,s=n.length,o=0;s>o;o++){var r=n[o].split(":");3==r.length&&i.V.push(r.pop());var a="";2==r.length&&""!=r[1]&&(a=":"),i.q.push(r.join(a))}n=new V(n),n.parse(),d(e,i.e()),t(n.ca,n.L,oe)},q.prototype.H=function(t){var e=this.d;return h(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(e.t.location.hostname||e.J.location.hostname)+"/"+t+".js"},q.prototype.K=function(t,e){var i=this.f.id,n=this.d.t,s=this;i?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[i]=function(t,i){for(var n=0,o=i.fonts.length;o>n;++n){var r=i.fonts[n];s.o.push(new w(r.name,k("font-weight:"+r.weight+";font-style:"+r.style)))}e(t)},u(this.d,this.H(i),function(t){t&&e(!1)})):e(!1)},q.prototype.load=function(t){t(this.o)},X.prototype.H=function(t){var e=h(this.d);return(this.f.api||e+"//use.typekit.net")+"/"+t+".js"},X.prototype.K=function(t,e){var i=this.f.id,n=this.d.t,s=this;i?u(this.d,this.H(i),function(t){if(t)e(!1);else{if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var i=0;i<t.length;i+=2)for(var o=t[i],r=t[i+1],a=0;a<r.length;a++)s.o.push(new w(o,r[a]));try{n.Typekit.load({events:!1,classes:!1})}catch(l){}}e(!0)}},2e3):e(!1)},X.prototype.load=function(t){t(this.o)},W.prototype.K=function(t,e){var i=this,n=i.f.projectId,s=i.f.version;if(n){var o=i.d.t;u(this.d,i.H(n,s),function(s){if(s)e(!1);else{if(o["__mti_fntLst"+n]&&(s=o["__mti_fntLst"+n]()))for(var r=0;r<s.length;r++)i.o.push(new w(s[r].fontfamily));e(t.k.X)}}).id="__MonotypeAPIScript__"+n}else e(!1)},W.prototype.H=function(t,e){var i=h(this.d),n=(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return i+"//"+n+"/"+t+".js"+(e?"?v="+e:"")},W.prototype.load=function(t){t(this.o)},Y.prototype.load=function(t){var e,i,n=this.f.urls||[],s=this.f.families||[],o=this.f.testStrings||{};for(e=0,i=n.length;i>e;e++)d(this.d,n[e]);for(n=[],e=0,i=s.length;i>e;e++){var r=s[e].split(":");if(r[1])for(var a=r[1].split(","),l=0;l<a.length;l+=1)n.push(new w(r[0],a[l]));else n.push(new w(r[0]))}t(n,o)},Y.prototype.K=function(t,e){return e(t.k.X)};var re=new B(this);re.v.w.custom=function(t,e){return new Y(e,t)},re.v.w.fontdeck=function(t,e){return new q(e,t)},re.v.w.monotype=function(t,e){return new W(e,t)},re.v.w.typekit=function(t,e){return new X(e,t)},re.v.w.google=function(t,e){return new G(e,t)},this.WebFont||(this.WebFont={},this.WebFont.load=s(re.load,re),this.WebFontConfig&&re.load(this.WebFontConfig))}(this,document),function(t,e,i){e[t]=e[t]||i(),"undefined"!=typeof module&&module.exports?module.exports=e[t]:"function"==typeof define&&define.amd&&define(function(){return e[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function t(t,e){u.add(t,e),d||(d=m(u.drain))}function e(t){var e,i=typeof t;return null==t||"object"!=i&&"function"!=i||(e=t.then),"function"==typeof e?e:!1}function i(){for(var t=0;t<this.chain.length;t++)n(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function n(t,i,n){var s,o;try{i===!1?n.reject(t.msg):(s=i===!0?t.msg:i.call(void 0,t.msg),s===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=e(s))?o.call(s,n.resolve,n.reject):n.resolve(s))}catch(r){n.reject(r)}}function s(n){var r,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(r=e(n))?t(function(){var t=new a(l);try{r.call(n,function(){s.apply(t,arguments)},function(){o.apply(t,arguments)})}catch(e){o.call(t,e)}}):(l.msg=n,l.state=1,l.chain.length>0&&t(i,l))}catch(c){o.call(new a(l),c)}}}function o(e){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=e,n.state=2,n.chain.length>0&&t(i,n))}function r(t,e,i,n){for(var s=0;s<e.length;s++)!function(s){t.resolve(e[s]).then(function(t){i(s,t)},n)}(s)}function a(t){this.def=t,this.triggered=!1}function l(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new l(this);this.then=function(e,s){var o={success:"function"==typeof e?e:!0,failure:"function"==typeof s?s:!1};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),n.chain.push(o),0!==n.state&&t(i,n),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){s.call(n,t)},function(t){o.call(n,t)})}catch(r){o.call(n,r)}}var h,d,u,p=Object.prototype.toString,m="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function(t,e,i,n){return Object.defineProperty(t,e,{value:i,writable:!0,configurable:n!==!1})}}catch(f){h=function(t,e,i){return t[e]=i,t}}u=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,i,n;return{add:function(s,o){n=new t(s,o),i?i.next=n:e=n,i=n,n=void 0},drain:function(){var t=e;for(e=i=d=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=h({},"constructor",c,!1);return c.prototype=g,h(g,"__NPO__",0,!1),h(c,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,i){if("function"!=typeof e||"function"!=typeof i)throw TypeError("Not a function");e(t)})}),h(c,"reject",function(t){return new this(function(e,i){if("function"!=typeof e||"function"!=typeof i)throw TypeError("Not a function");i(t)})}),h(c,"all",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");var s=t.length,o=Array(s),a=0;r(e,t,function(t,e){o[t]=e,++a===s&&i(o)},n)})}),h(c,"race",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):new e(function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");r(e,t,function(t,e){i(e)},n)})}),c}),window.SL=function(t){t=t.split(".");for(var e=SL;t.length;){var i=t.shift();e[i]||(e[i]={}),e=e[i]}return e},$(function(){function t(){e(),SL.helpers&&SL.helpers.PageLoader.hide(),SL.settings.init(),SL.keyboard.init(),SL.pointer.init(),SL.warnings.init(),SL.draganddrop.init(),SL.fonts.init(),SL.visibility.init(),"undefined"==typeof SLConfig&&(window.SLConfig={}),i(),n()}function e(){var t=$("html");t.addClass("loaded"),SL.util.device.HAS_TOUCH&&t.addClass("touch"),SL.util.device.isMac()?t.addClass("ua-mac"):SL.util.device.isWindows()?t.addClass("ua-windows"):SL.util.device.isLinux()&&t.addClass("ua-linux"),SL.util.device.isChrome()?t.addClass("ua-chrome"):SL.util.device.isSafari()?t.addClass("ua-safari"):SL.util.device.isFirefox()?t.addClass("ua-firefox"):SL.util.device.isIE()&&t.addClass("ua-ie"),SL.util.device.getScrollBarWidth()>0&&t.addClass("has-visible-scrollbars")}function i(){"object"==typeof window.SLConfig&&(SLConfig.deck&&!SLConfig.deck.notes&&(SLConfig.deck.notes={}),SL.current_user=new SL.models.User(SLConfig.current_user),"object"==typeof SLConfig.deck&&(SL.current_deck=new SL.models.Deck(SLConfig.deck)),"object"==typeof SLConfig.theme&&(SL.current_theme=new SL.models.Theme(SLConfig.theme)),"object"==typeof SLConfig.team&&(SL.current_team=new SL.models.Team(SLConfig.team)))}function n(){var t=$("html");SL.util.hideAddressBar(),t.hasClass("home index")&&(SL.view=new SL.views.home.Index),SL.view=t.hasClass("home explore")?new SL.views.home.Explore:t.hasClass("users show")?new SL.views.users.Show:t.hasClass("decks show")?new SL.views.decks.Show:t.hasClass("decks edit")?new SL.editor.Editor:t.hasClass("decks edit-requires-upgrade")?new SL.views.decks.EditRequiresUpgrade:t.hasClass("decks embed")?new SL.views.decks.Embed:t.is(".decks.live-client")?new SL.views.decks.LiveClient:t.is(".decks.live-server")?new SL.views.decks.LiveServer:t.hasClass("decks speaker")?new SL.views.decks.Speaker:t.hasClass("decks export")?new SL.views.decks.Export:t.hasClass("decks fullscreen")?new SL.views.decks.Fullscreen:t.hasClass("decks review")?new SL.views.decks.Review:t.hasClass("decks password")?new SL.views.decks.Password:t.hasClass("teams-subscriptions-show")?new SL.views.teams.subscriptions.Show:t.hasClass("registrations")&&(t.hasClass("edit")||t.hasClass("update"))?new SL.views.devise.Edit:t.hasClass("registrations")||t.hasClass("team_registrations")||t.hasClass("sessions")||t.hasClass("passwords")||t.hasClass("invitations show")?new SL.views.devise.All:t.hasClass("subscriptions new")||t.hasClass("subscriptions edit")?new SL.views.subscriptions.New:t.hasClass("subscriptions show")?new SL.views.subscriptions.Show:t.hasClass("subscriptions edit_period")?new SL.views.subscriptions.EditPeriod:t.hasClass("teams-reactivate")?new SL.views.teams.subscriptions.Reactivate:t.hasClass("teams-signup")?new SL.views.teams.New:t.hasClass("teams edit")?new SL.views.teams.teams.Edit:t.hasClass("teams edit_members")?new SL.views.teams.teams.EditMembers:t.hasClass("teams show")?new SL.views.teams.teams.Show:t.hasClass("themes edit")?new SL.views.themes.Edit:t.hasClass("themes preview")?new SL.views.themes.Preview:t.hasClass("pricing")?new SL.views.statik.Pricing:t.hasClass("static")?new SL.views.statik.All:new SL.views.Base,Placement.sync()}setTimeout(t,1)}),SL("collections").Collection=Class.extend({init:function(t,e,i){this.factory=e,this.crud=i||{},this.changed=new signals.Signal,this.replaced=new signals.Signal,this.setData(t)},setData:function(t){var e=!!this.data&&"undefined"!=typeof this.data;if(this.data=t||[],"function"==typeof this.factory){var i=this.data;this.data=[];for(var n=0,s=i.length;s>n;n++){var o=i[n];this.data.push(o instanceof this.factory?i[n]:this.createModelInstance(i[n]))}}e&&this.replaced.dispatch()},appendData:function(t){var e=this.size();return this.setData(this.data.concat(t)),this.data.slice(e)},prependData:function(t){var e=this.size();return this.setData(t.concat(this.data)),this.data.slice(0,e)},find:function(t){for(var e=0,i=this.data.length;i>e;e++){var n=this.data[e];if(n===t)return e}return-1},contains:function(t){return-1!==this.find(t)},findByProperties:function(t){for(var e=0,i=this.data.length;i>e;e++){var n=this.data[e],s=!0;for(var o in t)t.hasOwnProperty(o)&&("function"==typeof n.get?n.get(o)!=t[o]&&(s=!1):n[o]!=t[o]&&(s=!1));if(s)return e}return-1},getByProperties:function(t){return this.data[this.findByProperties(t)]},getByID:function(t){return this.getByProperties({id:t})},remove:function(t){for(var e,i=0;i<this.data.length;i++)this.data[i]===t&&(e=this.data.splice(i,1)[0],i--);"undefined"!=typeof e&&this.changed.dispatch(null,[e])},removeByProperties:function(t){for(var e,i=this.findByProperties(t),n=0;-1!==i&&n++<1e3;)e=this.data.splice(i,1)[0],i=this.findByProperties(t);"undefined"!=typeof e&&this.changed.dispatch(null,[e])},removeByIndex:function(t){var e=this.data.splice(t,1);return"undefined"!=typeof e&&this.changed.dispatch(null,[e]),e},create:function(t,e){return new Promise(function(i,n){"function"==typeof this.factory?this.crud.create?$.ajax({type:"POST",context:this,url:e&&e.url?e.url:this.crud.create,data:t}).done(function(t){e&&e.model?(e.model.setAll(t),i(e.model)):e&&e.createModel===!1?i():i(this.createModel(t,e))}).fail(function(){n()}):i(this.createModel(t,e)):n()}.bind(this))},createModel:function(t,e){if(e=$.extend({prepend:!1},e),"function"==typeof this.factory){var i=this.createModelInstance(t);return e.prepend?this.unshift(i):this.push(i),i}},createModelInstance:function(t,e){return new this.factory(t,e)},clear:function(){this.data.length=0,this.changed.dispatch()},swap:function(t,e){var i="number"==typeof t&&t>=0&&t<this.size(),n="number"==typeof e&&e>=0&&e<this.size();if(i&&n){var s=this.data[t],o=this.data[e];this.data[t]=o,this.data[e]=s}this.changed.dispatch()},shiftLeft:function(t){"number"==typeof t&&t>0&&this.swap(t,t-1)},shiftRight:function(t){"number"==typeof t&&t<this.size()-1&&this.swap(t,t+1)},at:function(t){return this.data[t]},first:function(){return this.at(0)},last:function(){return this.at(this.size()-1)},size:function(){return this.data.length},isEmpty:function(){return 0===this.size()},getUniqueName:function(t,e,i){for(var n=-1,s=0,o=this.data.length;o>s;s++){var r=this.data[s],a="function"==typeof r.get?r.get(e):r[e];if(a){var l=a.match(new RegExp("^"+t+"\\s?(\\d+)?$"));l&&2===l.length&&(n=Math.max(l[1]?parseInt(l[1],10):0,n))}}return-1===n?t+(i?" 1":""):t+" "+(n+1)},toJSON:function(){return this.map(function(t){return"function"==typeof t.toJSON?t.toJSON():t})},destroy:function(){this.changed.dispose(),this.data=null},unshift:function(t){var e=this.data.unshift(t);return this.changed.dispatch(t),e},push:function(t){var e=this.data.push(t);return this.changed.dispatch([t]),e},pop:function(){var t=this.data.pop();return"undefined"!=typeof t&&this.changed.dispatch(null,[t]),t},map:function(t,e){return this.data.map(t,e)},some:function(t,e){return this.data.some(t,e)},filter:function(t,e){return this.data.filter(t,e)},forEach:function(t,e){return this.data.forEach(t,e)}}),SL("collections").Loadable=SL.collections.Collection.extend({init:function(){this._super.apply(this,arguments),this.loadStatus="",this.loadStarted=new signals.Signal,this.loadCompleted=new signals.Signal,this.loadFailed=new signals.Signal},load:function(){},unload:function(){this.loadXHR&&(this.loadXHR.abort(),this.loadXHR=null),this.loadStatus="",this.clear()},onLoadStarted:function(){this.loadStatus="loading",this.loadStarted.dispatch()},onLoadCompleted:function(){this.loadStatus="loaded",this.loadCompleted.dispatch()},onLoadFailed:function(){this.loadStatus="failed",this.loadFailed.dispatch()},isLoading:function(){return"loading"===this.loadStatus},isLoaded:function(){return"loaded"===this.loadStatus},destroy:function(){this.loadStarted.dispose(),this.loadCompleted.dispose(),this.loadFailed.dispose(),this._super()}}),SL("collections").Paginatable=SL.collections.Loadable.extend({init:function(){this._super.apply(this,arguments)},load:function(t){return this.isLoading()?void 0:(this.listURL=t||this.crud.list,this.onLoadStarted(),new Promise(function(t,e){this.loadXHR=$.ajax({type:"GET",url:this.listURL,context:this}).done(function(e){this.totalResults=e.total,this.pagesLoaded=1,this.pagesTotal=1,e.total>e.results.length&&(this.pagesTotal=Math.ceil(e.total/e.results.length)),this.setData(e.results),this.loadXHR=null,this.onLoadCompleted(),t()}).fail(function(){this.loadXHR=null,this.onLoadFailed(),e()})}.bind(this)))},hasNextPage:function(){return this.pagesLoaded<this.pagesTotal},loadNextPage:function(){return this.hasNextPage()?new Promise(function(t,e){$.ajax({type:"GET",url:this.listURL+"?page="+(this.pagesLoaded+1),context:this}).done(function(e){this.pagesLoaded+=1,t(this.appendData(e.results))}).fail(function(){e()})}.bind(this)):Promise.resolve([])},getTotalResults:function(){return this.totalResults},getLoadedResults:function(){return this.size()}}),SL("collections.collab").Comments=SL.collections.Loadable.extend({init:function(t,e){this._super(t,e||SL.models.collab.Comment,{list:SL.config.AJAX_COMMENTS_LIST(SL.current_deck.get("id")),create:SL.config.AJAX_COMMENTS_CREATE(SL.current_deck.get("id")),"delete":SL.config.AJAX_COMMENTS_DELETE(SL.current_deck.get("id"))})},load:function(t){return this.isLoading()?void 0:(this.url=t||this.crud.list,this.onLoadStarted(),new Promise(function(t,e){this.loadXHR=$.ajax({type:"GET",url:this.url,context:this}).done(function(e){this.pagesLoaded=1,this.pagesTotal=1,e.total>e.results.length&&(this.pagesTotal=Math.ceil(e.total/e.results.length)),this.setData(e.results.reverse()),this.pageOffsetID=this.isEmpty()?null:this.first().get("id"),this.loadXHR=null,this.onLoadCompleted(),t()}).fail(function(){this.loadXHR=null,this.onLoadFailed(),e()})}.bind(this)))},hasNextPage:function(){return this.pagesLoaded<this.pagesTotal},loadNextPage:function(){return this.hasNextPage()?new Promise(function(t,e){$.ajax({type:"GET",url:this.url+"?page="+this.pagesLoaded+"&offset_id="+this.pageOffsetID,context:this}).done(function(e){this.pagesLoaded+=1,t(this.prependData(e.results.reverse()))}).fail(function(){e()})}.bind(this)):Promise.resolve([])},create:function(t,e){e=$.extend({url:this.crud.create},e),e.model?e.model.setState(SL.models.collab.Comment.STATE_SAVING):e.model=this.createModel(t.comment);var i=JSON.parse(JSON.stringify(t));return delete i.comment.user_id,delete i.comment.created_at,this._super(i,e).then(function(){e.model.setState(SL.models.collab.Comment.STATE_SAVED)}.bind(this),function(){e.model.setState(SL.models.collab.Comment.STATE_FAILED)}.bind(this)),Promise.resolve(e.model)},retryCreate:function(t){return this.create({comment:t.toJSON()},{model:t})}}),SL("collections.collab").DeckUsers=SL.collections.Loadable.extend({init:function(t,e,i){this._super(t,e||SL.models.collab.DeckUser,i||{list:SL.config.AJAX_DECKUSER_LIST(SLConfig.deck.id),create:SL.config.AJAX_DECKUSER_CREATE(SLConfig.deck.id)})},load:function(){return this.isLoading()?void 0:(this.onLoadStarted(),new Promise(function(t,e){$.ajax({type:"GET",url:this.crud.list,context:this}).done(function(e){this.setData(e.results),this.onLoadCompleted(),t()}).fail(function(){this.onLoadFailed(),e()})}.bind(this)))},hasMoreThanOneEditor:function(){return this.getEditors().length>1},hasMoreThanOnePresentEditor:function(){return this.getPresentEditors().length>1},setEditing:function(t){this.forEach(function(e){e.set("editing",e.get("user_id")===t)})},getByUserID:function(t){return this.getByProperties({user_id:t})},getEditors:function(){return this.filter(function(t){return t.canEdit()&&t.isActive()})},getPresentEditors:function(){return this.filter(function(t){return t.canEdit()&&t.isOnline()})}}),SL("collections").MediaTags=SL.collections.Loadable.extend({init:function(t,e,i){this._super(t,e||SL.models.MediaTag,i||{list:SL.config.AJAX_MEDIA_TAG_LIST,create:SL.config.AJAX_MEDIA_TAG_CREATE,update:SL.config.AJAX_MEDIA_TAG_UPDATE,"delete":SL.config.AJAX_MEDIA_TAG_DELETE,add_media:SL.config.AJAX_MEDIA_TAG_ADD_MEDIA,remove_media:SL.config.AJAX_MEDIA_TAG_REMOVE_MEDIA}),this.associationChanged=new signals.Signal},load:function(){this.isLoading()||(this.onLoadStarted(),$.ajax({type:"GET",url:this.crud.list,context:this}).done(function(t){this.setData(t.results),this.onLoadCompleted()}).fail(function(){this.onLoadFailed()}))},create:function(t,e){return this._super($.extend({tag:{name:this.getUniqueName("Tag","name",!0)}},t),e)},addTagTo:function(t,e){e.forEach(function(e){t.addMedia(e)}),this.associationChanged.dispatch(t),$.ajax({type:"POST",url:this.crud.add_media(t.get("id")),context:this,data:{media_ids:e.map(function(t){return t.get("id")})}}).fail(function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")})},removeTagFrom:function(t,e){e.forEach(function(e){t.removeMedia(e)}),this.associationChanged.dispatch(t),$.ajax({type:"DELETE",url:this.crud.remove_media(t.get("id")),context:this,data:{media_ids:e.map(function(t){return t.get("id")
})}}).fail(function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")})}}),SL("collections").Media=SL.collections.Loadable.extend({init:function(t,e,i){this._super(t,e||SL.models.Media,i||{list:SL.config.AJAX_MEDIA_LIST,update:SL.config.AJAX_MEDIA_UPDATE,create:SL.config.AJAX_MEDIA_CREATE,"delete":SL.config.AJAX_MEDIA_DELETE})},load:function(){this.isLoading()||(this.page=1,this.pagedResults=[],this.onLoadStarted(),this.loadNextPage())},loadNextPage:function(){1===this.page||this.page<=this.totalPages?$.ajax({type:"GET",url:this.crud.list+"?page="+this.page,context:this}).done(function(t){this.totalPages||(this.totalPages=Math.ceil(t.total/t.results.length)),this.pagedResults=this.pagedResults.concat(t.results),this.page+=1,this.loadNextPage()}).fail(function(){this.onLoadFailed()}):(this.setData(this.pagedResults),this.onLoadCompleted())},createSearchFilter:function(t){if(!t||""===t)return function(){return!1};var e=new RegExp(t,"i");return function(t){return e.test(t.get("label"))}},getImages:function(){return this.filter(SL.models.Media.IMAGE.filter)},getVideos:function(){return this.filter(SL.models.Media.VIDEO.filter)}}),SL("collections").TeamInvites=SL.collections.Paginatable.extend({init:function(t,e){this._super(t,e||SL.models.Model,{list:SL.config.AJAX_TEAM_INVITATIONS_LIST})}}),SL("collections").TeamMediaTags=SL.collections.MediaTags.extend({init:function(t){this._super(t,SL.models.MediaTag,{list:SL.config.AJAX_TEAM_MEDIA_TAG_LIST,create:SL.config.AJAX_TEAM_MEDIA_TAG_CREATE,update:SL.config.AJAX_TEAM_MEDIA_TAG_UPDATE,"delete":SL.config.AJAX_TEAM_MEDIA_TAG_DELETE,add_media:SL.config.AJAX_TEAM_MEDIA_TAG_ADD_MEDIA,remove_media:SL.config.AJAX_TEAM_MEDIA_TAG_REMOVE_MEDIA})},createModelInstance:function(t){return this._super(t,this.crud)}}),SL("collections").TeamMedia=SL.collections.Media.extend({init:function(t){this._super(t,SL.models.Media,{list:SL.config.AJAX_TEAM_MEDIA_LIST,create:SL.config.AJAX_TEAM_MEDIA_CREATE,update:SL.config.AJAX_TEAM_MEDIA_UPDATE,"delete":SL.config.AJAX_TEAM_MEDIA_DELETE})},createModelInstance:function(t){return this._super(t,this.crud)}}),SL("collections").TeamMembers=SL.collections.Paginatable.extend({init:function(t,e){this._super(t,e||SL.models.User,{list:SL.config.AJAX_TEAM_MEMBERS_LIST})}}),SL("models").Model=Class.extend({init:function(t){this.watchlist={},this.setData(t)},setData:function(t){this.data=t||{}},getData:function(){return this.data},setAll:function(t){for(var e in t)this.set(e,t[e])},set:function(t,e){this.data[t]=e,this.watchlist[t]&&this.watchlist[t].dispatch(e)},get:function(t){if("string"==typeof t&&/\./.test(t)){for(var e=t.split("."),i=this.data;e.length&&i;)t=e.shift(),i=i[t];return i}return this.data[t]},has:function(t){var e=this.get(t);return!!e||e===!1||0===e},watch:function(t,e){this.watchlist[t]||(this.watchlist[t]=new signals.Signal),this.watchlist[t].add(e)},unwatch:function(t,e){this.watchlist[t]&&this.watchlist[t].remove(e)},toJSON:function(){return JSON.parse(JSON.stringify(this.data))},destroy:function(){for(var t in this.watchlist)this.watchlist[t].dispose(),delete this.watchlist[t]}}),SL("models").AccessToken=SL.models.Model.extend({init:function(t){this._super(t)},save:function(t){var e={access_token:{}};return t?t.forEach(function(t){e.access_token[t]=this.get(t)}.bind(this)):e.access_token=this.toJSON(),$.ajax({url:SL.config.AJAX_ACCESS_TOKENS_UPDATE(this.get("deck_id"),this.get("id")),type:"PUT",data:e})},destroy:function(){return $.ajax({url:SL.config.AJAX_ACCESS_TOKENS_DELETE(this.get("deck_id"),this.get("id")),type:"DELETE"})},clone:function(){return new SL.models.AccessToken(JSON.parse(JSON.stringify(this.data)))}}),SL("models.collab").Comment=SL.models.Model.extend({init:function(t){this._super(t),this.state=this.has("id")?SL.models.collab.Comment.STATE_SAVED:SL.models.collab.Comment.STATE_SAVING,this.stateChanged=new signals.Signal},setState:function(t){this.state=t,this.stateChanged.dispatch(this)},getState:function(){return this.state},getDisplayName:function(){return this.get("name")||this.get("username")},clone:function(){return new SL.models.collab.Comment(JSON.parse(JSON.stringify(this.data)))},save:function(t){var e={comment:{}};return t?t.forEach(function(t){e.comment[t]=this.get(t)}.bind(this)):e.comment=this.toJSON(),$.ajax({url:SL.config.AJAX_COMMENTS_UPDATE(SL.current_deck.get("id"),this.get("id")),type:"PUT",data:e})},destroy:function(){return $.ajax({url:SL.config.AJAX_COMMENTS_DELETE(SL.current_deck.get("id"),this.get("id")),type:"DELETE"})}}),SL.models.collab.Comment.STATE_SAVED="saved",SL.models.collab.Comment.STATE_SAVING="saving",SL.models.collab.Comment.STATE_FAILED="failed",SL("models.collab").DeckUser=SL.models.Model.extend({init:function(t){this._super(t),this.has("status")||this.set("status",SL.models.collab.DeckUser.STATUS_DISCONNECTED)},getDisplayName:function(){return this.get("name")||this.get("username")},canComment:function(){return!0},canEdit:function(){return-1!==[SL.models.collab.DeckUser.ROLE_OWNER,SL.models.collab.DeckUser.ROLE_ADMIN,SL.models.collab.DeckUser.ROLE_EDITOR].indexOf(this.get("role"))},isAdmin:function(){return-1!==[SL.models.collab.DeckUser.ROLE_OWNER,SL.models.collab.DeckUser.ROLE_ADMIN].indexOf(this.get("role"))},isOnline:function(){return this.get("status")&&this.get("status")!==SL.models.collab.DeckUser.STATUS_DISCONNECTED},isIdle:function(){return this.get("status")===SL.models.collab.DeckUser.STATUS_IDLE},isEditing:function(){return this.get("editing")===!0},isActive:function(){return this.get("active")===!0},isCurrentUser:function(){return this.get("user_id")===SL.current_user.get("id")},clone:function(){return new SL.models.collab.DeckUser(JSON.parse(JSON.stringify(this.data)))},save:function(t){var e={user:{}};return t?t.forEach(function(t){e.user[t]=this.get(t)}.bind(this)):e.user=this.toJSON(),$.ajax({url:SL.config.AJAX_DECKUSER_UPDATE(SL.current_deck.get("id"),this.get("user_id")),type:"PUT",data:e})},destroy:function(){return $.ajax({url:SL.config.AJAX_DECKUSER_DELETE(SL.current_deck.get("id"),this.get("user_id")),type:"DELETE"})}}),SL.models.collab.DeckUser.ROLE_OWNER="owner",SL.models.collab.DeckUser.ROLE_ADMIN="admin",SL.models.collab.DeckUser.ROLE_EDITOR="editor",SL.models.collab.DeckUser.ROLE_VIEWER="viewer",SL.models.collab.DeckUser.STATUS_DISCONNECTED="disconnected",SL.models.collab.DeckUser.STATUS_VIEWING="viewing",SL.models.collab.DeckUser.STATUS_IDLE="idle",SL("models").Customer=SL.models.Model.extend({init:function(t){this._super(t)},isTrial:function(){return"trialing"===this.get("subscription.status")},hasActiveSubscription:function(){return this.has("subscription")&&!this.get("subscription.cancel_at_period_end")},hasCoupon:function(){return this.has("subscription")&&this.has("subscription.coupon_code")},getNextInvoiceDate:function(){return this.get("next_charge")},getNextInvoiceSum:function(){return(parseFloat(this.get("next_charge_amount"))/100).toFixed(2)},clone:function(){return new SL.models.Customer(JSON.parse(JSON.stringify(this.data)))}}),SL("models").Deck=SL.models.Model.extend({init:function(t){this._super(t),$.extend(this,this.data),this.user=new SL.models.User(this.data.user),this.user_settings=new SL.models.UserSettings(this.data.user.settings)},isPaid:function(){return this.data.user?!!this.data.user.paid:!1},isPro:function(){return this.data.user?!!this.data.user.pro:!1},isVisibilityAll:function(){return this.get("visibility")===SL.models.Deck.VISIBILITY_ALL},isVisibilitySelf:function(){return this.get("visibility")===SL.models.Deck.VISIBILITY_SELF},isVisibilityTeam:function(){return this.get("visibility")===SL.models.Deck.VISIBILITY_TEAM},belongsTo:function(t){return this.get("user.id")===t.get("id")},getURL:function(t){t=$.extend({protocol:document.location.protocol,token:null,view:null},t);var e=this.get("user.username"),i=this.get("slug")||this.get("id"),n=t.protocol+"//"+document.location.host+SL.routes.DECK(e,i);return t.view&&(n+="/"+t.view),t.token&&(n+="?token="+t.token.get("token")),n},clone:function(){return new SL.models.Deck(JSON.parse(JSON.stringify(this.data)))}}),SL("models").Deck.VISIBILITY_SELF="self",SL("models").Deck.VISIBILITY_TEAM="team",SL("models").Deck.VISIBILITY_ALL="all",SL("models").MediaTag=SL.models.Model.extend({init:function(t,e){this._super(t),this.crud=$.extend({update:SL.config.AJAX_MEDIA_TAG_UPDATE,"delete":SL.config.AJAX_MEDIA_TAG_DELETE},e)},createFilter:function(){var t=this;return function(e){return t.hasMedia(e)}},hasMedia:function(t){return-1!==this.data.medias.indexOf(t.get("id"))},addMedia:function(t){this.hasMedia(t)||this.data.medias.push(t.get("id"))},removeMedia:function(t){for(var e=t.get("id"),i=0;i<this.data.medias.length;i++)this.data.medias[i]===e&&(this.data.medias.splice(i,1),i--)},clone:function(){return new SL.models.MediaTag(JSON.parse(JSON.stringify(this.data)))},save:function(t){var e={tag:{}};return t?t.forEach(function(t){e.tag[t]=this.get(t)}.bind(this)):e.tag=this.toJSON(),$.ajax({url:this.crud.update(this.get("id")),type:"PUT",data:e})},destroy:function(){return $.ajax({url:this.crud["delete"](this.get("id")),type:"DELETE"})}}),SL("models").Media=SL.models.Model.extend({uploadStatus:"",uploadFile:null,init:function(t,e,i,n){this._super(t),this.crud=$.extend({create:SL.config.AJAX_MEDIA_CREATE,update:SL.config.AJAX_MEDIA_UPDATE,"delete":SL.config.AJAX_MEDIA_DELETE},e),i?(this.uploadStatus=SL.models.Media.STATUS_UPLOAD_WAITING,this.uploadFile=i,this.uploadFilename=n):this.uploadStatus=SL.models.Media.STATUS_UPLOADED,this.uploadStarted=new signals.Signal,this.uploadProgressed=new signals.Signal,this.uploadCompleted=new signals.Signal,this.uploadFailed=new signals.Signal},upload:function(){/\.svg$/i.test(this.uploadFile.name)&&window.FileReader?(SL.analytics.trackEditor("Media: SVG upload started"),this.reader=new window.FileReader,this.reader.addEventListener("abort",this.uploadValidated.bind(this)),this.reader.addEventListener("error",this.uploadValidated.bind(this)),this.reader.addEventListener("load",function(t){var e=t.target.result;e&&e.length&&(e=e.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g,""));var i=$("<div>"+e+"</div>").find("svg").get(0);if(i){$(i).parent().find("*").contents().each(function(){8===this.nodeType&&$(this).remove()}),$(i).find("script").remove(),$(i).removeAttr("content"),$(i).find("[unicode]").each(function(){this.setAttribute("unicode",SL.util.escapeHTMLEntities(this.getAttribute("unicode")))});var n=i.getAttribute("width"),s=i.getAttribute("height"),o=i.hasAttribute("xmlns"),r=i.hasAttribute("viewBox");if(hasWidthAndHeight=n&&s,o||i.setAttribute("xmlns","http://www.w3.org/2000/svg"),hasWidthAndHeight&&(/[^\d]/g.test(n)||/[^\d]/g.test(s))&&(i.setAttribute("width",parseFloat(n)),i.setAttribute("height",parseFloat(s))),!r&&hasWidthAndHeight&&(i.setAttribute("viewBox",[0,0,i.getAttribute("width"),i.getAttribute("height")].join(" ")),r=!0),!hasWidthAndHeight&&r){var a=i.getAttribute("viewBox").split(" ");4===a.length&&(i.setAttribute("width",a[2]),i.setAttribute("height",a[3]),hasWidthAndHeight=!0)}if(r&&hasWidthAndHeight){var l='<?xml version="1.0"?>\n'+i.parentNode.innerHTML;this.uploadFilename=this.uploadFile.name||"image.svg",this.uploadFile=new Blob([l],{type:"image/svg+xml"}),this.uploadValidated()}else this.uploadStatus=SL.models.Media.STATUS_UPLOAD_FAILED,this.uploadFailed.dispatch("SVG error: missing viewBox or width/height"),SL.analytics.trackEditor("Media: SVG upload error","missing viewBox or w/h")}else this.uploadStatus=SL.models.Media.STATUS_UPLOAD_FAILED,this.uploadFailed.dispatch("Invalid SVG: missing &lt;svg&gt; element"),SL.analytics.trackEditor("Media: SVG upload error","missing svg element");this.reader=null}.bind(this)),this.reader.readAsText(this.uploadFile,"UTF-8")):this.uploadValidated()},uploadValidated:function(){return this.uploader?!1:(this.uploader=new SL.helpers.FileUploader({file:this.uploadFile,filename:this.uploadFilename,service:this.crud.create,timeout:6e4}),this.uploader.progressed.add(this.onUploadProgress.bind(this)),this.uploader.succeeded.add(this.onUploadSuccess.bind(this)),this.uploader.failed.add(this.onUploadError.bind(this)),this.uploader.upload(),this.uploadStatus=SL.models.Media.STATUS_UPLOADING,void this.uploadStarted.dispatch())},onUploadProgress:function(t){this.uploadProgressed.dispatch(t)},onUploadSuccess:function(t){this.uploader.destroy(),this.uploader=null;for(var e in t)this.set(e,t[e]);this.uploadStatus=SL.models.Media.STATUS_UPLOADED,this.uploadCompleted.dispatch()},onUploadError:function(){this.uploader.destroy(),this.uploader=null,this.uploadStatus=SL.models.Media.STATUS_UPLOAD_FAILED,this.uploadFailed.dispatch()},isWaitingToUpload:function(){return this.uploadStatus===SL.models.Media.STATUS_UPLOAD_WAITING},isUploading:function(){return this.uploadStatus===SL.models.Media.STATUS_UPLOADING},isUploaded:function(){return this.uploadStatus===SL.models.Media.STATUS_UPLOADED},isUploadFailed:function(){return this.uploadStatus===SL.models.Media.STATUS_UPLOAD_FAILED},isImage:function(){return/^image\//.test(this.get("content_type"))},isSVG:function(){return/^image\/svg/.test(this.get("content_type"))},isVideo:function(){return/^video\//.test(this.get("content_type"))},clone:function(){return new SL.models.Media(JSON.parse(JSON.stringify(this.data)))},save:function(t){var e={media:{}};return t?t.forEach(function(t){e.media[t]=this.get(t)}.bind(this)):e.media=this.toJSON(),$.ajax({url:this.crud.update(this.get("id")),type:"PUT",data:e})},destroy:function(){return this.uploadFile=null,this.uploadStarted&&this.uploadStarted.dispose(),this.uploadProgressed&&this.uploadProgressed.dispose(),this.uploadCompleted&&this.uploadCompleted.dispose(),this.uploadFailed&&this.uploadFailed.dispose(),this.uploader&&(this.uploader.destroy(),this.uploader=null),$.ajax({url:this.crud["delete"](this.get("id")),type:"DELETE"})}}),SL.models.Media.STATUS_UPLOAD_WAITING="waiting",SL.models.Media.STATUS_UPLOADING="uploading",SL.models.Media.STATUS_UPLOADED="uploaded",SL.models.Media.STATUS_UPLOAD_FAILED="upload-failed",SL.models.Media.IMAGE={id:"image",filter:function(t){return t.isImage()}},SL.models.Media.SVG={id:"svg",filter:function(t){return t.isSVG()}},SL.models.Media.VIDEO={id:"video",filter:function(t){return t.isVideo()}},SL("models").Team=SL.models.Model.extend({init:function(t){if(this._super(t),"object"==typeof this.data.themes)for(var e=0,i=this.data.themes.length;i>e;e++)this.data.themes[e]=new SL.models.Theme(this.data.themes[e]);this.set("themes",new SL.collections.Collection(this.data.themes))},hasThemes:function(){var t=this.get("themes");return t&&t.size()>0},getDefaultTheme:function(){return this.get("themes").getByProperties({id:this.get("default_theme_id")})},getCostPerUser:function(){var t=this.get("account_billing_period"),e=this.get("account_cost_per_user");return"yearly"===t?"$"+e+"/year":"monthly"===t?"$"+e+"/month":"N/A"},isManuallyUpgraded:function(){return!!this.get("manually_upgraded")},allowPublicDecks:function(){return!!this.get("allow_public_decks")},save:function(t){var e={team:{}};return t?t.forEach(function(t){e.team[t]=this.get(t)}.bind(this)):e.team=this.toJSON(),$.ajax({url:SL.config.AJAX_UPDATE_TEAM,type:"PUT",data:e})},clone:function(){return new SL.models.Team(JSON.parse(JSON.stringify(this.data)))}}),SL("models").Template=SL.models.Model.extend({init:function(t){this._super(t)},isAvailableForTheme:function(t){return t.hasSlideTemplate(this.get("id"))||this.isAvailableForAllThemes()},isAvailableForAllThemes:function(){var t=this.get("id");return!SL.current_user.getThemes().some(function(e){return e.hasSlideTemplate(t)})}}),SL("models").ThemeSnippet=SL.models.Model.extend({init:function(t){this._super(t),this.has("title")||this.set("title",""),this.has("template")||this.set("template","")},templatize:function(t){var e=this.get("template");return e&&(e=e.split(SL.models.ThemeSnippet.TEMPLATE_SELECTION_TAG).join(""),t.forEach(function(t){e=e.replace(t.string,t.value||t.defaultValue)})),e},getTemplateVariables:function(){var t=this.get("template");if(t){t=t.split(SL.models.ThemeSnippet.TEMPLATE_SELECTION_TAG).join("");var e=t.match(SL.models.ThemeSnippet.TEMPLATE_VARIABLE_REGEX);if(e)return e=e.map(function(t){var e=t.split(SL.models.ThemeSnippet.TEMPLATE_VARIABLE_DIVIDER),i={string:t,label:e[0]||"",defaultValue:e[1]||""};return i.label=i.label.trim(),i.defaultValue=i.defaultValue.trim(),i.label=i.label.replace(SL.models.ThemeSnippet.TEMPLATE_VARIABLE_OPENER,""),i.label=i.label.replace(SL.models.ThemeSnippet.TEMPLATE_VARIABLE_CLOSER,""),i.defaultValue=i.defaultValue.replace(SL.models.ThemeSnippet.TEMPLATE_VARIABLE_OPENER,""),i.defaultValue=i.defaultValue.replace(SL.models.ThemeSnippet.TEMPLATE_VARIABLE_CLOSER,""),i})}return[]},templateHasVariables:function(){return this.getTemplateVariables().length>0},templateHasSelection:function(){var t=this.get("template");return t?t.indexOf(SL.models.ThemeSnippet.TEMPLATE_SELECTION_TAG)>-1:!1},isEmpty:function(){return!this.get("title")&&!this.get("template")}}),SL.models.ThemeSnippet.TEMPLATE_VARIABLE_OPENER="{{",SL.models.ThemeSnippet.TEMPLATE_VARIABLE_CLOSER="}}",SL.models.ThemeSnippet.TEMPLATE_VARIABLE_DIVIDER="::",SL.models.ThemeSnippet.TEMPLATE_VARIABLE_REGEX=/\{\{.*?\}\}/gi,SL.models.ThemeSnippet.TEMPLATE_SELECTION_TAG="{{selection}}",SL("models").Theme=SL.models.Model.extend({init:function(t){this._super(t),this.formatData(),this.loading=!1},load:function(t){return this.loading=!0,t="string"==typeof t?t:SL.config.AJAX_THEMES_READ(this.get("id")),$.ajax({type:"GET",url:t,context:this}).done(function(t){$.extend(this.data,t),this.formatData()}).always(function(){this.loading=!1})},formatData:function(){this.has("name")||this.set("name","Untitled"),this.has("width")||this.set("width",SL.config.DEFAULT_SLIDE_WIDTH),this.has("height")||this.set("height",SL.config.DEFAULT_SLIDE_HEIGHT),this.has("font")||this.set("font",SL.config.DEFAULT_THEME_FONT),this.has("color")||this.set("color",SL.config.DEFAULT_THEME_COLOR),this.has("transition")||this.set("transition",SL.config.DEFAULT_THEME_TRANSITION),this.has("background_transition")||this.set("background_transition",SL.config.DEFAULT_THEME_BACKGROUND_TRANSITION),this.data.slide_template_ids instanceof SL.collections.Collection||this.set("slide_template_ids",new SL.collections.Collection(this.data.slide_template_ids)),this.data.snippets instanceof SL.collections.Collection||("string"==typeof this.data.snippets&&this.data.snippets.length>0&&(this.data.snippets=JSON.parse(this.data.snippets)),this.set("snippets",new SL.collections.Collection(this.data.snippets,SL.models.ThemeSnippet))),this.data.palette instanceof Array||("string"==typeof this.data.palette&&this.data.palette.length>0?(this.data.palette=this.data.palette.split(","),this.data.palette=this.data.palette.map(function(t){return t.trim()})):this.data.palette=[])},hasSlideTemplate:function(t){return this.get("slide_template_ids").contains(t)},addSlideTemplate:function(t){var e=this.get("slide_template_ids");return t.forEach(function(t){e.contains(t)||e.push(t)}),$.ajax({type:"POST",url:SL.config.AJAX_THEME_ADD_SLIDE_TEMPLATE(this.get("id")),context:this,data:{slide_template_ids:t}})},removeSlideTemplate:function(t){var e=this.get("slide_template_ids");return t.forEach(function(t){e.remove(t)}),$.ajax({type:"DELETE",url:SL.config.AJAX_THEME_REMOVE_SLIDE_TEMPLATE(this.get("id")),context:this,data:{slide_template_ids:t}})},hasThumbnail:function(){return!!this.get("thumbnail_url")},hasJavaScript:function(){return!!this.get("js")},hasPalette:function(){return this.get("palette").length>0},isFontDeprecated:function(){var t=this.get("font");return SL.config.THEME_FONTS.some(function(e){return e.id===t&&e.deprecated===!0})},isTransitionDeprecated:function(){var t=this.get("transition");return SL.config.THEME_TRANSITIONS.some(function(e){return e.id===t&&e.deprecated===!0})},isBackgroundTransitionDeprecated:function(){var t=this.get("background_transition");return SL.config.THEME_BACKGROUND_TRANSITIONS.some(function(e){return e.id===t&&e.deprecated===!0})},isLoading:function(){return this.loading},loadCustomFonts:function(){SL.fonts&&(this.has("font_typekit")&&SL.fonts.loadTypekitFont(this.get("font_typekit")),this.has("font_google")&&SL.fonts.loadGoogleFont(this.get("font_google")))},clone:function(){return new SL.models.Theme(JSON.parse(JSON.stringify(this.toJSON())))},toJSON:function(){return{id:this.get("id"),name:this.get("name"),width:this.get("width"),height:this.get("height"),center:this.get("center"),rolling_links:this.get("rolling_links"),font:this.get("font"),color:this.get("color"),transition:this.get("transition"),background_transition:this.get("background_transition"),font_typekit:this.get("font_typekit"),font_google:this.get("font_google"),html:this.get("html"),less:this.get("less"),css:this.get("css"),js:this.get("js"),snippets:this.has("snippets")?JSON.stringify(this.get("snippets").toJSON()):null,palette:this.has("palette")?this.get("palette").join(","):null}}}),SL("models").Theme.fromDeck=function(t){return new SL.models.Theme({id:t.theme_id,name:"",width:t.width,height:t.height,center:t.center,rolling_links:t.rolling_links,font:t.theme_font,color:t.theme_color,transition:t.transition,background_transition:t.background_transition,font_typekit:t.font_typekit,font_google:t.font_google,snippets:"",palette:[]})},SL("models").UserMembership=SL.models.Model.extend({init:function(t){this._super(t)},isAdmin:function(){return this.get("role")===SL.models.UserMembership.ROLE_ADMIN},isOwner:function(){return this.get("role")===SL.models.UserMembership.ROLE_OWNER},clone:function(){return new SL.models.UserMembership(JSON.parse(JSON.stringify(this.data)))}}),SL.models.UserMembership.ROLE_OWNER="owner",SL.models.UserMembership.ROLE_ADMIN="admin",SL.models.UserMembership.ROLE_MEMBER="member",SL("models").UserPrivileges=SL.models.Model.extend({init:function(t,e){this._super(t,e),this.user=e},privateDecks:function(){return this.user.isPaid()},privateLinks:function(){return this.user.isPro()},customCSS:function(){return this.user.isPro()},hideEmbedFooter:function(){return this.user.isPaid()}}),SL("models").UserSettings=SL.models.Model.extend({init:function(t){this._super(t),this.has("present_controls")||this.set("present_controls",SL.config.PRESENT_CONTROLS_DEFAULT),this.has("present_upsizing")||this.set("present_upsizing",SL.config.PRESENT_UPSIZING_DEFAULT)},save:function(t){var e={user_settings:{}};return t?t.forEach(function(t){e.user_settings[t]=this.get(t)}.bind(this)):e.user_settings=this.toJSON(),$.ajax({url:SL.config.AJAX_UPDATE_USER_SETTINGS,type:"PUT",data:e})},clone:function(){return new SL.models.UserSettings(JSON.parse(JSON.stringify(this.data)))}}),SL("models").User=Class.extend({init:function(t){this.data=t||{},$.extend(this,this.data),this.settings=new SL.models.UserSettings(this.data.settings),this.privileges=new SL.models.UserPrivileges(this.data,this),this.data.membership&&(this.membership=new SL.models.UserMembership(this.data.membership))},isPaid:function(){return this.paid},isLite:function(){return!!this.lite},isPro:function(){return!!this.pro},isEnterprise:function(){return!!this.enterprise},isEnterpriseManager:function(){return this.hasMembership()&&(this.membership.isAdmin()||this.membership.isOwner())},hasMembership:function(){return!!this.membership},isMemberOfCurrentTeam:function(){return SL.current_team&&SL.current_team.get("id")===this.get("team_id")?!0:!1},isManuallyUpgraded:function(){return!!this.manually_upgraded},get:function(t){return this[t]},set:function(t,e){this[t]=e},has:function(t){var e=this.get(t);return!!e||e===!1||0===e},hasThemes:function(){return SL.current_team?SL.current_team.hasThemes():void 0},getThemes:function(){return SL.current_team?SL.current_team.get("themes"):new SL.collections.Collection},hasDefaultTheme:function(){return!!this.getDefaultTheme()},getDefaultTheme:function(){var t=this.getThemes();return t.getByProperties(SL.current_team?{id:SL.current_team.get("default_theme_id")}:{id:this.default_theme_id})},getProfileURL:function(){return"/"+this.username},getProfilePictureURL:function(){return this.thumbnail_url},getNameOrSlug:function(){return this.name||this.username}}),SL("data").templates={NEW_DECK_TEMPLATE:{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 34%;">','<div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">',"<h1>Title Text</h1>","</div>","</div>","</section>"].join("")},DEFAULT_TEMPLATES:[{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 38%;">','<div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">',"<h1>Title Text</h1>","</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 27%;">','<div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">',"<h1>Title Text</h1>","</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 37%;" data-layout-method="belowPreviousBlock">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Subtitle">',"<h2>Subtitle</h2>","</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 27%;">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">',"<h2>Title Text</h2>","</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 37%;" data-layout-method="belowPreviousBlock">','<div class="sl-block-content">',"<ul>","<li>Bullet One</li>","<li>Bullet Two</li>","<li>Bullet Three</li>","</ul>","</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 40%; left: 5%; top: 15%; height: auto;">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="text-align: left;">',"<h2>Title Text</h2>","</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 40%; left: 5%; top: 30%; height: auto;">','<div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin urna odio, aliquam vulputate faucibus id, elementum lobortis felis. Mauris urna dolor, placerat ac sagittis quis." style="text-align: left;">',"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin urna odio, aliquam vulputate faucibus id, elementum lobortis felis. Mauris urna dolor, placerat ac sagittis quis.</p>","</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 40%; left: 55%; top: 15%; height: auto;">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="text-align: left;">',"<h2>Title Text</h2>","</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 40%; left: 55%; top: 30%; height: auto;">','<div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin urna odio, aliquam vulputate faucibus id, elementum lobortis felis. Mauris urna dolor, placerat ac sagittis quis." style="text-align: left;">',"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin urna odio, aliquam vulputate faucibus id, elementum lobortis felis. Mauris urna dolor, placerat ac sagittis quis.</p>","</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 90%; left: 30px; top: 58px; height: auto;">','<div class="sl-block-content" data-placeholder-tag="h1" style="font-size: 200%; text-align: left;">',"<h1>One<br>Two<br>Three</h1>","</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 6%;">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">',"<h2>Title Text</h2>","</div>","</div>",'<div class="sl-block" data-block-type="image" style="width: 74%; height: 68%; left: 13%; top: 22%;">','<div class="sl-block-content">','<div class="editing-ui sl-block-overlay sl-block-placeholder"></div>',"</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="text" style="width: 43%; left: 3%; top: 12%;">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="text-align: left;">',"<h2>Title Text</h2>","</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 43%; left: 3%; top: 24%;" data-layout-method="belowPreviousBlock">','<div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec metus justo. Aliquam erat volutpat." style="z-index: 13; text-align: left;">',"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec metus justo. Aliquam erat volutpat.</p>","</div>","</div>",'<div class="sl-block" data-block-type="image" style="width: 47%; height: 90%; left: 50%; top: 5%;">','<div class="sl-block-content">','<div class="editing-ui sl-block-overlay sl-block-placeholder"></div>',"</div>","</div>","</section>"].join("")},{html:["<section>",'<div class="sl-block" data-block-type="image" style="width: 74%; height: 68%; left: 13%; top: 6%;">','<div class="sl-block-content">','<div class="editing-ui sl-block-overlay sl-block-placeholder"></div>',"</div>","</div>",'<div class="sl-block" data-block-type="text" style="width: 84%; left: 8%; top: 82%;">','<div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">',"<h2>Title Text</h2>","</div>","</div>","</section>"].join("")}],LAYOUT_METHODS:{belowPreviousBlock:function(t,e){var i=e.prev().get(0);i&&e.css("top",i.offsetTop+i.offsetHeight)},horizontalCenter:function(t,e){e.css("left",.5*(t.width()-e.width()))}},getNewDeckTemplate:function(){return new SL.models.Template(SL.data.templates.NEW_DECK_TEMPLATE)},getDefaultTemplates:function(){return new SL.collections.Collection(SL.data.templates.DEFAULT_TEMPLATES,SL.models.Template)},userTemplatesLoaded:!1,userTemplatesLoading:!1,userTemplatesCallbacks:[],getUserTemplates:function(t){t=t||function(){},SL.data.templates.userTemplatesLoading===!1&&SL.data.templates.userTemplatesLoaded===!1?(SL.data.templates.userTemplatesLoading=!0,SL.data.templates.userTemplatesCallbacks.push(t),$.ajax({type:"GET",url:SL.config.AJAX_SLIDE_TEMPLATES_LIST,context:this}).done(function(t){SL.data.templates.userTemplates=new SL.collections.Collection(t.results,SL.models.Template),SL.data.templates.userTemplatesLoaded=!0,SL.data.templates.userTemplatesLoading=!1,SL.data.templates.userTemplatesCallbacks.forEach(function(t){t.call(null,SL.data.templates.userTemplates)}),SL.data.templates.userTemplatesCallbacks.length=0}).fail(function(){SL.data.templates.userTemplatesLoading=!1,SL.notify(SL.locale.get("TEMPLATE_LOAD_ERROR"),"negative")})):SL.data.templates.userTemplatesLoading?SL.data.templates.userTemplatesCallbacks.push(t):t.call(null,SL.data.templates.userTemplates)},teamTemplatesLoaded:!1,teamTemplatesLoading:!1,teamTemplatesCallbacks:[],getTeamTemplates:function(t){SL.current_user.isEnterprise()&&(t=t||function(){},SL.data.templates.teamTemplatesLoading===!1&&SL.data.templates.teamTemplatesLoaded===!1?(SL.data.templates.teamTemplatesLoading=!0,SL.data.templates.teamTemplatesCallbacks.push(t),$.ajax({type:"GET",url:SL.config.AJAX_TEAM_SLIDE_TEMPLATES_LIST,context:this}).done(function(t){SL.data.templates.teamTemplates=new SL.collections.Collection(t.results,SL.models.Template),SL.data.templates.teamTemplatesLoaded=!0,SL.data.templates.teamTemplatesLoading=!1,SL.data.templates.teamTemplatesCallbacks.forEach(function(t){t.call(null,SL.data.templates.teamTemplates)}),SL.data.templates.teamTemplatesCallbacks.length=0}).fail(function(){SL.data.templates.teamTemplatesLoading=!1,SL.notify(SL.locale.get("TEMPLATE_LOAD_ERROR"),"negative")})):SL.data.templates.teamTemplatesLoading?SL.data.templates.teamTemplatesCallbacks.push(t):t.call(null,SL.data.templates.teamTemplates))},layoutTemplate:function(t,e){t.find(".sl-block").each(function(i,n){block=$(n);var s=block.attr("data-layout-method");s&&s.split(",").forEach(function(i){i=i.trim(),i.length&&"function"==typeof SL.data.templates.LAYOUT_METHODS[i]&&(e||block.removeAttr("data-layout-method"),SL.data.templates.LAYOUT_METHODS[i](t,block))}),e||/%/.test(n.style.width+n.style.height+n.style.left+n.style.top)&&block.css({left:n.offsetLeft,top:n.offsetTop,width:n.offsetWidth,height:n.offsetHeight})
})},templatize:function(t,e){t=$(t),e=$.extend({placeholderText:!1,zIndex:!0},e);var i=SL.editor.controllers.Serialize.getSlideAsString(t,{templatize:!0,inner:!0}),n=$("<section>"+i+"</section>");return n.children().each(function(t,i){i=$(i),i.css({"min-width":"","min-height":""});var n=i.find(".sl-block-content");if(e.placeholderText&&"text"===i.attr("data-block-type")&&1===n.children().length){var s=$(n.children()[0]);s.is("h1, h2")?(s.html("Title Text"),n.attr("data-placeholder-text","Title Text")):s.is("p")&&n.attr("data-placeholder-text",s.text().trim())}e.zIndex===!1&&n.css("z-index","")}),["class","data-autoslide","data-transition","data-transition-speed","data-background","data-background-color","data-background-image","data-background-video","data-background-iframe","data-background-size","data-background-position"].forEach(function(e){t.attr(e)&&n.attr(e,t.attr(e))}),n.removeClass("past present future"),n.prop("outerHTML").trim()},generateFullSizeImageBlock:function(t,e,i,n,s){var o=Math.min(n/e,s/i),r=e*o,a=i*o,l=SL.util.deck.getSlideSize(),c=Math.round((l.width-r)/2),h=Math.round((l.height-a)/2);return['<div class="sl-block" data-block-type="image" style="width: '+r+"px; height: "+a+"px; left: "+c+"px; top: "+h+'px;">','<div class="sl-block-content">','<img src="'+t+'" style="" data-natural-width="'+e+'" data-natural-height="'+i+'"/>',"</div>","</div>"].join("")}},SL("data").tokens={get:function(t,e){e=e||{},this._addCallbacks(t,e.success,e.error),"object"==typeof this.cache[t]?this._triggerSuccessCallback(t,this.cache[t]):"loading"!==this.cache[t]&&(this.cache[t]="loading",$.ajax({type:"GET",context:this,url:SL.config.AJAX_ACCESS_TOKENS_LIST(t)}).done(function(e){var i=new SL.collections.Collection(e.results,SL.models.AccessToken);this.cache[t]=i,this._triggerSuccessCallback(t,i)}).fail(function(e){delete this.cache[t],this._triggerErrorCallback(t,e.status)}))},create:function(t){return new Promise(function(e,i){SL.data.tokens.get(t,{success:function(n){$.ajax({type:"POST",context:this,url:SL.config.AJAX_ACCESS_TOKENS_CREATE(t),data:{access_token:{name:n.getUniqueName("Link","name",!0)}}}).done(function(t){n.create(t).then(e,i)}).fail(i)}.bind(this),error:function(){console.warn("Failed to load token collection for deck "+t),i()}.bind(this)})}.bind(this))},cache:{},callbacks:{},_addCallbacks:function(t,e,i){this.callbacks[t]||(this.callbacks[t]={success:[],error:[]}),e&&this.callbacks[t].success.push(e),i&&this.callbacks[t].error.push(i)},_triggerSuccessCallback:function(t,e){var i=this.callbacks[t];if(i){for(;i.success.length;)i.success.pop().call(null,e);i.success=[],i.error=[]}},_triggerErrorCallback:function(t,e){var i=this.callbacks[t];if(i){for(;i.error.length;)i.error.pop().call(null,e);i.success=[],i.error=[]}}},SL.util={noop:function(){},getQuery:function(){var t={};return location.search.replace(/[A-Z0-9\-]+?=([\w%\-]*)/gi,function(e){t[e.split("=").shift()]=unescape(e.split("=").pop())}),t},getMetaKeyName:function(){return SL.util.device.isMac()?"&#8984":"CTRL"},escapeHTMLEntities:function(t){return t=t||"",t=t.split("<").join("&lt;"),t=t.split(">").join("&gt;")},unescapeHTMLEntities:function(t){return(t||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&cent;/g,"\xa2").replace(/&pound;/g,"\xa3").replace(/&yen;/g,"\xa5").replace(/&euro;/g,"\u20ac").replace(/&copy;/g,"\xa9").replace(/&reg;/g,"\xae").replace(/&nbsp;/g," ")},toArray:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(t[i]);return e},parseCSSTransform:function(t){var e={};return(t||"").split(" ").forEach(function(t){t=t.trim().split("(");var i=t[0],n=t[1];n&&(n=n.split(",").map(function(t){return parseFloat(t.trim())})),i&&n&&(i=i.trim(),e[i]=1===n.length?n[0]:n)}),e},skipCSSTransitions:function(t,e){t=$(t?t:"html");var i=typeof t.get(0);("undefined"===i||"number"===i)&&console.warn("Bad target for skipCSSTransitions."),t.addClass("no-transition"),setTimeout(function(){t.removeClass("no-transition")},e||1)},setupReveal:function(t){if("undefined"!=typeof Reveal){var e={controls:!0,progress:!0,history:!1,mouseWheel:!1,margin:SL.config.DEFAULT_SLIDE_MARGIN,autoSlideStoppable:!0,dependencies:[{src:SL.config.ASSET_URLS["reveal-plugins/markdown/marked.js"],condition:function(){return!!document.querySelector(".reveal [data-markdown]")}},{src:SL.config.ASSET_URLS["reveal-plugins/markdown/markdown.js"],condition:function(){return!!document.querySelector(".reveal [data-markdown]")}},{src:SL.config.ASSET_URLS["reveal-plugins/highlight/highlight.js"],async:!0,condition:function(){return!!document.querySelector(".reveal pre code")},callback:function(){hljs.initHighlighting(),hljs.initHighlightingOnLoad()}}]};SLConfig&&SLConfig.deck&&(e.width=SLConfig.deck.width,e.height=SLConfig.deck.height,e.autoSlide=SLConfig.deck.auto_slide_interval||0,e.rollingLinks=SLConfig.deck.rolling_links,e.center=SLConfig.deck.center,e.loop=SLConfig.deck.should_loop,e.rtl=SLConfig.deck.rtl,e.showNotes=SLConfig.deck.share_notes,e.slideNumber=SLConfig.deck.slide_number,e.transition=SLConfig.deck.transition||"default",e.backgroundTransition=SLConfig.deck.background_transition),$.extend(e,t),SL.util.deck.injectNotes(),Reveal.initialize(e),Reveal.addEventListener("ready",function(){window.STATUS=window.STATUS||{},window.STATUS.REVEAL_IS_READY=!0,$("html").addClass("reveal-is-ready")});var i=document.querySelector(".reveal .slides");if(t&&t.openLinksInTabs&&this.openLinksInTabs($(i)),t&&t.trackEvents){var n=[];Reveal.addEventListener("slidechanged",function(){var t=Reveal.getProgress();t>=.5&&!n[0]&&(n[0]=!0,SL.analytics.trackPresenting("Presentation progress: 50%")),t>=1&&!n[1]&&(n[1]=!0,SL.analytics.trackPresenting("Presentation progress: 100%")),SL.analytics.trackCurrentSlide()})}SL.util.deck.renderInlineMath(i)}},openLinksInTabs:function(t){t&&t.find("a").each(function(){var t=$(this),e=t.attr("href");/^#/gi.test(e)===!0||this.hasAttribute("download")?t.removeAttr("target"):/http|www/gi.test(e)?t.attr("target","_blank"):t.attr("target","_top")})},openPopupWindow:function(t,e,i,n){var s=window.innerWidth/2-i/2,o=window.innerHeight/2-n/2;"number"==typeof window.screenX&&(s+=window.screenX,o+=window.screenY);var r=window.open(t,e,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+n+", top="+o+", left="+s);return r.moveTo(s,o),r},prefixSelectorsInStyle:function(t,e){var i=[];SL.util.toArray(t.sheet.cssRules).forEach(function(t){if(1===t.type&&t.selectorText&&t.cssText){var n=t.cssText;n=n.replace(t.selectorText,""),n=n.trim(),n=n.slice(1,n.length-1),n=n.trim(),n=n.split(";").map(function(t){return t=t.trim(),""===t?"":"\n	"+t}).join(";");var s=t.selectorText.split(",").map(function(t){return t=t.trim(),0===t.indexOf(e)?t:e+t}).join(", ");i.push(s+" {"+n+"\n}")}else 7===t.type&&t.cssText&&i.push(t.cssText)}),t.innerHTML="\n"+i.join("\n\n")+"\n"},layoutReveal:function(t,e){if(clearInterval(this.revealLayoutInterval),clearTimeout(this.revealLayoutTimeout),1===arguments.length)this.revealLayoutTimeout=setTimeout(Reveal.layout,t);else{if(2!==arguments.length)throw"Illegal arguments, expected (duration[, fps])";this.revealLayoutInterval=setInterval(Reveal.layout,e),this.revealLayoutTimeout=setTimeout(function(){clearInterval(this.revealLayoutInterval)}.bind(this),t)}},getRevealSlideBounds:function(t,e){t=t||SL.editor.controllers.Markup.getCurrentSlide();var i=t.offset(),n=Reveal.getScale(),s=i.left*n,o=i.top*n;if(e){var r=$(".projector").offset();r&&(s-=r.left,o-=r.top)}return{x:s,y:o,width:t.outerWidth()*n,height:t.outerHeight()*n}},getRevealSlidesBounds:function(t){var e=$(".reveal .slides"),i=e.offset(),n=Reveal.getScale(),s=i.left*n,o=i.top*n;if(t){var r=$(".projector").offset();r&&(s-=r.left,o-=r.top)}return{x:s,y:o,width:e.outerWidth()*n,height:e.outerHeight()*n}},getRevealElementOffset:function(t,e){t=$(t);var i={x:0,y:0};if(t.parents("section").length)for(;t.length&&!t.is("section");)i.x+=t.get(0).offsetLeft,i.y+=t.get(0).offsetTop,e&&(i.x-=parseInt(t.css("margin-left"),10),i.y-=parseInt(t.css("margin-top"),10)),t=$(t.get(0).offsetParent);return i},getRevealElementGlobalOffset:function(t){var e=$(t),i=e.closest(".reveal"),n={x:0,y:0};if(e.length&&i.length){var s=Reveal.getConfig(),o=Reveal.getScale(),r=i.get(0).getBoundingClientRect(),a={x:r.left+r.width/2,y:r.top+r.height/2},l=s.width*o,c=s.height*o;n.x=a.x-l/2,n.y=a.y-c/2;var h=e.closest(".slides section");h.length&&(n.y-=h.scrollTop()*o);var d=SL.util.getRevealElementOffset(e);n.x+=d.x*o,n.y+=d.y*o}return n},getRevealCounterScale:function(){return window.Reveal?2-Reveal.getScale():1},globalToRevealCoordinate:function(t,e){var i=SL.util.getRevealSlideBounds(),n=SL.util.getRevealCounterScale();return{x:(t-i.x)*n,y:(e-i.y)*n}},globalToProjectorCoordinate:function(t,e){var i={x:t,y:e},n=$(".projector").offset();return n&&(i.x-=n.left,i.y-=n.top),i},hideAddressBar:function(){if(SL.util.device.IS_PHONE&&!/crios/gi.test(navigator.userAgent)){var t=function(){setTimeout(function(){window.scrollTo(0,1)},10)};$(window).on("orientationchange",function(){t()}),t()}},callback:function(){"function"==typeof arguments[0]&&arguments[0].apply(null,[].slice.call(arguments,1))},getPlaceholderImage:function(t){var e="";return t&&"function"==typeof window.btoa&&(e=window.btoa(Math.random().toString()).replace(/=/g,"")),"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"+e},isTypingEvent:function(t){return $(t.target).is('input:not([type="file"]), textarea, [contenteditable]')},isTyping:function(){var t=document.activeElement&&"inherit"!==document.activeElement.contentEditable,e=document.activeElement&&document.activeElement.tagName&&/input|textarea/i.test(document.activeElement.tagName);return t||e},setAceEditorDefaults:function(t){t.setTheme("ace/theme/monokai"),t.setDisplayIndentGuides(!0),t.setShowPrintMargin(!1),t.renderer.setScrollMargin(10,0),t.$blockScrolling=1/0}},SL.util.user={isLoggedIn:function(){return"object"==typeof SLConfig&&"object"==typeof SLConfig.current_user}},SL.util.device={HAS_TOUCH:!!("ontouchstart"in window),IS_PHONE:/iphone|ipod|android|windows\sphone/gi.test(navigator.userAgent),IS_TABLET:/ipad/gi.test(navigator.userAgent),isMac:function(){return/Mac/.test(navigator.platform)},isWindows:function(){return/Win/g.test(navigator.platform)},isLinux:function(){return/Linux/g.test(navigator.platform)},isIE:function(){return/MSIE\s[0-9]/gi.test(navigator.userAgent)||/Trident\/7.0;(.*)rv:\d\d/.test(navigator.userAgent)},isChrome:function(){return/chrome/gi.test(navigator.userAgent)},isSafari:function(){return/safari/gi.test(navigator.userAgent)&&!SL.util.device.isChrome()},isSafariDesktop:function(){return SL.util.device.isSafari()&&!SL.util.device.isChrome()&&!SL.util.device.IS_PHONE&&!SL.util.device.IS_TABLET},isOpera:function(){return!!window.opera},isFirefox:function(){return/firefox\/\d+\.?\d+/gi.test(navigator.userAgent)},isPhantomJS:function(){return/PhantomJS/gi.test(navigator.userAgent)},supportedByEditor:function(){return Modernizr.history&&Modernizr.csstransforms&&!SL.util.device.isOpera()},getScrollBarWidth:function(){var t=$("<div>").css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"});t.appendTo(document.body);var e=t.prop("offsetWidth")-t.prop("clientWidth");return t.remove(),e}},SL.util.trig={distanceBetween:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},intersection:function(t,e){return{width:Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),height:Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y))}},intersects:function(t,e,i){"undefined"==typeof i&&(i=0);var n=SL.util.trig.intersection(t,e);return n.width>t.width*i&&n.height>t.height*i},isPointWithinRect:function(t,e,i){return t>i.x&&t<i.x+i.width&&e>i.y&&e<i.y+i.height},findLineIntersection:function(t,e,i,n){var s={x:e.x-t.x,y:e.y-t.y},o={x:n.x-i.x,y:n.y-i.y},r=(-s.y*(t.x-i.x)+s.x*(t.y-i.y))/(-o.x*s.y+s.x*o.y),a=(o.x*(t.y-i.y)-o.y*(t.x-i.x))/(-o.x*s.y+s.x*o.y);return r>=0&&1>=r&&a>=0&&1>=a?{x:t.x+a*s.x,y:t.y+a*s.y}:null},rotateAround:function(t,e,i,n,s){return s=s*Math.PI/180,{x:(t-i)*Math.cos(s)-(e-n)*Math.sin(s)+i,y:(t-i)*Math.sin(s)+(e-n)*Math.cos(s)+n}}},SL.util.string={URL_REGEX:/((https?\:\/\/)|(www\.)|(\/\/))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i,SCRIPT_TAG_REGEX:/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,uniqueIDCount:0,uniqueID:function(t){return SL.util.string.uniqueIDCount+=1,(t||"")+SL.util.string.uniqueIDCount+"-"+Date.now()},slug:function(t){return"string"==typeof t?(t=SL.util.string.trim(t),t=t.toLowerCase(),t=t.replace(/-/g," "),t=t.replace(/[^\w\s]/g,""),t=t.replace(/\s{2,}/g," "),t=t.replace(/\s/g,"-")):""},trim:function(t){return SL.util.string.trimRight(SL.util.string.trimLeft(t))},trimLeft:function(t){return"string"==typeof t?t.replace(/^\s+/,""):""},trimRight:function(t){return"string"==typeof t?t.replace(/\s+$/,""):""},linkify:function(t){return t&&(t=t.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(t){var e=t;return e.match("^https?://")||(e="http://"+e),'<a href="'+e+'">'+t+"</a>"})),t},pluralize:function(t,e,i){return i?t+e:t},toTitleCase:function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},getCustomClassesFromLESS:function(t){var e=(t||"").match(/\/\/=[a-z0-9-_ \t]{2,}(?=\n)?/gi);return e?e.map(function(t){return t=t.replace("//=",""),t=t.trim(),t=t.toLowerCase(),t=t.replace(/\s/g,"-")}):[]},moveCSSImportsToBeginning:function(t){var e="";return t=t.replace(/@import url\(["'\s]*(http:|https:)?\/\/(.*)\);?/gi,function(t){return e+=t+"\n",""}),e+t}},SL.util.math={limitDecimals:function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}},SL.util.validate={name:function(){return[]},slug:function(t){t=t||"";var e=[];return t.length<2&&e.push("At least 2 characters"),/\s/gi.test(t)&&e.push("No spaces please"),/^[\w-_]+$/gi.test(t)||e.push("Can only contain: A-Z, 0-9, - and _"),e},username:function(t){return SL.util.validate.slug(t)},team_slug:function(t){return SL.util.validate.slug(t)},password:function(t){t=t||"";var e=[];return t.length<6&&e.push("At least 6 characters"),e},email:function(t){t=t||"";var e=[];return/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,}$/gi.test(t)||e.push("Please enter a valid email"),e},twitterhandle:function(t){t=t||"";var e=[];return t.length>15&&e.push("15 characters max"),/\s/gi.test(t)&&e.push("No spaces please"),/^[\w-_]+$/gi.test(t)||e.push("Can only contain: A-Z, 0-9 and _"),e},url:function(t){t=t||"";var e=[];return t.length<4&&e.push("Please enter a valid URL"),/\s/gi.test(t)&&e.push("No spaces please"),e},decktitle:function(t){t=t||"";var e=[];return 0===t.length&&e.push("Can not be empty"),e},deckslug:function(t){t=t||"";var e=[];return 0===t.length&&e.push("Can not be empty"),e},google_analytics_id:function(t){t=t||"";var e=[];return/\bUA-\d{4,20}-\d{1,10}\b/gi.test(t)||e.push("Please enter a valid ID"),e},google_domain:function(t){t=t||"";var e=[];return/\./gi.test(t)||e.push("Please enter a valid domain"),e},none:function(){return[]}},SL.util.dom={scrollIntoViewIfNeeded:function(t){t&&("function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded.apply(t,[].slice.call(arguments,1)):"function"==typeof t.scrollIntoView&&t.scrollIntoView())},preventTouchOverflowScrolling:function(t){t=$(t);var e,i,n;t.get(0).addEventListener("touchstart",function(t){e=this.scrollTop>0,i=this.scrollTop<this.scrollHeight-this.clientHeight,n=t.pageY}),t.get(0).addEventListener("touchmove",function(t){var s=t.pageY>n,o=!s;n=t.pageY,s&&e||o&&i?t.stopPropagation():t.preventDefault()})},insertCSRF:function(t,e){"undefined"==typeof e&&(e=$('meta[name="csrf-token"]').attr("content")),e&&(t.find('input[name="authenticity_token"]').remove(),t.append('<input name="authenticity_token" type="hidden" value="'+e+'" />'))},calculateStyle:function(t){window.getComputedStyle($(t).get(0)).opacity}},SL.util.html={indent:function(t){t=t.replace(/<br>/gi,"<br/>"),t=t.replace(/(<img("[^"]*"|[^>])+)/gi,"$1/");var e=vkbeautify.xml(t);return e=e.replace(/<pre>[\n\r\t\s]+<code/gi,"<pre><code"),e=e.replace(/<\/code>[\n\r\t\s]+<\/pre>/gi,"</code></pre>")},ATTR_SRC_NORMAL:"src",ATTR_SRC_SILENCED:"data-silenced-src",ATTR_SRC_NORMAL_REGEX:" src=",ATTR_SRC_SILENCED_REGEX:" data-silenced-src=",muteSources:function(t){return(t||"").replace(new RegExp(SL.util.html.ATTR_SRC_NORMAL_REGEX,"gi"),SL.util.html.ATTR_SRC_SILENCED_REGEX)},unmuteSources:function(t){return(t||"").replace(new RegExp(SL.util.html.ATTR_SRC_SILENCED_REGEX,"gi"),SL.util.html.ATTR_SRC_NORMAL_REGEX)},trimCode:function(t){$(t).find("pre code").each(function(){var t=$(this).parent("pre"),e=t.html(),i=$.trim(e);e!==i&&t.html(i)})},removeAttributes:function(t,e){t=$(t);var i=$.map(t.get(0).attributes,function(t){return t.name});"function"==typeof e&&(i=i.filter(e)),$.each(i,function(e,i){t.removeAttr(i)})},removeClasses:function(t,e){if(t=$(t),"function"==typeof e){var i=(t.attr("class")||"").split(" ").filter(e);t.removeClass(i.join(" "))}else t.attr("class","")},findScriptTags:function(t){var e=document.createElement("div");e.innerHTML=t;var i=SL.util.toArray(e.getElementsByTagName("script"));return i.map(function(t){return t.outerHTML})},removeScriptTags:function(t){var e=document.createElement("div");e.innerHTML=t;var i=SL.util.toArray(e.getElementsByTagName("script"));return i.forEach(function(t){t.parentNode.removeChild(t)}),e.innerHTML},createSpinner:function(t){return t=$.extend({lines:12,radius:8,length:6,width:3,color:"#fff",zIndex:"auto",left:"0",top:"0",className:""},t),new Spinner(t)},generateSpinners:function(){$(".spinner").each(function(t,e){if(e.hasAttribute("data-spinner-state")===!1){e.setAttribute("data-spinner-state","spinning");var i={};e.hasAttribute("data-spinner-color")&&(i.color=e.getAttribute("data-spinner-color")),e.hasAttribute("data-spinner-lines")&&(i.lines=parseInt(e.getAttribute("data-spinner-lines"),10)),e.hasAttribute("data-spinner-width")&&(i.width=parseInt(e.getAttribute("data-spinner-width"),10)),e.hasAttribute("data-spinner-radius")&&(i.radius=parseInt(e.getAttribute("data-spinner-radius"),10)),e.hasAttribute("data-spinner-length")&&(i.length=parseInt(e.getAttribute("data-spinner-length"),10));var n=SL.util.html.createSpinner(i);n.spin(e)}})},createDeckThumbnail:function(t){var t={DECK_URL:t.user.username+"/"+t.slug,DECK_VIEWS:"number"==typeof t.view_count?t.view_count:"N/A",DECK_THUMB_URL:t.thumbnail_url||SL.config.DEFAULT_DECK_THUMBNAIL,USER_URL:"/"+t.user.username,USER_NAME:t.user.name||t.user.username,USER_THUMB_URL:t.user.thumbnail_url||SL.config.DEFAULT_USER_THUMBNAIL},e=SL.config.DECK_THUMBNAIL_TEMPLATE;for(var i in t)e=e.replace("{{"+i+"}}",t[i]);return $(e)}},SL.util.deck={idCounter:1,sortInjectedStyles:function(){var t=$("head");$("#theme-css-output").appendTo(t),$("#user-css-output").appendTo(t)},afterSlidesChanged:function(){this.generateIdentifiers(),this.generateSlideNumbers()},generateIdentifiers:function(t){$(t||".reveal .slides section").each(function(){(this.hasAttribute("data-id")===!1||0===this.getAttribute("data-id").length)&&this.setAttribute("data-id",CryptoJS.MD5(["slide",SL.current_user.get("id"),SL.current_deck.get("id"),Date.now(),SL.util.deck.idCounter++].join("-")).toString())}),this.generateSlideNumbers()},generateSlideNumbers:function(){this.slideNumberMap={},$(".reveal .slides>section[data-id]").each(function(t,e){t+=1,e=$(e),e.hasClass("stack")?e.find(">section[data-id]").each(function(e,i){e+=1,i=$(i),this.slideNumberMap[i.attr("data-id")]=t+(e>1?"."+e:"")}.bind(this)):this.slideNumberMap[e.attr("data-id")]=t}.bind(this))},getSlideNumber:function(t){return this.slideNumberMap||this.generateSlideNumbers(),this.slideNumberMap[this.getSlideID(t)]},getSlideID:function(t){return"string"==typeof t?t:t&&"function"==typeof t.getAttribute?t.getAttribute("data-id"):t&&"function"==typeof t.attr?t.attr("data-id"):void 0},getSlideIndicesFromIdentifier:function(t){var e=$('.reveal .slides section[data-id="'+t+'"]');return e.length?Reveal.getIndices(e.get(0)):null},injectNotes:function(){SLConfig.deck&&SLConfig.deck.notes&&[].forEach.call(document.querySelectorAll(".reveal .slides section"),function(t){var e=SLConfig.deck.notes[t.getAttribute("data-id")];e&&"string"==typeof e&&t.setAttribute("data-notes",e)})},getBackgroundColor:function(){var t=$(".reveal-viewport");if(t.length){var e=t.css("background-color");if(window.Reveal&&window.Reveal.isReady()){var i=window.Reveal.getIndices(),n=window.Reveal.getSlideBackground(i.h,i.v);if(n){var s=n.style.backgroundColor;s&&window.tinycolor(s).getAlpha()>0&&(e=s)}}if(e)return e}return"#ffffff"},getBackgroundContrast:function(){return SL.util.color.getContrast(SL.util.deck.getBackgroundColor())},getBackgroundBrightness:function(){return SL.util.color.getBrightness(SL.util.deck.getBackgroundColor())},getSlideSize:function(){if(Reveal&&Reveal.isReady()){var t=Reveal.getConfig();return{width:t.width,height:t.height}}return window.SLConfig&&window.SLConfig.deck?{width:window.SLConfig.deck.width,height:window.SLConfig.deck.height}:{width:SL.config.DEFAULT_SLIDE_WIDTH,height:SL.config.DEFAULT_SLIDE_HEIGHT}},navigateToSlide:function(t){if(t){var e=Reveal.getIndices(t);Reveal.slide(e.h,e.v)}},replaceHTML:function(t){SL.util.skipCSSTransitions($(".reveal"),1);var e=Reveal.getState();$(".reveal .slides").get(0).innerHTML=t,Reveal.setState(e),Reveal.sync(),this.afterSlidesChanged()},renderInlineMath:function(t){t||(t=document.querySelector(".reveal .slides")),"function"==typeof window.renderMathInElement&&SL.util.deck.containsInlineMath(t)&&renderMathInElement(t,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]})},containsInlineMath:function(t){return/\$\$.+\$\$|\\\[.+\\\]|\\\(.+\\\)/g.test(t.innerHTML)}},SL.util.color={getContrast:function(t){var e=window.tinycolor(t).toRgb(),i=(299*e.r+587*e.g+114*e.b)/1e3;return i/255},getBrightness:function(t){var e=window.tinycolor(t).toRgb(),i=e.r/255*.3+e.g/255*.59+(e.b/255+.11);return i/2},getImageColor:function(t,e){return new Promise(function(i,n){var s=document.createElement("img");s.addEventListener("load",function(){var t,o=document.createElement("canvas"),r=o.getContext&&o.getContext("2d"),a={r:0,g:0,b:0,a:0};r||n();var l=o.height=s.naturalHeight||s.offsetHeight||s.height,c=o.width=s.naturalWidth||s.offsetWidth||s.width;r.drawImage(s,0,0);try{t=r.getImageData(0,0,c,l)}catch(h){n()}var d=4,u=t.data.length,p=0;if("number"!=typeof e&&(e=8,"number"==typeof u))for(;u/e>5e4;)e+=8;for(;(d+=4*e)<u;)++p,a.r+=t.data[d],a.g+=t.data[d+1],a.b+=t.data[d+2],a.a+=t.data[d+3];a.r=~~(a.r/p),a.g=~~(a.g/p),a.b=~~(a.b/p),a.a=~~(a.a/p),a.a=a.a/255,i(a)}),s.addEventListener("error",function(){n()}),s.setAttribute("crossorigin","anonymous"),s.setAttribute("src",t)})}},SL.util.anim={collapseListItem:function(t,e,i){t=$(t),t.addClass("no-transition"),t.css({overflow:"hidden"}),t.animate({opacity:0,height:0,minHeight:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0},{duration:i||500,complete:e})}},SL.util.social={getFacebookShareLink:function(t,e,i,n){return"http://www.facebook.com/sharer.php?s=100&p[title]="+encodeURIComponent(e)+"&p[summary]="+encodeURIComponent(i)+"&p[url]="+t+"&p[images][0]="+n},getTwitterShareLink:function(t,e){return"http://twitter.com/share?text="+encodeURIComponent(e)+"&url="+encodeURIComponent(t)+"&via=slides"},getGoogleShareLink:function(t){return"https://plus.google.com/share?url="+encodeURIComponent(t)}},SL.util.selection={clear:function(){window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())},moveCursorToEnd:function(t){if(t){t.focus();var e=document.createRange();e.selectNodeContents(t),e.collapse(!1),selection=window.getSelection(),selection.removeAllRanges(),selection.addRange(e)}},selectText:function(t){var e,i;document.body.createTextRange?(e=document.body.createTextRange(),e.moveToElementText(t),e.select()):window.getSelection&&(i=window.getSelection(),e=document.createRange(),e.selectNodeContents(t),i.removeAllRanges(),i.addRange(e))},getSelectedElement:function(){var t=window.getSelection();return t&&t.anchorNode?t.anchorNode.parentNode:null},getSelectedTags:function(){var t=SL.util.selection.getSelectedElement(),e=[];if(t)for(;t;)e.push(t.nodeName.toLowerCase()),t=t.parentNode;return e},getSelectedHTML:function(){var t;if(document.selection&&document.selection.createRange)return t=document.selection.createRange(),t.htmlText;if(window.getSelection){var e=window.getSelection();if(e.rangeCount>0){t=e.getRangeAt(0);var i=t.cloneContents(),n=document.createElement("div");return n.appendChild(i),n.innerHTML}}return""}},"undefined"!=typeof window.Spinner&&"undefined"!=typeof SL.util&&SL.util.html.generateSpinners(),SL.activity={init:function(){this.initialized||(this.initialized=!0,this.history=[Date.now()],this.listeners=[],this.bind(),setInterval(this.checkListeners.bind(this),500))},bind:function(){this.onUserInput=$.throttle(this.onUserInput.bind(this),100),document.addEventListener("mousedown",this.onUserInput),document.addEventListener("mousemove",this.onUserInput),document.addEventListener("touchstart",this.onUserInput),document.addEventListener("touchmove",this.onUserInput),document.addEventListener("keydown",this.onUserInput),window.addEventListener("scroll",this.onUserInput),window.addEventListener("mousewheel",this.onUserInput)},checkListeners:function(){this.listeners.forEach(function(t){this.hasBeenInactiveFor(t.duration)?t.active===!0&&(t.active=!1,"function"==typeof t.inactiveCallback&&t.inactiveCallback()):t.active===!1&&(t.active=!0,"function"==typeof t.activeCallback&&t.activeCallback())},this)},hasBeenInactiveFor:function(t){return Date.now()-this.history[0]>t},register:function(t,e,i){this.initialized||this.init(),this.listeners.push({active:!this.hasBeenInactiveFor(t),duration:t,activeCallback:e,inactiveCallback:i})},onUserInput:function(){this.history.unshift(Date.now()),this.history.splice(1e3)}},SL.analytics={CATEGORY_OTHER:"other",CATEGORY_EDITOR:"editor",CATEGORY_THEMING:"theming",CATEGORY_PRESENTING:"presenting",CATEGORY_COLLABORATION:"collaboration",_track:function(t,e,i){"undefined"!=typeof window.ga&&ga("send","event",t,e,i)},_trackPageView:function(t,e){e=e||document.title,"undefined"!=typeof window.ga&&ga(function(){for(var i=ga.getAll(),n=0;n<i.length;++n)i[n].send("pageview",{page:t,title:e})})},track:function(t,e){this._track(SL.analytics.CATEGORY_OTHER,t,e)},trackEditor:function(t,e){this._track(SL.analytics.CATEGORY_EDITOR,t,e)},trackTheming:function(t,e){this._track(SL.analytics.CATEGORY_THEMING,t,e)},trackPresenting:function(t,e){this._track(SL.analytics.CATEGORY_PRESENTING,t,e)},trackCollaboration:function(t,e){this._track(SL.analytics.CATEGORY_COLLABORATION,t,e)},trackCurrentSlide:function(t){if(window.Reveal){var e=window.Reveal.getIndices(),t=window.location.pathname+"/"+e.h;"number"==typeof e.v&&e.v>0&&(t+="/"+e.v);var i=$(Reveal.getCurrentSlide()).find("h1, h2, h3").first().text().trim();(!i||i.length<2)&&(i="Untitled"),this._trackPageView(t,i)}}},SL.config={DEFAULT_SLIDE_WIDTH:960,DEFAULT_SLIDE_HEIGHT:700,DEFAULT_SLIDE_MARGIN:.05,DEFAULT_EXPORT_MARGIN:0,SLIDE_SIZES:[{label:"960x700 (default)",width:960,height:700},{label:"1024x576 (16:9)",width:1024,height:576},{label:"1280x720 (16:9)",width:1280,height:720},{label:"960x720 (4:3)",width:960,height:720},{label:"600x800 (3:4)",width:600,height:800}],LOGIN_STATUS_INTERVAL:6e4,UNSAVED_CHANGES_INTERVAL:1500,AUTOSAVE_INTERVAL:4e3,DECK_SAVE_TIMEOUT:25e3,DECK_TITLE_MAXLENGTH:200,MEDIA_LABEL_MAXLENGTH:200,SPEAKER_NOTES_MAXLENGTH:1e4,COLLABORATION_IDLE_TIMEOUT:24e4,COLLABORATION_RESET_WRITING_TIMEOUT:15e3,COLLABORATION_SEND_WRITING_INTERVAL:5e3,COLLABORATION_COMMENT_MAXLENGTH:1e3,MAX_IMAGE_UPLOAD_SIZE:1e4,MAX_IMPORT_UPLOAD_SIZE:1e5,EXPORT_PDF_TIMEOUT:18e4,EXPORT_ZIP_TIMEOUT:18e4,EXPORT_PPT_TIMEOUT:54e4,IMPORT_SOCKET_TIMEOUT:24e4,PRESENT_CONTROLS_DEFAULT:!0,PRESENT_UPSIZING_DEFAULT:!0,PRESENT_UPSIZING_MAX_SCALE:10,DEFAULT_SLIDE_TRANSITION_DURATION:800,DEFAULT_THEME_COLOR:"white-blue",DEFAULT_THEME_FONT:"montserrat",DEFAULT_THEME_TRANSITION:"slide",DEFAULT_THEME_BACKGROUND_TRANSITION:"slide",AUTO_SLIDE_OPTIONS:[2,4,6,8,10,15,20,30,40],RESERVED_SLIDE_CLASSES:["past","present","future","disabled","overflowing","has-dark-background","has-light-background"],FRAGMENT_STYLES:[{id:"",title:"Fade in"},{id:"fade-down",title:"Fade in from above"},{id:"fade-up",title:"Fade in from below"},{id:"fade-right",title:"Fade in from left"},{id:"fade-left",title:"Fade in from right"},{id:"fade-out",title:"Fade out"},{id:"current-visible",title:"Fade in then out"}],THEME_COLORS:[{id:"white-blue"},{id:"sand-blue"},{id:"beige-brown"},{id:"silver-green"},{id:"silver-blue"},{id:"sky-blue"},{id:"blue-yellow"},{id:"cobalt-orange"},{id:"asphalt-orange"},{id:"forest-yellow"},{id:"mint-beige"},{id:"sea-yellow"},{id:"yellow-black"},{id:"coral-blue"},{id:"grey-blue"},{id:"black-blue"},{id:"black-mint"},{id:"black-orange"}],THEME_FONTS:[{id:"montserrat",title:"Montserrat"},{id:"league",title:"League"},{id:"opensans",title:"Open Sans"},{id:"josefine",title:"Josefine"},{id:"palatino",title:"Palatino"},{id:"news",title:"News"},{id:"helvetica",title:"Helvetica"},{id:"merriweather",title:"Merriweather"},{id:"asul",title:"Asul"},{id:"sketch",title:"Sketch"},{id:"quicksand",title:"Quicksand"},{id:"overpass",title:"Overpass v1",deprecated:!0},{id:"overpass2",title:"Overpass"}],THEME_TRANSITIONS:[{id:"slide",title:"Slide"},{id:"linear",title:"Linear",deprecated:!0},{id:"fade",title:"Fade"},{id:"none",title:"None"},{id:"default",title:"Convex"},{id:"concave",title:"Concave"},{id:"zoom",title:"Zoom"},{id:"cube",title:"Cube",deprecated:!0},{id:"page",title:"Page",deprecated:!0}],THEME_BACKGROUND_TRANSITIONS:[{id:"slide",title:"Slide"},{id:"fade",title:"Fade"},{id:"none",title:"None"},{id:"convex",title:"Convex"},{id:"concave",title:"Concave"},{id:"zoom",title:"Zoom"}],BLOCKS:new SL.collections.Collection([{type:"text",factory:"Text",label:"Text",icon:"type"},{type:"image",factory:"Image",label:"Image",icon:"picture"},{type:"shape",factory:"Shape",label:"Shape",icon:"shapes"},{type:"line",factory:"Line",label:"Line",icon:""},{type:"iframe",factory:"Iframe",label:"Iframe",icon:"browser"},{type:"table",factory:"Table",label:"Table",icon:"table"},{type:"code",factory:"Code",label:"Code",icon:"file-css"},{type:"math",factory:"Math",label:"Math",icon:"divide"},{type:"snippet",factory:"Snippet",label:"snippet",icon:"file-xml",hidden:!0}]),DEFAULT_DECK_THUMBNAIL:"images/default-deck-thumbnail.png",DEFAULT_USER_THUMBNAIL:"images/default-profile-picture.png",DECK_THUMBNAIL_TEMPLATE:['<li class="deck-thumbnail">','<div class="deck-image" style="background-image: url({{DECK_THUMB_URL}})">','<a class="deck-link" href="{{DECK_URL}}"></a>',"</div>",'<footer class="deck-details">','<a class="author" href="{{USER_URL}}">','<span class="picture" style="background-image: url({{USER_THUMB_URL}})"></span>','<span class="name">{{USER_NAME}}</span>',"</a>",'<div class="stats">','<div>{{DECK_VIEWS}}<span class="icon i-eye"></span></div>',"</div>","</footer>","</li>"].join(""),AJAX_SEARCH:"/api/v1/search.json",AJAX_SEARCH_ORGANIZATION:"/api/v1/team/search.json",AJAX_GET_DECK:function(t){return"/api/v1/decks/"+t+".json"},AJAX_CREATE_DECK:function(){return"/api/v1/decks.json"},AJAX_UPDATE_DECK:function(t){return"/api/v1/decks/"+t+".json"},AJAX_PUBLISH_DECK:function(t){return"/api/v1/decks/"+t+"/publish.json"},AJAX_GET_DECK_DATA:function(t){return"/api/v1/decks/"+t+"/data.json"},AJAX_MAKE_DECK_COLLABORATIVE:function(t){return"/api/v1/decks/"+t+"/make_collaborative.json"},AJAX_GET_DECKS_HTML:"/users/decks.html",AJAX_GET_DECKS_TRASHED_HTML:"/users/decks.html?trashed=true",AJAX_TRASH_DECK:function(t){return"/api/v1/decks/"+t+"/trash.json"},AJAX_RECOVER_DECK:function(t){return"/api/v1/decks/"+t+"/recover.json"},AJAX_DESTROY_DECK:function(t){return"/api/v1/decks/"+t+".json"},AJAX_GET_DECK_VERSIONS:function(t){return"/api/v1/decks/"+t+"/revisions.json"},AJAX_PREVIEW_DECK_VERSION:function(t,e,i){return"/"+t+"/"+e+"/preview?revision="+i},AJAX_RESTORE_DECK_VERSION:function(t,e){return"/api/v1/decks/"+t+"/revisions/"+e+"/restore.json"},AJAX_EXPORT_DECK:function(t,e){return"/"+t+"/"+e+"/export"},AJAX_THUMBNAIL_DECK:function(t){return"/api/v1/decks/"+t+"/thumbnails.json"},AJAX_FORK_DECK:function(t){return"/api/v1/decks/"+t+"/fork.json"},AJAX_SHARE_DECK_VIA_EMAIL:function(t){return"/api/v1/decks/"+t+"/deck_shares.json"
},AJAX_KUDO_DECK:function(t){return"/api/v1/decks/"+t+"/kudos/kudo.json"},AJAX_UNKUDO_DECK:function(t){return"/api/v1/decks/"+t+"/kudos/unkudo.json"},AJAX_EXPORT_START:function(t){return"/api/v1/decks/"+t+"/exports.json"},AJAX_EXPORT_LIST:function(t){return"/api/v1/decks/"+t+"/exports.json"},AJAX_EXPORT_STATUS:function(t,e){return"/api/v1/decks/"+t+"/exports/"+e+".json"},AJAX_PDF_IMPORT_NEW:"/api/v1/imports.json",AJAX_PDF_IMPORT_UPLOADED:function(t){return"/api/v1/imports/"+t+".json"},AJAX_DROPBOX_CONNECT:"/settings/dropbox/authorize",AJAX_DROPBOX_DISCONNECT:"https://www.dropbox.com/account/security#apps",AJAX_DROPBOX_SYNC_DECK:function(t){return"/api/v1/decks/"+t+"/export.json"},AJAX_UPDATE_TEAM:"/api/v1/team.json",AJAX_LOOKUP_TEAM:"/api/v1/team/lookup.json",AJAX_TEAM_MEMBER_SEARCH:"/api/v1/team/users/search.json",AJAX_TEAM_MEMBERS_LIST:"/api/v1/team/users.json",AJAX_TEAM_MEMBER_CREATE:"/api/v1/team/users.json",AJAX_TEAM_MEMBER_UPDATE:function(t){return"/api/v1/team/users/"+t+".json"},AJAX_TEAM_MEMBER_DELETE:function(t){return"/api/v1/team/users/"+t+".json"},AJAX_TEAM_MEMBER_REACTIVATE:function(t){return"/api/v1/team/users/"+t+"/reactivate.json"},AJAX_TEAM_MEMBER_DEACTIVATE:function(t){return"/api/v1/team/users/"+t+"/deactivate.json"},AJAX_TEAM_INVITATIONS_LIST:"/api/v1/team/invitations.json",AJAX_TEAM_INVITATIONS_CREATE:"/api/v1/team/invitations.json",AJAX_TEAM_INVITATIONS_DELETE:function(t){return"/api/v1/team/invitations/"+t+".json"},AJAX_TEAM_INVITATIONS_RESEND:function(t){return"/api/v1/team/invitations/"+t+"/resend.json"},AJAX_THEMES_LIST:"/api/v1/themes.json",AJAX_THEMES_CREATE:"/api/v1/themes.json",AJAX_THEMES_READ:function(t){return"/api/v1/themes/"+t+".json"},AJAX_THEMES_UPDATE:function(t){return"/api/v1/themes/"+t+".json"},AJAX_THEMES_DELETE:function(t){return"/api/v1/themes/"+t+".json"},AJAX_DECK_THEME:function(t){return"/api/v1/decks/"+t+"/theme.json"},AJAX_THEME_ADD_SLIDE_TEMPLATE:function(t){return"/api/v1/themes/"+t+"/add_slide_template.json"},AJAX_THEME_REMOVE_SLIDE_TEMPLATE:function(t){return"/api/v1/themes/"+t+"/remove_slide_template.json"},AJAX_ACCESS_TOKENS_LIST:function(t){return"/api/v1/decks/"+t+"/access_tokens.json"},AJAX_ACCESS_TOKENS_CREATE:function(t){return"/api/v1/decks/"+t+"/access_tokens.json"},AJAX_ACCESS_TOKENS_UPDATE:function(t,e){return"/api/v1/decks/"+t+"/access_tokens/"+e+".json"},AJAX_ACCESS_TOKENS_DELETE:function(t,e){return"/api/v1/decks/"+t+"/access_tokens/"+e+".json"},AJAX_ACCESS_TOKENS_PASSWORD_AUTH:function(t){return"/access_tokens/"+t+".json"},AJAX_SLIDE_TEMPLATES_LIST:"/api/v1/slide_templates.json",AJAX_SLIDE_TEMPLATES_CREATE:"/api/v1/slide_templates.json",AJAX_SLIDE_TEMPLATES_UPDATE:function(t){return"/api/v1/slide_templates/"+t+".json"},AJAX_SLIDE_TEMPLATES_DELETE:function(t){return"/api/v1/slide_templates/"+t+".json"},AJAX_TEAM_SLIDE_TEMPLATES_LIST:"/api/v1/team/slide_templates.json",AJAX_TEAM_SLIDE_TEMPLATES_CREATE:"/api/v1/team/slide_templates.json",AJAX_TEAM_SLIDE_TEMPLATES_UPDATE:function(t){return"/api/v1/team/slide_templates/"+t+".json"},AJAX_TEAM_SLIDE_TEMPLATES_DELETE:function(t){return"/api/v1/team/slide_templates/"+t+".json"},AJAX_GET_USER:function(t){return"/api/v1/users/"+t+".json"},AJAX_LOOKUP_USER:"/api/v1/users/lookup.json",AJAX_SERVICES_USER:"/api/v1/users/services.json",AJAX_UPDATE_USER:"/users.json",AJAX_GET_USER_SETTINGS:"/api/v1/user_settings.json",AJAX_UPDATE_USER_SETTINGS:"/api/v1/user_settings.json",AJAX_SUBSCRIPTIONS:"/subscriptions",AJAX_ACCOUNT_DETAILS:"/account/details.json",AJAX_SUBSCRIPTION_DETAILS:"/account/subscription.json",AJAX_SUBSCRIPTIONS_PRINT_RECEIPT:function(t){return"/account/receipts/"+t},AJAX_SUBSCRIPTIONS_REACTIVATE:"/subscriptions/reactivate",AJAX_TEAMS_CREATE:"/teams.json",AJAX_TEAMS_REACTIVATE:"/subscriptions/reactivate.json",AJAX_CHECK_STATUS:"/api/v1/status.json",AJAX_MEDIA_LIST:"/api/v1/media.json",AJAX_MEDIA_CREATE:"/api/v1/media.json",AJAX_MEDIA_UPDATE:function(t){return"/api/v1/media/"+t+".json"},AJAX_MEDIA_DELETE:function(t){return"/api/v1/media/"+t+".json"},AJAX_MEDIA_TAG_LIST:"/api/v1/tags.json",AJAX_MEDIA_TAG_CREATE:"/api/v1/tags.json",AJAX_MEDIA_TAG_UPDATE:function(t){return"/api/v1/tags/"+t+".json"},AJAX_MEDIA_TAG_DELETE:function(t){return"/api/v1/tags/"+t+".json"},AJAX_MEDIA_TAG_ADD_MEDIA:function(t){return"/api/v1/tags/"+t+"/add_media.json"},AJAX_MEDIA_TAG_REMOVE_MEDIA:function(t){return"/api/v1/tags/"+t+"/remove_media.json"},AJAX_TEAM_MEDIA_LIST:"/api/v1/team/media.json",AJAX_TEAM_MEDIA_CREATE:"/api/v1/team/media.json",AJAX_TEAM_MEDIA_UPDATE:function(t){return"/api/v1/team/media/"+t+".json"},AJAX_TEAM_MEDIA_DELETE:function(t){return"/api/v1/team/media/"+t+".json"},AJAX_TEAM_MEDIA_TAG_LIST:"/api/v1/team/tags.json",AJAX_TEAM_MEDIA_TAG_CREATE:"/api/v1/team/tags.json",AJAX_TEAM_MEDIA_TAG_UPDATE:function(t){return"/api/v1/team/tags/"+t+".json"},AJAX_TEAM_MEDIA_TAG_DELETE:function(t){return"/api/v1/team/tags/"+t+".json"},AJAX_TEAM_MEDIA_TAG_ADD_MEDIA:function(t){return"/api/v1/team/tags/"+t+"/add_media.json"},AJAX_TEAM_MEDIA_TAG_REMOVE_MEDIA:function(t){return"/api/v1/team/tags/"+t+"/remove_media.json"},AJAX_DECKUSER_LIST:function(t){return"/api/v1/decks/"+t+"/users.json"},AJAX_DECKUSER_READ:function(t,e){return"/api/v1/decks/"+t+"/users/"+e+".json"},AJAX_DECKUSER_CREATE:function(t){return"/api/v1/decks/"+t+"/users/invite.json"},AJAX_DECKUSER_UPDATE:function(t,e){return"/api/v1/decks/"+t+"/users/"+e+".json"},AJAX_DECKUSER_DELETE:function(t,e){return"/api/v1/decks/"+t+"/users/"+e+".json"},AJAX_DECKUSER_BECOME_EDITOR:function(t,e){return"/api/v1/decks/"+t+"/users/"+e+"/become_editor.json"},AJAX_DECKUSER_UPDATE_LAST_SEEN_AT:function(t){return"/api/v1/decks/"+t+"/users/update_last_seen_at.json"},AJAX_COMMENTS_LIST:function(t,e){return"/api/v1/decks/"+t+"/comments.json"+(e?"?slide_hash="+e:"")},AJAX_COMMENTS_CREATE:function(t){return"/api/v1/decks/"+t+"/comments.json"},AJAX_COMMENTS_UPDATE:function(t,e){return"/api/v1/decks/"+t+"/comments/"+e+".json"},AJAX_COMMENTS_DELETE:function(t,e){return"/api/v1/decks/"+t+"/comments/"+e+".json"},STREAM_ENGINE_HOST:window.location.protocol+"//stream2.slides.com",STREAM_ENGINE_LIVE_NAMESPACE:"live",STREAM_ENGINE_EDITOR_NAMESPACE:"editor",APP_HOST:"slides.com",S3_HOST:"https://s3.amazonaws.com/media-p.slid.es",GOOGLE_FONTS_LIST:"https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyAD1SV55vtPn4d37DWGvPg8iUKhMj2Epzo",ASSET_URLS:{"offline-v2.css":"//assets.slid.es/assets/offline-v2.css","homepage-background.jpg":"//assets.slid.es/assets/homepage-background.jpg","reveal-plugins/markdown/marked.js":"//assets.slid.es/assets/reveal-plugins/markdown/marked.js","reveal-plugins/markdown/markdown.js":"//assets.slid.es/assets/reveal-plugins/markdown/markdown.js","reveal-plugins/highlight/highlight.js":"//assets.slid.es/assets/reveal-plugins/highlight/highlight.js"}},SL.config.V1={DEFAULT_THEME_COLOR:"grey-blue",DEFAULT_THEME_FONT:"league",DEFAULT_THEME_TRANSITION:"linear",DEFAULT_THEME_BACKGROUND_TRANSITION:"fade",THEME_COLORS:[{id:"grey-blue"},{id:"black-mint"},{id:"black-orange"},{id:"forest-yellow"},{id:"lila-yellow"},{id:"asphalt-orange"},{id:"sky-blue"},{id:"beige-brown"},{id:"sand-grey"},{id:"silver-green"},{id:"silver-blue"},{id:"cobalt-orange"},{id:"white-blue"},{id:"mint-beige"},{id:"sea-yellow"},{id:"coral-blue"}],THEME_FONTS:[{id:"league",title:"League"},{id:"opensans",title:"Open Sans"},{id:"josefine",title:"Josefine"},{id:"palatino",title:"Palatino"},{id:"news",title:"News"},{id:"montserrat",title:"Montserrat"},{id:"helvetica",title:"Helvetica"},{id:"asul",title:"Asul"},{id:"merriweather",title:"Merriweather"},{id:"sketch",title:"Sketch"},{id:"quicksand",title:"Quicksand"},{id:"overpass",title:"Overpass v1",deprecated:!0},{id:"overpass2",title:"Overpass"}]},SL.draganddrop={init:function(){this.listeners=new SL.collections.Collection,this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragOut=this.onDragOut.bind(this),this.onDrop=this.onDrop.bind(this),this.isListening=!1,this.isInternalDrag=!1},subscribe:function(t){this.listeners.push(t),this.bind()},unsubscribe:function(t){this.listeners.remove(t),this.listeners.isEmpty()&&this.unbind()},dispatch:function(t,e){var i=this.listeners.last();i&&i[t](e)},bind:function(){this.isListening===!1&&(this.isListening=!0,$(document.documentElement).on("dragstart",this.onDragStart).on("dragover dragenter",this.onDragOver).on("dragleave",this.onDragOut).on("drop",this.onDrop))},unbind:function(){this.isListening===!0&&(this.isListening=!1,$(document.documentElement).off("dragstart",this.onDragStart).off("dragover dragenter",this.onDragOver).off("dragleave",this.onDragOut).off("drop",this.onDrop))},onDragStart:function(t){t.preventDefault(),this.isInternalDrag=!0},onDragOver:function(t){this.isInternalDrag||(t.preventDefault(),this.dispatch("onDragOver",t))},onDragOut:function(t){this.isInternalDrag||(t.preventDefault(),this.dispatch("onDragOut",t))},onDrop:function(t){return this.isInternalDrag?void 0:(t.stopPropagation(),t.preventDefault(),this.isInternalDrag=!1,this.dispatch("onDrop",t),!1)}},SL.fonts={INIT_TIMEOUT:5e3,FONTS_URL:SLConfig.fonts_url||"fonts/",FAMILIES:{montserrat:{id:"montserrat",name:"Montserrat",path:"montserrat/montserrat.css"},opensans:{id:"opensans",name:"Open Sans",path:"opensans/opensans.css"},lato:{id:"lato",name:"Lato",path:"lato/lato.css"},asul:{id:"asul",name:"Asul",path:"asul/asul.css"},josefinsans:{id:"josefinsans",name:"Josefin Sans",path:"josefinsans/josefinsans.css"},league:{id:"league",name:"League Gothic",path:"league/league_gothic.css"},merriweathersans:{id:"merriweathersans",name:"Merriweather Sans",path:"merriweathersans/merriweathersans.css"},overpass:{id:"overpass",name:"Overpass",path:"overpass/overpass.css"},overpass2:{id:"overpass2",name:"Overpass 2",path:"overpass2/overpass2.css"},quicksand:{id:"quicksand",name:"Quicksand",path:"quicksand/quicksand.css"},cabinsketch:{id:"cabinsketch",name:"Cabin Sketch",path:"cabinsketch/cabinsketch.css"},newscycle:{id:"newscycle",name:"News Cycle",path:"newscycle/newscycle.css"},oxygen:{id:"oxygen",name:"Oxygen",path:"oxygen/oxygen.css"}},PACKAGES:{asul:["asul"],helvetica:[],josefine:["josefinsans","lato"],league:["league","lato"],merriweather:["merriweathersans","oxygen"],news:["newscycle","lato"],montserrat:["montserrat","opensans"],opensans:["opensans"],overpass:["overpass"],overpass2:["overpass2"],palatino:[],quicksand:["quicksand","opensans"],sketch:["cabinsketch","oxygen"]},init:function(){if(this._isReady=!1,this.ready=new signals.Signal,this.loaded=new signals.Signal,this.fontactive=new signals.Signal,this.fontinactive=new signals.Signal,this.debugMode=!!SL.util.getQuery().debug,$("link[data-application-font]").each(function(){var t=$(this).attr("data-application-font");SL.fonts.FAMILIES[t]&&(SL.fonts.FAMILIES[t].loaded=!0)}),SLConfig&&SLConfig.deck){var t=this.loadDeckFont([SLConfig.deck.theme_font||SL.config.DEFAULT_THEME_FONT],{active:this.onInitialFontsActive.bind(this),inactive:this.onInitialFontsInactive.bind(this)});t?this.initTimeout=setTimeout(function(){this.debugMode&&console.log("SL.fonts","timed out"),this.finishLoading()}.bind(this),SL.fonts.INIT_TIMEOUT):this.finishLoading()}else this.finishLoading()},load:function(t,e){var i=$.extend({classes:!1,fontactive:this.onFontActive.bind(this),fontinactive:this.onFontInactive.bind(this),custom:{families:[],urls:[]}},e);return t.forEach(function(t){var e=SL.fonts.FAMILIES[t];e?e.loaded?"function"==typeof i.fontactive&&i.fontactive(e.name):(e.loaded=!0,i.custom.families.push(e.name),i.custom.urls.push(SL.fonts.FONTS_URL+e.path)):console.warn('Could not find font family with id "'+t+'"')}),SLConfig&&SLConfig.deck&&(SLConfig.deck.font_typekit&&(i.typekit={id:SLConfig.deck.font_typekit}),SLConfig.deck.font_google&&(i.google=i.google||{families:[]},i.google.families=i.google.families.concat(SL.fonts.parseGoogleFontFamilies(SLConfig.deck.font_google)))),SLConfig&&SLConfig.theme&&(SLConfig.theme.font_typekit&&(i.typekit={id:SLConfig.theme.font_typekit}),SLConfig.theme.font_google&&(i.google=i.google||{families:[]},i.google.families=i.google.families.concat(SL.fonts.parseGoogleFontFamilies(SLConfig.theme.font_google)))),this.debugMode&&console.log("SL.fonts.load",i.custom.families),i.custom.families.length||i.typekit||i.google?(WebFont.load(i),!0):!1},loadAll:function(t){var e=[];for(var i in SL.fonts.FAMILIES)e.push(i);this.load(e,t)},loadDeckFont:function(t,e){var i=SL.fonts.PACKAGES[t];return i?SL.fonts.load(i,e):!1},loadGoogleFont:function(t){WebFont.load({google:{families:SL.fonts.parseGoogleFontFamilies(t)}})},loadTypekitFont:function(t){WebFont.load({typekit:{id:t}})},parseGoogleFontFamilies:function(t){return t=(t||"").trim().split(", "),t=t.map(function(t){return t.trim().replace(/(^,)|(,$)/gi,"")}),t=t.filter(function(t){return"string"==typeof t&&t.length>0})},unload:function(t){t.forEach(function(t){var e=SL.fonts.FAMILIES[t];e&&(e.loaded=!1,$('link[href="'+SL.fonts.FONTS_URL+e.path+'"]').remove())})},finishLoading:function(){clearTimeout(this.initTimeout),$("html").addClass("fonts-are-ready"),this._isReady===!1&&(this._isReady=!0,this.ready.dispatch()),this.loaded.dispatch()},getPackageIDs:function(){return Object.keys(SL.fonts.PACKAGES)},getFamilyByName:function(t){for(var e in SL.fonts.FAMILIES){var i=SL.fonts.FAMILIES[e];if(t===i.name)return i}},isPackageLoaded:function(t){var e=SL.fonts.PACKAGES[t];return e?0===e.length?!0:e.every(function(t){var e=SL.fonts.FAMILIES[t];return e.active||e.inactive}):!0},isReady:function(){return this._isReady},onFontActive:function(t){var e=SL.fonts.getFamilyByName(t);e&&(e.active=!0),this.fontactive.dispatch(e)},onFontInactive:function(t){var e=SL.fonts.getFamilyByName(t);e&&(e.inactive=!0),this.fontinactive.dispatch(e)},onInitialFontsActive:function(){this.finishLoading()},onInitialFontsInactive:function(){this.finishLoading()}},SL.keyboard={init:function(){this.keyupConsumers=new SL.collections.Collection,this.keydownConsumers=new SL.collections.Collection,$(document).on("keydown",this.onDocumentKeyDown.bind(this)),$(document).on("keyup",this.onDocumentKeyUp.bind(this))},keydown:function(t){this.keydownConsumers.push(t)},keyup:function(t){this.keyupConsumers.push(t)},release:function(t){this.keydownConsumers.remove(t),this.keyupConsumers.remove(t)},onDocumentKeyDown:function(t){for(var e,i=this.keydownConsumers.size(),n=!1;e=this.keydownConsumers.at(--i);)if(!e(t)){n=!0;break}return n?(t.preventDefault(),t.stopImmediatePropagation(),!1):void 0},onDocumentKeyUp:function(t){for(var e,i=this.keyupConsumers.size(),n=!1;e=this.keyupConsumers.at(--i);)if(!e(t)){n=!0;break}return n?(t.preventDefault(),t.stopImmediatePropagation(),!1):void 0}},SL.locale={GENERIC_ERROR:["Oops, something went wrong","We ran into an unexpected error","Something's wong, can you try that again?"],WARN_UNSAVED_CHANGES:"You have unsaved changes, save first?",CLOSE:"Close",PREVIOUS:"Previous",NEXT:"Next",DECK_SAVE_SUCCESS:"Saved successfully",DECK_SAVE_ERROR:"Failed to save",NEW_SLIDE_TITLE:"Title",LEAVE_UNSAVED_DECK:"You will lose your unsaved changes.",LEAVE_UNSAVED_THEME:"You will lose your unsaved changes.",DOWNGRADE_TO_FREE_CONFIRM:"Your account will be downgraded to the Free plan at the end of the current billing period.",DOWNGRADE_TO_FREE_SUCCESS:"Subscription canceled",DECK_RESTORE_CONFIRM:"Are you sure you want to revert to this version from {#time}?",DECK_TRASH_CONFIRM:'Are you sure you want to delete "{#title}"?',DECK_TRASH_SUCCESS:"Moved to trash",DECK_TRASH_ERROR:"Failed to delete",DECK_DESTROY_CONFIRM:'Are you sure you want to permanently delete "{#title}"?',DECK_DESTROY_SUCCESS:"Deck deleted",DECK_DESTROY_ERROR:"Failed to delete",DECK_RECOVER_CONFIRM:'Are you sure you want to recover "{#title}"?',DECK_RECOVER_SUCCESS:"Deck recovered",DECK_RECOVER_ERROR:"Failed to recover",DECK_VISIBILITY_CHANGE_SELF:'<div><span class="icon i-lock-stroke"></span></div><h3>Private</h3><p>Only visible to you</p>',DECK_VISIBILITY_CHANGE_TEAM:'<div><span class="icon i-users"></span></div><h3>Internal</h3><p>Visible to your team</p>',DECK_VISIBILITY_CHANGE_ALL:'<div><span class="icon i-globe"></span></div><h3>Public</h3><p>Visible to the world</p>',DECK_VISIBILITY_SHARE_LINK:'<div><span class="icon i-link"></span></div><h3>Create link</h3><p>For external sharing</p>',DECK_VISIBILITY_CHANGED_SELF:"Your deck is now private",DECK_VISIBILITY_CHANGED_TEAM:"Your deck is now internal",DECK_VISIBILITY_CHANGED_ALL:"Your deck is now public",DECK_VISIBILITY_CHANGED_ERROR:"Failed to change visibility",DECK_EDIT_INVALID_TITLE:"Please enter a valid title",DECK_EDIT_INVALID_SLUG:"Please enter a valid URL",DECK_DELETE_SLIDE_CONFIRM:"Are you sure you want to remove this slide?",DECK_IMPORT_HTML_CONFIRM:"All existing content will be replaced, continue?",EXPORT_PDF_BUTTON:"Download PDF",EXPORT_PDF_BUTTON_WORKING:"Creating PDF...",EXPORT_PDF_ERROR:"An error occured while exporting your PDF.",EXPORT_PPT_BUTTON:"Download PPTX",EXPORT_PPT_BUTTON_WORKING:"Creating PPTX...",EXPORT_PPT_ERROR:"An error occured while exporting to PowerPoint.",EXPORT_ZIP_BUTTON:"Download ZIP",EXPORT_ZIP_BUTTON_WORKING:"Creating ZIP...",EXPORT_ZIP_ERROR:"An error occured while exporting your ZIP.",FORM_ERROR_REQUIRED:"Required",FORM_ERROR_USERNAME_TAKEN:["That one's already taken :(","Sorry, that's taken too"],FORM_ERROR_ORGANIZATION_SLUG_TAKEN:["That one's already taken :(","Sorry, that's taken too"],BILLING_DETAILS_ERROR:"An error occured while fetching your billing details, please try again.",BILLING_DETAILS_NOHISTORY:"You haven't made any payments yet.",THEME_CREATE:"New theme",THEME_CREATE_ERROR:"Failed to create theme",THEME_SAVE_SUCCESS:"Theme saved",THEME_SAVE_ERROR:"Failed to save theme",THEME_REMOVE_CONFIRM:"Are you sure you want to delete this theme?",THEME_REMOVE_SUCCESS:"Theme removed successfully",THEME_REMOVE_ERROR:"Failed to remove theme",THEME_LIST_LOAD_ERROR:"Failed to load themes",THEME_LIST_EMPTY:"Once you have created one or more themes they'll be listed here. Click the New Theme button to get started with your first theme.",THEME_DEFAULT_SAVE_SUCCESS:"Default theme was changed",THEME_DEFAULT_SAVE_ERROR:"Failed to change default theme",THEME_DELETE_TOOLTIP:"Delete",THEME_EDIT_TOOLTIP:"Edit",THEME_MAKE_DEFAULT_TOOLTIP:"Make this the default theme",THEME_IS_DEFAULT_TOOLTIP:"This is the default theme",THEME_SNIPPET_DELETE_CONFIRM:"Are you sure you want to delete this snippet?",TEMPLATE_LOAD_ERROR:"Failed to load slide templates",TEMPLATE_CREATE_SUCCESS:"Template saved!",TEMPLATE_CREATE_ERROR:"Failed to save template",TEMPLATE_DELETE_CONFIRM:"Are you sure you want to delete this template?",SEARCH_PAGINATION_PAGE:"Page",SEARCH_NO_RESULTS_FOR:'No results for "{#term}"',SEARCH_SERVER_ERROR:"Failed to fetch search results",SEARCH_NO_TERM_ERROR:"Please enter a search term",MEDIA_TAG_DELETE_CONFIRM:"Are you sure you want to permanently delete this tag?",MEDIA_TAG_DELETE_SUCCESS:"Tag deleted",MEDIA_TAG_DELETE_ERROR:"Failed to delete",COLLABORATOR_REMOVE_CONFIRM:"Are you sure you want to remove this user?",counter:{},get:function(t,e){var i=SL.locale[t];if("object"==typeof i&&i.length&&(this.counter[t]="number"==typeof this.counter[t]?(this.counter[t]+1)%i.length:0,i=i[this.counter[t]]),"object"==typeof e)for(var n in e)i=i.replace("{#"+n+"}",e[n]);return"string"==typeof i?i:""}},function(t){var e={};e.sync=function(){$("[data-placement]").each(function(){var t=$(this),i=t.attr("data-placement");"function"==typeof e[i]?e[i](t):console.log('No matching layout found for "'+i+'"')})},e.hcenter=function(t){var e=t.parent();e&&t.css("left",(e.width()-t.outerWidth())/2)},e.vcenter=function(t){var e=t.parent();e&&t.css("top",(e.height()-t.outerHeight())/2)},e.center=function(t){var e=t.parent();if(e){var i=e.width(),n=e.height(),s=t.outerWidth(),o=t.outerHeight();t.css({left:(i-s)/2,top:(n-o)/2})}},e.sync(),$(t).on("resize",e.sync),t.Placement=e}(window),SL.pointer={down:!1,downTimeout:-1,init:function(){$(document).on("mousedown",this.onMouseDown.bind(this)),$(document).on("mouseleave",this.onMouseLeave.bind(this)),$(document).on("mouseup",this.onMouseUp.bind(this))},isDown:function(){return this.down},onMouseDown:function(){clearTimeout(this.downTimeout),this.down=!0,this.downTimeout=setTimeout(function(){this.down=!1}.bind(this),3e4)},onMouseLeave:function(){clearTimeout(this.downTimeout),this.down=!1},onMouseUp:function(){clearTimeout(this.downTimeout),this.down=!1}},SL.routes={PRICING:"/pricing",CHANGELOG:"/changelog",SIGN_IN:"/users/sign_in",SIGN_OUT:"/users/sign_out",NEW_TEAM:"/teams/new",BRAND_KIT:"/about#brand",SUBSCRIPTIONS_NEW:"/account/upgrade",SUBSCRIPTIONS_EDIT_CARD:"/account/update_billing",SUBSCRIPTIONS_EDIT_PERIOD:"/account/update_billing_period",USER:function(t){return"/"+t},USER_EDIT:"/users/edit",DECK:function(t,e){return"/"+t+"/"+e},DECK_NEW:function(t){return"/"+t+"/new"},DECK_EDIT:function(t,e){return"/"+t+"/"+e+"/edit"},DECK_REVIEW:function(t,e){return"/"+t+"/"+e+"/review"},DECK_EMBED:function(t,e){return"/"+t+"/"+e+"/embed"},DECK_LIVE:function(t,e){return"/"+t+"/"+e+"/live"},THEME_EDITOR:"/themes",BILLING_DETAILS:"/account/billing",TEAM:function(t){return window.location.protocol+"//"+t.get("slug")+"."+SL.config.APP_HOST},TEAM_EDIT:function(t){return SL.routes.TEAM(t)+"/edit"},TEAM_EDIT_MEMBERS:function(t){return SL.routes.TEAM(t)+"/edit_members"}},SL.session={enforce:function(){this.enforced||(this.enforced=!0,this.hasLoggedOut=!1,this.loginInterval=setInterval(this.check.bind(this),SL.config.LOGIN_STATUS_INTERVAL))},check:function(){$.get(SL.config.AJAX_CHECK_STATUS).done(function(t){t&&t.user_signed_in?this.onLoggedIn():this.onLoggedOut()}.bind(this))},onLoggedIn:function(){this.hasLoggedOut&&(this.hasLoggedOut=!1,SL.popup.close(SL.components.popup.SessionExpired))},onLoggedOut:function(){this.hasLoggedOut||(this.hasLoggedOut=!0,SL.popup.open(SL.components.popup.SessionExpired))}},SL.settings={STORAGE_KEY:"slides-settings",STORAGE_VERSION:1,EDITOR_AUTO_HIDE:"editorAutoHide",EDITOR_AUTO_SAVE:"editorAutoSave",init:function(){this.settings={version:this.STORAGE_VERSION},this.changed=new signals.Signal,this.restore()},setDefaults:function(){"undefined"==typeof this.settings[this.EDITOR_AUTO_HIDE]&&(this.settings[this.EDITOR_AUTO_HIDE]=!1),"undefined"==typeof this.settings[this.EDITOR_AUTO_SAVE]&&(this.settings[this.EDITOR_AUTO_SAVE]=!0)},setValue:function(t,e){"object"==typeof t?$.extend(this.settings,t):this.settings[t]=e,this.save(),this.changed.dispatch([t])},getValue:function(t){return this.settings[t]},removeValue:function(t){"object"==typeof t&&t.length?t.forEach(function(t){delete this.settings[t]}.bind(this)):delete this.settings[t],this.save(),this.changed.dispatch([t])},restore:function(){if(Modernizr.localstorage){var t=localStorage.getItem(this.STORAGE_KEY);if(t){var e=JSON.parse(localStorage.getItem(this.STORAGE_KEY));e&&e.version===this.STORAGE_VERSION?(this.settings=e,this.setDefaults(),this.changed.dispatch()):(this.setDefaults(),this.save())}}this.setDefaults()},save:function(){Modernizr.localstorage&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.settings))}},SL.util.svg={NAMESPACE:"http://www.w3.org/2000/svg",SYMBOLS:{happy:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM16 18.711c3.623 0 7.070-0.963 10-2.654-0.455 5.576-4.785 9.942-10 9.942-5.215 0-9.544-4.371-10-9.947 2.93 1.691 6.377 2.658 10 2.658zM8 11c0-1.657 0.895-3 2-3s2 1.343 2 3c0 1.657-0.895 3-2 3-1.105 0-2-1.343-2-3zM20 11c0-1.657 0.895-3 2-3s2 1.343 2 3c0 1.657-0.895 3-2 3-1.105 0-2-1.343-2-3z"></path>',smiley:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM22.003 19.602l2.573 1.544c-1.749 2.908-4.935 4.855-8.576 4.855s-6.827-1.946-8.576-4.855l2.573-1.544c1.224 2.036 3.454 3.398 6.003 3.398s4.779-1.362 6.003-3.398z"></path>',wondering:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM23.304 18.801l0.703 2.399-13.656 4-0.703-2.399zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2z"></path>',sad:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM9.997 24.398l-2.573-1.544c1.749-2.908 4.935-4.855 8.576-4.855 3.641 0 6.827 1.946 8.576 4.855l-2.573 1.544c-1.224-2.036-3.454-3.398-6.003-3.398-2.549 0-4.779 1.362-6.003 3.398z"></path>',"checkmark-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM13.52 23.383l-7.362-7.363 2.828-2.828 4.533 4.535 9.617-9.617 2.828 2.828-12.444 12.445z"></path>',"plus-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM24 18h-6v6h-4v-6h-6v-4h6v-6h4v6h6v4z"></path>',"minus-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM24 18h-16v-4h16v4z"></path>',"x-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM23.914 21.086l-2.828 2.828-5.086-5.086-5.086 5.086-2.828-2.828 5.086-5.086-5.086-5.086 2.828-2.828 5.086 5.086 5.086-5.086 2.828 2.828-5.086 5.086 5.086 5.086z"></path>',denied:'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM16 4c2.59 0 4.973 0.844 6.934 2.242l-16.696 16.688c-1.398-1.961-2.238-4.344-2.238-6.93 0-6.617 5.383-12 12-12zM16 28c-2.59 0-4.973-0.844-6.934-2.242l16.696-16.688c1.398 1.961 2.238 4.344 2.238 6.93 0 6.617-5.383 12-12 12z"></path>',clock:'<path d="M16 4c6.617 0 12 5.383 12 12s-5.383 12-12 12-12-5.383-12-12 5.383-12 12-12zM16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16v0zM21.422 18.578l-3.422-3.426v-7.152h-4.023v7.992c0 0.602 0.277 1.121 0.695 1.492l3.922 3.922 2.828-2.828z"></path>',"heart-stroke":'<path d="M23.113 6c2.457 0 4.492 1.82 4.836 4.188l-11.945 13.718-11.953-13.718c0.344-2.368 2.379-4.188 4.836-4.188 2.016 0 3.855 2.164 3.855 2.164l3.258 3.461 3.258-3.461c0 0 1.84-2.164 3.855-2.164zM23.113 2c-2.984 0-5.5 1.578-7.113 3.844-1.613-2.266-4.129-3.844-7.113-3.844-4.903 0-8.887 3.992-8.887 8.891v0.734l16.008 18.375 15.992-18.375v-0.734c0-4.899-3.984-8.891-8.887-8.891v0z"></path>',"heart-fill":'<path d="M16 5.844c-1.613-2.266-4.129-3.844-7.113-3.844-4.903 0-8.887 3.992-8.887 8.891v0.734l16.008 18.375 15.992-18.375v-0.734c0-4.899-3.984-8.891-8.887-8.891-2.984 0-5.5 1.578-7.113 3.844z"></path>',home:'<path d="M16 0l-16 16h4v16h24v-16h4l-16-16zM24 28h-6v-6h-4v6h-6v-14.344l8-5.656 8 5.656v14.344z"></path>',pin:'<path d="M17.070 2.93c-3.906-3.906-10.234-3.906-14.141 0-3.906 3.904-3.906 10.238 0 14.14 0.001 0 7.071 6.93 7.071 14.93 0-8 7.070-14.93 7.070-14.93 3.907-3.902 3.907-10.236 0-14.14zM10 14c-2.211 0-4-1.789-4-4s1.789-4 4-4 4 1.789 4 4-1.789 4-4 4z"></path>',user:'<path d="M12 16c-6.625 0-12 5.375-12 12 0 2.211 1.789 4 4 4h16c2.211 0 4-1.789 4-4 0-6.625-5.375-12-12-12zM6 6c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6-3.314 0-6-2.686-6-6z"></path>',mail:'<path d="M15.996 15.457l16.004-7.539v-3.918h-32v3.906zM16.004 19.879l-16.004-7.559v15.68h32v-15.656z"></path>',star:'<path d="M22.137 19.625l9.863-7.625h-12l-4-12-4 12h-12l9.875 7.594-3.875 12.406 10.016-7.68 9.992 7.68z"></path>',bolt:'<path d="M32 0l-24 16 6 4-14 12 24-12-6-4z"></path>',sun:'<path d="M16.001 8c-4.418 0-8 3.582-8 8s3.582 8 8 8c4.418 0 7.999-3.582 7.999-8s-3.581-8-7.999-8v0zM14 2c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM4 6c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM2 14c1.105 0 2 0.895 2 2 0 1.107-0.895 2-2 2s-2-0.893-2-2c0-1.105 0.895-2 2-2zM4 26c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM14 30c0-1.109 0.895-2 2-2 1.108 0 2 0.891 2 2 0 1.102-0.892 2-2 2-1.105 0-2-0.898-2-2zM24 26c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM30 18c-1.104 0-2-0.896-2-2 0-1.107 0.896-2 2-2s2 0.893 2 2c0 1.104-0.896 2-2 2zM24 6c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2z"></path>',moon:'<path d="M24.633 22.184c-8.188 0-14.82-6.637-14.82-14.82 0-2.695 0.773-5.188 2.031-7.363-6.824 1.968-11.844 8.187-11.844 15.644 0 9.031 7.32 16.355 16.352 16.355 7.457 0 13.68-5.023 15.648-11.844-2.18 1.254-4.672 2.028-7.367 2.028z"></path>',cloud:'<path d="M24 10c-0.379 0-0.738 0.061-1.102 0.111-1.394-2.465-3.972-4.111-6.898-4.111-2.988 0-5.566 1.666-6.941 4.1-0.352-0.047-0.704-0.1-1.059-0.1-4.41 0-8 3.588-8 8 0 4.414 3.59 8 8 8h16c4.41 0 8-3.586 8-8 0-4.412-3.59-8-8-8zM24 22h-16c-2.207 0-4-1.797-4-4 0-2.193 1.941-3.885 4.004-3.945 0.008 0.943 0.172 1.869 0.5 2.744l3.746-1.402c-0.168-0.444-0.25-0.915-0.25-1.397 0-2.205 1.793-4 4-4 1.293 0 2.465 0.641 3.199 1.639-1.929 1.461-3.199 3.756-3.199 6.361h4c0-2.205 1.793-4 4-4s4 1.795 4 4c0 2.203-1.793 4-4 4z"></path>',rain:'<path d="M23.998 6c-0.375 0-0.733 0.061-1.103 0.111-1.389-2.465-3.969-4.111-6.895-4.111-2.987 0-5.565 1.666-6.94 4.1-0.353-0.047-0.705-0.1-1.060-0.1-4.41 0-8 3.588-8 8s3.59 8 8 8h15.998c4.414 0 8-3.588 8-8s-3.586-8-8-8zM23.998 18h-15.998c-2.207 0-4-1.795-4-4 0-2.193 1.941-3.885 4.004-3.945 0.009 0.943 0.172 1.869 0.5 2.744l3.746-1.402c-0.168-0.444-0.25-0.915-0.25-1.397 0-2.205 1.793-4 4-4 1.293 0 2.465 0.641 3.199 1.639-1.928 1.461-3.199 3.756-3.199 6.361h4c0-2.205 1.795-4 3.998-4 2.211 0 4 1.795 4 4s-1.789 4-4 4zM3.281 29.438c-0.75 0.75-1.969 0.75-2.719 0s-0.75-1.969 0-2.719 5.438-2.719 5.438-2.719-1.969 4.688-2.719 5.438zM11.285 29.438c-0.75 0.75-1.965 0.75-2.719 0-0.75-0.75-0.75-1.969 0-2.719 0.754-0.75 5.438-2.719 5.438-2.719s-1.965 4.688-2.719 5.438zM19.28 29.438c-0.75 0.75-1.969 0.75-2.719 0s-0.75-1.969 0-2.719 5.437-2.719 5.437-2.719-1.968 4.688-2.718 5.438z"></path>',umbrella:'<path d="M16 0c-8.82 0-16 7.178-16 16h4c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5h4c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5v10c0 1.102-0.895 2-2 2-1.102 0-2-0.898-2-2h-4c0 3.309 2.695 6 6 6 3.312 0 6-2.691 6-6v-10c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.498 0.674 1.498 1.5h4c0-0.826 0.68-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5h4c0-8.822-7.172-16-15.998-16z"></path>',eye:'<path d="M16 4c-8.836 0-16 11.844-16 11.844s7.164 12.156 16 12.156 16-12.156 16-12.156-7.164-11.844-16-11.844zM16 24c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8zM12 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4-2.209 0-4-1.791-4-4z"></path>',ribbon:'<path d="M8 20c-1.41 0-2.742-0.289-4-0.736v12.736l4-4 4 4v-12.736c-1.258 0.447-2.59 0.736-4 0.736zM0 8c0-4.418 3.582-8 8-8s8 3.582 8 8c0 4.418-3.582 8-8 8-4.418 0-8-3.582-8-8z"></path>',iphone:'<path d="M16 0h-8c-4.418 0-8 3.582-8 8v16c0 4.418 3.582 8 8 8h8c4.418 0 8-3.582 8-8v-16c0-4.418-3.582-8-8-8zM12 30.062c-1.139 0-2.062-0.922-2.062-2.062s0.924-2.062 2.062-2.062 2.062 0.922 2.062 2.062-0.923 2.062-2.062 2.062zM20 24h-16v-16c0-2.203 1.795-4 4-4h8c2.203 0 4 1.797 4 4v16z"></path>',camera:'<path d="M16 20c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4-2.209 0-4-1.791-4-4zM28 8l-3.289-6.643c-0.27-0.789-1.016-1.357-1.899-1.357h-5.492c-0.893 0-1.646 0.582-1.904 1.385l-3.412 6.615h-8.004c-2.209 0-4 1.791-4 4v20h32v-20c0-2.209-1.789-4-4-4zM6 16c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM20 28c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z"></path>',cog:'<path d="M32 17.969v-4l-4.781-1.992c-0.133-0.375-0.273-0.738-0.445-1.094l1.93-4.805-2.829-2.828-4.762 1.961c-0.363-0.176-0.734-0.324-1.117-0.461l-2.027-4.75h-4l-1.977 4.734c-0.398 0.141-0.781 0.289-1.16 0.469l-4.754-1.91-2.828 2.828 1.938 4.711c-0.188 0.387-0.34 0.781-0.485 1.188l-4.703 2.011v4l4.707 1.961c0.145 0.406 0.301 0.801 0.488 1.188l-1.902 4.742 2.828 2.828 4.723-1.945c0.379 0.18 0.766 0.324 1.164 0.461l2.023 4.734h4l1.98-4.758c0.379-0.141 0.754-0.289 1.113-0.461l4.797 1.922 2.828-2.828-1.969-4.773c0.168-0.359 0.305-0.723 0.438-1.094l4.782-2.039zM15.969 22c-3.312 0-6-2.688-6-6s2.688-6 6-6 6 2.688 6 6-2.688 6-6 6z"></path>',lock:'<path d="M14 0c-5.508 0-9.996 4.484-9.996 10v2h-4.004v14c0 3.309 2.691 6 6 6h12c3.309 0 6-2.691 6-6v-16c0-5.516-4.488-10-10-10zM11.996 24c-1.101 0-1.996-0.895-1.996-2s0.895-2 1.996-2c1.105 0 2 0.895 2 2s-0.894 2-2 2zM20 12h-11.996v-2c0-3.309 2.691-6 5.996-6 3.309 0 6 2.691 6 6v2z"></path>',unlock:'<path d="M14.004 0c-5.516 0-9.996 4.484-9.996 10h3.996c0-3.309 2.688-6 6-6 3.305 0 5.996 2.691 5.996 6v2h-20v14c0 3.309 2.695 6 6 6h12c3.305 0 6-2.691 6-6v-16c0-5.516-4.488-10-9.996-10zM12 24c-1.102 0-2-0.895-2-2s0.898-2 2-2c1.109 0 2 0.895 2 2s-0.891 2-2 2z"></path>',fork:'<path d="M20 0v3.875c0 1.602-0.625 3.109-1.754 4.238l-11.316 11.254c-1.789 1.785-2.774 4.129-2.883 6.633h-4.047l6 6 6-6h-3.957c0.105-1.438 0.684-2.773 1.711-3.805l11.316-11.25c1.891-1.89 2.93-4.398 2.93-7.070v-3.875h-4zM23.953 26c-0.109-2.504-1.098-4.848-2.887-6.641l-2.23-2.215-2.836 2.821 2.242 2.23c1.031 1.027 1.609 2.367 1.715 3.805h-3.957l6 6 6-6h-4.047z"></path>',paperclip:'<path d="M17.293 15.292l-2.829-2.829-4 4c-1.953 1.953-1.953 5.119 0 7.071 1.953 1.953 5.118 1.953 7.071 0l10.122-9.879c3.123-3.124 3.123-8.188 0-11.313-3.125-3.124-8.19-3.124-11.313 0l-11.121 10.88c-4.296 4.295-4.296 11.26 0 15.557 4.296 4.296 11.261 4.296 15.556 0l6-6-2.829-2.829-5.999 6c-2.733 2.732-7.166 2.732-9.9 0-2.733-2.732-2.733-7.166 0-9.899l11.121-10.881c1.562-1.562 4.095-1.562 5.656 0 1.563 1.563 1.563 4.097 0 5.657l-10.121 9.879c-0.391 0.391-1.023 0.391-1.414 0s-0.391-1.023 0-1.414l4-4z"></path>',facebook:'<path d="M17.996 32h-5.996v-16h-4v-5.514l4-0.002-0.007-3.248c0-4.498 1.22-7.236 6.519-7.236h4.412v5.515h-2.757c-2.064 0-2.163 0.771-2.163 2.209l-0.008 2.76h4.959l-0.584 5.514-4.37 0.002-0.004 16z"></path>',twitter:'<path d="M32 6.076c-1.177 0.522-2.443 0.875-3.771 1.034 1.355-0.813 2.396-2.099 2.887-3.632-1.269 0.752-2.674 1.299-4.169 1.593-1.198-1.276-2.904-2.073-4.792-2.073-3.626 0-6.565 2.939-6.565 6.565 0 0.515 0.058 1.016 0.17 1.496-5.456-0.274-10.294-2.888-13.532-6.86-0.565 0.97-0.889 2.097-0.889 3.301 0 2.278 1.159 4.287 2.921 5.465-1.076-0.034-2.088-0.329-2.974-0.821-0.001 0.027-0.001 0.055-0.001 0.083 0 3.181 2.263 5.834 5.266 6.437-0.551 0.15-1.131 0.23-1.73 0.23-0.423 0-0.834-0.041-1.235-0.118 0.835 2.608 3.26 4.506 6.133 4.559-2.247 1.761-5.078 2.81-8.154 2.81-0.53 0-1.052-0.031-1.566-0.092 2.905 1.863 6.356 2.95 10.064 2.95 12.076 0 18.679-10.004 18.679-18.68 0-0.285-0.006-0.568-0.019-0.849 1.283-0.926 2.396-2.082 3.276-3.398z"></path>',earth:'<path d="M27.314 4.686c3.022 3.022 4.686 7.040 4.686 11.314s-1.664 8.292-4.686 11.314c-3.022 3.022-7.040 4.686-11.314 4.686s-8.292-1.664-11.314-4.686c-3.022-3.022-4.686-7.040-4.686-11.314s1.664-8.292 4.686-11.314c3.022-3.022 7.040-4.686 11.314-4.686s8.292 1.664 11.314 4.686zM25.899 25.9c1.971-1.971 3.281-4.425 3.821-7.096-0.421 0.62-0.824 0.85-1.073-0.538-0.257-2.262-2.335-0.817-3.641-1.621-1.375 0.927-4.466-1.802-3.941 1.276 0.81 1.388 4.375-1.858 2.598 1.079-1.134 2.050-4.145 6.592-3.753 8.946 0.049 3.43-3.504 0.715-4.729-0.422-0.824-2.279-0.281-6.262-2.434-7.378-2.338-0.102-4.344-0.314-5.25-2.927-0.545-1.87 0.58-4.653 2.584-5.083 2.933-1.843 3.98 2.158 6.731 2.232 0.854-0.894 3.182-1.178 3.375-2.18-1.805-0.318 2.29-1.517-0.173-2.199-1.358 0.16-2.234 1.409-1.512 2.467-2.632 0.614-2.717-3.809-5.247-2.414-0.064 2.206-4.132 0.715-1.407 0.268 0.936-0.409-1.527-1.594-0.196-1.379 0.654-0.036 2.854-0.807 2.259-1.325 1.225-0.761 2.255 1.822 3.454-0.059 0.866-1.446-0.363-1.713-1.448-0.98-0.612-0.685 1.080-2.165 2.573-2.804 0.497-0.213 0.973-0.329 1.336-0.296 0.752 0.868 2.142 1.019 2.215-0.104-1.862-0.892-3.915-1.363-6.040-1.363-3.051 0-5.952 0.969-8.353 2.762 0.645 0.296 1.012 0.664 0.39 1.134-0.483 1.439-2.443 3.371-4.163 3.098-0.893 1.54-1.482 3.238-1.733 5.017 1.441 0.477 1.773 1.42 1.464 1.736-0.734 0.64-1.185 1.548-1.418 2.541 0.469 2.87 1.818 5.515 3.915 7.612 2.644 2.644 6.16 4.1 9.899 4.1s7.255-1.456 9.899-4.1z"></path>',globe:'<path d="M15 2c-8.284 0-15 6.716-15 15s6.716 15 15 15c8.284 0 15-6.716 15-15s-6.716-15-15-15zM23.487 22c0.268-1.264 0.437-2.606 0.492-4h3.983c-0.104 1.381-0.426 2.722-0.959 4h-3.516zM6.513 12c-0.268 1.264-0.437 2.606-0.492 4h-3.983c0.104-1.381 0.426-2.722 0.959-4h3.516zM21.439 12c0.3 1.28 0.481 2.62 0.54 4h-5.979v-4h5.439zM16 10v-5.854c0.456 0.133 0.908 0.355 1.351 0.668 0.831 0.586 1.625 1.488 2.298 2.609 0.465 0.775 0.867 1.638 1.203 2.578h-4.852zM10.351 7.422c0.673-1.121 1.467-2.023 2.298-2.609 0.443-0.313 0.895-0.535 1.351-0.668v5.854h-4.852c0.336-0.94 0.738-1.803 1.203-2.578zM14 12v4h-5.979c0.059-1.38 0.24-2.72 0.54-4h5.439zM2.997 22c-0.533-1.278-0.854-2.619-0.959-4h3.983c0.055 1.394 0.224 2.736 0.492 4h-3.516zM8.021 18h5.979v4h-5.439c-0.3-1.28-0.481-2.62-0.54-4zM14 24v5.854c-0.456-0.133-0.908-0.355-1.351-0.668-0.831-0.586-1.625-1.488-2.298-2.609-0.465-0.775-0.867-1.638-1.203-2.578h4.852zM19.649 26.578c-0.673 1.121-1.467 2.023-2.298 2.609-0.443 0.312-0.895 0.535-1.351 0.668v-5.854h4.852c-0.336 0.94-0.738 1.802-1.203 2.578zM16 22v-4h5.979c-0.059 1.38-0.24 2.72-0.54 4h-5.439zM23.98 16c-0.055-1.394-0.224-2.736-0.492-4h3.516c0.533 1.278 0.855 2.619 0.959 4h-3.983zM25.958 10h-2.997c-0.582-1.836-1.387-3.447-2.354-4.732 1.329 0.636 2.533 1.488 3.585 2.54 0.671 0.671 1.261 1.404 1.766 2.192zM5.808 7.808c1.052-1.052 2.256-1.904 3.585-2.54-0.967 1.285-1.771 2.896-2.354 4.732h-2.997c0.504-0.788 1.094-1.521 1.766-2.192zM4.042 24h2.997c0.583 1.836 1.387 3.447 2.354 4.732-1.329-0.636-2.533-1.488-3.585-2.54-0.671-0.671-1.261-1.404-1.766-2.192zM24.192 26.192c-1.052 1.052-2.256 1.904-3.585 2.54 0.967-1.285 1.771-2.896 2.354-4.732h2.997c-0.504 0.788-1.094 1.521-1.766 2.192z"></path>',"thin-arrow-up":'<path d="M27.414 12.586l-10-10c-0.781-0.781-2.047-0.781-2.828 0l-10 10c-0.781 0.781-0.781 2.047 0 2.828s2.047 0.781 2.828 0l6.586-6.586v19.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-19.172l6.586 6.586c0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586c0.781-0.781 0.781-2.047 0-2.828z"></path>',"thin-arrow-down":'<path d="M4.586 19.414l10 10c0.781 0.781 2.047 0.781 2.828 0l10-10c0.781-0.781 0.781-2.047 0-2.828s-2.047-0.781-2.828 0l-6.586 6.586v-19.172c0-1.105-0.895-2-2-2s-2 0.895-2 2v19.172l-6.586-6.586c-0.391-0.39-0.902-0.586-1.414-0.586s-1.024 0.195-1.414 0.586c-0.781 0.781-0.781 2.047 0 2.828z"></path>',"thin-arrow-up-left":'<path d="M4 18c0 1.105 0.895 2 2 2s2-0.895 2-2v-7.172l16.586 16.586c0.781 0.781 2.047 0.781 2.828 0 0.391-0.391 0.586-0.902 0.586-1.414s-0.195-1.024-0.586-1.414l-16.586-16.586h7.172c1.105 0 2-0.895 2-2s-0.895-2-2-2h-14v14z"></path>',"thin-arrow-up-right":'<path d="M26.001 4c-0 0-0.001 0-0.001 0h-11.999c-1.105 0-2 0.895-2 2s0.895 2 2 2h7.172l-16.586 16.586c-0.781 0.781-0.781 2.047 0 2.828 0.391 0.391 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l16.586-16.586v7.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-14h-1.999z"></path>',"thin-arrow-left":'<path d="M12.586 4.586l-10 10c-0.781 0.781-0.781 2.047 0 2.828l10 10c0.781 0.781 2.047 0.781 2.828 0s0.781-2.047 0-2.828l-6.586-6.586h19.172c1.105 0 2-0.895 2-2s-0.895-2-2-2h-19.172l6.586-6.586c0.39-0.391 0.586-0.902 0.586-1.414s-0.195-1.024-0.586-1.414c-0.781-0.781-2.047-0.781-2.828 0z"></path>',"thin-arrow-right":'<path d="M19.414 27.414l10-10c0.781-0.781 0.781-2.047 0-2.828l-10-10c-0.781-0.781-2.047-0.781-2.828 0s-0.781 2.047 0 2.828l6.586 6.586h-19.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h19.172l-6.586 6.586c-0.39 0.39-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414c0.781 0.781 2.047 0.781 2.828 0z"></path>',"thin-arrow-down-left":'<path d="M18 28c1.105 0 2-0.895 2-2s-0.895-2-2-2h-7.172l16.586-16.586c0.781-0.781 0.781-2.047 0-2.828-0.391-0.391-0.902-0.586-1.414-0.586s-1.024 0.195-1.414 0.586l-16.586 16.586v-7.172c0-1.105-0.895-2-2-2s-2 0.895-2 2v14h14z"></path>',"thin-arrow-down-right":'<path d="M28 14c0-1.105-0.895-2-2-2s-2 0.895-2 2v7.172l-16.586-16.586c-0.781-0.781-2.047-0.781-2.828 0-0.391 0.391-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414l16.586 16.586h-7.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h14v-14z"></path>'},boundingBox:function(t){var e;
if($(t).parents("body").length)e=t.getBBox();else{var i=t.parentNode,n=document.createElementNS(SL.util.svg.NAMESPACE,"svg");n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("style","visibility: hidden; position: absolute; left: 0; top: 0;"),n.appendChild(t),document.body.appendChild(n),e=t.getBBox(),i?i.appendChild(t):n.removeChild(t),document.body.removeChild(n)}return e},pointsToPolygon:function(t){for(var e=[];t.length>=2;)e.push(t.shift()+","+t.shift());return e.join(" ")},rect:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"rect");return i.setAttribute("width",t),i.setAttribute("height",e),i},ellipse:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"ellipse");return i.setAttribute("rx",t/2),i.setAttribute("ry",e/2),i.setAttribute("cx",t/2),i.setAttribute("cy",e/2),i},triangleUp:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([t/2,0,t,e,0,e])),i},triangleDown:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([0,0,t,0,t/2,e])),i},triangleLeft:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([0,e/2,t,0,t,e])),i},triangleRight:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([t,e/2,0,e,0,0])),i},arrowUp:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([.5*t,0,t,.5*e,.7*t,.5*e,.7*t,e,.3*t,e,.3*t,.5*e,0,.5*e,.5*t,0])),i},arrowDown:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([.5*t,e,t,.5*e,.7*t,.5*e,.7*t,0,.3*t,0,.3*t,.5*e,0,.5*e,.5*t,e])),i},arrowLeft:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([t,.3*e,.5*t,.3*e,.5*t,0,0,.5*e,.5*t,e,.5*t,.7*e,t,.7*e,t,.3*e])),i},arrowRight:function(t,e){var i=document.createElementNS(SL.util.svg.NAMESPACE,"polygon");return i.setAttribute("points",SL.util.svg.pointsToPolygon([0,.3*e,.5*t,.3*e,.5*t,0,t,.5*e,.5*t,e,.5*t,.7*e,0,.7*e])),i},polygon:function(t,e,i){var n=document.createElementNS(SL.util.svg.NAMESPACE,"polygon"),s=[];if(3===i)s=[t/2,0,t,e,0,e];else if(i>3)for(var o=t/2,r=e/2,a=0;i>a;a++){var l=o+o*Math.cos(2*Math.PI*a/i),c=r+r*Math.sin(2*Math.PI*a/i);l=Math.round(10*l)/10,c=Math.round(10*c)/10,s.push(l),s.push(c)}return n.setAttribute("points",SL.util.svg.pointsToPolygon(s)),n},symbol:function(t){var e=document.createElementNS(SL.util.svg.NAMESPACE,"g"),i=SL.util.svg.SYMBOLS[t];return i&&(e.innerSVG=SL.util.svg.SYMBOLS[t]),e}},SL.visibility={init:function(){this.changed=new signals.Signal,"undefined"!=typeof document.hidden?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):"undefined"!=typeof document.msHidden?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"),this.supported="boolean"==typeof document[this.hiddenProperty],this.supported&&this.bind()},isVisible:function(){return this.supported?!document[this.hiddenProperty]:!0},isHidden:function(){return this.supported?document[this.hiddenProperty]:!1},bind:function(){document.addEventListener(this.visibilityChangeEvent,this.onVisibilityChange.bind(this))},onVisibilityChange:function(){this.changed.dispatch()}},SL.warnings={STORAGE_KEY:"slides-last-warning-id",MESSAGE_ID:23,init:function(){this.showMessage()},showMessage:function(){if(this.hasMessage()&&!this.hasExpired()&&SL.util.user.isLoggedIn()&&Modernizr.localstorage){var t=parseInt(localStorage.getItem(this.STORAGE_KEY),10)||0;if(t<this.MESSAGE_ID){var e=SL.notify(this.MESSAGE_TEXT,{optional:!1});e.destroyed.add(this.hideMessage.bind(this))}}},hideMessage:function(){Modernizr.localstorage&&localStorage.setItem(this.STORAGE_KEY,this.MESSAGE_ID)},hasMessage:function(){return!!this.MESSAGE_TEXT},hasExpired:function(){return this.MESSAGE_EXPIRY?moment().diff(moment(this.MESSAGE_EXPIRY))>0:!1}},SL("helpers").FileUploader=Class.extend({init:function(t){if(this.options=$.extend({formdata:!0,contentType:!1,external:!1,method:"POST"},t),"undefined"==typeof this.options.file||"undefined"==typeof this.options.service)throw"File and service must be defined for FileUploader task.";this.timeout=-1,this.uploading=!1,this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadProgress=this.onUploadProgress.bind(this),this.onUploadError=this.onUploadError.bind(this),this.failed=new signals.Signal,this.succeeded=new signals.Signal,this.progressed=new signals.Signal},upload:function(){if(this.uploading=!0,clearTimeout(this.timeout),"number"==typeof this.options.timeout&&(this.timeout=setTimeout(this.onUploadError,this.options.timeout)),this.xhr=new XMLHttpRequest,this.xhr.onload=function(){if(this.options.external===!0)this.onUploadSuccess();else if(422===this.xhr.status||500===this.xhr.status)this.onUploadError();else{try{var t=JSON.parse(this.xhr.responseText)}catch(e){return this.onUploadError()}this.onUploadSuccess(t)}}.bind(this),this.xhr.onerror=this.onUploadError,this.xhr.upload.onprogress=this.onUploadProgress,this.xhr.open(this.options.method,this.options.service,!0),this.options.contentType){var t="string"==typeof this.options.contentType?this.options.contentType:this.options.file.type;t&&this.xhr.setRequestHeader("Content-Type",t)}if(this.options.formdata){var e=new FormData;this.options.filename?e.append("file",this.options.file,this.options.filename):e.append("file",this.options.file);var i=this.options.csrf||document.querySelector('meta[name="csrf-token"]');i&&!this.options.external&&e.append("authenticity_token",i.getAttribute("content")),this.xhr.send(e)}else this.xhr.send(this.options.file)},isUploading:function(){return this.uploading},onUploadSuccess:function(t){clearTimeout(this.timeout),this.uploading=!1,this.succeeded.dispatch(t)},onUploadProgress:function(t){t.lengthComputable&&this.progressed.dispatch(t.loaded/t.total)},onUploadError:function(){clearTimeout(this.timeout),this.uploading=!1,this.failed.dispatch()},destroy:function(){if(clearTimeout(this.timeout),this.xhr){var t=function(){};this.xhr.onload=t,this.xhr.onerror=t,this.xhr.upload.onprogress=t,this.xhr.abort()}this.succeeded.dispose(),this.progressed.dispose(),this.failed.dispose()}}),SL.helpers.Fullscreen={enter:function(t){t=t||document.body;var e=t.requestFullScreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;e&&e.apply(t)},exit:function(){var t=document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;t&&t.apply(document)},toggle:function(){SL.helpers.Fullscreen.isActive()?SL.helpers.Fullscreen.exit():SL.helpers.Fullscreen.enter()},isEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)},isActive:function(){return!!(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)}},SL("helpers").ImageUploader=Class.extend({init:function(t){this.options=$.extend({service:SL.config.AJAX_MEDIA_CREATE,timeout:9e4},t),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadProgress=this.onUploadProgress.bind(this),this.onUploadError=this.onUploadError.bind(this),this.progressed=new signals.Signal,this.succeeded=new signals.Signal,this.failed=new signals.Signal},upload:function(t,e){return t&&t.type.match(/image.*/)?"number"==typeof t.size&&t.size/1024>SL.config.MAX_IMAGE_UPLOAD_SIZE.maxsize?void SL.notify("No more than "+Math.round(MAX_IMAGE_UPLOAD_SIZE/1e3)+"mb please","negative"):(this.fileUploader&&this.fileUploader.destroy(),this.fileUploader=new SL.helpers.FileUploader({file:t,filename:e||this.options.filename,service:this.options.service,timeout:this.options.timeout}),this.fileUploader.succeeded.add(this.onUploadSuccess),this.fileUploader.progressed.add(this.onUploadProgress),this.fileUploader.failed.add(this.onUploadError),void this.fileUploader.upload()):void SL.notify("Only image files, please")},isUploading:function(){return!(!this.fileUploader||!this.fileUploader.isUploading())},onUploadSuccess:function(t){t&&"string"==typeof t.url?this.succeeded.dispatch(t.url):this.failed.dispatch(),this.fileUploader.destroy(),this.fileUploader=null},onUploadProgress:function(t){this.progressed.dispatch(t)},onUploadError:function(){this.failed.dispatch(),this.fileUploader.destroy(),this.fileUploader=null},destroy:function(){this.succeeded.dispose(),this.progressed.dispose(),this.failed.dispose(),this.fileUploader&&this.fileUploader.destroy()}}),SL.helpers.PageLoader={show:function(t){t=$.extend({style:null,message:null},t);var e=$(".page-loader");0===e.length&&(e=$(['<div class="page-loader">','<div class="page-loader-inner hidden">','<p class="page-loader-message"></p>','<div class="page-loader-spinner spinner"></div>',"</div>","</div>"].join("")).appendTo(document.body),setTimeout(function(){e.find(".page-loader-inner").removeClass("hidden")},1)),t.container&&e.appendTo(t.container),t.message&&e.find(".page-loader-message").html(t.message),t.style&&e.attr("data-style",t.style),clearTimeout(this.hideTimeout),e.removeClass("frozen"),e.addClass("visible")},hide:function(){$(".page-loader").removeClass("visible"),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){$(".page-loader").addClass("frozen")}.bind(this),1e3)},waitForFonts:function(t){SL.fonts.isReady()===!1&&(this.show(t),SL.fonts.ready.add(this.hide))}},SL("helpers").PollJob=Class.extend({init:function(t){this.options=$.extend({interval:1e3,timeout:Number.MAX_VALUE,retries:Number.MAX_VALUE},t),this.interval=-1,this.running=!1,this.poll=this.poll.bind(this),this.ended=new signals.Signal,this.polled=new signals.Signal},start:function(){this.running=!0,this.pollStart=Date.now(),this.pollTimes=0,clearInterval(this.interval),this.interval=setInterval(this.poll,this.options.interval)},stop:function(){this.running=!1,clearInterval(this.interval)},poll:function(){this.pollTimes++,Date.now()-this.pollStart>this.options.timeout||this.pollTimes>this.options.retries?(this.stop(),this.ended.dispatch()):this.polled.dispatch()}}),SL("helpers").StreamEditor=Class.extend({init:function(t){this.options=$.extend({},t),this.statusChanged=new signals.Signal,this.reconnecting=new signals.Signal,this.messageReceived=new signals.Signal,this.debugMode=!!SL.util.getQuery().debug},connect:function(){if(this.socket)this.isConnected()||(this.log("manual reconnect",t),this.socket.io.close(),this.socket.io.open());else{var t=SL.config.STREAM_ENGINE_HOST+"/"+SL.config.STREAM_ENGINE_EDITOR_NAMESPACE;this.log("connecting to",t),this.socket=io.connect(t,{reconnectionDelayMax:1e4}),this.socket.on("connect",this.onSocketConnect.bind(this)),this.socket.on("reconnect_attempt",this.onSocketReconnectAttempt.bind(this)),this.socket.on("reconnect_failed",this.onSocketReconnectFailed.bind(this)),this.socket.on("reconnect",this.onSocketReconnect.bind(this)),this.socket.on("disconnect",this.onSocketDisconnect.bind(this)),this.socket.on("message",this.onSocketMessage.bind(this))}return this.isConnected()?Promise.resolve():new Promise(function(t,e){var i=function(){t(),this.socket.removeEventListener("connect",i),this.socket.removeEventListener("connect_error",n)}.bind(this),n=function(){e(),this.socket.removeEventListener("connect",i),this.socket.removeEventListener("connect_error",n)}.bind(this);this.socket.on("connect",i),this.socket.on("connect_error",n)}.bind(this))},broadcast:function(t){this.emit("broadcast",JSON.stringify(t))},emit:function(){this.log("emit",arguments),this.socket.emit.apply(this.socket,arguments)},log:function(){if(this.debugMode&&"function"==typeof console.log.apply){var t=["Stream:"].concat(Array.prototype.slice.call(arguments));console.log.apply(console,t)}},setStatus:function(t){this.status!==t&&(this.status=t,this.statusChanged.dispatch(this.status))},isConnected:function(){return this.socket.connected===!0},onSocketMessage:function(t){try{var e=JSON.parse(t.data)}catch(i){this.log("unable to parse streamed socket message as JSON.")}this.log("message",e),this.messageReceived.dispatch(e)},onSocketConnect:function(){this.log("connected"),this.emit("subscribe",{deck_id:this.options.deckID,user_id:SL.current_user.get("id"),slide_id:this.options.slideID}),this.setStatus(SL.helpers.StreamEditor.STATUS_CONNECTED)},onSocketDisconnect:function(){this.log("disconnected"),this.setStatus(SL.helpers.StreamEditor.STATUS_DISCONNECTED)},onSocketReconnectAttempt:function(){this.setStatus(SL.helpers.StreamEditor.STATUS_RECONNECTING),this.reconnecting.dispatch(this.socket.io.backoff.duration())},onSocketReconnectFailed:function(){this.log("reconnect failed"),this.setStatus(SL.helpers.StreamEditor.STATUS_RECONNECT_FAILED)},onSocketReconnect:function(){this.log("reconnected"),this.setStatus(SL.helpers.StreamEditor.STATUS_RECONNECTED)}}),SL.helpers.StreamEditor.STATUS_CONNECTED="connected",SL.helpers.StreamEditor.STATUS_RECONNECTED="reconnected",SL.helpers.StreamEditor.STATUS_RECONNECT_FAILED="reconnect_failed",SL.helpers.StreamEditor.STATUS_DISCONNECTED="disconnected",SL.helpers.StreamEditor.singleton=function(){return this._instance||(this._instance=new SL.helpers.StreamEditor({deckID:SLConfig.deck.id,slideID:SL.util.deck.getSlideID(Reveal.getCurrentSlide())})),this._instance},SL("helpers").StreamLive=Class.extend({init:function(t){this.options=$.extend({reveal:window.Reveal,showErrors:!0,subscriber:!0,publisher:!1,publisherID:Date.now()+"-"+Math.round(1e6*Math.random()),deckID:SL.current_deck.get("id")},t),this.ready=new signals.Signal,this.stateChanged=new signals.Signal,this.statusChanged=new signals.Signal,this.subscribersChanged=new signals.Signal,this.socketIsDisconnected=!1,this.debugMode=!!SL.util.getQuery().debug},connect:function(){this.options.publisher?this.setupPublisher():this.setupSubscriber()},setupPublisher:function(){this.publish=this.publish.bind(this),this.publishable=!0,this.options.reveal.addEventListener("slidechanged",this.publish),this.options.reveal.addEventListener("fragmentshown",this.publish),this.options.reveal.addEventListener("fragmenthidden",this.publish),this.options.reveal.addEventListener("overviewshown",this.publish),this.options.reveal.addEventListener("overviewhidden",this.publish),this.options.reveal.addEventListener("paused",this.publish),this.options.reveal.addEventListener("resumed",this.publish),$.ajax({url:"/api/v1/decks/"+this.options.deckID+"/stream.json",type:"GET",context:this}).done(function(t){this.log("found existing stream"),this.setState(JSON.parse(t.state),!0),this.setupSocket(),this.ready.dispatch()}).error(function(){this.log("no existing stream, publishing state"),this.publish(function(){this.setupSocket(),this.ready.dispatch()}.bind(this))})},setupSubscriber:function(){$.ajax({url:"/api/v1/decks/"+this.options.deckID+"/stream.json",type:"GET",context:this}).done(function(t){this.log("found existing stream"),this.setStatus(SL.helpers.StreamLive.STATUS_NONE),this.setState(JSON.parse(t.state),!0),this.setupSocket(),this.ready.dispatch()}).error(function(){this.retryStartTime=Date.now(),this.setStatus(SL.helpers.StreamLive.STATUS_WAITING_FOR_PUBLISHER),this.log("no existing stream, retrying in "+SL.helpers.StreamLive.CONNECTION_RETRY_INTERVAL/1e3+"s"),setTimeout(this.setupSubscriber.bind(this),SL.helpers.StreamLive.CONNECTION_RETRY_INTERVAL)})},setupSocket:function(){if(this.options.subscriber){var t=SL.config.STREAM_ENGINE_HOST+"/"+SL.config.STREAM_ENGINE_LIVE_NAMESPACE;this.log("socket attempting to connect to",t),this.socket=io.connect(t,{reconnectionDelayMax:1e4}),this.socket.on("connect",this.onSocketConnected.bind(this)),this.socket.on("connect_error",this.onSocketDisconnected.bind(this)),this.socket.on("disconnect",this.onSocketDisconnected.bind(this)),this.socket.on("reconnect_attempt",this.onSocketReconnectAttempt.bind(this)),this.socket.on("reconnect_failed",this.onSocketReconnectFailed.bind(this)),this.socket.on("message",this.onSocketStateMessage.bind(this)),this.socket.on("subscribers",this.onSocketSubscribersMessage.bind(this))}},publish:function(t,e){if(this.publishable){var i=this.options.reveal.getState();if(i.publisher_id=this.options.publisherID,i=$.extend(i,e),this.socketIsDisconnected===!0)return this.publishAfterReconnect=!0,void this.log("publish stalled while disconnected");this.log("publish",i.publisher_id),$.ajax({url:"/api/v1/decks/"+this.options.deckID+"/stream.json",type:"PUT",data:{state:JSON.stringify(i)},success:t})}},log:function(){if(this.debugMode&&"function"==typeof console.log.apply){var t="Stream ("+(this.options.publisher?"publisher":"subscriber")+"):",e=[t].concat(Array.prototype.slice.call(arguments));console.log.apply(console,e)}},setState:function(t,e){this.publishable=!1,e&&$(".reveal").addClass("no-transition"),this.options.reveal.setState(t),this.stateChanged.dispatch(t),setTimeout(function(){this.publishable=!0,e&&$(".reveal").removeClass("no-transition")}.bind(this),1)},setStatus:function(t){this.status!==t&&(this.status=t,this.statusChanged.dispatch(this.status))},getRetryStartTime:function(){return this.retryStartTime},isPublisher:function(){return this.options.publisher},showConnectionError:function(){this.disconnectTimeout=setTimeout(function(){this.connectionError||(this.connectionError=new SL.components.RetryNotification("Lost connection to server"),this.connectionError.startCountdown(0),this.connectionError.destroyed.add(function(){this.connectionError=null}.bind(this)),this.connectionError.retryClicked.add(function(){this.connectionError.startCountdown(0),this.socket.io.close(),this.socket.io.open()}.bind(this)))}.bind(this),1e4)},hideConnectionError:function(){clearTimeout(this.disconnectTimeout),this.connectionError&&this.connectionError.hide()},onSocketStateMessage:function(t){try{var e=JSON.parse(t.data);e.publisher_id!=this.options.publisherID&&(this.log("sync","from: "+e.publisher_id,"to: "+this.options.publisherID),this.setState(e))}catch(i){this.log("unable to parse streamed deck state as JSON.")}this.setStatus(SL.helpers.StreamLive.STATUS_NONE)},onSocketSubscribersMessage:function(t){this.subscribersChanged.dispatch(t.subscribers)},onSocketConnected:function(){this.log("socket connected"),this.socket.emit("subscribe",{deck_id:this.options.deckID,publisher:this.options.publisher}),this.socketIsDisconnected===!0&&(this.socketIsDisconnected=!1,this.log("socket connection regained"),this.setStatus(SL.helpers.StreamLive.STATUS_NONE),this.publishAfterReconnect===!0&&(this.publishAfterReconnect=!1,this.log("publishing stalled state"),this.publish())),this.hideConnectionError()},onSocketReconnectAttempt:function(){this.connectionError&&this.connectionError.startCountdown(this.socket.io.backoff.duration())},onSocketReconnectFailed:function(){this.connectionError&&this.connectionError.disableCountdown()},onSocketDisconnected:function(){this.socketIsDisconnected===!1&&(this.socketIsDisconnected=!0,this.log("socket connection lost"),this.setStatus(SL.helpers.StreamLive.STATUS_CONNECTION_LOST),this.options.showErrors&&this.showConnectionError())}}),SL.helpers.StreamLive.CONNECTION_RETRY_INTERVAL=2e4,SL.helpers.StreamLive.STATUS_NONE="",SL.helpers.StreamLive.STATUS_CONNECTION_LOST="connection_lost",SL.helpers.StreamLive.STATUS_WAITING_FOR_PUBLISHER="waiting_for_publisher",SL.helpers.ThemeController={paint:function(t,e){e=e||{};var i=$(".reveal-viewport");if(0===i.length||"undefined"==typeof window.Reveal)return!1;if(this.cleanup(),i.addClass("theme-font-"+t.get("font")),i.addClass("theme-color-"+t.get("color")),Reveal.configure($.extend({width:t.get("width"),height:t.get("height"),center:t.get("center"),rolling_links:t.get("rolling_links"),transition:t.get("transition"),backgroundTransition:t.get("background_transition")},e)),t.get("html")){var n=$("#theme-html-output");n.length?n.html(t.get("html")):$(".reveal").append('<div id="theme-html-output">'+t.get("html")+"</div>")}else $("#theme-html-output").remove();if("string"==typeof e.globalCSS)if(e.globalCSS.length){var s=$("#global-css-output");s.length?s.html(e.globalCSS):$("head").append('<style id="global-css-output">'+e.globalCSS+"</style>")}else $("#global-css-output").remove();if(t.get("css")){var o=$("#theme-css-output");o.length?o.html(t.get("css")):$("head").append('<style id="theme-css-output">'+t.get("css")+"</style>")}else $("#theme-css-output").remove();if(e.js!==!1)if(t.get("js")){var r=$("#theme-js-output");r.text()!==t.get("js")&&(r.remove(),$("body").append(["<",'script id="theme-js-output">',t.get("js"),"<","/script",">"].join("")))}else $("#theme-js-output").remove();SL.util.deck.sortInjectedStyles(),SL.fonts.loadDeckFont(t.get("font"))},cleanup:function(){var t=$(".reveal-viewport"),e=$(".reveal");t.attr("class",t.attr("class").replace(/theme\-(font|color)\-([a-z0-9-])*/gi,"")),SL.config.THEME_TRANSITIONS.forEach(function(t){e.removeClass(t.id)})}},SL.popup={items:[],singletons:[],open:function(t,e){for(var i,n=0;n<SL.popup.singletons.length;n++)if(SL.popup.singletons[n].factory===t){i=SL.popup.singletons[n].instance;break}return i||(i=new t(e),i.isSingleton()&&SL.popup.singletons.push({factory:t,instance:i})),i.open(e),SL.popup.items.push({instance:i,factory:t}),$("html").addClass("popup-open"),i},openOne:function(t,e){for(var i=0;i<SL.popup.items.length;i++)if(t===SL.popup.items[i].factory)return SL.popup.items[i].instance;return this.open(t,e)},close:function(t){SL.popup.items.concat().forEach(function(e){t&&t!==e.factory||e.instance.close(!0)})},isOpen:function(t){for(var e=0;e<SL.popup.items.length;e++)if(!t||t===SL.popup.items[e].factory)return!0;return!1},unregister:function(t){for(var e=0;e<SL.popup.items.length;e++)SL.popup.items[e].instance===t&&(removedValue=SL.popup.items.splice(e,1),e--);0===SL.popup.items.length&&$("html").removeClass("popup-open")}},SL("components.popup").Popup=Class.extend({WINDOW_PADDING:.01,USE_ABSOLUTE_POSITIONING:SL.util.device.IS_PHONE||SL.util.device.IS_TABLET,init:function(t){this.options=$.extend({title:"",titleItem:"",header:!0,headerActions:[{label:"Close",className:"grey",callback:this.close.bind(this)}],width:"auto",height:"auto",singleton:!1,closeOnEscape:!0,closeOnClickOutside:!0},t),this.options.additionalHeaderActions&&(this.options.headerActions=this.options.additionalHeaderActions.concat(this.options.headerActions)),this.closed=new signals.Signal,this.render(),this.bind(),this.layout()},render:function(){this.domElement=$('<div class="sl-popup" data-id="'+this.TYPE+'">'),this.domElement.appendTo(document.body),this.innerElement=$('<div class="sl-popup-inner">'),this.innerElement.appendTo(this.domElement),this.options.header&&this.renderHeader(),this.bodyElement=$('<div class="sl-popup-body">'),this.bodyElement.appendTo(this.innerElement)},renderHeader:function(){this.headerElement=$(['<header class="sl-popup-header">','<h3 class="sl-popup-header-title">'+this.options.title+"</h3>","</header>"].join("")),this.headerElement.appendTo(this.innerElement),this.headerTitleElement=this.headerElement.find(".sl-popup-header-title"),this.options.titleItem&&(this.headerTitleElement.append('<span class="sl-popup-header-title-item"></span>'),this.headerTitleElement.find(".sl-popup-header-title-item").text(this.options.titleItem)),this.options.headerActions&&this.options.headerActions.length&&(this.headerActionsElement=$('<div class="sl-popup-header-actions">').appendTo(this.headerElement),this.options.headerActions.forEach(function(t){"divider"===t.type?$('<div class="divider"></div>').appendTo(this.headerActionsElement):$('<button class="button l '+t.className+'">'+t.label+"</button>").appendTo(this.headerActionsElement).on("vclick",function(e){t.callback(e),e.preventDefault()})}.bind(this)))},bind:function(){this.onKeyDown=this.onKeyDown.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.onBackgroundClicked=this.onBackgroundClicked.bind(this),this.domElement.on("vclick",this.onBackgroundClicked)},layout:function(){if(this.innerElement.css({width:this.options.width,height:this.options.height}),this.options.height){var t=this.headerElement?this.headerElement.outerHeight():0;this.headerElement&&"number"==typeof this.options.height?this.bodyElement.css("height",this.options.height-t):this.bodyElement.css("height","auto");var e=window.innerHeight;this.bodyElement.css("max-height",e-t-e*this.WINDOW_PADDING*2)}if(this.headerElement){var i=this.headerElement.width(),n=this.headerActionsElement.outerWidth();this.headerTitleElement.css("max-width",i-n-30)}if(this.USE_ABSOLUTE_POSITIONING){var s=$(window);this.domElement.css({position:"absolute",height:Math.max($(window).height(),$(document).height())}),this.innerElement.css({position:"absolute",transform:"none",top:s.scrollTop()+(s.height()-this.innerElement.outerHeight())/2,left:s.scrollLeft()+(s.width()-this.innerElement.outerWidth())/2,maxWidth:s.width()-window.innerWidth*this.WINDOW_PADDING*2})}},open:function(t){this.domElement.appendTo(document.body),clearTimeout(this.closeTimeout),this.closeTimeout=null,this.options=$.extend(this.options,t),SL.keyboard.keydown(this.onKeyDown),$(window).on("resize",this.onWindowResize),setTimeout(function(){this.domElement.addClass("visible")}.bind(this),1)},close:function(t){this.closeTimeout||(t?this.closeConfirmed():this.checkUnsavedChanges(this.closeConfirmed.bind(this)))},closeConfirmed:function(){SL.keyboard.release(this.onKeyDown),$(window).off("resize",this.onWindowResize),this.domElement.removeClass("visible"),SL.popup.unregister(this),this.closeTimeout=setTimeout(function(){this.domElement.detach(),this.isSingleton()||this.destroy()}.bind(this),500),this.closed.dispatch()},checkUnsavedChanges:function(t){t()},isSingleton:function(){return this.options.singleton},onBackgroundClicked:function(t){$(t.target).is(this.domElement)&&(this.options.closeOnClickOutside&&this.close(),t.preventDefault())},onWindowResize:function(){this.layout()},onKeyDown:function(t){return 27===t.keyCode?(this.options.closeOnEscape&&this.close(),!1):!0},destroy:function(){SL.popup.unregister(this),this.options=null,this.closed.dispose(),this.domElement.remove()}}),SL("components.popup").AdvancedSlideOptions=SL.components.popup.Popup.extend({TYPE:"advanced-slide-options",init:function(t){this._super($.extend({title:"Advanced Slide Options",slide:null,width:600,closeOnClickOutside:!0,headerActions:[{label:"Cancel",className:"outline",callback:this.close.bind(this)},{label:"Save",className:"positive",callback:this.onSaveClicked.bind(this)}]},t))},render:function(){this._super(),this.formElement=$('<div class="sl-form">').appendTo(this.bodyElement),this.renderVideo(),this.renderIframe(),this.renderSlideID(),SL.current_user.privileges.customCSS()&&SL.current_user.settings.get("developer_mode")&&this.renderSlideClasses(),this.syncInputs()},renderVideo:function(){this.formElement.append($(['<div class="unit">','<h4 class="form-label">Video Background</h4>','<p class="unit-description">Play a full screen video in the background of this slide. We recommend using MP4 since that format works in all modern browsers.</p>','<input class="video-url" type="text" maxlength="2000" placeholder="Video URL...">','<div class="video-options">','<div class="unit sl-checkbox outline">','<input id="video-muted-checkbox" class="video-muted-checkbox" type="checkbox" disabled />','<label for="video-muted-checkbox">Mute</label>',"</div>",'<div class="unit sl-checkbox outline">','<input id="video-loop-checkbox" class="video-loop-checkbox" type="checkbox" disabled />','<label for="video-loop-checkbox">Loop</label>',"</div>",'<div class="unit">','<select class="sl-select video-size-select">','<option value="">Full screen</option>','<option value="contain">Letterbox</option>',"</select>","</div>","</div>","</div>"].join(""))),this.videoURLInput=this.bodyElement.find(".video-url"),this.videoURLInput.val(this.options.slide.getAttribute("data-background-video")||""),this.videoURLInput.on("input",this.syncInputs.bind(this)),this.videoMutedInput=this.bodyElement.find(".video-muted-checkbox"),this.videoMutedInput.prop("checked","true"==this.options.slide.getAttribute("data-background-video-muted")),this.videoLoopInput=this.bodyElement.find(".video-loop-checkbox"),this.videoLoopInput.prop("checked","true"==this.options.slide.getAttribute("data-background-video-loop")),this.videoSizeInput=this.bodyElement.find(".video-size-select"),this.videoSizeInput.val(this.options.slide.getAttribute("data-background-size"))},renderIframe:function(){this.formElement.append($(['<div class="unit">','<h4 class="form-label">Iframe Background</h4>','<p class="unit-description">Show a full screen iframe element in the background of this slide.</p>','<input class="iframe-url" type="text" maxlength="2000" placeholder="Iframe URL...">',"</div>"].join(""))),this.iframeURLInput=this.bodyElement.find(".iframe-url"),this.iframeURLInput.val(this.options.slide.getAttribute("data-background-iframe")||"")},renderSlideID:function(){this.formElement.append($(['<div class="unit">','<h4 class="form-label">Slide ID</h4>','<p class="unit-description">Specify an identifier to use for internal links. Point your links to <code>#/mySlideID</code></p>','<input class="slide-id" type="text" placeholder="A-Z, lowercase, no spaces...">',"</div>"].join(""))),this.slideIDInput=this.bodyElement.find(".slide-id"),this.slideIDInput.val(this.readSlideID()),this.slideIDInput.on("blur",function(){this.slideIDInput.val(SL.util.string.slug(this.slideIDInput.val().trim()))}.bind(this))},renderSlideClasses:function(){this.formElement.append($(['<div class="unit">','<h4 class="form-label">Slide classes</h4>','<p class="unit-description">Specify class names which will be added to the slide wrapper. Useful for targeting from the CSS editor.</p>','<input class="slide-classes" type="text" placeholder="Classes...">',"</div>"].join(""))),this.slideClassesInput=this.bodyElement.find(".slide-classes"),this.slideClassesInput.val(this.readSlideClasses())},onSaveClicked:function(){var t=this.videoURLInput.val().trim();t?this.options.slide.setAttribute("data-background-video",t):this.options.slide.removeAttribute("data-background-video"),this.videoMutedInput.prop("checked")?this.options.slide.setAttribute("data-background-video-muted","true"):this.options.slide.removeAttribute("data-background-video-muted");var e=this.videoSizeInput.val();e?this.options.slide.setAttribute("data-background-size",e):this.options.slide.removeAttribute("data-background-size"),this.videoLoopInput.prop("checked")?this.options.slide.setAttribute("data-background-video-loop","true"):this.options.slide.removeAttribute("data-background-video-loop");var i=this.iframeURLInput.val().trim();if(/<iframe/gi.test(i))try{i=$(i).attr("src")}catch(n){}i?this.options.slide.setAttribute("data-background-iframe",i):this.options.slide.removeAttribute("data-background-iframe"),this.slideIDInput&&this.writeSlideID(this.slideIDInput.val().trim()),this.slideClassesInput&&this.writeSlideClasses(this.slideClassesInput.val().trim()),Reveal.sync(),this.close(!0)},syncInputs:function(){var t=this.videoURLInput.val().trim();this.videoMutedInput.attr("disabled",t.length<2),this.videoLoopInput.attr("disabled",t.length<2),this.videoSizeInput.attr("disabled",t.length<2)},readSlideID:function(){return this.options.slide.getAttribute("id")},writeSlideID:function(t){t=SL.util.string.slug(t),t&&t.length?this.options.slide.setAttribute("id",t):this.options.slide.removeAttribute("id")},readSlideClasses:function(){return this.options.slide.className.split(" ").filter(function(t){return-1===SL.config.RESERVED_SLIDE_CLASSES.indexOf(t)}).join(" ")},writeSlideClasses:function(t){t=t||"",t=t.trim().replace(/\s{2,}/g," ");var e=this.options.slide.className.split(" ").filter(function(t){return-1!==SL.config.RESERVED_SLIDE_CLASSES.indexOf(t)});e=e.concat(t.split(" ")),this.options.slide.className=e.join(" ")}}),SL("components.popup").CustomFonts=SL.components.popup.Popup.extend({TYPE:"custom-fonts",init:function(t){this._super($.extend({title:"Load custom fonts",deck:null,theme:null,width:600,closeOnClickOutside:!0,headerActions:[{label:"Cancel",className:"outline",callback:this.close.bind(this)},{label:"Save",className:"positive",callback:this.onSaveClicked.bind(this)}]},t)),this.loadGoogleFontList()
},render:function(){return this._super(),this.bodyElement.append($(['<div class="sl-form">','<div class="unit typekit-settings">','<h4 class="form-label">Typekit</h4>','<p class="unit-description">Specify a <a href="https://typekit.com/" target="_blank">Typekit</a> kit ID to load for this presentation.</p>','<input type="text" maxlength="255" placeholder="Kit ID">',"</div>",'<div class="unit google-settings">','<h4 class="form-label">Google Fonts</h4>','<p class="unit-description">A list of comma separated font families to load from <a href="https://fonts.google.com/" target="_blank">Google Fonts</a>. Font weights can be indicated with a colon after the font family, for example: Open Sans:300,700</p>','<input type="text" maxlength="255" placeholder="Droid Sans, Droid Serif:bold">','<p class="google-status"></p>',"</div>","<div>"].join(""))),this.options.deck||this.options.theme?(this.googleStatus=this.bodyElement.find(".google-settings .google-status"),this.typekitInput=this.bodyElement.find(".typekit-settings input"),this.googleInput=this.bodyElement.find(".google-settings input"),this.googleInput.on("input",this.onGoogleInput.bind(this)),this.options.theme?(this.typekitInput.val(this.options.theme.get("font_typekit")||""),this.googleInput.val(this.options.theme.get("font_google")||"")):(this.typekitInput.val(this.options.deck.get("font_typekit")||""),this.googleInput.val(this.options.deck.get("font_google")||"")),void this.validateGoogleFonts()):void this.bodyElement.html("Configuration error. Missing deck/theme model.")},loadGoogleFontList:function(){window.SLGoogleFontList?this.setupGoogleFontAutocomplete():$.get(SL.config.GOOGLE_FONTS_LIST).done(function(t){window.SLGoogleFontList=t.items.map(function(t){return{family:t.family,variants:t.variants.join(", ")}}),this.setupGoogleFontAutocomplete()}.bind(this))},searchGoogleFontList:function(t){var e=[];if(t&&t.length>0){for(var i=window.SLGoogleFontList,n=0,s=i.length;s>n;n++){var o=i[n];-1!==o.family.search(new RegExp(t,"i"))&&e.push({value:o.family,label:'<div class="value">'+o.family+'</div><div class="description">'+o.variants+"</div>"})}e=e.slice(0,10)}return Promise.resolve(e)},setupGoogleFontAutocomplete:function(){this.googleFontAutocomplete=new SL.components.form.Autocomplete(this.googleInput,this.searchGoogleFontList.bind(this),{className:"light-grey",offsetY:1}),this.googleFontAutocomplete.confirmed.add(this.onGoogleInput.bind(this))},onSaveClicked:function(t){this.saveLoader||($(t.target).addClass("ladda-button").attr({"data-style":"expand-right","data-spinner-size":"26"}),this.saveLoader=Ladda.create(t.target)),this.saveLoader.start(),this.saveAndClose()},saveAndClose:function(){var t=this.typekitInput.val()||"",e=this.googleInput.val()||"";this.options.theme?(this.saveLoader.stop(),this.options.theme.setAll({font_typekit:t,font_google:e}),this.close(!0)):$.ajax({url:SL.config.AJAX_UPDATE_DECK(this.options.deck.get("id")),type:"PUT",context:this,data:{deck:{font_typekit:t,font_google:e}}}).done(function(){this.options.deck.setAll({font_typekit:t,font_google:e}),t.length&&SL.fonts.loadTypekitFont(t),e.length&&SL.fonts.loadGoogleFont(e),this.close(!0)}).fail(function(){SL.notify("An error occured while saving","negative")}).always(function(){this.saveLoader.stop()})},validateGoogleFonts:function(){var t=SL.fonts.parseGoogleFontFamilies(this.googleInput.val()||""),e=t.length+" "+SL.util.string.pluralize("font","s",t.length>1)+": ";e+=t.map(function(t){return'<span class="google-status-item">'+t+"</span>"}).join(""),this.googleStatus.html(e),this.googleStatus.toggleClass("visible",t.length>0)},destroy:function(){this.saveLoader&&this.saveLoader.remove(),this._super()},onGoogleInput:function(){this.validateGoogleFonts()}}),SL("components.popup").DeckOutdated=SL.components.popup.Popup.extend({TYPE:"deck-outdated",init:function(t){this._super($.extend({title:"Newer version available",width:500,closeOnClickOutside:!1,headerActions:[{label:"Ignore",className:"outline",callback:this.close.bind(this)},{label:"Reload",className:"positive",callback:this.onReloadClicked.bind(this)}]},t))},render:function(){this._super(),this.bodyElement.html(["<p>A more recent version of this presentation is available on the server. This can happen when the presentation is saved from another browser or device.</p>","<p>We recommend reloading the page to get the latest version. If you're sure your local changes are the latest, please ignore this message.</p>"].join(""))},onReloadClicked:function(){window.location.reload()},destroy:function(){this._super()}}),SL("components.popup").EditHTML=SL.components.popup.Popup.extend({TYPE:"edit-html",init:function(t){this._super($.extend({title:"Edit HTML",width:1200,height:750,headerActions:[{label:"Cancel",className:"outline",callback:this.close.bind(this)},{label:"Save",className:"positive",callback:this.saveAndClose.bind(this)}]},t)),this.saved=new signals.Signal},render:function(){this._super(),this.bodyElement.html('<div id="ace-html" class="editor"></div>'),this.editor&&"function"==typeof this.editor.destroy&&(this.editor.destroy(),this.editor=null);try{this.editor=ace.edit("ace-html"),SL.util.setAceEditorDefaults(this.editor),this.editor.getSession().setMode("ace/mode/html")}catch(t){console.log("An error occurred while initializing the Ace editor.")}this.editor.getSession().setValue(this.options.html||""),this.editor.focus()},saveAndClose:function(){this.saved.dispatch(this.getHTML()),this.close(!0)},checkUnsavedChanges:function(t){this.getHTML()===this.options.html||this.cancelPrompt?t():(this.cancelPrompt=SL.prompt({title:"Discard unsaved changes?",type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Discard</h3>",selected:!0,className:"negative",callback:t}]}),this.cancelPrompt.destroyed.add(function(){this.cancelPrompt=null}.bind(this)))},getHTML:function(){return this.editor.getSession().getValue()},destroy:function(){this.editor&&"function"==typeof this.editor.destroy&&(this.editor.destroy(),this.editor=null),this.saved&&(this.saved.dispose(),this.saved=null),this._super()}}),SL("components.popup").EditSlideHTML=SL.components.popup.EditHTML.extend({TYPE:"edit-slide-html",init:function(t){SL.current_user.privileges.customCSS()&&(t.additionalHeaderActions=[{label:"Advanced slide options",className:"outline",callback:this.onAdvancedSlideOptionsClicked.bind(this)},{type:"divider"}]),t.html=SL.util.html.indent(SL.editor.controllers.Serialize.getSlideAsString(t.slide,{inner:!0,lazy:!1,exclude:".math-output"})),this._super(t)},onAdvancedSlideOptionsClicked:function(){SL.popup.openOne(SL.components.popup.AdvancedSlideOptions,{slide:this.options.slide})}}),SL("components.popup").InsertSnippet=SL.components.popup.Popup.extend({TYPE:"insert-snippet",init:function(t){this._super($.extend({title:"Insert",titleItem:'"'+t.snippet.get("title")+'"',width:500,headerActions:[{label:"Cancel",className:"outline",callback:this.close.bind(this)},{label:"Insert",className:"positive",callback:this.insertAndClose.bind(this)}]},t)),this.snippetInserted=new signals.Signal},render:function(){this._super(),this.variablesElement=$('<div class="variables sl-form"></div>'),this.variablesElement.appendTo(this.bodyElement),this.variables=this.options.snippet.getTemplateVariables(),this.variables.forEach(function(t){var e=$(['<div class="unit">',"<label>"+t.label+"</label>",'<input type="text" value="'+t.defaultValue+'">',"</div>"].join("")).appendTo(this.variablesElement);e.find("input").data("variable",t)}.bind(this)),this.variablesElement.find("input").first().focus().select()},insertAndClose:function(){this.variablesElement.find("input").each(function(t,e){e=$(e),e.data("variable").value=e.val()}),this.snippetInserted.dispatch(this.options.snippet.templatize(this.variables)),this.close()},onKeyDown:function(t){return 13===t.keyCode?(this.insertAndClose(),!1):this._super(t)},destroy:function(){this.snippetInserted.dispose(),this._super()}}),SL("components.popup").Revision=SL.components.popup.Popup.extend({TYPE:"revision",init:function(t){this._super($.extend({revisionURL:null,revisionTimeAgo:null,title:"Revision",titleItem:"from "+t.revisionTimeAgo,width:900,height:700,headerActions:[{label:"Open in new tab",className:"outline",callback:this.onOpenExternalClicked.bind(this)},{label:"Restore",className:"grey",callback:this.onRestoreClicked.bind(this)},{label:"Close",className:"grey",callback:this.close.bind(this)}]},t)),this.restoreRequested=new signals.Signal,this.externalRequested=new signals.Signal},render:function(){this._super(),this.bodyElement.html(['<div class="spinner centered"></div>','<div class="deck"></div>'].join("")),this.bodyElement.addClass("loading"),SL.util.html.generateSpinners();var t=$("<iframe>",{src:this.options.revisionURL,load:function(){this.bodyElement.removeClass("loading")}.bind(this)});t.appendTo(this.bodyElement.find(".deck"))},onRestoreClicked:function(t){this.restoreRequested.dispatch(t)},onOpenExternalClicked:function(t){this.externalRequested.dispatch(t)},destroy:function(){this.bodyElement.find(".deck iframe").attr("src",""),this.bodyElement.find(".deck").empty(),this.restoreRequested.dispose(),this.externalRequested.dispose(),this._super()}}),SL("components.popup").SessionExpired=SL.components.popup.Popup.extend({TYPE:"session-expired",init:function(t){this._super($.extend({title:"Session expired",width:500,closeOnEscape:!1,closeOnClickOutside:!1,headerActions:[{label:"Ignore",className:"outline negative",callback:this.close.bind(this)},{label:"Retry",className:"positive",callback:this.onRetryClicked.bind(this)}]},t))},render:function(){this._super(),this.bodyElement.html(["<p>You are no longer signed in to Slides. This can happen when you leave the page idle for too long, log out in a different tab or go offline. To continue please:</p>","<ol>",'<li><a href="'+SL.routes.SIGN_IN+'" target="_blank" style="text-decoration: underline;">Sign in</a> to Slides from another browser tab.</li>',"<li>Come back to this tab and press the 'Retry' button.</li>","</ol>"].join(""))},onRetryClicked:function(){SL.editor&&1===SL.editor.Editor.VERSION?SL.view.checkLogin(!0):SL.session.check()},destroy:function(){this._super()}}),SL("components.collab").Collaboration=Class.extend({init:function(t){this.options=$.extend({container:document.body,editor:!1,fixed:!1,coverPage:!1,autofocusComment:!0},t),this.loaded=new signals.Signal,this.enabled=new signals.Signal,this.expanded=new signals.Signal,this.collapsed=new signals.Signal,this.flags={expanded:!1,enabled:!1,connected:!1},this.commentsWhileHidden=[],this.commentsWhileCollapsed=[],this.bind(),this.render(),this.setEnabled(!!SLConfig.deck.collaborative),this.options.fixed&&(SL.util.skipCSSTransitions($(this.domElement),1),this.domElement.addClass("fixed"),this.expand())},bind:function(){this.onKeyDown=this.onKeyDown.bind(this),this.onSlideChanged=this.onSlideChanged.bind(this),this.onStreamMessage=this.onStreamMessage.bind(this),this.onStreamStatusChanged=this.onStreamStatusChanged.bind(this),this.onSocketReconnecting=this.onSocketReconnecting.bind(this);var t=$(".reveal .slides section:not(.stack)").length,e=1e3*Math.ceil(t/4);this.onStreamDeckContentChanged=$.throttle(this.onStreamDeckContentChanged,e)},render:function(){this.domElement=$('<div class="sl-collab loading">'),this.domElement.appendTo(this.options.container),this.options.coverPage&&!this.options.fixed&&(this.coverElement=$('<div class="sl-collab-cover">'),this.coverElement.on("vclick",this.collapse.bind(this)),this.coverElement.appendTo(this.domElement)),this.innerElement=$('<div class="sl-collab-inner">'),this.innerElement.appendTo(this.domElement),this.bodyElement=$('<div class="sl-collab-body">'),this.bodyElement.appendTo(this.innerElement),this.overlayElement=$('<div class="sl-collab-overlay">'),this.overlayElement.appendTo(this.innerElement),this.overlayContent=$('<div class="sl-collab-overlay-inner">'),this.overlayContent.appendTo(this.overlayElement),this.menu=new SL.components.collab.Menu(this),this.menu.appendTo(this.domElement)},load:function(){this.usersCollection||(this.showLoadingOverlay(),this.usersCollection=new SL.collections.collab.DeckUsers,this.usersCollection.load().then(this.afterLoad.bind(this),function(){this.usersCollection=null,this.showErrorOverlay("Failed to load collaborators",this.load.bind(this))}.bind(this)))},afterLoad:function(){return this.usersCollection.isEmpty()?void this.showErrorOverlay("No collaborators found for this deck."):(this.usersCollection.replaced.add(function(){this.cachedCurrentDeckUser=null}.bind(this)),void this.connect())},connect:function(){return this.hasBoundStreamEvents||(this.hasBoundStreamEvents=!0,SL.helpers.StreamEditor.singleton().statusChanged.add(this.onStreamStatusChanged),SL.helpers.StreamEditor.singleton().messageReceived.add(this.onStreamMessage),SL.helpers.StreamEditor.singleton().reconnecting.add(this.onSocketReconnecting)),this.isConnected()?void 0:(this.showLoadingOverlay(),SL.helpers.StreamEditor.singleton().connect().then(function(){},function(){this.onSocketConnectionFailed()}.bind(this)))},afterConnect:function(){this.isConnected()||(this.flags.connected=!0,this.renderContent(),SL.activity.register(SL.config.COLLABORATION_IDLE_TIMEOUT,this.onUserActive.bind(this),this.onUserInactive.bind(this)),SL.visibility.changed.add(this.onVisibilityChanged.bind(this)),this.hideOverlay(),this.isEnabled()?this.options.autofocusComment&&this.comments.focus():(this.setEnabled(!0),this.users.showInvitePrompt(this.menu.getPrimaryButton()),this.users.inviteSent.addOnce(this.expand.bind(this))),this.handover&&this.handover.refresh(),this.isInEditor()&&this.currentUserIsEditing()?this.reloadCurrentUser().then(function(){this.currentUserIsEditing()?this.finishLoading():this.redirectToReview()}.bind(this),function(){this.finishLoading()}.bind(this)):this.isInEditor()&&!this.currentUserIsEditing()?this.redirectToReview():this.finishLoading())},finishLoading:function(){this.domElement.removeClass("loading"),this.loaded.dispatch()},reload:function(){this.isConnected()&&(this.showLoadingOverlay("Reloading..."),this.usersCollection.load().then(function(){this.redirectToReviewUnlessEditor()===!1&&(this.users.renderUsers(),SL.helpers.StreamEditor.singleton().emit("broadcast-all-user-states"),this.comments&&this.comments.reload(),this.handover&&this.handover.refresh(),this.hideOverlay())}.bind(this),function(){this.showErrorOverlay("Failed to load collaborators",this.reload.bind(this))}.bind(this)))},reloadCurrentUser:function(){return new Promise(function(t,e){$.ajax({type:"GET",url:SL.config.AJAX_DECKUSER_READ(SL.current_deck.get("id"),SL.current_user.get("id")),context:this}).done(function(e){var i=this.usersCollection.getByProperties({user_id:e.user_id});i&&i.setAll(e),t()}).fail(e)}.bind(this))},renderContent:function(){this.users=new SL.components.collab.Users(this,{users:this.usersCollection}),this.users.appendTo(this.menu.innerElement),this.comments=new SL.components.collab.Comments(this,{users:this.usersCollection}),this.comments.appendTo(this.bodyElement),this.notifications=new SL.components.collab.Notifications(this,{users:this.usersCollection}),this.notifications.appendTo(this.domElement),this.isInEditor()||(this.handover=new SL.components.collab.Handover(this,{users:this.usersCollection}),this.handover.appendTo(this.options.container))},expand:function(){this.flags.expanded=!0,this.domElement.addClass("expanded"),SL.keyboard.keydown(this.onKeyDown),this.expanded.dispatch()},collapse:function(){this.options.fixed||(this.commentsWhileCollapsed.length=0,this.flags.expanded=!1,this.domElement.removeClass("expanded"),SL.keyboard.release(this.onKeyDown),this.collapsed.dispatch())},toggle:function(){this.isExpanded()?this.collapse():this.expand()},isExpanded:function(){return this.flags.expanded},setEnabled:function(t){this.flags.enabled=t,this.domElement.toggleClass("enabled",t),t?(Reveal.addEventListener("slidechanged",this.onSlideChanged),this.enabled.dispatch()):Reveal.removeEventListener("slidechanged",this.onSlideChanged)},isEnabled:function(){return this.flags.enabled},isConnected:function(){return this.flags.connected},makeDeckCollaborative:function(){this.isEnabled()||$.ajax({type:"POST",url:SL.config.AJAX_MAKE_DECK_COLLABORATIVE(SL.current_deck.get("id")),context:this}).done(function(){SLConfig.deck.collaborative=!0,this.load()}).fail(function(){this.showErrorOverlay("Failed to enable collaboration",this.makeDeckCollaborative.bind(this))})},showHandoverRequestReceived:function(t){var e="handover-"+t.get("user_id"),i=$(["<div>","<p><strong>"+t.get("username")+"</strong> would like to edit but only on person can edit at a time.</p>",'<button class="button half-width approve-button grey">Let them edit</button>','<button class="button half-width deny-button outline">Dismiss</button>',"</div>"].join(""));i.find(".approve-button").on("vclick",function(){this.becomeEditor(t),this.notifications.hide(e)}.bind(this)),i.find(".deny-button").on("vclick",function(){SL.helpers.StreamEditor.singleton().broadcast({type:"collaboration:handover-denied",user_id:t.get("user_id"),denied_by_user_id:SL.current_user.get("id")}),this.notifications.hide(e)}.bind(this)),this.notifications.show(i,{id:e,optional:!1,sender:t})},showHandoverRequestPending:function(t){var e="handover-pending",i=$(["<div>","<p>You have asked to edit this deck. Waiting to hear back from <strong>"+t.getDisplayName()+"</strong>...</p>",'<button class="button outline cancel-button">Cancel</button>',"</div>"].join(""));i.find(".cancel-button").on("vclick",function(t){t.preventDefault(),SL.helpers.StreamEditor.singleton().broadcast({type:"collaboration:handover-request-canceled",user_id:SL.current_user.get("id")}),this.notifications.hide(e)}.bind(this)),this.notifications.show(i,{id:e,optional:!1,icon:"i-question-mark"})},showLoadingOverlay:function(t){t=t||"Loading...",this.overlayElement.addClass("visible"),this.overlayContent.empty().html('<p class="message">'+t+"</p>"),this.flashOverlay()},showErrorOverlay:function(t,e){this.overlayElement.addClass("visible"),this.overlayContent.empty().html(['<div class="exclamation">!</div>','<p class="message">'+t+"</p>",'<button class="button outline">Try again</button>'].join("")),this.overlayContent.find("button").on("vclick",e),this.flashOverlay()},flashOverlay:function(){clearTimeout(this.flashOverlayTimeout),this.overlayContent.addClass("flash"),this.flashOverlayTimeout=setTimeout(function(){this.overlayContent.removeClass("flash")}.bind(this),1e3)},hideOverlay:function(){this.overlayElement.removeClass("visible")},updatePageTitle:function(){var t="";this.commentsWhileHidden.length&&(t+="("+this.commentsWhileHidden.length+") "),t+=this.isInEditor()?"Edit: ":"Review: ",t+=SL.current_deck.get("title"),document.title=t},currentUserIsEditing:function(){var t=this.getCurrentDeckUser();return!(!t||!t.isEditing())},getCurrentDeckUser:function(){return!this.cachedCurrentDeckUser&&this.usersCollection&&(this.cachedCurrentDeckUser=this.usersCollection.getByUserID(SL.current_user.get("id"))),this.cachedCurrentDeckUser},getCollapsedWidth:function(){return 60},becomeEditor:function(t){return t=t||this.getCurrentDeckUser(),new Promise(function(e,i){$.ajax({type:"POST",url:SL.config.AJAX_DECKUSER_BECOME_EDITOR(SL.current_deck.get("id"),t.get("user_id")),context:this}).done(function(){this.usersCollection.setEditing(t.get("user_id")),e(),this.currentUserIsEditing()?this.redirectToEdit():this.redirectToReview()}).fail(function(){SL.notify("Failed to change editors"),i()})}.bind(this))},isInEditor:function(){return this.options.editor},redirectToEdit:function(){if(!this.isInEditor()){SL.helpers.PageLoader.show({message:"Loading"});var t=window.location.hash||"";window.location=SL.routes.DECK_EDIT(SL.current_deck.get("user").username,SL.current_deck.get("slug"))+t}},redirectToReview:function(t){this.isInEditor()&&(SL.helpers.PageLoader.show({message:t||"Loading"}),SL.view.redirect(SL.routes.DECK_REVIEW(SL.current_deck.get("user").username,SL.current_deck.get("slug")),!0))},redirectToReviewUnlessEditor:function(){if(this.isInEditor()&&!this.currentUserIsEditing()){var t=5,e="Someone else started editing.<br>Redirecting in "+t+" seconds...";return SL.helpers.PageLoader.show({message:e}),setTimeout(function(){this.redirectToReview(e)}.bind(this),1e3*t),!0}return!1},onKeyDown:function(t){return 27!==t.keyCode||this.options.fixed?!0:(this.collapse(),!1)},onSlideChanged:function(t){var e=Reveal.getCurrentSlide().getAttribute("data-id");e&&SL.helpers.StreamEditor.singleton().emit("slide-change",e),this.comments&&this.isExpanded()&&this.comments.onSlideChanged(t),this.users&&this.users.layout()},onStreamStatusChanged:function(t){t===SL.helpers.StreamEditor.STATUS_CONNECTED?this.onSocketConnected():t===SL.helpers.StreamEditor.STATUS_DISCONNECTED?this.onSocketDisconnected():t===SL.helpers.StreamEditor.STATUS_RECONNECT_FAILED?this.onSocketReconnectFailed():t===SL.helpers.StreamEditor.STATUS_RECONNECTED&&this.onSocketReconnected()},onStreamMessage:function(t){if(t){var e=t.type.split(":")[0],i=t.type.split(":")[1];"collaboration"===e&&("comment-added"===i?this.onStreamCommentAdded(t):"comment-updated"===i?this.onStreamCommentUpdated(t):"comment-removed"===i?this.onStreamCommentRemoved(t):"user-typing"===i?this.onStreamUserTyping(t):"user-typing-stopped"===i?this.onStreamUserTypingStopped(t):"user-added"===i?this.onStreamUserAdded(t):"user-updated"===i?this.onStreamUserUpdated(t):"user-removed"===i?this.onStreamUserRemoved(t):"presence-changed"===i?this.onStreamPresenceChanged(t):"editor-changed"===i?this.onStreamEditorChanged(t):"handover-requested"===i?this.onStreamHandoverRequested(t):"handover-request-canceled"===i?this.onStreamHandoverRequestCanceled(t):"handover-denied"===i?this.onStreamHandoverDenied(t):"deck-content-changed"===i?this.onStreamDeckContentChanged(t):"deck-settings-changed"===i&&this.onStreamDeckSettingsChanged(t)),this.redirectToReviewUnlessEditor()}},onStreamCommentAdded:function(t){this.comments.addCommentFromStream(t.comment)&&(this.isExpanded()||(this.commentsWhileCollapsed.push(t.comment.id),this.menu.setUnreadComments(this.commentsWhileCollapsed.length)),SL.visibility.isHidden()&&(this.commentsWhileHidden.push(t.comment.id),this.updatePageTitle()))},onStreamCommentUpdated:function(t){this.comments.updateCommentFromStream(t.comment)},onStreamCommentRemoved:function(t){this.comments.removeCommentFromStream(t.comment.id);var e=this.commentsWhileCollapsed.indexOf(t.comment.id);-1!==e&&(this.commentsWhileCollapsed.splice(e,1),this.menu.setUnreadComments(this.commentsWhileCollapsed.length))},onStreamUserTyping:function(t){var e=this.usersCollection.getByProperties({user_id:t.user_id});e&&(e.set("typing",!0),this.comments.refreshTypingIndicators(),clearTimeout(e.typingTimeout),e.typingTimeout=setTimeout(function(){e.set("typing",!1),this.comments.refreshTypingIndicators()}.bind(this),SL.config.COLLABORATION_RESET_WRITING_TIMEOUT))},onStreamUserTypingStopped:function(t){var e=this.usersCollection.getByProperties({user_id:t.user_id});e&&(e.set("typing",!1),this.comments.refreshTypingIndicators(),clearTimeout(e.typingTimeout))},onStreamUserAdded:function(t){this.users.addUserFromStream(t.user)},onStreamUserUpdated:function(t){var e=this.usersCollection.getByProperties({user_id:t.user.user_id});if(e){var i=e.toJSON();e.setAll(t.user),i.active||e.get("active")!==!0||this.users.renderUser(e),e.get("user_id")===SL.current_user.get("id")&&(i.role!==e.get("role")&&this.reload(),this.handover&&this.handover.refresh())}},onStreamUserRemoved:function(t){if(t.user.user_id)if(t.user.user_id===SL.current_user.get("id")){var e=5,i="You were removed from this deck.<br>Redirecting in "+e+" seconds...";SL.helpers.PageLoader.show({message:i}),setTimeout(function(){window.location=SL.routes.USER(SL.current_user.get("username"))}.bind(this),1e3*e)}else this.users.removeUserFromStream(t.user.user_id)},onStreamPresenceChanged:function(t){var e=this.usersCollection.getByProperties({user_id:t.user_id});e&&(t.status&&e.set("status",t.status),t.slide_id&&e.set("slide_id",t.slide_id),this.users.refreshPresence(e),e.isOnline()===!1&&(e.get("typing")&&(e.set("typing",!1),this.comments.refreshTypingIndicators()),this.notifications.hide("handover-"+t.user_id),e.isEditing()&&this.notifications.hide("handover-pending")&&this.becomeEditor()),this.handover&&this.handover.refresh())},onStreamEditorChanged:function(t){t.user.user_id&&(this.usersCollection.setEditing(t.user.user_id),this.currentUserIsEditing()?this.redirectToEdit():this.redirectToReview())},onStreamHandoverRequested:function(t){if(this.currentUserIsEditing()){var e=this.usersCollection.getByProperties({user_id:t.user_id});e&&this.showHandoverRequestReceived(e)}},onStreamHandoverRequestCanceled:function(t){this.notifications.hide("handover-"+t.user_id)},onStreamHandoverDenied:function(t){if(SL.current_user.get("id")===t.user_id){var e=this.usersCollection.getByProperties({user_id:t.denied_by_user_id});e&&(this.notifications.hide("handover-pending"),this.notifications.show("<strong>"+e.getDisplayName()+"</strong> turned down your request to edit. Try again later.",{sender:e}))}},onStreamDeckContentChanged:function(){this.isInEditor()||(this.reloadDeckContentXHR&&this.reloadDeckContentXHR.abort(),this.reloadDeckContentXHR=$.ajax({url:SL.config.AJAX_GET_DECK_DATA(SL.current_deck.get("id")),type:"GET",context:this}).done(function(t){var e=t.deck.data;this.isInEditor()?SL.editor.controllers.Markup.replaceHTML(e):SL.util.deck.replaceHTML(e),this.handover.refreshSlideNumbers(),this.comments.refreshSlideNumbers()}.bind(this)).always(function(){this.reloadDeckContentXHR=null}.bind(this)))},onStreamDeckSettingsChanged:function(){this.isInEditor()||(this.reloadDeckSettingsXHR&&this.reloadDeckSettingsXHR.abort(),this.reloadDeckSettingsXHR=$.ajax({url:SL.config.AJAX_GET_DECK(SL.current_deck.get("id")),type:"GET",context:this}).done(function(t){var e=JSON.parse(JSON.stringify(SLConfig.deck));for(var i in t)"object"==typeof t[i]&&delete t[i];$.extend(SLConfig.deck,t);var n=SL.models.Theme.fromDeck(SLConfig.deck);SL.helpers.ThemeController.paint(n,{center:!1}),Reveal.configure({rtl:SLConfig.deck.rtl,loop:SLConfig.deck.should_loop,slideNumber:SLConfig.deck.slide_number}),SLConfig.deck.theme_id!==e.theme_id&&console.warn("Theme changed!"),SLConfig.deck.slug!==e.slug&&window.history&&"function"==typeof window.history.replaceState&&window.history.replaceState(null,SLConfig.deck.title,SL.routes.DECK_REVIEW(SLConfig.deck.user.username,SLConfig.deck.slug)+window.location.hash),SLConfig.deck.title!==e.title&&this.updatePageTitle()}.bind(this)).always(function(){this.reloadDeckSettingsXHR=null}.bind(this)))},onUserActive:function(){SL.helpers.StreamEditor.singleton().emit("active"),this.notifications.hide("editor-is-idle"),this.notifications.release(),$.post(SL.config.AJAX_DECKUSER_UPDATE_LAST_SEEN_AT(SL.current_deck.get("id")))},onUserInactive:function(){SL.helpers.StreamEditor.singleton().emit("idle"),this.currentUserIsEditing()&&this.usersCollection.hasMoreThanOnePresentEditor()&&(this.notifications.show("You're idle. While away, collaborators are allowed to take over editing.",{id:"editor-is-idle",optional:!1,icon:"i-clock"}),this.notifications.hold())},onVisibilityChanged:function(){SL.visibility.isVisible()&&(this.commentsWhileHidden.length=0,this.updatePageTitle())},onSocketConnectionFailed:function(){this.connectionError||(this.connectionError=new SL.components.RetryNotification('<strong>Sorry, we\u2019re having trouble connecting.</strong><br>If the problem persists, contact us <a href="http://help.slides.com" target="_blank">here</a>.',{type:"negative"}),this.connectionError.startCountdown(0),this.connectionError.destroyed.add(function(){this.connectionError=null}.bind(this)),this.connectionError.retryClicked.add(function(){this.connectionError.startCountdown(0),SL.helpers.StreamEditor.singleton().connect().then(SL.util.noop,SL.util.noop)}.bind(this)))},onSocketConnected:function(){clearTimeout(this.disconnectTimeout),this.connectionError&&this.connectionError.destroy(),this.connectionError&&this.connectionError.hide(),this.domElement.removeClass("disconnected"),this.isConnected()?this.reload():this.afterConnect()},onSocketDisconnected:function(){clearTimeout(this.disconnectTimeout),this.disconnectTimeout=setTimeout(function(){this.domElement.addClass("disconnected"),this.comments.blur(),this.users.dismissPrompts(),this.connectionError||(this.connectionError=new SL.components.RetryNotification("Lost connection to server",{type:"negative"}),this.connectionError.startCountdown(0),this.connectionError.destroyed.add(function(){this.connectionError=null}.bind(this)),this.connectionError.retryClicked.add(function(){this.connectionError.startCountdown(0),SL.helpers.StreamEditor.singleton().connect().then(SL.util.noop,SL.util.noop)}.bind(this)))}.bind(this),6e3)},onSocketReconnecting:function(t){this.connectionError&&this.connectionError.startCountdown(t)},onSocketReconnectFailed:function(){this.connectionError&&this.connectionError.disableCountdown()},onSocketReconnected:function(){clearTimeout(this.disconnectTimeout)},destroy:function(){this.menu&&this.menu.destroy(),this.users&&this.users.destroy(),this.comments&&this.comments.destroy(),this.handover&&this.handover.destroy(),this.options=null,this.domElement.remove()}}),SL("components.collab").CommentThread=Class.extend({init:function(t,e){this.id=t,this.options=e,this.comments=new SL.collections.collab.Comments,this.strings={loadMoreComments:"Load older comments",loadingMoreComments:"Loading..."},this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-collab-comment-thread empty"></div>'),this.domElement.attr("data-thread-id",this.id),this.domElement.data("thread",this),this.loadMoreButton=$('<button class="load-more-button">'+this.strings.loadMoreComments+"</button>"),this.loadMoreButton.on("vclick",this.onLoadMoreClicked.bind(this)),this.loadMoreButton.appendTo(this.domElement)},renderComment:function(t,e){if(e=e||{},!t.rendered){t.rendered=!0;var i=this.options.users.getByUserID(t.get("user_id"));"undefined"==typeof i&&(i=new SL.models.collab.DeckUser({username:"unknown"}));var n=moment(t.get("created_at")),s=n.format("h:mm A"),o=n.format("MMM Do")+" at "+n.format("h:mm:ss A"),r=i?i.get("first_name"):"N/A";r=(r||"").toLowerCase();var a=$(['<div class="sl-collab-comment">','<div class="comment-sidebar">','<div class="avatar" style="background-image: url(\''+i.get("thumbnail_url")+"')\" />","</div>",'<div class="comment-body">','<span class="author">'+r+"</span>",'<div class="meta">','<span class="meta-time" data-tooltip="'+o+'">'+s+"</span>","</div>",'<p class="message"></p>',"</div>","</div>"].join(""));a.data("model",t),this.refreshComment(a),this.refreshSlideNumber(a),SL.util.device.IS_PHONE||SL.util.device.IS_TABLET||this.renderCommentOptions(a,t),t.stateChanged.add(this.onCommentStateChanged.bind(this,a)),e.prepend?this.domElement.prepend(a):this.domElement.append(a),this.checkOverflow()}},renderCommentOptions:function(t,e){var i=this.getCommentPrivileges(e);if(i.canDelete||i.canEdit){var n=$('<button class="button options-button icon disable-when-disconnected"></button>').appendTo(t.find(".comment-sidebar"));i.canDelete&&i.canEdit?(n.addClass("i-cog"),n.on("click",this.onCommentOptionsClicked.bind(this,t))):i.canDelete?(n.addClass("i-trash-stroke"),n.on("click",this.onDeleteComment.bind(this,t))):i.canEdit&&(n.addClass("i-i-pen-alt2"),n.on("click",this.onEditComment.bind(this,t)))}},refreshComment:function(t){if(t){var e=t.data("model");e&&(t.find(".message").text(e.get("message")),t.attr("data-id",e.get("id")),t.attr("data-state",e.getState()))}},refreshCommentByID:function(t){this.refreshComment(this.getCommentByID(t))},refreshSlideNumbers:function(){this.options.slideNumbers&&this.domElement.find(".sl-collab-comment").each(function(t,e){this.refreshSlideNumber($(e))}.bind(this))},refreshSlideNumber:function(t){if(this.options.slideNumbers){var e=SL.util.deck.getSlideNumber(t.data("model").get("slide_hash"));if(e){var i="slide "+e,n=t.find(".meta-slide-number");n.length?n.text(i):t.find(".meta").prepend('<button class="meta-slide-number" data-tooltip="Click to view slide">'+i+"</button>")}else t.find(".meta-slide-number").remove()}},appendTo:function(t){this.domElement.appendTo(t)},bind:function(){this.comments.loadStarted.add(this.onLoadStarted.bind(this)),this.comments.loadCompleted.add(this.onLoadCompleted.bind(this)),this.comments.loadFailed.add(this.onLoadFailed.bind(this)),this.comments.changed.add(this.onCommentsChanged.bind(this)),this.viewSlideCommentsClicked=new signals.Signal,this.layout=this.layout.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.domElement.delegate(".meta-slide-number","vclick",this.onSlideNumberClicked.bind(this)),SL.util.dom.preventTouchOverflowScrolling(this.domElement)
},show:function(t){t=t||{},this.getID()===SL.components.collab.Comments.DECK_THREAD?this.comments.isLoaded()||this.comments.isLoading()?(this.refresh(),this.scrollToLatestComment()):this.load():this.load(t.slide_hash||Reveal.getCurrentSlide().getAttribute("data-id")),$(window).on("resize",this.onWindowResize)},hide:function(){$(window).off("resize",this.onWindowResize)},load:function(t){var e=SL.config.AJAX_COMMENTS_LIST(SL.current_deck.get("id"),t);this.slideHash=t,this.domElement.find(".sl-collab-comment").remove(),this.comments.unload(),this.domElement.addClass("empty"),this.comments.load(e).then(SL.util.noop,SL.util.noop)},reload:function(){this.getID()===SL.components.collab.Comments.DECK_THREAD?this.load():this.load(this.slideHash||Reveal.getCurrentSlide().getAttribute("data-id"))},refresh:function(){this.checkIfEmpty(),this.checkOverflow(),this.checkPagination()},layout:function(){this.checkOverflow()},checkIfEmpty:function(){if(this.comments.isLoaded())if(this.comments.isEmpty()){var t=this.getID()===SL.components.collab.Comments.SLIDE_THREAD?"No comments on this slide":"Nothing here yet.<br>Be the first to comment.";this.getPlaceholder().html('<div class="icon i-comment-stroke"></div><p>'+t+"</p>")}else this.hidePlaceholder(),this.domElement.removeClass("empty")},checkPagination:function(){this.loadMoreButton.toggleClass("visible",!this.comments.isLoading()&&this.comments.isLoaded()&&this.comments.hasNextPage())},checkOverflow:function(){this.domElement.toggleClass("overflowing",this.domElement.prop("scrollHeight")>this.domElement.prop("offsetHeight"))},hidePlaceholder:function(){this.placeholder&&(this.placeholder.remove(),this.placeholder=null)},getCommentPrivileges:function(t){var e={canEdit:!1,canDelete:!1},i=this.options.users.getByUserID(SL.current_user.get("id")),n=this.options.users.getByUserID(t.get("user_id"));if(n&&i){var s=i.get("user_id")===n.get("user_id"),o=i.get("role")===SL.models.collab.DeckUser.ROLE_ADMIN||i.get("role")===SL.models.collab.DeckUser.ROLE_OWNER;s?(e.canEdit=!0,e.canDelete=!0):o&&(e.canDelete=!0)}return e},scrollToLatestComment:function(){this.domElement.scrollTop(this.domElement.prop("scrollHeight"))},scrollToLatestCommentUnlessScrolled:function(){return this.getScrollOffset()<600?(this.scrollToLatestComment(),!0):!1},commentExists:function(t){return this.getComments().getByID(t.id)?!0:SL.current_user.get("id")===t.user_id?this.getTemporaryComments().some(function(e){return e.get("user_id")===t.user_id&&e.get("message")===t.message}):!1},getScrollOffset:function(){var t=this.domElement.get(0);return t.scrollHeight-t.offsetHeight-t.scrollTop},getPlaceholder:function(){return this.placeholder||(this.placeholder=$('<div class="placeholder">'),this.placeholder.appendTo(this.domElement)),this.placeholder},getComments:function(){return this.comments},getTemporaryComments:function(){return this.comments.filter(function(t){return!t.has("id")})},getCommentByID:function(t){return this.domElement.find('.sl-collab-comment[data-id="'+t+'"]')},getSlideHash:function(){return this.slideHash},getID:function(){return this.id},onLoadStarted:function(){this.getPlaceholder().html('<div class="spinner centered" data-spinner-color="#999"></div>'),SL.util.html.generateSpinners()},onLoadCompleted:function(){this.comments.forEach(this.renderComment.bind(this)),this.refresh(),this.scrollToLatestComment()},onLoadFailed:function(){this.getPlaceholder().html('<p class="error">Failed to load comments.</p>')},onWindowResize:function(){this.scrollToLatestComment(),this.layout()},onCommentsChanged:function(t,e){t&&t.length&&t.forEach(this.renderComment.bind(this)),e&&e.length&&e.forEach(function(t){this.getCommentByID(t.get("id")).remove()}.bind(this)),this.refresh()},onCommentStateChanged:function(t,e){var i=e.getState();t.attr("data-id",e.get("id")),t.attr("data-state",i),i===SL.models.collab.Comment.STATE_FAILED?0===t.find(".retry").length&&(t.append(['<div class="retry">','<span class="retry-info">Failed to send</span>','<button class="button outline retry-button">Retry</button>',"</div>"].join("")),t.find(".retry-button").on("click",function(){this.comments.retryCreate(e)}.bind(this)),this.scrollToLatestCommentUnlessScrolled()):t.find(".retry").remove()},onCommentOptionsClicked:function(t){var e=new SL.components.Menu({anchor:t.find(".options-button"),anchorSpacing:15,alignment:"l",destroyOnHide:!0,options:[{label:"Edit",icon:"pen-alt2",callback:this.onEditComment.bind(this,t)},{label:"Delete",icon:"trash-fill",callback:this.onDeleteComment.bind(this,t)}]});e.show()},onEditComment:function(t){var e=t.data("model"),i=SL.prompt({anchor:t.find(".options-button"),alignment:"l",title:"Edit comment",type:"input",confirmLabel:"Save",data:{value:e.get("message"),placeholder:"Comment...",multiline:!0}});i.confirmed.add(function(i){"string"==typeof i&&i.trim().length>0&&(e.set("message",i),e.save(["message"]).done(this.refreshComment.bind(this,t)))}.bind(this)),SL.analytics.trackCollaboration("Edit comment")},onDeleteComment:function(t){var e=t.data("model");SL.prompt({anchor:t.find(".options-button"),alignment:"l",title:"Are you sure you want to delete this comment?",type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Delete</h3>",selected:!0,className:"negative",callback:function(){this.comments.remove(e),e.destroy()}.bind(this)}]}),SL.analytics.trackCollaboration("Delete comment")},onLoadMoreClicked:function(){this.loadMoreButton.prop("disabled",!0).text(this.strings.loadingMoreComments),this.comments.loadNextPage().then(function(t){var e=this.domElement.scrollTop(),i=this.domElement.prop("scrollHeight");t.reverse().forEach(function(t){this.renderComment(t,{prepend:!0})}.bind(this));var n=this.domElement.prop("scrollHeight");this.domElement.scrollTop(n-i+e),this.checkPagination()}.bind(this)).catch(function(){SL.notify("Failed to load comments","negative")}.bind(this)).then(function(){this.loadMoreButton.prop("disabled",!1).text(this.strings.loadMoreComments),this.loadMoreButton.prependTo(this.domElement)}.bind(this))},onSlideNumberClicked:function(t){var e=$(t.target).closest(".sl-collab-comment");e.length&&e.data("model")&&this.viewSlideCommentsClicked.dispatch(e.data("model").get("slide_hash"))},destroy:function(){this.viewSlideCommentsClicked.dispose(),this.domElement.remove()}}),SL("components.collab").Comments=Class.extend({init:function(t,e){this.controller=t,this.options=e,this.render(),this.bind(),this.getCurrentThread()||this.showThread(SL.components.collab.Comments.DECK_THREAD),this.refreshCommentInput(),this.refreshCurrentSlide(),this.getCurrentThread().scrollToLatestComment(),this.layout()},render:function(){this.domElement=$('<div class="sl-collab-page sl-collab-comments"></div>'),this.renderHeader(),this.bodyElement=$('<div class="sl-collab-page-body sl-collab-comments-body">'),this.bodyElement.appendTo(this.domElement),this.footerElement=$('<footer class="sl-collab-page-footer">'),this.footerElement.appendTo(this.domElement),this.renderThreads(),this.renderCommentForm()},renderHeader:function(){this.headerElement=$('<header class="sl-collab-page-header sl-collab-comments-header"></header>'),this.headerElement.appendTo(this.domElement),this.headerElement.html(['<div class="header-tab selected" data-thread-id="deck">All comments</div>','<div class="header-tab header-tab-slide" data-thread-id="slide">Current slide</div>'].join("")),this.headerElement.find(".header-tab").on("vclick",function(t){this.showThread($(t.currentTarget).attr("data-thread-id")),SL.util.device.IS_PHONE||SL.util.device.IS_TABLET||this.commentInput.focus()}.bind(this))},renderThreads:function(){this.threads={},this.threads.deck=new SL.components.collab.CommentThread(SL.components.collab.Comments.DECK_THREAD,{users:this.options.users,slideNumbers:!0}),this.threads.deck.viewSlideCommentsClicked.add(this.onViewSlideCommentsClicked.bind(this)),this.threads.deck.appendTo(this.bodyElement),this.threads.slide=new SL.components.collab.CommentThread(SL.components.collab.Comments.SLIDE_THREAD,{users:this.options.users}),this.threads.slide.appendTo(this.bodyElement)},renderCommentForm:function(){this.commentForm=$('<form action="#" class="sl-collab-comment-form sl-form disable-when-disconnected" novalidate>'),this.commentForm.on("submit",this.onCommentSubmit.bind(this)),this.commentInput=$(SL.util.device.IS_PHONE||SL.util.device.IS_TABLET?'<input type="text" autocapitalize="sentences" class="comment-input" placeholder="Add a comment..." required maxlength="'+SL.config.COLLABORATION_COMMENT_MAXLENGTH+'" />':'<textarea class="comment-input" placeholder="Add a comment..." required maxlength="'+SL.config.COLLABORATION_COMMENT_MAXLENGTH+'"></textarea>'),this.commentInput.on("keydown",this.onCommentKeyDown.bind(this)),this.commentInput.on("input",this.onCommentChanged.bind(this)),this.commentInput.on("focus",this.onCommentInputFocus.bind(this)),this.commentInput.appendTo(this.commentForm),this.commentInputFooter=$('<div class="comment-footer"></div>'),this.commentInputFooter.appendTo(this.commentForm),this.commentTyping=$('<div class="comment-typing"></div>'),this.commentTyping.appendTo(this.commentInputFooter),this.commentSubmitButton=$('<input class="comment-submit" type="submit" value="Send" />'),this.commentSubmitButton.on("vclick",this.submitComment.bind(this)),this.commentSubmitButton.appendTo(this.commentInputFooter),this.commentInputFooter.append('<div class="clear"></div>'),this.commentForm.appendTo(this.footerElement)},bind:function(){this.layout=this.layout.bind(this),this.startTyping=this.startTyping.bind(this),this.stopTyping=this.stopTyping.bind(this),$(window).on("resize",this.layout),this.controller.expanded.add(this.onCollaborationExpanded.bind(this)),this.controller.isInEditor()&&SL.editor.controllers.Markup.slidesChanged.add(this.refreshSlideNumbers.bind(this))},appendTo:function(t){this.domElement.appendTo(t)},layout:function(){this.checkOverflow()},reload:function(){this.threads.deck.reload();var t=this.getCurrentThread();t&&t.getID()===SL.components.collab.Comments.SLIDE_THREAD&&t.reload()},focus:function(){this.commentInput.focus()},blur:function(){this.commentInput.blur()},checkOverflow:function(){this.domElement.toggleClass("overflowing",this.bodyElement.prop("scrollHeight")>this.bodyElement.prop("offsetHeight"))},showCommentNotification:function(t){var e=this.options.users.getByUserID(t.get("user_id"));if(e&&e.get("user_id")!==SL.current_user.get("id")){var i="<strong>"+e.getDisplayName()+"</strong>",n=SL.util.deck.getSlideNumber(t.get("slide_hash"));n&&(i+='<span class="slide-number">slide '+n+"</span>"),i+="<br>"+t.get("message"),this.controller.notifications.show(i,{sender:e,callback:function(){this.showSlideComments(t.get("slide_hash")),this.commentInput.focus()}.bind(this)})}},showSlideComments:function(t){this.controller.isExpanded()===!1&&this.controller.expand();var e=$('.reveal .slides section[data-id="'+t+'"]').get(0);SL.util.deck.navigateToSlide(e);var i=this.getCurrentThread();i&&i.getID()!==SL.components.collab.Comments.SLIDE_THREAD&&(this.showThread(SL.components.collab.Comments.SLIDE_THREAD,{slide_hash:t}),SL.util.device.IS_PHONE||SL.util.device.IS_TABLET||this.commentInput.focus())},showThread:function(t,e){var i=this.getCurrentThread(),n=this.bodyElement.find('[data-thread-id="'+t+'"]'),s=n.data("thread");s&&(i&&i!==s&&i.hide(),this.bodyElement.find(".sl-collab-comment-thread").removeClass("visible"),n.addClass("visible"),this.headerElement.find(".header-tab").removeClass("selected"),this.headerElement.find('.header-tab[data-thread-id="'+t+'"]').addClass("selected"),s.show(e))},getCurrentThread:function(){return this.domElement.find(".sl-collab-comment-thread.visible").data("thread")},addCommentFromStream:function(t){if(t.id||console.warn("Can not insert comment without ID"),!this.threads.deck.commentExists(t)){var e=this.controller.isExpanded(),i=this.threads.deck.getComments().createModel(t),n=!1;return this.getCurrentThread().getID()===SL.components.collab.Comments.DECK_THREAD?n=this.threads.deck.scrollToLatestCommentUnlessScrolled():this.getCurrentThread().getID()===SL.components.collab.Comments.SLIDE_THREAD&&t.slide_hash&&t.slide_hash===this.getCurrentThread().getSlideHash()&&!this.getCurrentThread().commentExists(t)&&(this.threads.slide.getComments().createModel(t),n=this.threads.slide.scrollToLatestCommentUnlessScrolled()),e&&n||this.showCommentNotification(i),!0}return!1},updateCommentFromStream:function(t){t.id||console.warn("Can not update comment without ID");var e=this.threads.deck.getComments().getByID(t.id);if(e){for(var i in t)e.set(i,t[i]);this.threads.deck.refreshCommentByID(e.get("id")),this.getCurrentThread().getID()===SL.components.collab.Comments.SLIDE_THREAD&&this.threads.slide.refreshCommentByID(e.get("id"))}},removeCommentFromStream:function(t){return this.threads.deck.getComments().removeByProperties({id:t})},refreshCommentInput:function(){this.commentInput.attr("rows",2);var t=Math.ceil(parseFloat(this.commentInput.css("line-height"))),e=this.commentInput.prop("scrollHeight"),i=this.commentInput.prop("clientHeight"),n=10;e>i&&this.commentInput.attr("rows",Math.min(Math.floor(e/t),n)),this.getCurrentThread().scrollToLatestCommentUnlessScrolled(t*n)},refreshTyping:function(){var t=this.commentInput.val();t?this.startTyping():this.stopTyping()},startTyping:function(){var t=Date.now();this.typing=!0,(!this.lastTypingEvent||t-this.lastTypingEvent>SL.config.COLLABORATION_SEND_WRITING_INTERVAL)&&(this.lastTypingEvent=t,SL.helpers.StreamEditor.singleton().broadcast({type:"collaboration:user-typing",user_id:SL.current_user.get("id")}))},stopTyping:function(){this.typing&&(this.typing=!1,this.lastTypingEvent=null,SL.helpers.StreamEditor.singleton().broadcast({type:"collaboration:user-typing-stopped",user_id:SL.current_user.get("id")}))},refreshTypingIndicators:function(){var t=this.options.users.filter(function(t){return t.get("typing")===!0});0===t.length?this.commentTyping.empty().removeAttr("data-tooltip"):1===t.length?this.commentTyping.html("<strong>"+t[0].getDisplayName()+"</strong> is typing").removeAttr("data-tooltip"):t.length>1&&(this.commentTyping.html("<strong>"+t.length+" people</strong> are typing"),this.commentTyping.attr("data-tooltip",t.map(function(t){return t.getDisplayName()}).join("<br>")))},refreshCurrentSlide:function(){var t=this.getCurrentThread();t&&t.getID()===SL.components.collab.Comments.SLIDE_THREAD&&this.showThread(SL.components.collab.Comments.SLIDE_THREAD,{slide_hash:Reveal.getCurrentSlide().getAttribute("data-id")});var e=SL.util.deck.getSlideNumber(Reveal.getCurrentSlide());e&&this.headerElement.find(".header-tab-slide").text("Slide "+e)},refreshSlideNumbers:function(){this.threads.deck.refreshSlideNumbers()},submitComment:function(){var t=this.commentInput.val();t=t.trim(),t=t.replace(/(\n|\r){3,}/gim,"\n\n"),t.length&&(this.getCurrentThread().getComments().create({comment:{slide_hash:Reveal.getCurrentSlide().getAttribute("data-id"),message:t,user_id:SL.current_user.get("id"),created_at:Date.now()}}),this.commentInput.val(""),this.stopTyping(),this.refreshCommentInput(),this.getCurrentThread().scrollToLatestComment())},onCommentSubmit:function(t){this.submitComment(),t.preventDefault()},onCommentKeyDown:function(t){13!==t.keyCode||t.shiftKey||(this.submitComment(),t.preventDefault(),t.stopPropagation())},onCommentChanged:function(){this.refreshCommentInput(),this.refreshTyping()},onCommentInputFocus:function(){this.refreshTyping()},onViewSlideCommentsClicked:function(t){this.showSlideComments(t)},onSlideChanged:function(){this.refreshCurrentSlide()},onCollaborationExpanded:function(){this.refreshCurrentSlide(),setTimeout(this.focus.bind(this),100)},destroy:function(){this.threads.deck.destroy(),this.threads.slide.destroy(),this.options=null,this.domElement.remove()}}),SL.components.collab.Comments.DECK_THREAD="deck",SL.components.collab.Comments.SLIDE_THREAD="slide",SL("components.collab").Handover=Class.extend({init:function(t,e){this.controller=t,this.options=e,this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-collab-handover">'),this.editButtonWrapper=$('<div class="edit-button-wrapper">').appendTo(this.domElement),this.editButton=$('<div class="edit-button">'),this.editButton.append('<span class="label">Edit </span><span class="icon i-pen-alt2"></span>'),this.editButton.appendTo(this.editButtonWrapper),this.user=$('<div class="user"></div>'),this.userAvatar=$('<div class="user-avatar"></div>').appendTo(this.user),this.userDescription=$('<div class="user-description"></div>').appendTo(this.user),this.userStatus=$('<div class="user-status"></div>').appendTo(this.userDescription),this.userSlide=$('<div class="user-slide"></div>').appendTo(this.userDescription)},appendTo:function(t){this.domElement.appendTo(t)},bind:function(){this.editButtonWrapper.on("vclick",this.onEditClicked.bind(this))},refresh:function(){this.controller.getCurrentDeckUser().isEditing()||!this.controller.getCurrentDeckUser().canEdit()?(this.editButtonWrapper.removeClass("visible"),this.editButtonWrapper.removeAttr("data-tooltip"),this.user.remove()):(this.editButtonWrapper.addClass("visible"),this.currentEditor=this.options.users.getByProperties({editing:!0}),this.currentEditor&&this.currentEditor.isOnline()?(this.currentAvatarURL!==this.currentEditor.get("thumbnail_url")&&(this.currentAvatarURL=this.currentEditor.get("thumbnail_url"),this.userAvatar.css("background-image",'url("'+this.currentAvatarURL+'")')),0===this.user.parent().length&&this.user.appendTo(this.editButtonWrapper),this.refreshSlideNumbers(),this.currentEditor.isIdle()?(this.editButtonWrapper.attr("data-tooltip","<strong>"+this.currentEditor.get("username")+"</strong> is editing but has been idle for a while.<br>Click to start editing."),this.userStatus.html('<span class="username">'+this.currentEditor.get("username")+"</span> is idle"),this.user.addClass("idle")):(this.editButtonWrapper.attr("data-tooltip","Ask <strong>"+this.currentEditor.get("username")+"</strong> to make you the active editor"),this.userStatus.html('<span class="username">'+this.currentEditor.get("username")+"</span> is editing"),this.user.removeClass("idle"))):(this.user.remove(),this.editButtonWrapper.removeAttr("data-tooltip")))},refreshSlideNumbers:function(){if(this.currentEditor){var t=SL.util.deck.getSlideNumber(this.currentEditor.get("slide_id"));t?this.userSlide.addClass("visible").html("slide "+t).data("data-slide-id",this.currentEditor.get("slide_id")).attr("data-tooltip","Click to view slide"):this.userSlide.removeClass("visible")}},onEditClicked:function(t){if($(t.target).closest(".user-slide").length){var e=this.userSlide.data("data-slide-id"),i=$('.reveal .slides section[data-id="'+e+'"]').get(0);i&&SL.util.deck.navigateToSlide(i)}else if(!this.controller.getCurrentDeckUser().isEditing()){var n=this.options.users.getByProperties({editing:!0});n&&n.isOnline()&&!n.isIdle()?(SL.helpers.StreamEditor.singleton().broadcast({type:"collaboration:handover-requested",user_id:SL.current_user.get("id")}),this.controller.showHandoverRequestPending(n)):this.controller.becomeEditor()}},destroy:function(){this.domElement.remove()}}),SL("components.collab").Menu=Class.extend({init:function(t,e){this.controller=t,this.options=e,this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-collab-menu">'),this.innerElement=$('<div class="sl-collab-menu-inner">'),this.innerElement.appendTo(this.domElement),this.renderProfile()},renderProfile:function(){this.enableButton=$('<div class="sl-collab-menu-item sl-collab-menu-enable ladda-button" data-style="zoom-in" data-spinner-color="#444" data-tooltip="Add a collaborator" data-tooltip-alignment="l">'),this.enableButton.append('<span class="users-icon icon i-users"></span>'),this.enableButton.appendTo(this.innerElement),this.toggleButton=$('<div class="sl-collab-menu-item sl-collab-menu-toggle">'),this.toggleButton.append('<div class="users-icon icon i-users"></div>'),this.toggleButton.append('<div class="close-icon icon i-x"></div>'),this.toggleButton.appendTo(this.innerElement),this.unreadComments=$('<div class="unread-comments" data-tooltip="Unread comments" data-tooltip-alignment="l">'),this.unreadComments.appendTo(this.toggleButton)},appendTo:function(t){this.domElement.appendTo(t)},bind:function(){this.onEnableClicked=this.onEnableClicked.bind(this),this.onToggleClicked=this.onToggleClicked.bind(this),this.enableButton.on("vclick",this.onEnableClicked),this.toggleButton.on("vclick",this.onToggleClicked),this.controller.enabled.add(this.onCollaborationEnabled.bind(this)),this.controller.expanded.add(this.onCollaborationExpanded.bind(this))},setUnreadComments:function(t){0===t?this.clearUnreadComments():this.unreadComments.text(t).addClass("visible")},clearUnreadComments:function(){this.unreadComments.removeClass("visible")},destroy:function(){this.domElement.remove()},getPrimaryButton:function(){return this.toggleButton},onEnableClicked:function(t){this.enableButton.off("vclick",this.onEnableClicked),this.enableLoader=Ladda.create(this.enableButton.get(0)),this.enableLoader.start(),SL.view.isNewDeck()?SL.view.save(function(){this.controller.makeDeckCollaborative()}.bind(this)):this.controller.makeDeckCollaborative(),t.preventDefault()},onToggleClicked:function(t){this.controller.toggle(),t.preventDefault()},onCollaborationEnabled:function(){this.enableLoader&&(this.enableLoader.stop(),this.enableLoader=null)},onCollaborationExpanded:function(){this.clearUnreadComments()}}),SL("components.collab").Notifications=Class.extend({init:function(t,e){this.controller=t,this.options=e,this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-collab-notifications">')},bind:function(){this.domElement.delegate(".sl-collab-notification.optional","mouseenter",this.onNotificationMouseEnter.bind(this)),this.domElement.delegate(".sl-collab-notification.optional","vclick",this.onNotificationClick.bind(this))},appendTo:function(t){this.domElement.appendTo(t)},show:function(t,e){e=$.extend({optional:!0,duration:5e3},e);var i;e.id&&(i=this.getNotificationByID(e.id)),i&&0!==i.length||(i=this.addNotification(t,e),e.optional&&(this.holding?i.addClass("on-hold"):this.hideAfter(i,e.duration)))},hide:function(t){var e=this.getNotificationByID(t);return e.length?(this.removeNotification(e),!0):!1},hideAfter:function(t,e){setTimeout(function(){t.addClass("hide"),setTimeout(this.removeNotification.bind(this,t),500)}.bind(this),e)},hold:function(){this.holding=!0},release:function(){this.holding=!1;var t=this.domElement.find(".sl-collab-notification.on-hold").get().reverse();t.forEach(function(t,e){this.hideAfter($(t),5e3+1e3*e)},this)},addNotification:function(t,e){var i=$('<div class="sl-collab-notification" />').data("options",e).toggleClass("optional",e.optional).prependTo(this.domElement),t=$('<div class="message" />').append(t).appendTo(i);return i.toggleClass("multiline",t.height()>24),e.sender?$('<div class="status-picture" />').css("background-image",'url("'+e.sender.get("thumbnail_url")+'")').prependTo(i):$('<div class="status-icon icon" />').addClass(e.icon||"i-info").prependTo(i),e.id&&i.attr("data-id",e.id),this.layout(),setTimeout(function(){i.addClass("show")},1),i},removeNotification:function(t){t.removeData(),t.remove(),this.layout()},getNotificationByID:function(t){return this.domElement.find(".sl-collab-notification[data-id="+t+"]")},layout:function(){var t=0;this.domElement.find(".sl-collab-notification").each(function(e,i){i.style.top=t+"px",t+=i.offsetHeight+10})},destroy:function(){this.domElement.remove()},onNotificationMouseEnter:function(t){var e=$(t.currentTarget);0===e.find(".dismiss").length&&$('<div class="dismiss"><span class="icon i-x"></span></div>').appendTo(e)},onNotificationClick:function(t){var e=$(t.currentTarget);if(0===$(t.target).closest(e.find(".dismiss")).length){var i=e.data("options").callback;"function"==typeof i&&i.call()}this.removeNotification(e)}}),SL("components.collab").Users=Class.extend({init:function(t,e){this.controller=t,this.options=e,this.inviteSent=new signals.Signal,this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-collab-users disable-when-disconnected">'),this.userList=$('<div class="sl-collab-users-list">').appendTo(this.domElement),this.slideGroup=$('<div class="sl-collab-users-group">').appendTo(this.userList),this.slideGroup.append('<div class="icon i-eye"></div>'),this.slideGroup.find(".icon").attr({"data-tooltip":"People who are viewing the current slide","data-tooltip-alignment":"l"}),this.inviteButton=$('<div class="sl-collab-users-invite" data-tooltip="Add a collaborator" data-tooltip-alignment="l"></div>'),this.inviteButton.html('<span class="icon i-plus"></span>'),this.inviteButton.on("vclick",this.onInviteClicked.bind(this)),this.inviteButton.appendTo(this.domElement),this.renderUsers()},renderUsers:function(){this.domElement.toggleClass("admin",this.controller.getCurrentDeckUser().isAdmin()),this.layoutPrevented=!0,this.userList.find(".sl-collab-user").remove(),this.options.users.forEach(this.renderUser.bind(this)),this.layoutPrevented=!1,this.layout()},renderUser:function(t){if(t.get("user_id")!==SL.current_user.get("id")&&t.get("active")!==!1){t._watchingActive||(t._watchingActive=!0,t.watch("active",function(){t.isActive()?this.onUsersChanged([t]):this.onUsersChanged(null,[t])}.bind(this)));var e=this.getUserByID(t.get("user_id"));return 0===e.length&&(e=$("<div/>",{"class":"sl-collab-user","data-user-id":t.get("user_id")}),e.html('<div class="picture" style="background-image: url(\''+t.get("thumbnail_url")+"')\" />"),e.data("model",t),e.on("mouseenter",this.onUserMouseEnter.bind(this)),e.appendTo(this.userList)),this.refreshPresence(t),e}},renderRoleSelector:function(){var t=$(['<select class="sl-select role-selector">','<option value="'+SL.models.collab.DeckUser.ROLE_EDITOR+'">Editor \u2013 Can comment and edit</option>','<option value="'+SL.models.collab.DeckUser.ROLE_VIEWER+'">Viewer \u2013 Can comment</option>',"</select>"].join(""));return SL.current_deck.get("user.enterprise")&&t.prepend('<option value="'+SL.models.collab.DeckUser.ROLE_ADMIN+'">Admin \u2013 Can comment, edit and manage users</option>'),t},renderInviteForm:function(){this.inviteForm||(this.inviteForm=$('<div class="sl-collab-invite-form sl-form">'),this.inviteEmail=$('<input class="invite-email" type="text" placeholder="Email address..." />'),this.inviteEmail.on("input",this.onEmailInput.bind(this)),this.inviteEmail.appendTo(this.inviteForm),this.inviteRole=this.renderRoleSelector(),this.inviteRole.appendTo(this.inviteForm),this.inviteOptions=$('<div class="invite-options">'),this.inviteOptions.appendTo(this.inviteForm),this.inviteFooter=$(['<footer class="footer">','<button class="button l outline cancel-button">Cancel</button>','<button class="button l confirm-button">Send</button>',"</footer>"].join("")),this.inviteFooter.find(".cancel-button").on("vclick",this.onInviteCancelClicked.bind(this)),this.inviteFooter.find(".confirm-button").on("vclick",this.onInviteConfirmClicked.bind(this)),this.inviteFooter.appendTo(this.inviteForm),SL.current_user.isEnterprise()&&(this.inviteEmailAutocomplete=new SL.components.form.Autocomplete(this.inviteEmail,this.searchTeamMembers.bind(this),{className:"light-grey",offsetY:1}),this.inviteEmailAutocomplete.confirmed.add(this.onEmailInput.bind(this)))),this.inviteEmail.val(""),this.inviteOptions.empty(),this.inviteRole.find("[hidden]").prop("hidden",!1),this.inviteRole.find('[value="'+SL.models.collab.DeckUser.ROLE_EDITOR+'"]').prop("selected",!0),this.inviteRole.prop("disabled",!1);var t=SL.current_deck.user;if(SL.current_deck.isVisibilityAll()||!t.isPaid()||t.isEnterprise()){if(t.isEnterprise()&&SL.current_user.isEnterpriseManager()){this.inviteOptions.append("<p>Want this person to be able to access internal presentations and create decks of their own?</p>");var e=$(['<div class="unit sl-checkbox outline">','<input id="team-invite-checkbox" class="team-invite-checkbox" type="checkbox" />','<label for="team-invite-checkbox">Add to team</label>',"</div>"].join("")).appendTo(this.inviteOptions);this.inviteToTeamLabel=e.find("label"),this.inviteToTeamInput=e.find("input"),SL.current_team.isManuallyUpgraded()||this.inviteToTeamLabel.html("Add to team for "+SL.current_team.getCostPerUser())}}else{var i=this.options.users.getEditors().length-1,n=SL.current_deck.get("deck_user_editor_limit")||50,s=n-i;i>=n?(this.inviteRole.find('[value="'+SL.models.collab.DeckUser.ROLE_EDITOR+'"]').prop("hidden",!0),this.inviteRole.find('[value="'+SL.models.collab.DeckUser.ROLE_VIEWER+'"]').prop("selected",!0),this.inviteRole.prop("disabled",!0),this.inviteOptions.html("You can't invite any more editors to this deck on your current plan, but you can add any number of viewers. Please <a href=\""+SL.routes.PRICING+'" target="_blank">upgrade</a> to add more editors.')):this.inviteOptions.html('You can invite <span class="semibold">'+s+"</span> more "+SL.util.string.pluralize("editor","s",s>1)+".")}return this.inviteForm},renderEditForm:function(t){this.editForm||(this.editForm=$('<div class="sl-collab-edit-form sl-form">'),this.editRole=this.renderRoleSelector(),this.editRole.appendTo(this.editForm),this.editFooter=$(['<footer class="footer">','<button class="button l negative delete-button" style="float: left;">Remove</button>','<button class="button l outline cancel-button">Cancel</button>','<button class="button l confirm-button">Save</button>',"</footer>"].join("")),this.editFooter.find(".delete-button").on("vclick",this.onEditDeleteClicked.bind(this)),this.editFooter.find(".cancel-button").on("vclick",this.onEditCancelClicked.bind(this)),this.editFooter.find(".confirm-button").on("vclick",this.onEditConfirmClicked.bind(this)),this.editFooter.appendTo(this.editForm)),this.editRole.find('[value="'+t.get("role")+'"]').prop("selected",!0),this.editRole.prop("disabled",!1);var e=SL.current_deck.user;if(!SL.current_deck.isVisibilityAll()&&e.isPaid()&&!e.isEnterprise()){var i=this.options.users.getEditors().length-1,n=SL.current_deck.get("deck_user_editor_limit")||50;i>=n&&t.get("role")===SL.models.collab.DeckUser.ROLE_VIEWER&&this.editRole.prop("disabled",!0)}return this.editForm},bind:function(){this.options.users.changed.add(this.onUsersChanged.bind(this)),this.domElement.delegate(".sl-collab-user","vclick",this.onUserClicked.bind(this)),this.layout=this.layout.bind(this),this.controller.expanded.add(this.layout),this.controller.collapsed.add(this.layout),$(window).on("resize",$.throttle(this.layout,300))},appendTo:function(t){this.domElement.appendTo(t)},refreshPresence:function(t){var e=this.getUserByID(t.get("user_id"));e&&e.length&&(e.removeClass("intro-animation"),e.toggleClass("online",t.isOnline()),e.toggleClass("idle",t.isIdle()),this.layout())},layout:function(){if(this.layoutPrevented)return!1;var t=62;this.domElement.css("max-height",window.innerHeight-t);var e=this.userList.find(".sl-collab-user.online").get(),i=this.userList.find(".sl-collab-user:not(.online)").get(),n=30,s=26,o=16,r=10;if(this.slideGroup.removeClass("visible"),e.length){var a=SL.util.deck.getSlideID(Reveal.getCurrentSlide()),l=0,c=4;e=e.filter(function(t){return $(t).data("model").get("slide_id")===a?(t.style.transform="translateY("+r+"px)",r+=s,l+=1,!1):!0}),l>0&&(this.slideGroup.css({top:c,height:r+2*c}).addClass("visible"),r+=o+6),e.length&&(e.forEach(function(t){t.style.transform="translateY("+r+"px)",r+=s}),r+=o)}i.length&&(this.controller.isExpanded()?(i.forEach(function(t){t.style.transform="translateY("+r+"px)",r+=s}),r+=o):i.forEach(function(t){t.style.transform="translateY("+r+"px)"})),this.inviteButton&&(this.inviteButton.get(0).style.transform="translateY("+r+"px)",r+=n+o),this.userList.css("height",r)},addUserFromStream:function(t){t.user_id||console.warn("Can not insert collaborator without ID");var e=this.options.users.getByProperties({user_id:t.user_id});e?(e.setAll(t),e.set("active",!0)):this.options.users.createModel(t)},removeUserFromStream:function(t){var e=this.options.users.getByProperties({user_id:t});e&&e.set("active",!1)},getUserByID:function(t){return this.domElement.find('.sl-collab-user[data-user-id="'+t+'"]')},showInvitePrompt:function(t){this.invitePrompt||(this.invitePrompt=SL.prompt({anchor:t||this.inviteButton,alignment:"l",type:"custom",title:"Add a collaborator",html:this.renderInviteForm(),destroyAfterConfirm:!1,confirmOnEnter:!0}),this.invitePrompt.confirmed.add(function(){this.inviteEmail.blur(),this.confirmInvitePrompt().then(function(){this.inviteSent.dispatch(),this.invitePrompt&&this.invitePrompt.destroy()}.bind(this),function(){})}.bind(this)),this.invitePrompt.destroyed.add(function(){this.inviteForm.detach(),this.invitePrompt=null
}.bind(this)),this.inviteEmail.focus())},confirmInvitePrompt:function(){var t=this.inviteEmail.val().trim(),e=this.inviteRole.val(),i=!(!this.inviteToTeamInput||!this.inviteToTeamInput.val());return new Promise(function(n,s){if(/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,}$/gi.test(t)){this.invitePrompt.showOverlay("neutral","Inviting "+t,'<div class="spinner" data-spinner-color="#333"></div>'),SL.util.html.generateSpinners();var o={user:{email:t,role:e}};i&&(o.user.add_to_team=!0);var r={url:SL.config.AJAX_DECKUSER_CREATE(SLConfig.deck.id),createModel:!1},a=this.options.users.getByProperties({email:t});a&&(r.model=a),this.options.users.create(o,r).then(function(){this.invitePrompt.showOverlay("positive","Invite sent!",'<span class="icon i-checkmark"></span>',2e3).then(n)}.bind(this),function(){this.invitePrompt.showOverlay("negative","Failed to send invite. Please try again.",'<span class="icon i-x"></span>',2e3).then(s),this.inviteEmail.focus().select()}.bind(this))}else SL.notify("Please enter a valid email","negative"),this.inviteEmail.focus().select(),s()}.bind(this))},showEditPrompt:function(t){if(!this.editPrompt){var e=t.data("model");if(e.get("role")===SL.models.collab.DeckUser.ROLE_OWNER)return;this.editUserElement=t,this.editUserModel=e,this.editPrompt=SL.prompt({anchor:t,alignment:"l",type:"custom",title:e.get("email"),html:this.renderEditForm(e),destroyAfterConfirm:!1,confirmOnEnter:!0}),this.editPrompt.confirmed.add(function(){this.confirmEditPrompt().then(function(){this.editPrompt&&this.editPrompt.destroy()}.bind(this))}.bind(this)),this.editPrompt.destroyed.add(function(){this.editForm.detach(),this.editPrompt=null}.bind(this))}},confirmEditPrompt:function(){var t=this.editUserModel;return new Promise(function(e,i){var n=this.editRole.val();n&&n!==t.get("role")?(this.editPrompt.showOverlay("neutral","Saving",'<div class="spinner" data-spinner-color="#333"></div>'),SL.util.html.generateSpinners(),t.set("role",n),t.save(["role"]).then(function(){e()}.bind(this),function(){this.editPrompt.showOverlay("negative","Failed to save changes. Please try again.",'<span class="icon i-x"></span>',2e3).then(i)}.bind(this))):e()}.bind(this))},searchTeamMembers:function(t){return this.searchTeamMembersXHR&&this.searchTeamMembersXHR.abort(),this.searchTeamMemberEmailCache||(this.searchTeamMemberEmailCache={}),new Promise(function(e,i){this.searchTeamMembersXHR=$.ajax({type:"POST",url:SL.config.AJAX_TEAM_MEMBER_SEARCH,context:this,data:{q:t}}).done(function(t){var i=t.results;i=i.filter(function(t){return t.id!==SL.current_user.get("id")}),i.forEach(function(t){this.searchTeamMemberEmailCache[t.email]=!0}.bind(this)),i=i.slice(0,5).map(function(t){return{value:t.email,label:'<div class="label">'+t.name+'</div><div class="value">'+t.email+"</div>"}}),e(i)}).fail(i)}.bind(this))},dismissPrompts:function(){this.editPrompt&&this.editPrompt.destroy(),this.invitePrompt&&this.invitePrompt.destroy()},onUsersChanged:function(t,e){t&&t.forEach(function(t){var e=this.renderUser(t);e&&(setTimeout(function(){e.addClass("intro-animation")},1),this.layout())}.bind(this)),e&&e.forEach(function(t){var e=$('.sl-collab-user[data-user-id="'+t.get("user_id")+'"]');SL.util.anim.collapseListItem(e,function(){e.remove(),this.layout()}.bind(this),300)},this)},onInviteClicked:function(t){t.preventDefault(),this.showInvitePrompt()},onInviteCancelClicked:function(){this.invitePrompt&&this.invitePrompt.cancel()},onInviteConfirmClicked:function(){this.invitePrompt&&this.invitePrompt.confirm()},onEditCancelClicked:function(){this.editPrompt&&this.editPrompt.cancel()},onEditConfirmClicked:function(){this.editPrompt&&this.editPrompt.confirm()},onEditDeleteClicked:function(){this.editPrompt&&this.editPrompt.destroy();var t=this.editUserModel;SL.prompt({anchor:this.editUserElement,title:SL.locale.get("COLLABORATOR_REMOVE_CONFIRM"),alignment:"l",type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Remove</h3>",selected:!0,className:"negative",callback:function(){t.destroy().then(function(){t.set("active",!1)})}.bind(this)}]})},onEmailInput:function(){this.inviteOptions&&this.searchTeamMemberEmailCache&&(this.searchTeamMemberEmailCache[this.inviteEmail.val().trim()]?this.inviteOptions.addClass("disabled"):this.inviteOptions.removeClass("disabled"))},onUserClicked:function(t){this.controller.getCurrentDeckUser().isAdmin()&&this.showEditPrompt($(t.currentTarget)),t.preventDefault()},onUserMouseEnter:function(t){var e=$(t.currentTarget),i=e.data("model");if(i){var n=[i.getDisplayName()+'<span class="sl-collab-tooltip-status" data-status="'+i.get("status")+'"></span>','<span style="opacity: 0.70;">'+i.get("email")+"</span>"].join("<br>");SL.tooltip.show(n,{alignment:"l",anchor:e}),e.one("mouseleave",SL.tooltip.hide.bind(SL.tooltip))}},destroy:function(){this.inviteEmailAutocomplete&&this.inviteEmailAutocomplete.destroy(),this.options=null,this.domElement.remove()}}),SL("components").ContextMenu=Class.extend({init:function(t){this.config=$.extend({anchorSpacing:5,minWidth:0,options:[]},t),this.config.anchor=$(this.config.anchor),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.layout=this.layout.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onDocumentKeydown=this.onDocumentKeydown.bind(this),this.onDocumentMouseDown=this.onDocumentMouseDown.bind(this),this.shown=new signals.Signal,this.hidden=new signals.Signal,this.destroyed=new signals.Signal,this.domElement=$('<div class="sl-context-menu">'),this.config.anchor.on("contextmenu",this.onContextMenu)},render:function(){this.listElement=$('<div class="sl-context-menu-list">').appendTo(this.domElement),this.listElement.css("minWidth",this.config.minWidth+"px"),this.arrowElement=$('<div class="sl-context-menu-arrow">').appendTo(this.domElement)},renderList:function(){this.config.options.forEach(function(t){if("divider"===t.type)$('<div class="sl-context-menu-divider">').appendTo(this.listElement);else{var e;e=$("string"==typeof t.url?'<a class="sl-context-menu-item" href="'+t.url+'">':'<div class="sl-context-menu-item">'),e.data("item-data",t),e.html('<span class="label">'+t.label+"</span>"),e.appendTo(this.listElement),e.on("click",function(t){var e=$(t.currentTarget).data("item-data").callback;"function"==typeof e&&e.apply(null,[this.contextMenuEvent]),this.hide()}.bind(this)),t.icon&&e.append('<span class="icon i-'+t.icon+'"></span>'),t.attributes&&e.attr(t.attributes)}}.bind(this))},bind:function(){SL.keyboard.keydown(this.onDocumentKeydown),$(document).on("mousedown touchstart pointerdown",this.onDocumentMouseDown)},unbind:function(){SL.keyboard.release(this.onDocumentKeydown),$(document).off("mousedown touchstart pointerdown",this.onDocumentMouseDown)},layout:function(t,e){var i=this.config.anchorSpacing,n=$(window).scrollLeft(),s=$(window).scrollTop(),o=this.domElement.outerWidth(),r=this.domElement.outerHeight(),a=o/2,l=r/2,c=8,h=t,d=e-r/2;t+i+c+o<window.innerWidth?(this.domElement.attr("data-alignment","r"),h+=c+i,a=-c):(this.domElement.attr("data-alignment","l"),h-=o+c+i,a=o),h=Math.min(Math.max(h,n+i),window.innerWidth+n-o-i),d=Math.min(Math.max(d,s+i),window.innerHeight+s-r-i),this.domElement.css({left:h,top:d}),this.arrowElement.css({left:a,top:l})},focus:function(t){var e=this.listElement.find(".focus");if(e.length){var i=t>0?e.nextAll(".sl-context-menu-item").first():e.prevAll(".sl-context-menu-item").first();i.length&&(e.removeClass("focus"),i.addClass("focus"))}else this.listElement.find(".sl-context-menu-item").first().addClass("focus")},show:function(){this.rendered||(this.rendered=!0,this.render(),this.renderList()),this.listElement.find(".sl-context-menu-item").each(function(t,e){var i=$(e),n=i.data("item-data");i.toggleClass("hidden","function"==typeof n.filter&&!n.filter())}.bind(this)),this.listElement.find(".sl-context-menu-item:not(.hidden)").length&&(this.domElement.removeClass("visible").appendTo(document.body),setTimeout(function(){this.domElement.addClass("visible")}.bind(this),1),this.bind(),this.layout(this.contextMenuEvent.clientX,this.contextMenuEvent.clientY),this.shown.dispatch(this.contextMenuEvent))},hide:function(){this.listElement.find(".focus").removeClass("focus"),this.domElement.detach(),this.unbind(),this.hidden.dispatch()},isVisible:function(){return this.domElement.parent().length>0},destroy:function(){this.shown.dispose(),this.hidden.dispose(),this.destroyed.dispatch(),this.destroyed.dispose(),this.domElement.remove(),this.unbind(),this.config=null},onDocumentKeydown:function(t){if(27===t.keyCode&&(this.hide(),t.preventDefault()),13===t.keyCode){var e=this.listElement.find(".focus");e.length&&(e.trigger("click"),t.preventDefault())}else 38===t.keyCode?(this.focus(-1),t.preventDefault()):40===t.keyCode?(this.focus(1),t.preventDefault()):9===t.keyCode&&t.shiftKey?(this.focus(-1),t.preventDefault()):9===t.keyCode&&(this.focus(1),t.preventDefault())},onContextMenu:function(t){t.preventDefault(),this.contextMenuEvent=t,this.show()},onDocumentMouseDown:function(t){var e=$(t.target);this.isVisible()&&0===e.closest(this.domElement).length&&this.hide()}}),SL("components.decksharer").DeckSharer=SL.components.popup.Popup.extend({TYPE:"decksharer",MODE_PUBLIC:{id:"public",width:560,height:380,heightEmail:"auto"},MODE_UPGRADE_OR_PUBLISH:{id:"upgrade-or-publish",width:800,height:560,heightEmail:"auto"},MODE_PRIVATE:{id:"private",width:800,height:560,heightEmail:730},MODE_INTERNAL:{id:"internal",width:560,height:"auto",heightEmail:"auto"},init:function(t){var e=t.deck,i=e.belongsTo(SL.current_user);this.mode=i&&(e.isVisibilitySelf()||e.isVisibilityTeam())&&!SL.current_user.privileges.privateLinks()?this.MODE_UPGRADE_OR_PUBLISH:i&&(e.isVisibilitySelf()||e.isVisibilityTeam())?this.MODE_PRIVATE:!i&&e.isVisibilityTeam()?this.MODE_INTERNAL:this.MODE_PUBLIC,this._super($.extend({title:"Share",titleItem:'"'+e.get("title")+'"',width:this.mode.width,height:this.mode.height},t))},switchMode:function(t){this.mode=t,this.bodyElement.empty(),this.renderMode(),this.options.width=this.mode.width,this.options.height=this.mode.height,this.layout()},render:function(){this._super(),this.renderMode()},renderMode:function(){this.mode.id===this.MODE_UPGRADE_OR_PUBLISH.id?this.renderUpgradeOrPublish():this.mode.id===this.MODE_PRIVATE.id?this.renderPrivate():this.mode.id===this.MODE_INTERNAL.id?this.renderInternal():this.renderPublic()},renderPublic:function(){this.shareOptions=new SL.components.decksharer.ShareOptions(this.options.deck,this.options),this.shareOptions.pageChanged.add(this.layout.bind(this)),this.shareOptions.appendTo(this.bodyElement)},renderInternal:function(){this.bodyElement.append('<p class="decksharer-share-warning">This deck is internal and can only be shared with and viewed by other team members.</p>'),this.shareOptions=new SL.components.decksharer.ShareOptions(this.options.deck,$.extend(this.options,{embedEnabled:!1})),this.shareOptions.pageChanged.add(this.layout.bind(this)),this.shareOptions.appendTo(this.bodyElement)},renderPrivate:function(){this.placeholderElement=$(['<div class="decksharer-placeholder">','<div class="decksharer-placeholder-inner">','<div class="spinner" data-spinner-color="#999"></div>',"</div>","</div>"].join("")),this.placeholderElement.appendTo(this.bodyElement),SL.util.html.generateSpinners(),SL.data.tokens.get(this.options.deck.get("id"),{success:function(t){this.tokens=t,this.tokenList=new SL.components.decksharer.TokenList(this.options.deck,this.tokens),this.tokenList.appendTo(this.bodyElement),this.tokenList.tokenSelected.add(this.onTokenSelected.bind(this)),this.tokenList.tokensEmptied.add(this.onTokensEmptied.bind(this)),0===this.tokens.size()?this.renderTokenPlaceholder():this.tokenList.selectDefault()}.bind(this),error:function(t){this.destroy(),401===t?SL.notify("It looks like you're no longer signed in to Slides. Please open a new tab and sign in.","negative"):SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")}.bind(this)})},renderUpgradeOrPublish:function(){this.placeholderElement=$(['<div class="decksharer-placeholder">','<div class="decksharer-placeholder-inner">','<div class="left">','<div class="lock-icon icon i-lock-stroke"></div>',"</div>",'<div class="right">',"<h2>Upgrade required</h2>","<p>You can't share privately on your current plan. Please upgrade your account to gain access to private links, password protection and more.</p>",'<a class="button upgrade-button l" href="'+SL.routes.PRICING+'">View plans</a>','<button class="button publish-button ladda-button l outline" data-style="zoom-out" data-spinner-color="#222">Make my deck public</button>',"</div>","</div>","</div>"].join("")),this.placeholderElement.appendTo(this.bodyElement);var t=this.placeholderElement.find(".publish-button");t.on("vclick",function(){$.ajax({type:"POST",url:SL.config.AJAX_PUBLISH_DECK(this.options.deck.get("id")),context:this,data:{visibility:SL.models.Deck.VISIBILITY_ALL}}).then(function(){var e=t.data("data");e&&e.stop(),this.options.deck.set("visibility",SL.models.Deck.VISIBILITY_ALL),this.switchMode(this.MODE_PUBLIC),SL.notify("Published successfully")},function(){var e=t.data("data");e&&e.stop(),SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")})}.bind(this)),Ladda.bind(t.get(0))},layout:function(){var t=this.tokenOptions?this.tokenOptions.shareOptions:this.shareOptions;this.options.height=t&&t.getPageID()===SL.components.decksharer.ShareOptions.EMAIL_PAGE_ID?this.mode.heightEmail:this.mode.height,this._super()},resetContentArea:function(){this.tokenOptions&&(this.tokenOptions.destroy(),this.tokenOptions=null),this.placeholderElement&&(this.placeholderElement.addClass("hidden"),setTimeout(this.placeholderElement.remove.bind(this.placeholderElement),300),this.placeholderElement=null)},renderTokenPlaceholder:function(){this.domElement.addClass("is-empty"),this.resetContentArea();var t=this.options.deck.isVisibilityTeam()?"This deck is internal":"This deck is private";this.placeholderElement=$(['<div class="decksharer-placeholder">','<div class="decksharer-placeholder-inner">','<div class="left">','<div class="lock-icon icon i-lock-stroke"></div>',"</div>",'<div class="right">',"<h2>"+t+"</h2>","<p>To share it you'll need to create a private link.</p>",'<button class="button create-button xl ladda-button" data-style="zoom-out">Create private link</button>',"</div>","</div>","</div>"].join("")),this.placeholderElement.appendTo(this.bodyElement),this.placeholderElement.find(".create-button").on("vclick",function(){this.tokenList.create()}.bind(this)),Ladda.bind(this.placeholderElement.find(".create-button").get(0)),this.layout()},renderTokenOptions:function(t){this.domElement.removeClass("is-empty");var e=!this.tokenOptions;this.resetContentArea(),this.tokenOptions=new SL.components.decksharer.TokenOptions(this.options.deck,t,this.options),this.tokenOptions.appendTo(this.bodyElement,e),this.tokenOptions.tokenRenamed.add(this.tokenList.setTokenLabel.bind(this.tokenList)),this.tokenOptions.shareOptions.pageChanged.add(this.layout.bind(this)),this.layout()},onTokenSelected:function(t){this.renderTokenOptions(t)},onTokensEmptied:function(){this.renderTokenPlaceholder()},destroy:function(){this.shareOptions&&(this.shareOptions.destroy(),this.shareOptions=null),this.tokenList&&(this.tokenList.destroy(),this.tokenList=null),this.options.deck=null,this.tokens=null,this._super()}}),SL("components.decksharer").ShareOptions=Class.extend({USE_READONLY:!SL.util.device.IS_PHONE&&!SL.util.device.IS_TABLET,init:function(t,e){this.deck=t,this.options=$.extend({token:null,linkEnabled:!0,embedEnabled:!0,emailEnabled:!0},e),this.onLinkInputMouseDown=this.onLinkInputMouseDown.bind(this),this.onEmbedOutputMouseDown=this.onEmbedOutputMouseDown.bind(this),this.onEmbedStyleChanged=this.onEmbedStyleChanged.bind(this),this.onEmbedSizeChanged=this.onEmbedSizeChanged.bind(this),this.width=SL.components.decksharer.ShareOptions.DEFAULT_WIDTH,this.height=SL.components.decksharer.ShareOptions.DEFAULT_HEIGHT,this.style="",this.pageChanged=new signals.Signal,this.render(),this.generate()},render:function(){this.domElement=$('<div class="decksharer-share-options">'),this.tabsElement=$('<div class="decksharer-share-options-tabs">').appendTo(this.domElement),this.pagesElement=$('<div class="decksharer-share-options-pages">').appendTo(this.domElement),this.options.deckView?(this.tabsElement.hide(),this.renderDeckViewLink(),this.showPage(SL.components.decksharer.ShareOptions.LINK_PAGE_ID)):(this.options.linkEnabled&&this.renderLink(),this.options.embedEnabled&&this.renderEmbed(),this.options.emailEnabled&&SL.util.user.isLoggedIn()&&this.renderEmail(),this.tabsElement.find(".decksharer-share-options-tab").on("vclick",function(t){var e=$(t.currentTarget).attr("data-id");this.showPage(e),SL.analytics.track("Decksharer: Tab clicked",e)}.bind(this)),this.showPage(this.tabsElement.find(".decksharer-share-options-tab").first().attr("data-id")))},renderLink:function(){this.tabsElement.append('<div class="decksharer-share-options-tab" data-id="'+SL.components.decksharer.ShareOptions.LINK_PAGE_ID+'">Link</div>'),this.pagesElement.append(['<div class="decksharer-share-options-page sl-form" data-id="link">','<div class="unit link-unit">',"<label>Presentation link</label>","</div>","</div>"].join("")),this.renderLinkInput();var t=this.pagesElement.find(".decksharer-share-options-page"),e=window.Reveal&&window.Reveal.isReady()?window.Reveal.getIndices():null;e&&(e.h>0||e.v>0)&&(t.append(['<div class="unit sl-checkbox outline">','<input id="deeplink-checkbox" type="checkbox" class="deeplink-input" />','<label for="deeplink-checkbox">Link to current slide</label>',"</div>"].join("")),this.deeplinkInput=this.pagesElement.find('[data-id="link"] .deeplink-input'),this.deeplinkInput.on("change",this.onDeeplinkToggled.bind(this))),t.append(['<div class="unit sl-checkbox outline">','<input id="fullscreen-checkbox" type="checkbox" class="fullscreen-input" />','<label for="fullscreen-checkbox">Fullscreen</label>',"</div>"].join("")),this.fullscreenInput=this.pagesElement.find('[data-id="link"] .fullscreen-input'),this.fullscreenInput.on("change",this.onLinkFullscreenToggled.bind(this)),2===t.find(".sl-checkbox").length&&t.append($('<div class="half-units">').append(t.find(".sl-checkbox")))},renderLinkInput:function(){this.USE_READONLY?(this.linkInput=$('<input type="text" class="link-input" readonly="readonly" />'),this.linkInput.on("mousedown",this.onLinkInputMouseDown),this.linkInput.appendTo(this.pagesElement.find('[data-id="link"] .link-unit'))):(this.linkAnchor=$('<a href="#" class="input-field">'),this.linkAnchor.appendTo(this.pagesElement.find('[data-id="link"] .link-unit')))},renderDeckViewLink:function(){this.pagesElement.append(['<div class="decksharer-share-options-page sl-form" data-id="link">','<div class="unit link-unit">',"<label>Presentation link</label>","</div>","</div>"].join("")),"live"===this.options.deckView&&(this.pagesElement.find('[data-id="link"] .link-unit label').text("Live presentation link"),this.pagesElement.find('[data-id="link"] .link-unit').append('<p class="unit-description">This links lets viewers follow the presentation in real-time.</p>')),this.renderLinkInput()},renderEmbed:function(){this.tabsElement.append('<div class="decksharer-share-options-tab" data-id="'+SL.components.decksharer.ShareOptions.EMBED_PAGE_ID+'">Embed</div>');var t='<option value="dark" selected>Dark</option><option value="light">Light</option>';SL.current_user.privileges.hideEmbedFooter()&&(t+='<option value="hidden">Hidden</option>'),this.pagesElement.append(['<div class="decksharer-share-options-page sl-form" data-id="embed">','<div class="embed-options">','<div class="unit">',"<label>Width:</label>",'<input type="text" name="width" maxlength="4" />',"</div>",'<div class="unit">',"<label>Height:</label>",'<input type="text" name="height" maxlength="4" />',"</div>",'<div class="unit">',"<label>Footer style:</label>",'<select class="sl-select" name="style">',t,"</select>","</div>","</div>",'<textarea name="output"></textarea>',"</div>"].join("")),this.embedElement=this.pagesElement.find('[data-id="embed"]'),this.embedStyleElement=this.embedElement.find("select[name=style]"),this.embedWidthElement=this.embedElement.find("input[name=width]"),this.embedHeightElement=this.embedElement.find("input[name=height]"),this.embedOutputElement=this.embedElement.find("textarea"),this.embedStyleElement.on("change",this.onEmbedStyleChanged),this.embedWidthElement.on("input",this.onEmbedSizeChanged),this.embedHeightElement.on("input",this.onEmbedSizeChanged),this.USE_READONLY?(this.embedOutputElement.attr("readonly","readonly"),this.embedOutputElement.on("mousedown",this.onEmbedOutputMouseDown)):this.embedOutputElement.on("input",this.generate.bind(this)),this.embedWidthElement.val(this.width),this.embedHeightElement.val(this.height)},renderEmail:function(){this.tabsElement.append('<div class="decksharer-share-options-tab" data-id="'+SL.components.decksharer.ShareOptions.EMAIL_PAGE_ID+'">Email</div>'),this.pagesElement.append(['<div class="decksharer-share-options-page" data-id="email">','<div class="sl-form">','<div class="unit" data-validate="none" data-required>',"<label>From</label>",'<input type="text" class="email-from" placeholder="Your Name" maxlength="255" />',"</div>",'<div class="unit" data-validate="none" data-required>',"<label>To</label>",'<input type="text" class="email-to" placeholder="john@example.com, jane@example.com" maxlength="2500" />',"</div>",'<div class="unit text" data-validate="none" data-required>',"<label>Message</label>",'<p class="unit-description">A link to the deck is automatically included after the message.</p>','<textarea class="email-body" rows="3" maxlength="2500"></textarea>',"</div>",'<div class="submit-wrapper">','<button type="submit" class="button positive l ladda-button email-submit" data-style="zoom-out">Send</button>',"</div>","</div>",'<div class="email-success">','<div class="email-success-icon icon i-checkmark"></div>','<p class="email-success-description">Email sent!</p>',"</div>","</div>"].join("")),this.emailElement=this.pagesElement.find('[data-id="email"]'),this.emailSuccess=this.emailElement.find(".email-success"),this.emailForm=this.emailElement.find(".sl-form"),this.emailFromElement=this.emailForm.find(".email-from"),this.emailToElement=this.emailForm.find(".email-to"),this.emailBodyElement=this.emailForm.find(".email-body"),this.emailSubmitButton=this.emailForm.find(".email-submit"),this.emailFormUnits=[],this.emailForm.find(".unit[data-validate]").each(function(t,e){this.emailFormUnits.push(new SL.components.FormUnit(e))}.bind(this)),this.emailSubmitButton.on("vclick",this.onEmailSubmitClicked.bind(this)),this.emailSubmitLoader=Ladda.create(this.emailSubmitButton.get(0))},appendTo:function(t){this.domElement.appendTo(t)},showPage:function(t){this.tabsElement.find(".decksharer-share-options-tab").removeClass("is-selected"),this.pagesElement.find(".decksharer-share-options-page").removeClass("is-selected"),this.tabsElement.find('[data-id="'+t+'"]').addClass("is-selected"),this.pagesElement.find('[data-id="'+t+'"]').addClass("is-selected"),this.pageChanged.dispatch(t)},getPageID:function(){return this.tabsElement.find(".is-selected").attr("data-id")},generate:function(){var t=this.getShareURLs();if(this.embedOutputElement){var e='<iframe src="'+t.embed+'" width="'+this.width+'" height="'+this.height+'" scrolling="no" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';this.embedOutputElement.text(e)}var i=this.fullscreenInput&&this.fullscreenInput.is(":checked")?t.fullscreen:t.show;if(this.deeplinkInput&&this.deeplinkInput.is(":checked")){var n=window.Reveal.getIndices();n.h>0&&n.v>0?i+="#/"+n.h+"/"+n.v:n.h>0&&(i+="#/"+n.h)}this.linkInput&&this.linkInput.val(i),this.linkAnchor&&this.linkAnchor.attr("href",i).text(i),this.emailElement&&(SL.current_user&&this.emailFromElement.val(SL.current_user.getNameOrSlug()),this.emailBodyElement.val(this.deck.has("title")&&"deck"!==this.deck.get("title")?'Check out this deck "'+this.deck.get("title")+'"':"Check out this deck"))},getShareURLs:function(){var t={show:this.deck.getURL({protocol:"http:",view:this.options.deckView}),fullscreen:this.deck.getURL({protocol:"http:",view:"fullscreen"}),embed:this.deck.getURL({protocol:"",view:"embed"})},e=[];return this.options.token&&this.options.token.has("token")&&e.push("token="+this.options.token.get("token")),t.show+=e.length?"?"+e.join("&"):"",t.fullscreen+=e.length?"?"+e.join("&"):"","string"==typeof this.style&&this.style.length>0&&e.push("style="+this.style),t.embed+=e.length?"?"+e.join("&"):"",t},onEmbedOutputMouseDown:function(t){t.preventDefault(),this.embedOutputElement.focus().select(),SL.analytics.track("Decksharer: Embed code selected")},onLinkInputMouseDown:function(t){t.preventDefault(),$(t.target).focus().select(),SL.analytics.track("Decksharer: URL selected")},onDeeplinkToggled:function(){this.generate(),SL.analytics.track("Decksharer: Deeplink toggled")},onLinkFullscreenToggled:function(){this.generate(),SL.analytics.track("Decksharer: URL fullscreen toggled")},onEmbedSizeChanged:function(){this.width=parseInt(this.embedWidthElement.val(),10)||1,this.height=parseInt(this.embedHeightElement.val(),10)||1,this.generate()},onEmbedStyleChanged:function(){this.style=this.embedStyleElement.val(),this.generate()},onEmailSubmitClicked:function(t){var e=this.emailFormUnits.every(function(t){return t.beforeSubmit()});if(e&&!this.emailXHR){SL.analytics.track("Decksharer: Submit email");var i=this.emailFromElement.val(),n=this.emailToElement.val(),s=this.emailBodyElement.val();this.emailSubmitLoader.start(),n=n.split(","),n=n.map(function(t){return t.trim()}),n=n.join(",");var o={deck_share:{emails:n,from:i,body:s}};this.options.token&&(o.deck_share.access_token_id=this.options.token.get("id")),this.emailXHR=$.ajax({url:SL.config.AJAX_SHARE_DECK_VIA_EMAIL(this.deck.get("id")),type:"POST",context:this,data:o}).done(function(){this.emailSuccess.addClass("visible"),setTimeout(function(){this.emailSuccess.removeClass("visible"),this.emailToElement.val(""),this.emailBodyElement.val(""),this.generate()}.bind(this),3e3),SL.analytics.track("Decksharer: Submit email success")}).fail(function(){SL.notify("Failed to send email","negative"),SL.analytics.track("Decksharer: Submit email error")}).always(function(){this.emailXHR=null,this.emailSubmitLoader.stop()})}t.preventDefault()},destroy:function(){this.pageChanged.dispose(),this.deck=null,this.domElement.remove()}}),SL.components.decksharer.ShareOptions.DEFAULT_WIDTH=576,SL.components.decksharer.ShareOptions.DEFAULT_HEIGHT=420,SL.components.decksharer.ShareOptions.LINK_PAGE_ID="link",SL.components.decksharer.ShareOptions.EMBED_PAGE_ID="embed",SL.components.decksharer.ShareOptions.EMAIL_PAGE_ID="email",SL("components.decksharer").TokenList=Class.extend({init:function(t,e){this.deck=t,this.tokens=e,this.tokenSelected=new signals.Signal,this.tokensEmptied=new signals.Signal,this.render()},render:function(){this.domElement=$('<div class="decksharer-token-list">'),this.listItems=$('<div class="decksharer-token-list-items">').appendTo(this.domElement),this.createButton=$(['<div class="decksharer-token-list-create ladda-button" data-style="zoom-out" data-spinner-color="#222">','<span class="icon i-plus"></span>',"</div>"].join("")),this.createButton.on("vclick",this.create.bind(this)),this.createButton.appendTo(this.domElement),this.createButtonLoader=Ladda.create(this.createButton.get(0)),this.tokens.forEach(this.renderToken.bind(this)),this.scrollShadow=new SL.components.ScrollShadow({parentElement:this.domElement,contentElement:this.listItems,footerElement:this.createButton,resizeContent:!1})},renderToken:function(t){var e=t.get("deck_view_count")||0,i=e+" "+SL.util.string.pluralize("view","s",1!==e),n=$(['<div class="decksharer-token-list-item" data-id="'+t.get("id")+'">','<span class="label"></span>','<div class="meta">','<span class="views">'+i+"</span>",'<span class="icon i-x delete" data-tooltip="Delete link"></span>',"</div>","</div>"].join(""));n.appendTo(this.listItems),n.on("vclick",function(e){if($(e.target).closest(".delete").length>0){SL.prompt({anchor:n,alignment:"r",title:"Are you sure you want to delete this link? It will stop working for anyone you have already shared it with.",type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Delete</h3>",selected:!0,className:"negative",callback:function(){this.remove(t,n)}.bind(this)}]})}else this.select(t)}.bind(this)),this.setTokenLabel(t)},setTokenLabel:function(t,e){var i=this.listItems.find(".decksharer-token-list-item[data-id="+t.get("id")+"]");i.length&&(e||(e=t.get("name")||t.get("token")),i.find(".label").html(e))},appendTo:function(t){this.domElement.appendTo(t),this.scrollShadow.sync()},selectDefault:function(){this.select(this.tokens.first()),this.scrollShadow.sync()},select:function(t){if(t&&t!==this.selectedToken){var e=this.listItems.find(".decksharer-token-list-item[data-id="+t.get("id")+"]");e.length&&(this.listItems.find(".decksharer-token-list-item").removeClass("is-selected"),e.addClass("is-selected"),this.tokenSelected.dispatch(t),this.selectedToken=t)}},create:function(t){var e=0===this.tokens.size();t&&this.createButtonLoader.start(),SL.data.tokens.create(this.deck.get("id")).then(function(t){SL.analytics.track(e?"Decksharer: Created first token":"Decksharer: Created additional token"),this.renderToken(t),this.select(t),this.createButtonLoader.stop(),this.scrollShadow.sync()}.bind(this),function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative"),this.createButtonLoader.stop()}.bind(this))},remove:function(t,e){t.destroy().fail(function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")}.bind(this)).done(function(){SL.util.anim.collapseListItem(e,function(){e.remove(),this.scrollShadow.sync()}.bind(this),300),this.tokens.remove(t),this.selectedToken===t&&(this.selectedToken=null,this.selectDefault()),0===this.tokens.size()&&this.tokensEmptied.dispatch(),SL.analytics.track("Decksharer: Deleted token")}.bind(this))},destroy:function(){this.createButtonLoader&&this.createButtonLoader.stop(),this.scrollShadow&&this.scrollShadow.destroy(),this.tokens=null,this.domElement.remove()}}),SL("components.decksharer").TokenOptions=Class.extend({init:function(t,e,i){this.deck=t,this.token=e,this.options=i,this.tokenRenamed=new signals.Signal,this.render(),this.bind()},render:function(){this.domElement=$('<div class="decksharer-token-options">'),this.innerElement=$('<div class="sl-form decksharer-token-options-inner">'),this.innerElement.appendTo(this.domElement),this.namePasswordElement=$('<div class="split-units">'),this.namePasswordElement.appendTo(this.innerElement),this.nameUnit=$(['<div class="unit">','<label class="form-label" for="token-name">Name</label>','<p class="unit-description">So you can tell your links apart.</p>','<input class="input-field" type="text" id="token-name" maxlength="255" />',"</div>"].join("")),this.nameUnit.appendTo(this.namePasswordElement),this.nameInput=this.nameUnit.find("input"),this.nameInput.val(this.token.get("name")),this.passwordUnit=$(['<div class="unit">','<label class="form-label" for="token-password">Password<span class="optional-label">(optional)</span></label>','<p class="unit-description">Viewers need to enter this.</p>','<input class="input-field" type="password" id="token-password" placeholder="&bull;&bull;&bull;&bull;&bull;&bull;" maxlength="255" />',"</div>"].join("")),this.passwordUnit.appendTo(this.namePasswordElement),this.passwordInput=this.passwordUnit.find("input"),this.passwordInput.val(this.token.get("password")),this.saveWrapper=$(['<div class="save-wrapper">','<button class="button l save-button ladda-button" data-style="expand-left" data-spinner-size="26">Save changes</button>',"</div>"].join("")),this.saveWrapper.appendTo(this.innerElement),this.saveButton=this.saveWrapper.find(".button"),this.saveButtonLoader=Ladda.create(this.saveButton.get(0)),this.shareOptions=new SL.components.decksharer.ShareOptions(this.deck,$.extend(this.options,{token:this.token})),this.shareOptions.appendTo(this.domElement)},bind:function(){this.saveChanges=this.saveChanges.bind(this),this.nameInput.on("input",this.onNameInput.bind(this)),this.passwordInput.on("input",this.onPasswordInput.bind(this)),this.saveButton.on("click",this.saveChanges)},appendTo:function(t,e){this.domElement.appendTo(t),e||SL.util.dom.calculateStyle(this.domElement),this.domElement.addClass("visible")},checkUnsavedChanges:function(){var t=this.token.get("name")||"",e=this.token.get("password")||"",i=this.nameInput.val(),n=this.passwordInput.val(),s=n!==e||i!==t;this.domElement.toggleClass("is-unsaved",s)},saveChanges:function(){this.nameInput.val()?(this.token.set("name",this.nameInput.val()),this.token.set("password",this.passwordInput.val()),this.saveButtonLoader.start(),this.token.save(["name","password"]).fail(function(){this.saveButtonLoader.stop(),SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")
}.bind(this)).done(function(){this.saveButtonLoader.stop(),this.domElement.removeClass("is-unsaved")}.bind(this))):SL.notify("Please give the link a name","negative")},onNameInput:function(){this.tokenRenamed.dispatch(this.token,this.nameInput.val()),this.checkUnsavedChanges()},onPasswordInput:function(){this.checkUnsavedChanges()},destroy:function(){this.tokenRenamed.dispatch(this.token),this.tokenRenamed.dispose(),this.shareOptions&&(this.shareOptions.destroy(),this.shareOptions=null),this.saveButtonLoader&&this.saveButtonLoader.stop(),this.deck=null,this.token=null,this.domElement.addClass("hidden"),setTimeout(this.domElement.remove.bind(this.domElement),500)}}),SL("components.form").Autocomplete=Class.extend({init:function(t,e,i){this.inputElement=t,this.searchMethod=e,this.confirmed=new signals.Signal,this.config=$.extend({offsetY:0,offsetX:0,className:null},i),this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-autocomplete">'),this.config.className&&this.domElement.addClass(this.config.className)},bind:function(){this.onDocumentKeydown=this.onDocumentKeydown.bind(this),this.showSuggestions=this.showSuggestions.bind(this),this.hideSuggestions=this.hideSuggestions.bind(this),this.layout=$.throttle(this.layout,500,this),this.onInput=$.throttle(this.onInput,500,this),this.inputElement.on("input",this.onInput),this.inputElement.on("focus",this.onInput),this.inputElement.on("blur",this.hideSuggestions),this.domElement.on("mousedown",this.onClick.bind(this))},layout:function(){var t=this.inputElement.get(0).getBoundingClientRect();this.domElement.css({top:t.bottom+this.config.offsetY,left:t.left+this.config.offsetX,width:t.width})},showSuggestions:function(t){var e=t.map(function(t,e){var i="sl-autocomplete-item"+(0===e?" focus":"");return"string"==typeof t&&(t={value:t,label:t}),'<div class="'+i+'" data-value="'+t.value+'">'+t.label+"</div>"});this.domElement.html(e.join("")),this.domElement.appendTo(document.body),this.layout(),$(window).on("resize",this.layout),SL.keyboard.keydown(this.onDocumentKeydown)},hideSuggestions:function(){this.domElement.detach(),$(window).off("resize",this.layout),SL.keyboard.release(this.onDocumentKeydown)},focus:function(t){var e=this.domElement.find(".focus");e.length||(e=this.domElement.find(".sl-autocomplete-item").first(),e.addClass("focus"));var i=t>0?e.next(".sl-autocomplete-item"):e.prev(".sl-autocomplete-item");i.length&&(e.removeClass("focus"),i.addClass("focus"))},setValue:function(t){this.inputElement.val(t),this.confirmed.dispatch(t)},getFocusedValue:function(){return this.domElement.find(".focus").attr("data-value")},destroy:function(){this.confirmed.dispose(),this.inputElement.off("input",this.onInput),this.hideSuggestions()},onInput:function(){this.searchMethod(this.inputElement.val()).then(function(t){t.length>0?this.inputElement.is(":focus")&&this.showSuggestions(t):this.hideSuggestions()}.bind(this),function(){this.hideSuggestions()}.bind(this))},onClick:function(t){var e=$(t.target).closest(".sl-autocomplete-item");e.length&&(this.setValue(e.attr("data-value")),this.hideSuggestions())},onDocumentKeydown:function(t){return 27===t.keyCode?(this.hideSuggestions(),!1):13===t.keyCode||9===t.keyCode?(this.setValue(this.getFocusedValue()),this.hideSuggestions(),!1):38===t.keyCode?(this.focus(-1),!1):40===t.keyCode?(this.focus(1),!1):!0}}),SL("components.form").Scripts=Class.extend({init:function(t){this.domElement=$(t),this.render(),this.readValues(),this.renderList()},render:function(){this.valueElement=this.domElement.find(".value-holder"),this.listElement=$('<ul class="list">'),this.listElement.delegate("li .remove","click",this.onListItemRemove.bind(this)),this.listElement.appendTo(this.domElement),this.inputWrapper=$('<div class="input-wrapper"></div>').appendTo(this.domElement),this.inputElement=$('<input type="text" placeholder="https://...">'),this.inputElement.on("keyup",this.onInputKeyUp.bind(this)),this.inputElement.appendTo(this.inputWrapper),this.submitElement=$('<div class="button outline">Add</div>'),this.submitElement.on("click",this.submitInput.bind(this)),this.submitElement.appendTo(this.inputWrapper),this.domElement.parents("form").first().on("submit",this.onFormSubmit.bind(this))},renderList:function(){this.listElement.empty(),this.values.forEach(function(t){this.listElement.append(['<li class="list-item" data-value="'+t+'">',t,'<span class="icon i-x remove"></span>',"</li>"].join(""))}.bind(this))},formatValues:function(){for(var t=0;t<this.values.length;t++)this.values[t]=SL.util.string.trim(this.values[t]),""===this.values[t]&&this.values.splice(t,1)},readValues:function(){this.values=(this.valueElement.val()||"").split(","),this.formatValues()},writeValues:function(){this.formatValues(),this.valueElement.val(this.values.join(","))},addValue:function(t){return t=t||"",0===t.search(/https\:\/\//gi)?(this.values.push(t),this.renderList(),this.writeValues(),!0):0===t.search(/http\:\/\//gi)?(SL.notify("Script must be loaded via HTTPS","negative"),!1):(SL.notify("Please enter a valid script URL","negative"),!1)},removeValue:function(t){if("string"==typeof t)for(var e=0;e<this.values.length;e++)this.values[e]===t&&this.values.splice(e,1);else"number"==typeof t&&this.values.splice(t,1);this.renderList(),this.writeValues()},submitInput:function(){this.addValue(this.inputElement.val())&&this.inputElement.val("")},onListItemRemove:function(t){var e=$(t.target).parent().index();"number"==typeof e&&this.removeValue(e)},onInputKeyUp:function(t){13===t.keyCode&&this.submitInput()},onFormSubmit:function(t){return this.inputElement.is(":focus")?(t.preventDefault(),!1):void 0}}),SL("components").FormUnit=Class.extend({init:function(t){this.domElement=$(t),this.inputElement=this.domElement.find("input, textarea").first(),this.errorElement=$('<div class="status error">'),this.errorIcon=$('<span class="icon">!</span>').appendTo(this.errorElement),this.errorMessage=$('<p class="message">!</p>').appendTo(this.errorElement),this.successText=this.domElement.attr("data-success-text"),this.successElement=$('<div class="status success">'),this.successIcon=$('<span class="icon i-checkmark"></span>').appendTo(this.successElement),this.successIcon.attr("data-tooltip",this.successText),this.validateType=this.domElement.attr("data-validate"),this.validateTimeout=-1,this.originalValue=this.inputElement.val(),this.originalError=this.domElement.attr("data-error-message"),this.asyncValidatedValue=null,this.clientErrors=[],this.serverErrors=[],this.inputElement.on("input",this.onInput.bind(this)),this.inputElement.on("change",this.onInputChange.bind(this)),this.inputElement.on("focus",this.onInputFocus.bind(this)),this.inputElement.on("blur",this.onInputBlur.bind(this)),this.inputElement.on("invalid",this.onInputInvalid.bind(this)),this.domElement.parents("form").first().on("submit",this.onFormSubmit.bind(this)),this.originalError?(this.domElement.removeClass("hidden"),this.validate(),this.inputElement.focus()):this.render(),this.domElement.data("controller",this)},validate:function(t){clearTimeout(this.validateTimeout);var e=this.inputElement.val();if("string"!=typeof e)return this.serverErrors=[],this.clientErrors=[],void this.render();if(e===this.originalValue&&(this.originalValue||"password"===this.validateType)&&this.originalError)this.clientErrors=[this.originalError];else if(e.length){var i=SL.util.validate[this.validateType];"function"==typeof i?this.clientErrors=i(e):console.log('Could not find validation method of type "'+this.validateType+'"')}else this.clientErrors=[],t&&this.isRequired()&&this.clientErrors.push(SL.locale.FORM_ERROR_REQUIRED);return this.validateAsync(),this.render(),0===this.clientErrors.length&&0===this.serverErrors.length},validateAsync:function(){if("username"===this.validateType){var t=SLConfig&&SLConfig.current_user?SLConfig.current_user.username:"",e=this.inputElement.val();0===SL.util.validate.username(e).length&&(t&&e===t?(this.asyncValidatedValue=t,this.serverErrors=[]):e!==this.asyncValidatedValue&&$.ajax({url:SL.config.AJAX_LOOKUP_USER,type:"GET",data:{id:e},context:this,statusCode:{204:function(){this.serverErrors=[SL.locale.get("FORM_ERROR_USERNAME_TAKEN")]},404:function(){this.serverErrors=[]}}}).complete(function(){this.render(),this.asyncValidatedValue=e}))}else if("team_slug"===this.validateType){var i=SL.current_team?SL.current_team.get("slug"):"",n=this.inputElement.val();0===SL.util.validate.team_slug(n).length&&(i&&n===i?(this.asyncValidatedValue=i,this.serverErrors=[]):n!==this.asyncValidatedValue&&$.ajax({url:SL.config.AJAX_LOOKUP_TEAM,type:"GET",data:{id:n},context:this,statusCode:{204:function(){this.serverErrors=[SL.locale.get("FORM_ERROR_ORGANIZATION_SLUG_TAKEN")]},404:function(){this.serverErrors=[]}}}).complete(function(){this.render(),this.asyncValidatedValue=n}))}},validateAfterTimeout:function(){if(clearTimeout(this.validateTimeout),!SL.util.device.IS_PHONE&&!SL.util.device.IS_TABLET){var t=600;(this.clientErrors.length||this.serverErrors.length)&&(t=300),this.validateTimeout=setTimeout(this.validate.bind(this),t)}},render:function(){var t=this.serverErrors.concat(this.clientErrors);this.domElement.toggleClass("has-error",t.length>0),t.length>0?(this.errorElement.appendTo(this.domElement),this.errorMessage.text(t[0]),setTimeout(function(){this.errorElement.addClass("visible")}.bind(this),1)):this.errorElement.removeClass("visible").remove(),0===t.length&&!this.isEmpty()&&this.successText?(this.successElement.appendTo(this.domElement),setTimeout(function(){this.successElement.addClass("visible")}.bind(this),1)):this.successElement.removeClass("visible").remove()},format:function(){if("username"===this.validateType||"team_slug"===this.validateType){var t=this.inputElement.val();t&&this.inputElement.val(this.inputElement.val().toLowerCase())}if("url"===this.validateType){var t=this.inputElement.val();t&&t.length>2&&/^http(s?):\/\//gi.test(t)===!1&&this.inputElement.val("http://"+t)}},focus:function(){this.inputElement.focus()},beforeSubmit:function(){return this.validate(!0),this.clientErrors.length>0||this.serverErrors.length>0?(this.focus(),!1):!0},renderImage:function(){var t=this.inputElement.get(0);if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){var e=this.domElement.find("img"),i=t.target.result;e.length?e.attr("src",i):$('<img src="'+i+'">').appendTo(this.domElement.find(".image-uploader"))}.bind(this),e.readAsDataURL(t.files[0])}},isEmpty:function(){return 0===this.inputElement.val().length},isRequired:function(){return!this.domElement.hasClass("hidden")&&this.domElement.is("[data-required]")},isUnchanged:function(){return this.inputElement.val()===this.originalValue},onInput:function(){this.validateAfterTimeout()},onInputChange:function(t){this.domElement.hasClass("image")&&this.renderImage(t.target),this.validate()},onInputFocus:function(){this.domElement.addClass("focused")},onInputBlur:function(){this.format(),this.domElement.removeClass("focused")},onInputInvalid:function(){return this.beforeSubmit()},onFormSubmit:function(t){return this.beforeSubmit()===!1?(t.preventDefault(),!1):void 0}}),SL("components").Header=Class.extend({init:function(){this.domElement=$(".global-header"),this.renderLogo(),this.renderDropdown(),this.bind()},renderLogo:function(){if("/"===window.location.pathname){var t=this.domElement.find(".logo-animation");t.length&&new SL.components.Menu({anchor:t,anchorSpacing:10,alignment:"b",showOnHover:!0,options:[{label:"Download logo",url:SL.routes.BRAND_KIT}]})}},renderDropdown:function(){this.dropdown=SL.components.Header.createMainMenu(this.domElement.find(".profile-button .nav-item-anchor"))},bind:function(){this.domElement.hasClass("show-on-scroll")&&($(document).on("mousemove",this.onDocumentMouseMove.bind(this)),$(window).on("scroll",this.onWindowScroll.bind(this)))},onWindowScroll:function(){this.isScrolledDown=$(window).scrollTop()>30,this.domElement.toggleClass("show",this.isScrolledDown)},onDocumentMouseMove:function(t){if(!this.isScrolledDown){var e=t.clientY;e>0&&(20>e&&!this.isMouseOver?(this.domElement.addClass("show"),this.isMouseOver=!0):e>80&&this.isMouseOver&&0===$(t.target).parents(".global-header").length&&(this.domElement.removeClass("show"),this.isMouseOver=!1))}}}),SL.components.Header.createMainMenu=function(t){var e=[{label:"Profile",icon:"home",url:SL.routes.USER(SL.current_user.get("username"))},{label:"New deck",icon:"plus",url:SL.routes.DECK_NEW(SL.current_user.get("username"))}];if(SL.current_user.isEnterpriseManager()){e.push({label:"Themes",icon:"brush",url:SL.routes.THEME_EDITOR});var i={label:"Settings",icon:"cog",url:SL.routes.USER_EDIT};SL.current_team&&(i.submenu=[{label:"Account settings",url:SL.routes.USER_EDIT},{label:"Team settings",url:SL.routes.TEAM_EDIT(SL.current_team)},{label:"Team members",url:SL.routes.TEAM_EDIT_MEMBERS(SL.current_team)}],SL.current_team.isManuallyUpgraded()||i.submenu.push({label:"Billing details",url:SL.routes.BILLING_DETAILS})),e.push(i)}else e.push({label:"Settings",icon:"cog",url:SL.routes.USER_EDIT});SL.current_user.isManuallyUpgraded()||SL.current_user.isEnterprise()||e.push(SL.current_user.isPaid()?{label:"Billing",icon:"credit",url:SL.routes.BILLING_DETAILS}:{label:"Upgrade",icon:"star",url:SL.routes.PRICING});var n=$(".global-header .nav-item-changelog");return n.length&&(e.push({label:"What's new",url:SL.routes.CHANGELOG,iconHTML:'<span class="counter"><span class="counter-inner">'+n.attr("data-unread-count")+"</span></span>"}),t.find(".nav-item-burger").append('<span class="changelog-indicator"></span>'),t.one("mouseover",function(){$(this).find(".changelog-indicator").remove()})),e.push({label:"Log out",icon:"exit",url:SL.routes.SIGN_OUT,attributes:{rel:"nofollow","data-method":"delete"}}),new SL.components.Menu({anchor:t,anchorSpacing:10,alignment:"auto",minWidth:160,showOnHover:!0,options:e})},SL("components").Kudos=function(){function t(){$("[data-kudos-value][data-kudos-id]").each(function(t,e){var i=e.getAttribute("data-kudos-id");i&&!r[i]&&(r[i]=e.getAttribute("data-kudos-value"))}.bind(this)),$(".kudos-trigger[data-kudos-id]").on("click",function(t){var n=t.currentTarget;"true"===n.getAttribute("data-kudoed-by-user")?i(n.getAttribute("data-kudos-id")):e(n.getAttribute("data-kudos-id"))}.bind(this))}function e(t){n(t),$.ajax({type:"POST",url:SL.config.AJAX_KUDO_DECK(t),context:this}).fail(function(){s(t),SL.notify(SL.locale.get("GENERIC_ERROR"))})}function i(t){s(t),$.ajax({type:"DELETE",url:SL.config.AJAX_UNKUDO_DECK(t),context:this}).fail(function(){n(t),SL.notify(SL.locale.get("GENERIC_ERROR"))})}function n(t){var e=$('.kudos-trigger[data-kudos-id="'+t+'"]');e.attr("data-kudoed-by-user","true"),r[t]++,o(t,r[t]);var i=e.find(".kudos-icon");i.length&&(i.removeClass("bounce"),setTimeout(function(){i.addClass("bounce")},1))}function s(t){var e=$('.kudos-trigger[data-kudos-id="'+t+'"]');e.attr("data-kudoed-by-user","false"),r[t]--,o(t,r[t]),e.find(".kudos-icon").removeClass("bounce")}function o(t,e){"number"==typeof r[t]&&("number"==typeof e&&(r[t]=e),e=Math.max(r[t],0),$("[data-kudos-id][data-kudos-value]").each(function(t,i){i.setAttribute("data-kudos-value",e)}))}var r={};t()}(),SL("components.medialibrary").Filters=Class.extend({init:function(t,e,i){this.options=$.extend({editable:!0},i),this.media=t,this.media.changed.add(this.onMediaChanged.bind(this)),this.tags=e,this.tags.changed.add(this.onTagsChanged.bind(this)),this.tags.associationChanged.add(this.onTagAssociationChanged.bind(this)),this.filterChanged=new signals.Signal,this.onSearchInput=$.throttle(this.onSearchInput,300),this.render(),this.recount(),this.selectDefaultFilter(!0)},render:function(){this.domElement=$('<div class="media-library-filters">'),this.domElement.toggleClass("editable",this.options.editable),this.innerElement=$('<div class="media-library-filters-inner">').appendTo(this.domElement),this.scrollElement=this.innerElement,this.renderSearch(),this.renderTypes(),this.renderTags()},renderTypes:function(){this.renderType(SL.models.Media.IMAGE.id,function(){return!0},"All Images","All Images")},renderType:function(t,e,i,n){var s=$(['<div class="media-library-filter media-library-type-filter">','<span class="label">'+i+"</span>",'<span class="count"></span>',"</div>"].join(""));return s.attr({"data-id":t,"data-label":i,"data-exclusive-label":n}),s.on("vclick",this.onFilterClicked.bind(this)),s.data("filter",e),s.appendTo(this.innerElement),s},renderTags:function(){this.tagsElement=$(['<div class="media-library-tags media-drop-area">','<div class="tags-list"></div>',"</div>"].join("")),this.tagsElement.appendTo(this.innerElement),this.tagsList=this.tagsElement.find(".tags-list"),this.options.editable&&(this.tagsElement.append(['<div class="tags-create">','<div class="tags-create-inner ladda-button" data-style="expand-right" data-spinner-color="#666" data-spinner-size="28">New tag</div>',"</div>"].join("")),this.tagsElement.find(".tags-create").on("vclick",this.onCreateTagClicked.bind(this)),this.tagsCreateLoader=Ladda.create(this.tagsElement.find(".tags-create-inner").get(0))),this.tags.forEach(this.renderTag.bind(this)),this.sortTags()},renderTag:function(t){var e=$(['<div class="media-library-filter media-drop-target" data-id="'+t.get("id")+'">','<div class="front">','<span class="label-output"></span>','<div class="controls-out">','<span class="count"></span>',"</div>","</div>","</div>","</div>"].join(""));return e.find(".label-output").text(t.get("name")),e.on("vclick",this.onTagClicked.bind(this)),e.data({model:t,filter:t.createFilter()}),this.options.editable?(e.find(".front").append(['<div class="controls-over">','<span class="controls-button edit-button">Edit</span>',"</div>"].join("")),e.append(['<div class="back">','<input class="label-input" value="" type="text">','<div class="controls">','<span class="controls-button delete-button negative icon i-trash-stroke"></span>','<span class="controls-button save-button">Save</span>',"</div>","</div>"].join("")),e.find(".label-input").val(t.get("name")),e.data("dropReceiver",function(e){this.tags.addTagTo(t,e)}.bind(this))):e.find(".controls-out").removeClass("controls-out").addClass("controls-permanent"),e.appendTo(this.tagsList),e},renderSearch:function(){this.searchElement=$(['<div class="media-library-filter media-library-search-filter" data-id="search">','<input class="search-input" type="text" placeholder="Search..." maxlength="50" />',"</div>"].join("")),this.searchElement.on("vclick",this.onSearchClicked.bind(this)),this.searchElement.data("filter",function(){return!1}),this.searchElement.appendTo(this.innerElement),this.searchInput=this.searchElement.find(".search-input"),this.searchInput.on("input",this.onSearchInput.bind(this))},recount:function(t){t=t||this.domElement.find(".media-library-filter"),t.each(function(t,e){var i=$(e),n=i.find(".count");n.length&&n.text(this.media.filter(i.data("filter")).length)}.bind(this))},appendTo:function(t){this.domElement.appendTo(t)},selectFilter:function(t,e){var i=this.domElement.find('.media-library-filter[data-id="'+t+'"]');this.domElement.find(".is-selected").removeClass("is-selected"),i.addClass("is-selected"),this.selectedFilter=i.data("filter"),this.selectedFilterData={},i.closest(this.tagsList).length?(this.selectedFilterData.type=SL.components.medialibrary.Filters.FILTER_TYPE_TAG,this.selectedFilterData.tag=i.data("model"),this.selectedFilterData.placeholder="No media has been added to this tag",this.options.editable&&(this.selectedFilterData.placeholder="This tag is empty. To add media, drag and drop it onto the tag in the sidebar.")):(this.selectedFilterData.type=SL.components.medialibrary.Filters.FILTER_TYPE_MEDIA,this.selectedFilterData.placeholder="There is no media of this type"),e||this.filterChanged.dispatch(this.selectedFilter,this.selectedFilterData)},selectDefaultFilter:function(t){this.selectFilter(this.domElement.find(".media-library-filter:not(.media-library-search-filter)").first().attr("data-id"),t)},showAllTypes:function(){this.domElement.find(".media-library-type-filter").each(function(){var t=$(this);t.css("display",""),t.find(".label").text(t.attr("data-label"))})},hideAllTypesExcept:function(t){this.domElement.find(".media-library-type-filter").each(function(){var e=$(this);e.attr("data-id")===t?(e.css("display",""),e.find(".label").text(e.attr("data-exclusive-label"))):(e.css("display","none"),e.find(".label").text(e.attr("data-label")))})},startEditingTag:function(t,e){if(this.tagsList.find(".is-editing").length)return!1;var i=(t.data("model"),t.find(".label-input"));this.domElement.addClass("is-editing"),e===!0&&(t.addClass("collapsed"),t.find(".label-output").empty(),setTimeout(function(){t.removeClass("collapsed")},1),this.scrollElement.animate({scrollTop:t.prop("offsetTop")+80-this.scrollElement.height()},300)),t.addClass("is-editing");var n=this.scrollElement.prop("scrollTop");i.focus().select(),this.scrollElement.prop("scrollTop",n),i.on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),this.stopEditingTag(t))}.bind(this))},stopEditingTag:function(t,e){var i=t.data("model"),n=t.find(".label-input"),s=t.find(".label-output");this.domElement.removeClass("is-editing");var o=n.val();o&&!e&&(i.set("name",o),i.save(["name"])),s.text(i.get("name")),n.off("keydown"),setTimeout(function(){t.removeClass("is-editing")},1)},sortTags:function(){var t=this.tagsList.find(".media-library-filter").toArray();t.sort(function(t,e){return t=$(t).data("model").get("name").toLowerCase(),e=$(e).data("model").get("name").toLowerCase(),e>t?-1:t>e?1:0}),t.forEach(function(t){$(t).appendTo(this.tagsList)}.bind(this))},getTagElementByID:function(t){return this.tagsList.find('.media-library-filter[data-id="'+t+'"]')},confirmTagRemoval:function(t){var e=t.data("model");SL.prompt({anchor:t.find(".delete-button"),title:SL.locale.get("MEDIA_TAG_DELETE_CONFIRM"),type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Delete</h3>",selected:!0,className:"negative",callback:function(){SL.analytics.trackEditor("Media: Delete tag"),e.destroy().done(function(){this.domElement.removeClass("is-editing"),this.tags.remove(e),SL.notify(SL.locale.get("MEDIA_TAG_DELETE_SUCCESS"))}.bind(this)).fail(function(){SL.notify(SL.locale.get("MEDIA_TAG_DELETE_ERROR"),"negative")}.bind(this))}.bind(this)}]})},getSelectedFilterData:function(){return this.selectedFilterData},destroy:function(){this.filterChanged.dispose(),this.domElement.remove()},onMediaChanged:function(){this.recount()},onTagsChanged:function(t,e){t&&t.length&&t.forEach(function(t){this.startEditingTag(this.renderTag(t),!0)}.bind(this)),e&&e.length&&e.forEach(function(t){var e=this.tagsElement.find('[data-id="'+t.get("id")+'"]');this.stopEditingTag(e,!0),e.css({height:0,padding:0,opacity:0}),setTimeout(function(){e.remove()},300),e.hasClass("is-selected")&&this.selectDefaultFilter()}.bind(this))},onTagAssociationChanged:function(t){this.recount(this.getTagElementByID(t.get("id")))},onFilterClicked:function(t){this.selectFilter($(t.currentTarget).attr("data-id"))},onCreateTagClicked:function(){this.tagsCreateLoader.start(),this.tags.create().then(function(t){this.recount(this.getTagElementByID(t.get("id"))),this.tagsCreateLoader.stop()}.bind(this),function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative"),this.tagsCreateLoader.stop()}.bind(this)),SL.analytics.trackEditor("Media: Create tag")},onTagClicked:function(t){var e=$(t.target),i=e.closest(".media-library-filter");i.length&&(e.closest(".edit-button").length?this.startEditingTag(i):e.closest(".save-button").length?this.stopEditingTag(i):e.closest(".delete-button").length?this.confirmTagRemoval(i):i.hasClass("is-editing")||this.onFilterClicked(t))},onSearchClicked:function(){this.selectFilter(this.searchElement.attr("data-id"),!0),this.searchInput.focus(),this.onSearchInput(),SL.analytics.trackEditor("Media: Search clicked")},onSearchInput:function(){var t=this.searchInput.val();this.selectedFilter=this.media.createSearchFilter(t),this.selectedFilterData={type:SL.components.medialibrary.Filters.FILTER_TYPE_SEARCH,placeholder:"Please enter a search term"},this.searchElement.data("filter",this.selectedFilter),t.length>0&&(this.selectedFilterData.placeholder='No results for "'+t+'"'),this.filterChanged.dispatch(this.selectedFilter,this.selectedFilterData)}}),SL.components.medialibrary.Filters.FILTER_TYPE_MEDIA="media",SL.components.medialibrary.Filters.FILTER_TYPE_TAG="tag",SL.components.medialibrary.Filters.FILTER_TYPE_SEARCH="search",SL("components.medialibrary").ListDrag=Class.extend({init:function(){this.items=[],this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)},reset:function(){this.items=[],this.ghostElement&&this.ghostElement.remove(),this.currentDropTarget=null,$(".media-drop-target").removeClass("drag-over"),$(".media-drop-area").removeClass("media-drop-area-active"),$(document).off("vmousemove",this.onMouseMove),$(document).off("vmouseup",this.onMouseUp)},startDrag:function(t,e,i){this.items=i;var n=e.offset();this.ghostOffset={x:n.left-t.clientX,y:n.top-t.clientY},this.ghostWidth=e.width(),this.ghostHeight=e.height(),this.ghostElement=$('<div class="media-library-drag-ghost">'),this.ghostElement.css({border:e.css("border"),backgroundImage:e.css("background-image"),backgroundSize:e.css("background-size"),backgroundPosition:e.css("background-position"),width:this.ghostWidth,height:this.ghostHeight,marginLeft:this.ghostOffset.x,marginTop:this.ghostOffset.y}),this.ghostElement.appendTo(document.body),i.length>1&&(this.ghostElement.append('<span class="count">'+i.length+"</span>"),this.ghostElement.attr("data-depth",Math.min(i.length,3))),this.dropTargets=$(".media-drop-target"),$(".media-drop-area").addClass("media-drop-area-active"),$(document).on("vmousemove",this.onMouseMove),$(document).on("vmouseup",this.onMouseUp)},stopDrag:function(){this.reset()},onMouseMove:function(t){t.preventDefault();var e=t.clientX,i=t.clientY,n="translate("+e+"px,"+i+"px)";this.ghostElement.css({webkitTransform:n,transform:n}),this.currentDropTarget=null,this.dropTargets.each(function(t,n){var s=$(n),o=n.getBoundingClientRect();e>o.left&&e<o.right&&i>o.top&&i<o.bottom?(s.addClass("drag-over"),this.currentDropTarget=s):s.removeClass("drag-over")}.bind(this))},onMouseUp:function(t){if(t.preventDefault(),this.currentDropTarget){this.currentDropTarget.data("dropReceiver").call(null,this.items),SL.analytics.trackEditor("Media: Drop items on tag");var e=this.ghostElement,i=this.currentDropTarget.get(0).getBoundingClientRect(),n=i.left+(i.width-this.ghostWidth)/2-this.ghostOffset.x,s=i.top+(i.height-this.ghostHeight)/2-this.ghostOffset.y,o="translate("+n+"px,"+s+"px) scale(0.2)";e.css({webkitTransition:"all 0.2s ease",transition:"all 0.2s ease",webkitTransform:o,transform:o,opacity:0}),setTimeout(function(){e.remove()},500),this.ghostElement=null}this.stopDrag()}}),SL("components.medialibrary").List=Class.extend({init:function(t,e,i){this.options=$.extend({editable:!0},i),this.media=t,this.media.changed.add(this.onMediaChanged.bind(this)),this.tags=e,this.tags.associationChanged.add(this.onTagAssociationChanged.bind(this)),this.items=[],this.filteredItems=[],this.selectedItems=new SL.collections.Collection,this.overlayPool=[],this.itemSelected=new signals.Signal,this.drag=new SL.components.medialibrary.ListDrag,this.render(),this.bind()},render:function(){this.domElement=$('<div class="media-library-list">'),this.trayElement=$(['<div class="media-library-tray">','<div class="status"></div>','<div class="button negative delete-button">Delete</div>','<div class="button outline white untag-button">Remove tag</div>','<div class="button outline white clear-button">Clear selection</div>',"</div>"].join("")),this.placeholderElement=$(['<div class="media-library-list-placeholder">',"Empty","</div>"].join("")),this.media.forEach(this.addItem.bind(this)),this.filteredItems=this.items},bind:function(){if(this.loadItemsInView=$.throttle(this.loadItemsInView,200),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.domElement.on("scroll",this.onListScrolled.bind(this)),this.trayElement.find(".delete-button").on("vclick",this.onDeleteSelectionClicked.bind(this)),this.trayElement.find(".untag-button").on("vclick",this.onUntagSelectionClicked.bind(this)),this.trayElement.find(".clear-button").on("vclick",this.onClearSelectionClicked.bind(this)),SL.util.device.IS_PHONE||SL.util.device.IS_TABLET){var t=new Hammer(this.domElement.get(0));t.on("tap",this.onMouseUp),t.on("press",function(t){var e=$(t.target).closest(".media-library-list-item").data("item");e&&(this.lastSelectedItem=e,this.toggleSelection(e)),t.preventDefault()}.bind(this))}else this.domElement.on("vmousedown",this.onMouseDown.bind(this))},layout:function(){var t=$(".media-library-list-item").first();this.cellWidth=t.outerWidth(!0),this.cellHeight=t.outerHeight(!0),this.columnCount=Math.floor(this.domElement.outerWidth()/this.cellWidth)},appendTo:function(t){this.domElement.appendTo(t),this.trayElement.appendTo(t),this.placeholderElement.appendTo(t),this.layout(),this.loadItemsInView()},addItem:function(t,e,i){var n=$('<div class="media-library-list-item"></div>'),s={model:t,element:n,elementNode:n.get(0),selected:!1,visible:!0};n.data("item",s),e===!0?(n.prependTo(this.domElement),this.items.unshift(s)):(n.appendTo(this.domElement),this.items.push(s)),i===!0&&(n.addClass("has-intro hidden"),setTimeout(function(){n.removeClass("hidden")},1))},removeItem:function(t){for(var e=this.items.length;--e>=0;){var i=this.items[e];i.model===t&&(i.model=null,i.element.remove(),this.items.splice(e,1))}},setPrimaryFilter:function(t){this.filterA=t,this.applyFilter()},clearPrimaryFilter:function(){this.filterA=null,this.applyFilter()},setSecondaryFilter:function(t,e){this.clearSelection(),this.filterB=t,this.filterBData=e,this.applyFilter(),this.setPlaceholderContent(e.placeholder),this.afterSelectionChange()},clearSecondaryFilter:function(){this.filterB=null,this.filterBData=null,this.applyFilter(),this.setPlaceholderContent("Empty")},applyFilter:function(){this.filteredItems=[];for(var t=0,e=this.items.length;e>t;t++){var i=this.items[t];this.filterA&&!this.filterA(i.model)||this.filterB&&!this.filterB(i.model)?(i.elementNode.style.display="none",i.visible=!1,this.detachOverlay(i)):(this.filteredItems.push(i),i.visible=!0,i.elementNode.style.display="")}this.domElement.scrollTop(0),this.loadItemsInView(),this.placeholderElement.toggleClass("visible",0===this.filteredItems.length)},loadItemsInView:function(){if(SL.tooltip.isVisible()&&SL.tooltip.hide(),this.filteredItems.length)for(var t,e,i=this.domElement.scrollTop(),n=100,s=this.domElement.outerHeight(),o=0,r=this.filteredItems.length;r>o;o++)t=this.filteredItems[o],e=Math.floor(o/this.columnCount)*this.cellHeight,e+this.cellHeight-i>-n&&s+n>e-i?(t.overlay||this.attachOverlay(t),t.elementNode.hasAttribute("data-thumb-loaded")||(t.elementNode.style.backgroundImage='url("'+t.model.get("thumb_url")+'")',t.elementNode.setAttribute("data-thumb-loaded","true"))):t.overlay&&!t.selected&&this.detachOverlay(t)},setPlaceholderContent:function(t){this.placeholderElement.html(this.media.isEmpty()?this.options.editable?"You haven't uploaded any media yet.<br>Use the upload button to the left or drag media from your desktop.":"No media has been uploaded yet.":t||"Empty")},attachOverlay:function(t){return t.overlay||!this.options.editable?!1:(0===this.overlayPool.length&&this.overlayPool.push($(['<div class="info-overlay">','<span class="info-overlay-action inline-button icon i-embed" data-tooltip="Insert SVG inline"></span>','<span class="info-overlay-action label-button icon i-type" data-tooltip="Rename"></span>','<span class="info-overlay-action select-button" data-tooltip="Select">','<span class="icon i-checkmark checkmark"></span>',"</span>","</div>"].join(""))),t.overlay=this.overlayPool.pop(),t.overlay.appendTo(t.element),void this.refreshOverlay(t))},refreshOverlay:function(t){if(t.overlay){var e=t.model.get("label");e&&""!==e||(e="Label"),t.overlay.attr("data-tooltip",e),t.model.isSVG()?(t.overlay.addClass("has-inline-option"),t.overlay.find(".inline-button").toggleClass("is-on",!!t.model.get("inline"))):t.overlay.removeClass("has-inline-option")}},detachOverlay:function(t){t&&t.overlay&&(this.overlayPool.push(t.overlay),t.overlay=null)},toggleSelection:function(t,e){t.visible&&(t.selected="boolean"==typeof e?e:!t.selected,t.selected?(t.element.addClass("is-selected"),this.selectedItems.push(t)):(t.element.removeClass("is-selected"),this.selectedItems.remove(t)),this.afterSelectionChange())},toggleSelectionThrough:function(t){if(this.lastSelectedItem){var e=!t.selected,i=this.lastSelectedItem.element.index(),n=t.element.index();
if(n>i)for(var s=i+1;n>=s;s++)this.toggleSelection(this.items[s],e);else if(i>n)for(var s=n;i>s;s++)this.toggleSelection(this.items[s],e)}},clearSelection:function(){this.selectedItems.forEach(function(t){t.selected=!1,t.element.removeClass("is-selected")}.bind(this)),this.selectedItems.clear(),this.lastSelectedItem=null,this.afterSelectionChange()},afterSelectionChange:function(){var t=this.selectedItems.size();this.domElement.toggleClass("is-selecting",t>0),this.trayElement.toggleClass("visible",t>0),this.trayElement.find(".status").text(t+" "+SL.util.string.pluralize("item","s",1!==t)+" selected"),this.filterBData&&this.filterBData.type===SL.components.medialibrary.Filters.FILTER_TYPE_TAG?this.trayElement.find(".untag-button").show():this.trayElement.find(".untag-button").hide()},deleteSelection:function(){var t="Do you want to permanently delete this media from all existing presentations or remove it from the library?";this.selectedItems.size()>1&&(t="Do you want to permanently delete these items from all existing presentations or remove them from the library?"),SL.prompt({anchor:this.trayElement.find(".delete-button"),title:t,type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Remove from library</h3>",callback:function(){this.selectedItems.forEach(function(t){t.model.set("hidden",!0),t.model.save(["hidden"]).fail(function(){SL.notify("An error occurred, media was not removed","negative")}.bind(this)),this.media.remove(t.model)}.bind(this)),this.clearSelection()}.bind(this)},{html:"<h3>Delete permanently</h3>",selected:!0,className:"negative",callback:function(){this.selectedItems.forEach(function(t){t.model.destroy().fail(function(){SL.notify("An error occurred, media was not deleted","negative")}.bind(this)),this.media.remove(t.model)}.bind(this)),this.clearSelection()}.bind(this)}]}),SL.analytics.trackEditor("Media: Delete items")},editLabel:function(t){t.element.addClass("hover");var e=SL.prompt({anchor:t.element.find(".label-button"),title:"Rename",type:"input",confirmLabel:"Save",data:{value:t.model.get("label"),placeholder:"Label...",maxlength:SL.config.MEDIA_LABEL_MAXLENGTH,width:400}});e.confirmed.add(function(e){t.element.removeClass("hover"),e&&""!==e.trim()?(t.model.set("label",e),t.model.save(["label"]),this.refreshOverlay(t)):SL.notify("Label can't be empty","negative")}.bind(this)),e.canceled.add(function(){t.element.removeClass("hover")}.bind(this)),SL.analytics.trackEditor("Media: Edit item label")},toggleInline:function(t){t.model.set("inline",!t.model.get("inline")),t.model.save(["inline"]),this.refreshOverlay(t),SL.analytics.trackEditor("Media: Toggle inline SVG")},onMediaChanged:function(t,e){t&&t.length&&(t.forEach(function(t){this.addItem(t,!0,!0)}.bind(this)),this.applyFilter()),e&&e.length&&(e.forEach(this.removeItem.bind(this)),this.media.isEmpty()?this.applyFilter():this.loadItemsInView())},onTagAssociationChanged:function(t){var e=this.filterBData&&this.filterBData.type===SL.components.medialibrary.Filters.FILTER_TYPE_TAG&&this.filterBData.tag.get("id")===t.get("id");e&&this.applyFilter()},onMouseDown:function(t){2!==t.button&&(this.mouseDownTarget=$(t.target),this.mouseDownX=t.clientX,this.mouseDownY=t.clientY,this.domElement.on("vmousemove",this.onMouseMove),this.domElement.on("vmouseup",this.onMouseUp))},onMouseMove:function(t){var e=SL.util.trig.distanceBetween({x:this.mouseDownX,y:this.mouseDownY},{x:t.clientX,y:t.clientY});if(e>10&&this.options.editable){var i=this.mouseDownTarget.closest(".media-library-list-item").data("item");if(i){this.domElement.off("vmousemove",this.onMouseMove),this.domElement.off("vmouseup",this.onMouseUp);var n=[i.model];this.selectedItems.size()>0&&i.selected&&(n=this.selectedItems.map(function(t){return t.model})),this.drag.startDrag(t,i.element,n),SL.analytics.trackEditor("Media: Start drag",n.length>1?"multiple":"single")}}t.preventDefault()},onMouseUp:function(t){var e=$(t.target),i=e.closest(".media-library-list-item").data("item");i&&(this.selectedItems.size()>0||e.closest(".select-button").length?t.shiftKey?this.toggleSelectionThrough(i):(this.lastSelectedItem=i,this.toggleSelection(i)):e.closest(".label-button").length?this.editLabel(i):e.closest(".inline-button").length?this.toggleInline(i):this.itemSelected.dispatch(i.model)),this.domElement.off("vmousemove",this.onMouseMove),this.domElement.off("vmouseup",this.onMouseUp),t.preventDefault()},onListScrolled:function(){this.loadItemsInView()},onDeleteSelectionClicked:function(){this.deleteSelection()},onUntagSelectionClicked:function(){if(this.filterBData&&this.filterBData.type===SL.components.medialibrary.Filters.FILTER_TYPE_TAG){var t=this.selectedItems.map(function(t){return t.model});this.tags.removeTagFrom(this.filterBData.tag,t),this.applyFilter(),this.clearSelection()}},onClearSelectionClicked:function(){this.clearSelection()}}),SL("components.medialibrary").MediaLibraryPage=Class.extend({init:function(t,e,i){this.media=t,this.media.loadCompleted.add(this.onMediaLoaded.bind(this)),this.media.loadFailed.add(this.onMediaFailed.bind(this)),this.tags=e,this.tags.loadCompleted.add(this.onTagsLoaded.bind(this)),this.tags.loadFailed.add(this.onTagsFailed.bind(this)),this.tags.changed.add(this.onTagsChanged.bind(this)),this.options=$.extend({editable:!0,selectAfterUpload:!0},i),this.selected=new signals.Signal,this.render(),this.setupDragAndDrop()},load:function(){this.mediaLoaded=!1,this.tagsLoaded=!1,this.loadStatus&&this.loadStatus.remove(),this.loadStatus=$('<div class="media-library-load-status">').appendTo(this.domElement),this.loadStatus.html("Loading..."),this.media.load(),this.tags.load()},onMediaLoaded:function(){this.mediaLoaded=!0,this.tagsLoaded&&this.onMediaAndTagsLoaded()},onMediaFailed:function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative"),this.loadStatus.html('Failed to load media <button class="button outline retry">Try again</button>'),this.loadStatus.find(".retry").on("click",this.load.bind(this))},onTagsLoaded:function(){this.tagsLoaded=!0,this.mediaLoaded&&this.onMediaAndTagsLoaded()},onTagsFailed:function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative"),this.loadStatus.html('Failed to load tags <button class="button outline retry">Try again</button>'),this.loadStatus.find(".retry").on("click",this.load.bind(this))},onMediaAndTagsLoaded:function(){this.renderFilters(),this.renderUploader(),this.renderList(),this.refresh(),this.sidebarElement.addClass("visible"),this.contentElement.addClass("visible"),this.scrollShadow=new SL.components.ScrollShadow({parentElement:this.filters.domElement,contentElement:this.filters.innerElement,shadowSize:6,resizeContent:!1}),this.loadStatus.remove()},render:function(){this.domElement=$('<div class="media-library-page"></div>'),this.sidebarElement=$('<div class="media-library-sidebar">').appendTo(this.domElement),this.contentElement=$('<div class="media-library-content">').appendTo(this.domElement)},renderFilters:function(){this.filters=new SL.components.medialibrary.Filters(this.media,this.tags,{editable:this.isEditable()}),this.filters.filterChanged.add(this.onFilterChanged.bind(this)),this.filters.appendTo(this.sidebarElement)},renderUploader:function(){this.isEditable()&&(this.uploader=new SL.components.medialibrary.Uploader(this.media),this.uploader.uploadEnqueued.add(this.onUploadEnqueued.bind(this)),this.uploader.uploadStarted.add(this.onUploadStarted.bind(this)),this.uploader.uploadCompleted.add(this.onUploadCompleted.bind(this)),this.uploader.appendTo(this.sidebarElement))},renderList:function(){this.list=new SL.components.medialibrary.List(this.media,this.tags,{editable:this.isEditable()}),this.list.itemSelected.add(this.select.bind(this)),this.list.appendTo(this.contentElement)},setupDragAndDrop:function(){this.dragAndDropInstructions=$(['<div class="media-library-drag-instructions">','<div class="inner">',"Drop to upload media","</div>","</div>"].join("")),this.dragAndDropListener={onDragOver:function(){this.dragAndDropInstructions.appendTo(this.domElement)}.bind(this),onDragOut:function(){this.dragAndDropInstructions.remove()}.bind(this),onDrop:function(t){this.dragAndDropInstructions.remove();var e=t.originalEvent.dataTransfer.files;if(this.isSelecting())this.uploader.enqueue(e[0]);else for(var i=0;i<e.length;i++)this.uploader.enqueue(e[i]);SL.analytics.trackEditor("Media: Upload file","drop from desktop")}.bind(this)}},show:function(t){this.domElement.appendTo(t),this.domElement.removeClass("visible"),clearTimeout(this.showTimeout),this.showTimeout=setTimeout(function(){this.domElement.addClass("visible")}.bind(this),1),this.bind()},hide:function(){this.unbind(),clearTimeout(this.showTimeout),this.domElement.detach()},bind:function(){SL.draganddrop.subscribe(this.dragAndDropListener)},unbind:function(){this.dragAndDropInstructions.remove(),SL.draganddrop.unsubscribe(this.dragAndDropListener)},configure:function(t){this.options=$.extend(this.options,t),this.refresh()},refresh:function(){this.media&&this.media.isLoaded()&&(this.list.clearSelection(),this.uploader&&this.uploader.configure({multiple:!this.isSelecting()||!this.options.selectAfterUpload}),this.isSelecting()?(this.list.setPrimaryFilter(this.options.select.filter),this.list.clearSecondaryFilter(),this.filters.hideAllTypesExcept(this.options.select.id),this.filters.selectFilter(this.options.select.id)):(this.filters.showAllTypes(),this.list.clearPrimaryFilter(),this.filters.selectDefaultFilter()),this.scrollShadow&&this.scrollShadow.sync())},layout:function(){var t=this.sidebarElement.width();this.contentElement.css({width:this.domElement.width()-t,left:t,paddingLeft:0}),this.list&&this.list.layout()},select:function(t){this.selected.dispatch(t)},isSelecting:function(){return!!this.options.select},isEditable:function(){return!!this.options.editable},onFilterChanged:function(t,e){this.list.setSecondaryFilter(t,e)},onUploadEnqueued:function(t){var e=this.filters.getSelectedFilterData();e.type===SL.components.medialibrary.Filters.FILTER_TYPE_TAG&&t.uploadCompleted.add(function(){this.tags.addTagTo(e.tag,[t])}.bind(this))},onUploadStarted:function(t){this.isSelecting()&&this.options.selectAfterUpload&&this.select(t)},onUploadCompleted:function(t){this.media.push(t)},onTagsChanged:function(){this.scrollShadow&&this.scrollShadow.sync()}}),SL("components.medialibrary").MediaLibrary=SL.components.popup.Popup.extend({TYPE:"media-library",init:function(t){this._super($.extend({title:"Media Library",width:1110,height:660,singleton:!0},t)),this.selected=new signals.Signal},render:function(){if(this._super(),this.innerElement.addClass("media-library"),this.userPage=new SL.components.medialibrary.MediaLibraryPage(new SL.collections.Media,new SL.collections.MediaTags),this.userPage.selected.add(this.onMediaSelected.bind(this)),this.userPage.load(),SL.current_user.isEnterprise()){var t=new SL.collections.TeamMedia;this.headerTabs=$(['<div class="media-library-header-tabs">','<div class="media-library-header-tab user-tab">Your Media</div>','<div class="media-library-header-tab team-tab" data-tooltip-alignment="r">Team Media</div>',"</div>"].join("")),this.userTab=this.headerTabs.find(".user-tab"),this.teamTab=this.headerTabs.find(".team-tab"),this.userTab.on("vclick",this.showUserPage.bind(this)),this.teamTab.on("vclick",this.showTeamPage.bind(this)),this.innerElement.addClass("has-header-tabs"),this.headerTitleElement.replaceWith(this.headerTabs),t.loadCompleted.add(function(){!SL.current_user.isEnterpriseManager()&&t.isEmpty()&&(this.teamTab.addClass("is-disabled"),this.teamTab.attr("data-tooltip","Your team doesn't have any shared media yet.<br>Only admins can upload team media."))}.bind(this)),t.loadFailed.add(function(){this.teamTab.attr("data-tooltip","Failed to load")}.bind(this)),this.teamPage=new SL.components.medialibrary.MediaLibraryPage(t,new SL.collections.TeamMediaTags,{editable:SL.current_user.isEnterpriseManager(),selectAfterUpload:!1}),this.teamPage.selected.add(this.onMediaSelected.bind(this)),this.teamPage.load()}this.showUserPage()},showUserPage:function(){this.currentPage=this.userPage,this.teamPage&&(this.teamPage.hide(),this.teamTab.removeClass("is-selected"),this.userTab.addClass("is-selected")),this.userPage.show(this.bodyElement),this.userPage.configure(this.options),this.refresh(),this.layout()},showTeamPage:function(){this.currentPage=this.teamPage,this.userPage.hide(),this.userTab.removeClass("is-selected"),this.teamPage.show(this.bodyElement),this.teamPage.configure(this.options),this.teamTab.addClass("is-selected"),this.refresh(),this.layout()},open:function(t){t=$.extend({select:null},t),this._super(t),this.currentPage.configure(t),this.currentPage.bind(),this.refresh(),this.layout()},close:function(){this._super.apply(this,arguments),this.selected.removeAll(),this.currentPage.unbind()},layout:function(){this._super.apply(this,arguments),this.currentPage.layout()},refresh:function(){this.currentPage.refresh()},isSelecting:function(){return!!this.options.select},onMediaSelected:function(t){this.isSelecting()?this.selected.dispatch(t):SL.editor.controllers.Blocks.add({type:"image",afterInit:function(e){e.setImageModel(t)}}),this.close()}}),SL("components.medialibrary").Uploader=Class.extend({MAX_CONCURRENT_UPLOADS:2,FILE_FORMATS:[{validator:/image.*/,maxSize:SL.config.MAX_IMAGE_UPLOAD_SIZE}],init:function(t){this.media=t,this.options={multiple:!0},this.queue=new SL.collections.Collection,this.render(),this.renderInput(),this.bind()},bind:function(){this.onUploadCompleted=this.onUploadCompleted.bind(this),this.onUploadFailed=this.onUploadFailed.bind(this),this.uploadEnqueued=new signals.Signal,this.uploadStarted=new signals.Signal,this.uploadCompleted=new signals.Signal},render:function(){this.domElement=$('<div class="media-library-uploader">'),this.uploadButton=$('<div class="media-library-uploader-button">Upload <span class="icon i-cloud-upload2"></span></div>'),this.uploadButton.appendTo(this.domElement),this.uploadList=$('<div class="media-library-uploader-list">'),this.uploadList.appendTo(this.domElement)},renderInput:function(){this.fileInput&&this.fileInput.remove(),this.fileInput=$('<input class="file-input" type="file">'),this.fileInput.on("change",this.onInputChanged.bind(this)),this.fileInput.appendTo(this.uploadButton),this.options.multiple?this.fileInput.attr("multiple","multiple"):this.fileInput.removeAttr("multiple","multiple")},configure:function(t){this.options=$.extend(this.options,t),this.renderInput()},appendTo:function(t){this.domElement.appendTo(t)},isUploading:function(){return this.queue.some(function(t){return t.isUploading()})},validateFile:function(t){var e="number"==typeof t.size?t.size/1024:0;return this.FILE_FORMATS.some(function(i){return t.type.match(i.validator)?i.maxSize&&e>i.maxSize?!1:!0:!1})},enqueue:function(t){if(this.queue.size()>=100)return SL.notify("Upload queue is full, please wait","negative"),!1;var e=new SL.models.Media(null,this.media.crud,t);e.uploaderElement=$(['<div class="media-library-uploader-item">','<div class="item-text">','<span class="status"><span class="icon i-clock"></span></span>','<span class="filename">'+(t.name||"untitled")+"</span>","</div>",'<div class="item-progress">','<span class="bar"></span>',"</div>","</div>"].join("")),e.uploaderElement.appendTo(this.uploadList),setTimeout(e.uploaderElement.addClass.bind(e.uploaderElement,"animate-in"),1),e.uploadCompleted.add(this.onUploadCompleted),e.uploadFailed.add(this.onUploadFailed),e.uploadProgressed.add(function(t){var i="scaleX("+t+")";e.uploaderElement.find(".bar").css({"-webkit-transform":i,"-moz-transform":i,transform:i})}.bind(this)),this.queue.push(e),this.uploadEnqueued.dispatch(e),this.checkQueue()},dequeue:function(t,e,i){var n=t.uploaderElement;n&&(t.uploaderElement=null,n.addClass(e),n.find(".status").html(i),setTimeout(function(){n.removeClass("animate-in").addClass("animate-out"),setTimeout(n.remove.bind(n),500)}.bind(this),2e3),this.queue.remove(t),t.isUploaded()&&this.uploadCompleted.dispatch(t))},checkQueue:function(){this.queue.forEach(function(t){t.isUploaded()?this.dequeue(t,"completed",'<span class="icon i-checkmark"></span>'):t.isUploadFailed()&&this.dequeue(t,"failed",'<span class="icon i-denied"></span>')}.bind(this));var t=0;this.queue.forEach(function(e){t<this.MAX_CONCURRENT_UPLOADS&&(e.isUploading()?t+=1:e.isWaitingToUpload()&&(e.upload(),e.uploaderElement.find(".status").html('<div class="upload-spinner"></div>'),t+=1,this.uploadStarted.dispatch(e)))}.bind(this)),this.domElement.toggleClass("is-uploading",t>0)},onUploadCompleted:function(){this.checkQueue()},onUploadFailed:function(t){SL.notify(t||"An error occurred while uploading your image.","negative"),this.checkQueue()},onInputChanged:function(t){var e=SL.util.toArray(this.fileInput.get(0).files);e=e.filter(this.validateFile.bind(this)),e.length?(e.forEach(this.enqueue.bind(this)),SL.analytics.trackEditor("Media: Upload file","file input")):SL.notify("Invalid file. We support <strong>PNG</strong>, <strong>JPG</strong>, <strong>GIF</strong> and <strong>SVG</strong> files up to <strong>10 MB</strong>","negative"),this.renderInput(),t.preventDefault()},destroy:function(){this.queue=null,this.uploadStarted.dispose(),this.uploadCompleted.dispose()}}),SL("components").Menu=Class.extend({init:function(t){if(this.config=$.extend({alignment:"auto",anchorSpacing:10,minWidth:0,offsetX:0,offsetY:0,options:[],showOnHover:!1,showOnHoverCondition:null,mouseLeaveDelay:150,destroyOnHide:!1,touch:/(iphone|ipod|ipad|android|windows\sphone)/gi.test(navigator.userAgent)},t),this.config.anchor=$(this.config.anchor),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.layout=this.layout.bind(this),this.toggle=this.toggle.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseDown=this.onDocumentMouseDown.bind(this),this.onDocumentKeydown=this.onDocumentKeydown.bind(this),this.onAnchorFocus=this.onAnchorFocus.bind(this),this.onAnchorBlur=this.onAnchorBlur.bind(this),this.onAnchorFocusKeyDown=this.onAnchorFocusKeyDown.bind(this),this.submenus=[],this.destroyed=new signals.Signal,this.render(),this.renderList(),this.config.anchor.length)if(this.config.touch)this.config.anchor.addClass("menu-show-on-touch"),this.config.anchor.on("touchstart pointerdown",function(t){t.preventDefault(),this.toggle()}.bind(this)),this.config.anchor.on("click",function(t){t.preventDefault()}.bind(this));else{if(this.config.showOnHover){this.config.anchor.on("focus",this.onAnchorFocus),this.config.anchor.on("blur",this.onAnchorBlur),this.config.anchor.on("mouseover",this.onMouseOver);try{this.config.anchor.is(":hover")&&this.onMouseOver()}catch(e){}}this.config.anchor.on("click",this.toggle)}},render:function(){this.domElement=$('<div class="sl-menu">'),this.listElement=$('<div class="sl-menu-list">').appendTo(this.domElement),this.arrowElement=$('<div class="sl-menu-arrow">').appendTo(this.domElement),this.arrowFillElement=$('<div class="sl-menu-arrow-fill">').appendTo(this.arrowElement),this.hitareaElement=$('<div class="sl-menu-hitarea">').appendTo(this.domElement),this.listElement.css("minWidth",this.config.minWidth+"px")},renderList:function(){this.config.options.forEach(function(t){var e;"string"==typeof t.url?(e=$('<a class="sl-menu-item" href="'+t.url+'">'),"string"==typeof t.urlTarget&&e.attr("target",t.urlTarget)):e=$('<div class="sl-menu-item">'),e.html('<span class="label">'+t.label+"</span>"),e.data("callback",t.callback),e.appendTo(this.listElement),e.on("click",function(t){var e=$(t.currentTarget),i=e.data("callback");"function"==typeof i&&i.apply(null),this.hide()}.bind(this)),t.icon&&e.append('<span class="icon i-'+t.icon+'"></span>'),t.attributes&&e.attr(t.attributes),t.iconHTML&&e.append(t.iconHTML),t.submenu&&!this.config.touch&&this.submenus.push(new SL.components.Menu({anchor:e,anchorSpacing:10,alignment:t.submenuAlignment||"rl",minWidth:t.submenuWidth||160,showOnHover:!0,options:t.submenu}))}.bind(this)),this.listElement.find(".sl-menu-item:not(:last-child)").after('<div class="sl-menu-divider">')},bind:function(){this.config.showOnHover||SL.keyboard.keydown(this.onDocumentKeydown),$(window).on("resize scroll",this.layout),$(document).on("mousedown touchstart pointerdown",this.onDocumentMouseDown)},unbind:function(){this.config.showOnHover||SL.keyboard.release(this.onDocumentKeydown),SL.keyboard.release(this.onAnchorFocusKeyDown),$(window).off("resize scroll",this.layout),$(document).off("mousedown touchstart pointerdown",this.onDocumentMouseDown)},layout:function(){if(this.config.anchor.length){var t=this.config.anchor.offset(),e=this.config.anchorSpacing,i=this.config.alignment,n=$(window).scrollLeft(),s=$(window).scrollTop(),o=t.left+this.config.offsetX,r=t.top+this.config.offsetY,a=this.config.anchor.outerWidth(),l=this.config.anchor.outerHeight(),c=this.domElement.outerWidth(),h=this.domElement.outerHeight(),d=1,u=c/2,p=c/2,m=8;switch("auto"===i&&(i=t.top-(h+e+m)<s?"b":"t"),"rl"===i&&(i=t.left+a+e+m+c<window.innerWidth?"r":"l"),this.domElement.attr("data-alignment",i),i){case"t":o+=(a-c)/2,r-=h+e;break;case"b":o+=(a-c)/2,r+=l+e;break;case"l":o-=c+e,r+=(l-h)/2;break;case"r":o+=a+e,r+=(l-h)/2}switch(o=Math.min(Math.max(o,n+e),$(window).width()+n-c-e),r=Math.min(Math.max(r,s+e),window.innerHeight+s-h-e),i){case"t":u=t.left-o+a/2,p=h-2*d;break;case"b":u=t.left-o+a/2,p=-m;break;case"l":u=c-2*d,p=t.top-r+l/2;break;case"r":u=-m,p=t.top-r+l/2}this.domElement.css({left:Math.round(o),top:Math.round(r)}),this.arrowElement.css({left:Math.round(u),top:Math.round(p)}),this.hitareaElement.css({top:-e,right:-e,bottom:-e,left:-e})}},focus:function(t){var e=this.listElement.find(".focus");if(e.length){var i=t>0?e.nextAll(".sl-menu-item").first():e.prevAll(".sl-menu-item").first();i.length&&(e.removeClass("focus"),i.addClass("focus"))}else this.listElement.find(".sl-menu-item").first().addClass("focus")},show:function(){this.domElement.removeClass("visible").appendTo(document.body),setTimeout(function(){this.domElement.addClass("visible")}.bind(this),1),this.config.anchor.addClass("menu-is-open"),this.layout(),this.bind()},hide:function(){this.listElement.find(".focus").removeClass("focus"),this.config.anchor.removeClass("menu-is-open"),this.domElement.detach(),this.unbind(),$(document).off("mousemove",this.onDocumentMouseMove),this.isMouseOver=!1,clearTimeout(this.hideTimeout),this.config.destroyOnHide===!0&&this.destroy()},toggle:function(){this.isVisible()?this.hide():this.show()},isVisible:function(){return this.domElement.parent().length>0},hasSubMenu:function(){return this.submenus.length>0},destroy:function(){this.destroyed.dispatch(),this.destroyed.dispose(),this.domElement.remove(),this.unbind(),this.config.anchor.off("click",this.toggle),this.config.anchor.off("hover",this.toggle),this.submenus.forEach(function(t){t.destroy()})},onDocumentKeydown:function(t){if(27===t.keyCode&&(this.hide(),t.preventDefault()),13===t.keyCode){var e=this.listElement.find(".focus");e.length&&(e.trigger("vclick"),t.preventDefault())}else 38===t.keyCode?(this.focus(-1),t.preventDefault()):40===t.keyCode?(this.focus(1),t.preventDefault()):9===t.keyCode&&t.shiftKey?(this.focus(-1),t.preventDefault()):9===t.keyCode&&(this.focus(1),t.preventDefault())},onMouseOver:function(){this.isMouseOver||SL.pointer.isDown()||("function"!=typeof this.config.showOnHoverCondition||this.config.showOnHoverCondition())&&($(document).on("mousemove",this.onDocumentMouseMove),this.hideTimeout=-1,this.isMouseOver=!0,this.show())},onDocumentMouseMove:function(t){var e=$(t.target),i=0===e.closest(this.domElement).length&&0===e.closest(this.config.anchor).length;this.hasSubMenu()&&(i=0===e.closest(".sl-menu").length&&0===e.closest(this.config.anchor).length),i?-1===this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(this.hide,this.config.mouseLeaveDelay)):this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=-1)},onDocumentMouseDown:function(t){var e=$(t.target);this.isVisible()&&0===e.closest(this.domElement).length&&0===e.closest(this.config.anchor).length&&this.hide()},onAnchorFocus:function(){this.isMouseOver||SL.keyboard.keydown(this.onAnchorFocusKeyDown)},onAnchorBlur:function(){SL.keyboard.release(this.onAnchorFocusKeyDown)},onAnchorFocusKeyDown:function(t){return this.isMouseOver||13!==t.keyCode&&32!==t.keyCode&&40!==t.keyCode?!0:(this.show(),this.focus(),SL.keyboard.release(this.onAnchorFocusKeyDown),!1)}}),SL("components").Meter=Class.extend({init:function(t){this.domElement=$(t),this.labelElement=$('<div class="label">').appendTo(this.domElement),this.progressElement=$('<div class="progress">').appendTo(this.domElement),this.read(),this.paint()},read:function(){switch(this.unit="",this.type=this.domElement.attr("data-type"),this.value=parseInt(this.domElement.attr("data-value"),10)||0,this.total=parseInt(this.domElement.attr("data-total"),10)||0,this.type){case"storage":var t=1024,e=1024*t,i=1024*e;this.value<e&&this.total<e&&(this.value=Math.round(this.value/t),this.total=Math.round(this.total/t),this.unit="KB"),this.value<i&&this.total<i?(this.value=Math.round(this.value/e),this.total=Math.round(this.total/e),this.unit="MB"):(this.value=(this.value/i).toFixed(2),this.total=(this.total/i).toFixed(2),this.unit="GB")}},paint:function(){var t=Math.min(Math.max(this.value/this.total,0),1)||0;this.labelElement.text(this.value+" / "+this.total+" "+this.unit),this.progressElement.width(100*t+"%"),0===this.total?this.domElement.attr("data-state","invalid"):t>.9?this.domElement.attr("data-state","negative"):t>.7?this.domElement.attr("data-state","warning"):this.domElement.attr("data-state","positive")}}),SL("components").Notification=Class.extend({init:function(t,e){this.html=t,this.options=$.extend({type:"",duration:2500+15*this.html.length,optional:!0},e),"negative"===this.options.type&&(this.options.duration=1.5*this.options.duration),this.destroyed=new signals.Signal,this.hideTimeout=-1,this.render(),this.bind(),this.show(),this.layout()},render:function(){0===$(".sl-notifications").length&&$(document.body).append('<div class="sl-notifications"></div>'),this.domElement=$('<p class="sl-notification">').html(this.html).addClass(this.options.type).appendTo($(".sl-notifications"))},bind:function(){this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this),this.options.optional&&(this.domElement.on("mouseenter",this.stopTimeout.bind(this)),this.domElement.on("mouseleave",this.startTimeout.bind(this)),this.domElement.on("click",this.destroy.bind(this)))},startTimeout:function(){this.stopTimeout(),this.hideTimeout=setTimeout(this.hide,this.options.duration)},stopTimeout:function(){clearTimeout(this.hideTimeout)},show:function(){this.isDestroyed!==!0&&setTimeout(function(){this.domElement.addClass("show"),this.options&&this.options.optional&&this.startTimeout()}.bind(this),1)},hide:function(){this.domElement.addClass("hide"),this.hideTimeout=setTimeout(this.destroy.bind(this),400),this.layout()},layout:function(){var t=0;$(".sl-notification:not(.hide)").get().reverse().forEach(function(e){t-=$(e).outerHeight()+10,e.style.top=t+"px"})},destroy:function(){clearTimeout(this.hideTimeout),this.isDestroyed=!0,this.options=null,this.domElement.remove(),this.layout(),this.destroyed.dispatch(),this.destroyed.dispose(),this.destroy=function(){}}}),SL.components.RetryNotification=SL.components.Notification.extend({init:function(t,e){e=$.extend({optional:!1},e),this._super(t,e),this.retryClicked=new signals.Signal},render:function(){this._super(),this.retryOptions=$('<div class="retry-options"></div>'),this.retryOptions.appendTo(this.domElement),this.retryMessage=$('<div class="retry-countdown"></div>'),this.retryButton=$('<button class="button white retry-button">Retry</button>'),this.retryButton.on("vclick",this.onRetryClicked.bind(this)),this.retryButton.appendTo(this.retryOptions)},bind:function(){this._super(),this.updateCountdown=this.updateCountdown.bind(this)},startCountdown:function(t){clearInterval(this.updateInterval),this.retryStart=Date.now(),this.retryDuration=t,this.updateInterval=setInterval(this.updateCountdown,250),this.updateCountdown(),this.retryMessage.prependTo(this.retryOptions),this.layout()},updateCountdown:function(){var t=this.retryDuration-(Date.now()-this.retryStart);t/=1e3,this.retryMessage.text(this.retryDuration<2e3||0>=t?"Retrying...":"Retrying in "+Math.ceil(t)+"s")},disableCountdown:function(){clearInterval(this.updateInterval),this.retryMessage.remove(),this.layout()},onRetryClicked:function(){this.retryClicked.dispatch()},destroy:function(){clearInterval(this.updateInterval),this.retryClicked&&(this.retryClicked.dispose(),this.retryClicked=null),this._super()}}),SL.notify=function(t,e){return $(".sl-notifications .sl-notification").last().html()===t&&$(".sl-notifications .sl-notification").last().remove(),"string"==typeof e&&(e={type:e}),new SL.components.Notification(t,e)},SL("components").Prompt=Class.extend({init:function(t){this.config=$.extend({type:"custom",data:null,anchor:null,title:null,subtitle:null,optional:!0,alignment:"auto",maxWidth:null,offsetX:0,offsetY:0,className:null,confirmOnEnter:!0,destroyAfterConfirm:!0,confirmLabel:"OK",cancelLabel:"Cancel",confirmButton:null,cancelButton:null,hoverTarget:null,hoverClass:"hover"},t),this.onBackgroundClicked=this.onBackgroundClicked.bind(this),this.onDocumentKeydown=this.onDocumentKeydown.bind(this),this.onPromptCancelClicked=this.onPromptCancelClicked.bind(this),this.onPromptConfirmClicked=this.onPromptConfirmClicked.bind(this),this.checkInputStatus=this.checkInputStatus.bind(this),this.layout=this.layout.bind(this),this.confirmed=new signals.Signal,this.canceled=new signals.Signal,this.destroyed=new signals.Signal,this.render()},render:function(){this.domElement=$('<div class="sl-prompt" data-type="'+this.config.type+'">'),this.innerElement=$('<div class="sl-prompt-inner">').appendTo(this.domElement),this.arrowElement=$('<div class="sl-prompt-arrow">').appendTo(this.innerElement),this.config.title&&(this.titleElement=$('<h3 class="title">').html(this.config.title).appendTo(this.innerElement)),this.config.subtitle&&(this.subtitleElement=$('<h4 class="subtitle">').html(this.config.subtitle).appendTo(this.innerElement),this.titleElement&&this.titleElement.addClass("has-subtitle")),this.config.className&&this.domElement.addClass(this.config.className),this.config.html&&this.innerElement.append(this.config.html),"select"===this.config.type?this.renderSelect():"list"===this.config.type?(this.renderList(),this.renderButtons(this.config.multiselect,"boolean"==typeof this.config.cancelButton?this.config.cancelButton:!this.config.multiselect)):"input"===this.config.type?(this.renderInput(),this.renderButtons(!0,!0)):"range"===this.config.type?(this.renderRange(),this.renderButtons(!0,!0)):this.renderButtons(this.config.confirmButton,this.config.cancelButton)},renderSelect:function(){this.config.data.forEach(function(t){var e=$('<a class="item button outline l">').html(t.html);e.data("callback",t.callback),e.appendTo(this.innerElement),e.on("vclick",function(t){var e=$(t.currentTarget).data("callback");"function"==typeof e&&e.apply(null),this.destroy(),t.preventDefault()}.bind(this)),t.focused===!0&&e.addClass("focus"),t.selected===!0&&e.addClass("selected"),"string"==typeof t.className&&(e.addClass(t.className),/(negative|positive)/g.test(t.className)&&e.removeClass("outline"))}.bind(this)),this.domElement.attr("data-length",this.config.data.length)},renderList:function(){this.listElement=$('<div class="list">').appendTo(this.innerElement),this.config.data.forEach(function(t){var e=$('<div class="item">');e.html('<span class="title">'+(t.title?t.title:t.value)+'</span><span class="checkmark icon i-checkmark"></span>'),e.data({callback:t.callback,value:t.value}),e.appendTo(this.listElement),e.on("click",function(e){var i=$(e.currentTarget),n=i.data("callback"),s=i.data("value");this.config.multiselect&&(i.toggleClass("selected"),t.exclusive?(i.addClass("selected"),i.siblings().removeClass("selected")):i.siblings().filter(".exclusive").removeClass("selected")),"function"==typeof n&&n.apply(null,[s,i.hasClass("selected")]),this.config.multiselect||(this.confirmed.dispatch(s),this.destroy())}.bind(this)),t.focused===!0&&e.addClass("focus"),t.selected===!0&&e.addClass("selected"),t.exclusive===!0&&e.addClass("exclusive"),"string"==typeof t.className&&e.addClass(t.className)}.bind(this))},renderInput:function(){this.config.data.multiline===!0?this.inputElement=$('<textarea cols="40" rows="8">'):(this.inputElement=$('<input type="text">'),"number"==typeof this.config.data.width&&(this.inputElement.css("width",this.config.data.width),this.titleElement&&this.titleElement.css("max-width",this.config.data.width),this.subtitleElement&&this.subtitleElement.css("max-width",this.config.data.width))),this.config.data.value&&this.inputElement.val(this.config.data.value),this.config.data.placeholder&&this.inputElement.attr("placeholder",this.config.data.placeholder),this.config.data.maxlength&&this.inputElement.attr("maxlength",this.config.data.maxlength),this.inputWrapperElement=$('<div class="input-wrapper">').append(this.inputElement),this.inputWrapperElement.appendTo(this.innerElement)
},renderRange:function(){this.rangeInput=new SL.components.Range(this.config.data),this.rangeInput.appendTo(this.innerElement),"number"==typeof this.config.data.width&&(this.titleElement&&this.titleElement.css("max-width",this.config.data.width),this.subtitleElement&&this.subtitleElement.css("max-width",this.config.data.width))},renderButtons:function(t,e){var i=[];e&&this.config.optional&&this.config.cancelLabel&&i.push('<button class="button l outline prompt-cancel">'+this.config.cancelLabel+"</button>"),t&&this.config.confirmLabel&&i.push('<button class="button l prompt-confirm">'+this.config.confirmLabel+"</button>"),i.length&&(this.footerElement=$('<div class="footer">'+i.join("")+"</div>").appendTo(this.innerElement))},bind:function(){$(window).on("resize",this.layout),this.domElement.on("vclick",this.onBackgroundClicked),SL.keyboard.keydown(this.onDocumentKeydown),"hidden"!==$("html").css("overflow")&&$(window).on("scroll",this.layout),this.domElement.find(".prompt-cancel").on("vclick",this.onPromptCancelClicked),this.domElement.find(".prompt-confirm").on("vclick",this.onPromptConfirmClicked),this.inputElement&&this.inputElement.on("input",this.checkInputStatus)},unbind:function(){$(window).off("resize scroll",this.layout),this.domElement.off("vclick",this.onBackgroundClicked),SL.keyboard.release(this.onDocumentKeydown),this.domElement.find(".prompt-cancel").off("vclick",this.onPromptCancelClicked),this.domElement.find(".prompt-confirm").off("vclick",this.onPromptConfirmClicked),this.inputElement&&this.inputElement.off("input",this.checkInputStatus)},layout:function(){var t=10,e=$(window).width(),i=window.innerHeight,n="number"==typeof this.config.maxWidth?this.config.maxWidth:e-2*t;this.innerElement.css({"max-width":n,"max-height":i-2*t});var s=this.innerElement.outerWidth(),o=this.innerElement.outerHeight(),r=$(this.config.anchor);if(r.length){var a=r.offset(),l=15,c=this.config.alignment,h=$(window).scrollLeft(),d=$(window).scrollTop(),u=a.left-h,p=a.top-d;u+=this.config.offsetX,p+=this.config.offsetY;var m=r.outerWidth(),f=r.outerHeight(),g=s/2,v=s/2,y=10,b=!0;switch("auto"===c&&(c=a.top-(o+l+y)<d?"b":"t"),this.domElement.attr("data-alignment",c),c){case"t":u+=(m-s)/2,p-=o+l;break;case"b":u+=(m-s)/2,p+=f+l;break;case"l":u-=s+l,p+=(f-o)/2;break;case"r":u+=m+l,p+=(f-o)/2}var S=p;switch(u=Math.max(Math.min(u,e-s-t),t),p=Math.max(Math.min(p,i-o-t),t),u=Math.round(u),p=Math.round(p),"b"===c&&-f-y>p-S?b=!1:"t"===c&&p-S>f+y&&(b=!1),c){case"t":g=a.left-u-h+m/2,g=Math.max(Math.min(g,s-y),y),v=o;break;case"b":g=a.left-u-h+m/2,g=Math.max(Math.min(g,s-y),y),v=-y;break;case"l":g=s,v=a.top-p-d+f/2,v=Math.max(Math.min(v,o-y),y);break;case"r":g=-y,v=a.top-p-d+f/2,v=Math.max(Math.min(v,o-y),y)}this.innerElement.css({left:u,top:p}),this.arrowElement.css({left:g,top:v}).toggle(b)}else this.innerElement.css({left:Math.round((e-s)/2),top:Math.round(.4*(i-o))}),this.arrowElement.hide()},focus:function(t){var e=this.innerElement.find(".focus");if(e.length||(e=this.innerElement.find(".selected")),e.length){var i=t>0?e.next(".item"):e.prev(".item");i.length&&(e.removeClass("focus"),i.addClass("focus"))}else this.innerElement.find(".item").first().addClass("focus")},show:function(){var t=$(this.config.anchor);t.length&&t.addClass("focus"),$(this.config.hoverTarget).addClass(this.config.hoverClass),this.domElement.removeClass("visible").appendTo(document.body),setTimeout(function(){this.domElement.addClass("visible")}.bind(this),1),this.layout(),this.bind(),this.inputElement&&(this.checkInputStatus(),this.inputElement.focus())},hide:function(){var t=$(this.config.anchor);t.length&&t.removeClass("focus"),$(this.config.hoverTarget).removeClass(this.config.hoverClass),this.domElement.detach(),this.unbind()},showOverlay:function(t,e,i,n){return clearTimeout(this.overlayTimeout),this.overlay||(this.overlay=$('<div class="sl-prompt-overlay">')),this.overlay.appendTo(this.innerElement),this.overlay.html(i+"<h3>"+e+"</h3>"),this.overlay.attr("data-status",t||"neutral"),this.overlay.addClass("visible"),new Promise(function(t){n?this.overlayTimeout=setTimeout(function(){this.overlay.removeClass("visible"),t()}.bind(this),n):t()}.bind(this))},getValue:function(){var t=void 0;return"input"===this.config.type?t=this.inputElement.val():"range"===this.config.type&&(t=this.rangeInput.getValue()),t},getDOMElement:function(){return this.domElement},cancel:function(){if("input"===this.config.type&&this.config.data.confirmBeforeDiscard){var t=this.config.data.value||"",e=this.getValue()||"";e!==t?SL.prompt({title:"Discard unsaved changes?",type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Discard</h3>",selected:!0,className:"negative",callback:function(){this.canceled.dispatch(this.getValue()),this.destroy()}.bind(this)}]}):(this.canceled.dispatch(this.getValue()),this.destroy())}else this.canceled.dispatch(this.getValue()),this.destroy()},confirm:function(){this.confirmed.dispatch(this.getValue()),this.config.destroyAfterConfirm&&this.destroy()},checkInputStatus:function(){if(this.config.data.maxlength&&!this.config.data.maxlengthHidden){var t=this.inputWrapperElement.find(".input-status");0===t.length&&(t=$('<div class="input-status">').appendTo(this.inputWrapperElement));var e=this.inputElement.val().length,i=this.config.data.maxlength;t.text(e+"/"+i),t.toggleClass("negative",e>.95*i),this.config.data.multiline||this.inputElement.css("padding-right",t.outerWidth()+5)}},destroy:function(){this.destroyed.dispatch(),this.destroyed.dispose();var t=$(this.config.anchor);t.length&&t.removeClass("focus"),$(this.config.hoverTarget).removeClass(this.config.hoverClass),this.domElement.remove(),this.unbind(),this.confirmed.dispose(),this.canceled.dispose()},onBackgroundClicked:function(t){this.config.optional&&$(t.target).is(this.domElement)&&(this.cancel(),t.preventDefault())},onPromptCancelClicked:function(t){this.cancel(),t.preventDefault()},onPromptConfirmClicked:function(t){this.confirm(),t.preventDefault()},onDocumentKeydown:function(t){if(27===t.keyCode)return this.config.optional&&this.cancel(),t.preventDefault(),!1;if("select"===this.config.type||"list"===this.config.type)if(13===t.keyCode){var e=this.innerElement.find(".focus");0===e.length&&(e=this.innerElement.find(".selected")),e.length&&(e.trigger("click"),t.preventDefault())}else 37===t.keyCode||38===t.keyCode?(this.focus(-1),t.preventDefault()):39===t.keyCode||40===t.keyCode?(this.focus(1),t.preventDefault()):9===t.keyCode&&t.shiftKey?(this.focus(-1),t.preventDefault()):9===t.keyCode&&(this.focus(1),t.preventDefault());return"input"===this.config.type&&(13!==t.keyCode||this.config.data.multiline||this.onPromptConfirmClicked(t)),"custom"===this.config.type&&this.config.confirmOnEnter&&13===t.keyCode&&this.onPromptConfirmClicked(t),!0}}),SL.prompt=function(t){var e=new SL.components.Prompt(t);return e.show(),e},SL("components.prompts").DeckVisibility=SL.components.Prompt.extend({init:function(t,e){this.deckModel=t,this.visibilitySelected=new signals.Signal,this._super($.extend({type:"select",className:"sl-visibility-prompt",data:this.getVisibilityOptions(),persistVisibility:!0},e))},getVisibilityOptions:function(){var t=[],e=SL.current_user.isEnterprise(),i=!SL.current_user.isEnterprise()||SL.current_team.allowPublicDecks();return t.push({html:SL.locale.get("DECK_VISIBILITY_CHANGE_SELF"),selected:this.deckModel.get("visibility")===SL.models.Deck.VISIBILITY_SELF,callback:this.selectVisibility.bind(this,SL.models.Deck.VISIBILITY_SELF)}),e&&t.push({html:SL.locale.get("DECK_VISIBILITY_CHANGE_TEAM"),selected:this.deckModel.get("visibility")===SL.models.Deck.VISIBILITY_TEAM,className:"divider",callback:this.selectVisibility.bind(this,SL.models.Deck.VISIBILITY_TEAM)}),t.push(i?{html:SL.locale.get("DECK_VISIBILITY_CHANGE_ALL"),selected:this.deckModel.get("visibility")===SL.models.Deck.VISIBILITY_ALL,callback:this.selectVisibility.bind(this,SL.models.Deck.VISIBILITY_ALL)}:{html:SL.locale.get("DECK_VISIBILITY_SHARE_LINK"),callback:function(){SL.popup.open(SL.components.decksharer.DeckSharer,{deck:this.deckModel})}.bind(this)}),t},selectVisibility:function(t){if(this.config.persistVisibility){var e=$.ajax({type:"POST",url:SL.config.AJAX_PUBLISH_DECK(this.deckModel.get("id")),context:this,data:{visibility:t}}).done(function(t){t.deck.visibility===SL.models.Deck.VISIBILITY_SELF?SL.notify(SL.locale.get("DECK_VISIBILITY_CHANGED_SELF")):t.deck.visibility===SL.models.Deck.VISIBILITY_TEAM?SL.notify(SL.locale.get("DECK_VISIBILITY_CHANGED_TEAM")):t.deck.visibility===SL.models.Deck.VISIBILITY_ALL&&SL.notify(SL.locale.get("DECK_VISIBILITY_CHANGED_ALL")),"string"==typeof t.deck.slug&&this.deckModel.set("slug",t.deck.slug),"string"==typeof t.deck.visibility&&this.deckModel.set("visibility",t.deck.visibility)}).fail(function(){SL.notify(SL.locale.get("DECK_VISIBILITY_CHANGED_ERROR"),"negative")});this.visibilitySelected.dispatch(t,e)}else this.visibilitySelected.dispatch(t)},destroy:function(){this.visibilitySelected.dispose(),this._super.apply(this,arguments)}}),SL("components").Range=Class.extend({init:function(t){this.config=$.extend({value:0,width:300,minValue:0,maxValue:100,decimals:0,unit:null},t),this.valueRange=this.config.maxValue-this.config.minValue,this.stepSize=this.valueRange<1?this.valueRange/200:1,this.changing=!1,this.mouseDownValue=0,this.mouseDownX=0,this.render(),this.bind(),this.setValue(t.value,!1)},render:function(){this.domElement=$('<div class="sl-range"></div>'),this.domElement.width(this.config.width),this.progressElement=$('<div class="sl-range-progress">').appendTo(this.domElement),this.inputElement=$('<input class="sl-range-number input-field" type="text">').appendTo(this.domElement)},bind:function(){this.changed=new signals.Signal,this.changeStarted=new signals.Signal,this.changeEnded=new signals.Signal,this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.domElement.on("vmousedown",this.onMouseDown),this.inputElement.on("input",this.onInput.bind(this)),this.inputElement.on("keydown",this.onInputKeyDown.bind(this)),this.inputElement.on("focus",this.onInputFocused.bind(this)),this.inputElement.on("blur",this.onInputBlurred.bind(this))},appendTo:function(t){this.domElement.appendTo(t)},setValue:function(t,e,i){if(this.value=Math.max(Math.min(t,this.config.maxValue),this.config.minValue),this.value=this.roundValue(this.value),!i){var n=this.value;this.config.decimals>0&&(n=n.toFixed(this.config.decimals)),this.config.unit&&(n+=this.config.unit),this.inputElement.val(n)}var s=this.valueToPercent(this.value)/100;this.progressElement.css("transform","scaleX("+s+")"),e&&this.changed.dispatch(this.value)},getValue:function(){return this.value},roundValue:function(t){var e=Math.pow(10,this.config.decimals);return Math.round(t*e)/e},valueToPercent:function(t){var e=(t-this.config.minValue)/(this.config.maxValue-this.config.minValue)*100;return Math.max(Math.min(e,100),0)},isChanging:function(){return this.changing},onChangeStart:function(){this.isChanging()||(this.domElement.addClass("is-changing"),this.changing=!0,this.changeStarted.dispatch())},onChangeEnd:function(){this.isChanging()&&(this.domElement.removeClass("is-changing"),this.changing=!1,this.changeEnded.dispatch())},onMouseDown:function(t){this.inputElement.is(":focus")||t.preventDefault(),$(document).on("vmousemove",this.onMouseMove),$(document).on("vmouseup",this.onMouseUp),this.mouseDownX=t.clientX,this.mouseDownValue=this.getValue(),this.onChangeStart()},onMouseMove:function(t){this.domElement.addClass("is-scrubbing");var e=t.clientX-this.mouseDownX;1===this.stepSize&&this.valueRange<15?e*=.25:1===this.stepSize&&this.valueRange<30&&(e*=.5),this.setValue(this.mouseDownValue+e*this.stepSize,!0),this.changed.dispatch(this.getValue())},onMouseUp:function(t){$(document).off("vmousemove",this.onMouseMove),$(document).off("vmouseup",this.onMouseUp),this.domElement.hasClass("is-scrubbing")===!1?this.onClick(t):this.onChangeEnd(),this.domElement.removeClass("is-scrubbing")},onClick:function(){this.inputElement.focus()},onInput:function(){this.setValue(parseFloat(this.inputElement.val()),!0,!0)},onInputKeyDown:function(t){var e=0;38===t.keyCode?e=this.stepSize:40===t.keyCode&&(e=-this.stepSize),e&&(t.shiftKey&&(e*=10),this.setValue(this.getValue()+e,!0),t.preventDefault())},onInputFocused:function(){this.onChangeStart()},onInputBlurred:function(){this.onChangeEnd(),this.setValue(this.getValue(),!0)},destroy:function(){$(document).off("vmousemove",this.onMouseMove),$(document).off("vmouseup",this.onMouseUp),this.changed.dispose(),this.changeStarted.dispose(),this.changeEnded.dispose(),this.domElement.remove()}}),SL("components").Resizer=Class.extend({init:function(t,e){this.domElement=$(t),this.revealElement=this.domElement.closest(".reveal"),this.options=$.extend({padding:10,preserveAspectRatio:!1,useOverlay:!1},e),this.mouse={x:0,y:0},this.mouseStart={x:0,y:0},this.origin={x:0,y:0,width:0,height:0},this.resizing=!1,this.domElement.length?(this.onAnchorMouseDown=this.onAnchorMouseDown.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),this.onElementDrop=this.onElementDrop.bind(this),this.layout=this.layout.bind(this),this.build(),this.bind(),this.layout()):console.warn("Resizer: invalid resize target.")},build:function(){this.options.useOverlay&&(this.overlay=$('<div class="editing-ui resizer-overlay"></div>').appendTo(document.body).hide()),this.anchorN=$('<div class="editing-ui resizer-anchor" data-direction="n"></div>').appendTo(document.body),this.anchorE=$('<div class="editing-ui resizer-anchor" data-direction="e"></div>').appendTo(document.body),this.anchorS=$('<div class="editing-ui resizer-anchor" data-direction="s"></div>').appendTo(document.body),this.anchorW=$('<div class="editing-ui resizer-anchor" data-direction="w"></div>').appendTo(document.body)},bind:function(){this.resizeStarted=new signals.Signal,this.resizeUpdated=new signals.Signal,this.resizeEnded=new signals.Signal,this.getAnchors().on("mousedown",this.onAnchorMouseDown),this.revealElement.on("drop",this.onElementDrop),$(document).on("keyup",this.layout),$(document).on("mouseup",this.layout),$(document).on("mousewheel",this.layout),$(document).on("DOMMouseScroll",this.layout),$(window).on("resize",this.layout)},layout:function(){if(!this.destroyIfDetached()){var t=SL.util.getRevealElementGlobalOffset(this.domElement),e=Reveal.getScale(),i=parseInt(this.domElement.css("margin-right"),10);marginBottom=parseInt(this.domElement.css("margin-bottom"),10);var n=t.x-this.options.padding,s=t.y-this.options.padding,o=(this.domElement.width()+i)*e+2*this.options.padding;height=(this.domElement.height()+marginBottom)*e+2*this.options.padding;var r=-this.anchorN.outerWidth()/2;this.anchorN.css({left:n+o/2+r,top:s+r}),this.anchorE.css({left:n+o+r,top:s+height/2+r}),this.anchorS.css({left:n+o/2+r,top:s+height+r}),this.anchorW.css({left:n+r,top:s+height/2+r}),this.overlay&&this.overlay.css({left:n,top:s,width:o,height:height})}},show:function(){this.getAnchors().addClass("visible"),this.layout()},hide:function(){this.getAnchors().removeClass("visible")},destroyIfDetached:function(){return 0===this.domElement.closest("body").length?(this.destroy(),!0):!1},getOptions:function(){return this.options},getAnchors:function(){return this.anchorN.add(this.anchorE).add(this.anchorS).add(this.anchorW)},isResizing:function(){return!!this.resizing},isDestroyed:function(){return!!this.destroyed},onAnchorMouseDown:function(t){var e=$(t.target).attr("data-direction");if(e){t.preventDefault(),this.resizeDirection=e,this.mouseStart.x=t.clientX,this.mouseStart.y=t.clientY;var i=SL.util.getRevealElementOffset(this.domElement);this.origin.x=i.x,this.origin.y=i.y,this.origin.width=this.domElement.width(),this.origin.height=this.domElement.height(),this.overlay&&this.overlay.show(),this.resizing=!0,$(document).on("mousemove",this.onDocumentMouseMove),$(document).on("mouseup",this.onDocumentMouseUp),this.resizeStarted.dispatch()}},onDocumentMouseMove:function(t){if(!this.destroyIfDetached()&&(this.mouse.x=t.clientX,this.mouse.y=t.clientY,this.resizing)){var e=Reveal.getScale(),i=(this.mouse.x-this.mouseStart.x)/e,n=(this.mouse.y-this.mouseStart.y)/e,s="",o="";switch(this.resizeDirection){case"e":s=Math.max(this.origin.width+i,1);break;case"w":s=Math.max(this.origin.width-i,1);break;case"s":o=Math.max(this.origin.height+n,1);break;case"n":o=Math.max(this.origin.height-n,1)}if(this.options.preserveAspectRatio?(""===s&&(s=this.origin.width*(o/this.origin.height)),""===o&&(o=this.origin.height*(s/this.origin.width))):(""===s&&(s=this.domElement.css("width")),""===o&&(o=this.domElement.css("height"))),"absolute"===this.domElement.css("position")&&("n"===this.resizeDirection||"w"===this.resizeDirection))switch(this.resizeDirection){case"w":this.domElement.css("left",Math.round(this.origin.x+i));break;case"n":this.domElement.css("top",Math.round(this.origin.y+n))}this.domElement.css({width:s?s:"",height:o?o:"",maxHeight:"none",maxWidth:"none"}),this.layout(),this.resizeUpdated.dispatch()}},onDocumentMouseUp:function(){this.resizing=!1,$(document).off("mousemove",this.onDocumentMouseMove),$(document).off("mouseup",this.onDocumentMouseUp),this.overlay&&this.overlay.hide(),this.resizeEnded.dispatch()},onElementDrop:function(){setTimeout(this.layout,1)},destroy:function(){this.destroyed||(this.destroyed=!0,this.resizeStarted.dispose(),this.resizeUpdated.dispose(),this.resizeEnded.dispose(),$(document).off("mousemove",this.onDocumentMouseMove),$(document).off("mouseup",this.onDocumentMouseUp),$(document).off("keyup",this.layout),$(document).off("mouseup",this.layout),$(document).off("mousewheel",this.layout),$(document).off("DOMMouseScroll",this.layout),$(window).off("resize",this.layout),this.revealElement.off("drop",this.onElementDrop),this.getAnchors().off("mousedown",this.onAnchorMouseDown),this.anchorN.remove(),this.anchorE.remove(),this.anchorS.remove(),this.anchorW.remove(),this.overlay&&this.overlay.remove())}}),SL.components.Resizer.delegateOnHover=function(t,e,i){function n(){c&&(c.destroy(),c=null,$(document).off("mousemove",r),$(document).off("mouseup",a))}function s(t,e){if(c&&c.isResizing())return!1;if(c&&h&&!h.is(t)&&n(),!c){var s={};$.extend(s,i),$.extend(s,e),h=$(t),c=new SL.components.Resizer(h,s),c.resizeUpdated.add(l),c.show(),$(document).on("mousemove",r),$(document).on("mouseup",a)}}function o(t){var e=$(t.currentTarget),i=null;e.data("resizer-options")&&(i=e.data("resizer-options")),e.data("target-element")&&(e=e.data("target-element")),s(e,i)}function r(t){if(c)if(c.isDestroyed())n();else if(!c.isResizing()){var e=Reveal.getScale(),i=SL.util.getRevealElementGlobalOffset(h),s=3*c.getOptions().padding,o={top:i.y-s,right:i.x+h.outerWidth(!0)*e+s,bottom:i.y+h.outerHeight(!0)*e+s,left:i.x-s};(t.clientX<o.left||t.clientX>o.right||t.clientY<o.top||t.clientY>o.bottom)&&n()}}function a(t){setTimeout(function(){r(t)},1)}function l(){d.dispatch(h)}t.delegate(e,"mouseover",o);var c=null,h=null,d=new signals.Signal;return{show:s,updated:d,layout:function(){c&&c.layout()},destroy:function(){n(),d.dispose(),t.undelegate(e,"mouseover",o)}}},SL("components").Resolution=Class.extend({init:function(t){if(this.config=$.extend({title:null,values:null,width:1,height:1},t),!this.config.values)throw"A list of values must be specified.";this.render(),this.bind(),this.setValue(this.config.width,this.config.height)},render:function(){this.domElement=$(['<div class="sl-resolution">','<div class="unit size">',this.config.title?"<label>"+this.config.title+"</label>":"",'<select class="sl-select""></select>',"</div>",'<div class="custom-size">','<div class="unit text custom-width">',"<label>Width</label>",'<input size="30" type="text" class="l" maxlength="4" />',"</div>",'<div class="unit text custom-height">',"<label>Height</label>",'<input size="30" type="text" class="l" maxlength="4" />',"</div>","</div>","</div>"].join("")),this.sizeInput=this.domElement.find(".size select"),this.widthInput=this.domElement.find(".custom-width input"),this.heightInput=this.domElement.find(".custom-height input"),this.renderOptions()},renderOptions:function(){this.sizeInput.html(this.config.values.map(function(t){return'<option value="'+t.width+"x"+t.height+'">'+t.label+"</option>"}).join("")),this.sizeInput.append('<option class="custom-value" value="custom">Custom</option>')},bind:function(){this.changed=new signals.Signal,this.sizeInput.on("change",this.onSizeChange.bind(this)),this.widthInput.on("input",this.onCustomSizeChange.bind(this)),this.heightInput.on("input",this.onCustomSizeChange.bind(this))},setValue:function(t,e){var i,n,s=this.config.values.filter(function(i){return i.width===t&&i.height===e},this)[0];s?(i=s.width,n=s.height):(i=t,n=e,this.sizeInput.find(".custom-value").attr("value",i+"x"+n)),this.sizeInput.val(i+"x"+n),this.widthInput.val(i),this.heightInput.val(n),this.syncCustomSize()},getValue:function(){var t={};if(this.isCustomSize())t.width=parseInt(this.widthInput.val(),10),t.height=parseInt(this.heightInput.val(),10);else{var e=this.sizeInput.val()||"";t.width=parseInt(e.split("x")[0],10),t.height=parseInt(e.split("x")[1],10)}return(isNaN(t.width)||isNaN(t.height)||t.width<1||t.height<1)&&(t.width=this.config.width,t.height=this.config.height),t},syncCustomSize:function(){this.isCustomSize()?this.domElement.addClass("expanded"):this.domElement.removeClass("expanded")},isCustomSize:function(){return this.sizeInput.find(":selected").hasClass("custom-value")},destroy:function(){this.changed.dispose(),this.domElement.remove()},onSizeChange:function(){var t=this.getValue();this.widthInput.val(t.width),this.heightInput.val(t.height),this.syncCustomSize(),this.changed.dispatch()},onCustomSizeChange:function(){this.changed.dispatch()}}),SL("components").ScrollShadow=Class.extend({init:function(t){this.options=$.extend({threshold:20,shadowSize:10,resizeContent:!0},t),this.bind(),this.render(),this.layout()},bind:function(){this.layout=this.layout.bind(this),this.sync=this.sync.bind(this),this.onScroll=$.throttle(this.onScroll.bind(this),100),$(window).on("resize",this.layout),this.options.contentElement.on("scroll",this.onScroll)},render:function(){this.shadowTop=$('<div class="sl-scroll-shadow-top">').appendTo(this.options.parentElement),this.shadowBottom=$('<div class="sl-scroll-shadow-bottom">').appendTo(this.options.parentElement),this.shadowTop.height(this.options.shadowSize),this.shadowBottom.height(this.options.shadowSize)},layout:function(){var t=this.options.parentElement.height(),e=this.options.footerElement?this.options.footerElement.outerHeight():0,i=this.options.headerElement?this.options.headerElement.outerHeight():0;(this.options.resizeContent&&this.options.footerElement||this.options.headerElement)&&this.options.contentElement.css("height",t-e-i),this.sync()},sync:function(){var t=this.options.footerElement?this.options.footerElement.outerHeight():0,e=this.options.headerElement?this.options.headerElement.outerHeight():0,i=this.options.contentElement.scrollTop(),n=this.options.contentElement.prop("scrollHeight"),s=this.options.contentElement.outerHeight(),o=n>s+this.options.threshold,r=i/(n-s);this.shadowTop.css({opacity:o?r:0,top:e}),this.shadowBottom.css({opacity:o?1-r:0,bottom:t})},onScroll:function(){this.sync()},destroy:function(){$(window).off("resize",this.layout),this.options.contentElement.off("scroll",this.onScroll),this.options=null}}),SL("components").Search=Class.extend({init:function(t){this.config=t,this.searchForm=$(".search .search-form"),this.searchFormInput=this.searchForm.find(".search-term"),this.searchFormSubmit=this.searchForm.find(".search-submit"),this.searchResults=$(".search .search-results"),this.searchResultsHeader=this.searchResults.find("header"),this.searchResultsTitle=this.searchResults.find(".search-results-title"),this.searchResultsSorting=this.searchResults.find(".search-results-sorting"),this.searchResultsList=this.searchResults.find("ul"),this.searchFormLoader=Ladda.create(this.searchFormSubmit.get(0)),this.bind(),this.checkQuery()},bind:function(){this.searchForm.on("submit",this.onSearchFormSubmit.bind(this)),this.searchResultsSorting.find("input[type=radio]").on("click",this.onSearchSortingChange.bind(this))},checkQuery:function(){var t=SL.util.getQuery();t.search&&!this.searchFormInput.val()&&(this.searchFormInput.val(t.search),t.page?this.search(t.search,parseInt(t.page,10)):this.search(t.search))},renderSearchResults:function(t){if($(".search").removeClass("empty"),this.searchResults.show(),this.searchResultsList.empty(),this.renderSearchPagination(t),t.results&&t.results.length){this.searchResultsTitle.text(t.total+" "+SL.util.string.pluralize("result","s",t.total>1)+' for "'+this.searchTerm+'"');for(var e=0,i=t.results.length;i>e;e++){var n=t.results[e];n.user&&this.searchResultsList.append(SL.util.html.createDeckThumbnail(n))}}else this.searchResultsTitle.text(t.error||SL.locale.get("SEARCH_NO_RESULTS_FOR",{term:this.searchTerm}))},renderSearchPagination:function(t){"undefined"==typeof t.decks_per_page&&(t.decks_per_page=8);var e=Math.ceil(t.total/t.decks_per_page);this.searchPagination&&this.searchPagination.remove(),e>1&&(this.searchPagination=$('<div class="search-results-pagination"></div>').appendTo(this.searchResultsHeader),this.searchPagination.append('<span class="page">'+SL.locale.get("SEARCH_PAGINATION_PAGE")+" "+this.searchPage+"/"+e+"</span>"),this.searchPage>1&&this.searchPagination.append('<button class="button outline previous">'+SL.locale.get("PREVIOUS")+"</button>"),this.searchPagination.append('<button class="button outline next">'+SL.locale.get("NEXT")+"</button>"),this.searchPagination.find("button.previous").on("click",function(){this.search(this.searchTerm,Math.max(this.searchPage-1,1))}.bind(this)),this.searchPagination.find("button.next").on("click",function(){this.search(this.searchTerm,Math.min(this.searchPage+1,e))}.bind(this)))},search:function(t,e,i){if(this.searchTerm=t||this.searchFormInput.val(),this.searchPage=e||1,this.searchSort=i||this.searchSort,window.history&&"function"==typeof window.history.replaceState){var n="?search="+escape(this.searchTerm);e>1&&(n+="&page="+e),window.history.replaceState(null,null,"/explore"+n)}this.searchSort||(this.searchSort=this.searchResultsSorting.find("input[type=radio]:checked").val()),this.searchResultsSorting.find("input[type=radio]").prop("checked",!1),this.searchResultsSorting.find("input[type=radio][value="+this.searchSort+"]").prop("checked",!0),this.searchTerm?(this.searchFormLoader.start(),$.ajax({type:"GET",url:this.config.url,context:this,data:{q:this.searchTerm,page:this.searchPage,sort:this.searchSort}}).done(function(t){this.renderSearchResults(t)}).fail(function(){this.renderSearchResults({error:SL.locale.get("SEARCH_SERVER_ERROR")})}).always(function(){this.searchFormLoader.stop()})):SL.notify(SL.locale.get("SEARCH_NO_TERM_ERROR"))},sort:function(t){this.search(this.searchTerm,this.searchPage,t)},onSearchFormSubmit:function(t){return this.search(),t.preventDefault(),!1},onSearchSortingChange:function(){this.sort(this.searchResultsSorting.find("input[type=radio]:checked").val())}}),SL("components").TemplatesPage=Class.extend({init:function(t){this.options=t||{},this.templateSelected=new signals.Signal,this.render()},render:function(){this.domElement=$('<div class="page" data-page-id="'+this.options.id+'">'),this.actionList=$('<div class="action-list">').appendTo(this.domElement),this.templateList=$('<div class="template-list">').appendTo(this.domElement),this.options.templates.forEach(this.renderTemplate.bind(this)),(this.isDefaultTemplates()||this.isTeamTemplates()&&this.getNumberOfVisibleTemplates()>0)&&(this.blankTemplate=this.renderBlankTemplate(),this.duplicateTemplate=this.renderDuplicateTemplate())},renderBlankTemplate:function(t){return t=$.extend({container:this.actionList,editable:!1},t),this.renderTemplate(new SL.models.Template({label:"Blank",html:""}),t)},renderDuplicateTemplate:function(t,e){return t=$.extend({container:this.actionList,editable:!1},t),this.renderTemplate(new SL.models.Template({label:"Duplicate",html:e||""}),t)},renderTemplate:function(t,e){e=$.extend({prepend:!1,editable:!0,container:this.templateList},e);var i=$('<div class="template-item">');i.html(['<div class="template-item-thumb themed">','<div class="template-item-thumb-content reveal reveal-thumbnail ready">','<div class="slides">',t.get("html"),"</div>",'<div class="backgrounds"></div>',"</div>","</div>"].join("")),i.data("template-model",t),i.on("vclick",this.onTemplateSelected.bind(this,i)),i.find(".slides>section").addClass("present"),i.find('.sl-block[data-block-type="code"] pre').addClass("hljs"),t.get("label")&&i.append('<span class="template-item-label">'+t.get("label")+"</span>"),e.replaceTemplate?e.replaceTemplate.replaceWith(i):e.replaceTemplateAt?e.container.find(".template-item").eq(e.replaceTemplateAt).replaceWith(i):e.prepend?e.container.prepend(i):e.container.append(i);var n=i.find("section").attr("data-background-color"),s=i.find("section").attr("data-background-image"),o=i.find("section").attr("data-background-size"),r=i.find("section").attr("data-background-position"),a=$('<div class="slide-background present template-item-thumb-background">');if(a.addClass(i.find(".template-item-thumb .reveal section").attr("class")),a.appendTo(i.find(".template-item-thumb .reveal>.backgrounds")),(n||s)&&(n&&a.css("background-color",n),s&&a.css("background-image",'url("'+s+'")'),o&&a.css("background-size",o),r&&a.css("background-position",r)),this.isEditable()&&e.editable){var l=$('<div class="template-item-options"></div>').appendTo(i),c=$('<div class="option"><span class="icon i-trash-stroke"></span></div>');if(c.attr("data-tooltip","Delete this template"),c.on("vclick",this.onTemplateDeleteClicked.bind(this,i)),c.appendTo(l),this.isTeamTemplates()&&SL.current_user.getThemes().size()>1){var h=$('<div class="option"><span class="icon i-ellipsis-v"></span></div>');h.attr("data-tooltip","Theme availability"),h.on("vclick",this.onTemplateThemeClicked.bind(this,i)),h.appendTo(l)}}return i},refresh:function(){this.duplicateTemplate&&this.duplicateTemplate.length&&(this.duplicateTemplate=this.renderDuplicateTemplate({replaceTemplate:this.duplicateTemplate},SL.data.templates.templatize(Reveal.getCurrentSlide()))),this.templateList.find(".placeholder").remove(),this.refreshSizes();var t=SL.view.getCurrentTheme(),e=this.domElement.find(".template-item");if(this.isTeamTemplates()&&e.each(function(e,i){var n=$(i),s=n.data("template-model").isAvailableForTheme(t);n.toggleClass(SL.current_user.isEnterpriseManager()?"semi-hidden":"hidden",!s)}.bind(this)),e=this.domElement.find(".template-item:not(.hidden)"),e.length)e.each(function(e,i){var n=$(i),s=(n.data("template-model"),n.find(".template-item-thumb"));s.attr("class",s.attr("class").replace(/theme\-(font|color)\-([a-z0-9-])*/gi,"")),s.addClass("theme-font-"+t.get("font")),s.addClass("theme-color-"+t.get("color")),s.find(".template-item-thumb-content img[data-src]").each(function(){this.setAttribute("src",this.getAttribute("data-src")),this.removeAttribute("data-src")}),SL.data.templates.layoutTemplate(s.find("section"),!0)}.bind(this)),this.templateList.find(".placeholder").remove();else{var i="You haven't saved any custom templates yet.<br>Click the button below to save one now.";this.isTeamTemplates()&&(i=SL.current_user.isEnterpriseManager()?"Templates saved here are made available to the everyone in your team.":"No templates are available for the current theme."),this.templateList.append('<p class="placeholder">'+i+"</p>")}},refreshSizes:function(){var t=Reveal.getConfig(),e=t.width,i=t.height,n=204,s=n/e,o=Math.round(i*s);this.domElement.find(".template-item-thumb").css("height",o),this.domElement.find(".template-item-thumb-content").css({width:e,height:i,transform:"scale("+s+")"})},appendTo:function(t){this.domElement.appendTo(t)},saveCurrentSlide:function(){var t=SL.config.AJAX_SLIDE_TEMPLATES_CREATE;return this.isTeamTemplates()&&(t=SL.config.AJAX_TEAM_SLIDE_TEMPLATES_CREATE),$.ajax({type:"POST",url:t,context:this,data:{slide_template:{html:SL.data.templates.templatize(Reveal.getCurrentSlide())}}}).done(function(t){this.options.templates.create(t,{prepend:!0}).then(function(t){this.renderTemplate(t,{prepend:!0}),this.refresh()}.bind(this)),SL.notify(SL.locale.get("TEMPLATE_CREATE_SUCCESS"))}).fail(function(){SL.notify(SL.locale.get("TEMPLATE_CREATE_ERROR"),"negative")})},isEditable:function(){return this.isUserTemplates()||this.isTeamTemplates()&&SL.current_user.isEnterpriseManager()},isDefaultTemplates:function(){return"default"===this.options.id
},isUserTemplates:function(){return"user"===this.options.id},isTeamTemplates:function(){return"team"===this.options.id},getNumberOfVisibleTemplates:function(){return this.domElement.find(".template-item:not(.hidden)").length},onTemplateSelected:function(t,e){e.preventDefault(),this.templateSelected.dispatch(t.data("template-model"))},onTemplateDeleteClicked:function(t,e){return e.preventDefault(),SL.prompt({anchor:$(e.currentTarget),title:SL.locale.get("TEMPLATE_DELETE_CONFIRM"),type:"select",hoverTarget:t,data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Delete</h3>",selected:!0,className:"negative",callback:function(){var e=t.data("template-model"),i=SL.config.AJAX_SLIDE_TEMPLATES_DELETE(e.get("id"));this.isTeamTemplates()&&(i=SL.config.AJAX_TEAM_SLIDE_TEMPLATES_DELETE(e.get("id"))),$.ajax({type:"DELETE",url:i,context:this}).done(function(){t.remove(),this.refresh()})}.bind(this)}]}),!1},onTemplateThemeClicked:function(t,e){e.preventDefault();var i=SL.current_user.getThemes();if(i.size()>0){var n=t.data("template-model"),s=n.get("id"),o=n.isAvailableForAllThemes(),r=($(Reveal.getCurrentSlide()),[{value:"All themes",selected:o,exclusive:!0,className:"header-item",callback:function(){i.forEach(function(t){t.hasSlideTemplate(s)&&t.removeSlideTemplate([s]).fail(this.onGenericError)}.bind(this)),this.refresh()}.bind(this)}]);i.forEach(function(t){r.push({value:t.get("name"),selected:o?!1:n.isAvailableForTheme(t),callback:function(e,i){i?t.addSlideTemplate([s]).fail(this.onGenericError):t.removeSlideTemplate([s]).fail(this.onGenericError),this.refresh()}.bind(this)})}.bind(this)),SL.prompt({anchor:$(e.currentTarget),title:"Available for...",type:"list",alignment:"l",data:r,multiselect:!0,optional:!0,hoverTarget:t})}return!1},onGenericError:function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")}}),SL("components").Templates=Class.extend({init:function(t){this.options=$.extend({alignment:"",width:450,height:800,arrowSize:8},t),this.pages=[],this.pagesHash={},SL.data.templates.getUserTemplates(),SL.data.templates.getTeamTemplates(),this.render(),this.bind()},render:function(){this.domElement=$('<div class="sl-templates">'),this.innerElement=$('<div class="sl-templates-inner">').appendTo(this.domElement),this.domElement.data("instance",this),this.headerElement=$('<div class="sl-templates-header">').appendTo(this.innerElement),this.bodyElement=$('<div class="sl-templates-body">').appendTo(this.innerElement),this.footerElement=$('<div class="sl-templates-footer">').appendTo(this.innerElement),this.addTemplateButton=$(['<div class="add-new-template ladda-button" data-style="zoom-out" data-spinner-color="#222" data-spinner-size="32">','<span class="icon i-plus"></span>',"<span>Save current slide</span>","</div>"].join("")),this.addTemplateButton.on("click",this.onTemplateCreateClicked.bind(this)),this.addTemplateButton.appendTo(this.footerElement),this.addTemplateButtonLoader=Ladda.create(this.addTemplateButton.get(0))},renderTemplates:function(){this.pages=[],this.headerElement.empty(),this.bodyElement.empty(),this.renderPage("default","Default",SL.data.templates.getDefaultTemplates()),SL.data.templates.getUserTemplates(function(t){this.renderPage("user","Yours",t)}.bind(this)),SL.data.templates.getTeamTemplates(function(t){(SL.current_user.isEnterpriseManager()||!t.isEmpty())&&this.renderPage("team","Team",t)}.bind(this))},renderPage:function(t,e,i){var n=$('<div class="page-tab" data-page-id="'+t+'">'+e+"</div>");n.on("vclick",function(){this.showPage(t),SL.analytics.trackEditor("Slide templates tab clicked",t)}.bind(this)),n.appendTo(this.headerElement);var s=new SL.components.TemplatesPage({id:t,templates:i});s.templateSelected.add(this.onTemplateSelected.bind(this)),s.appendTo(this.bodyElement),this.pages.push(s),this.pagesHash[t]=s,this.domElement.attr("data-pages-total",this.pages.length)},selectDefaultPage:function(){var t=this.pages.some(function(t){return t.isTeamTemplates()&&t.getNumberOfVisibleTemplates()>0});this.showPage(t?"team":"default")},showPage:function(t){this.currentPage=this.pagesHash[t],this.currentPage?(this.bodyElement.find(".page").removeClass("past present future"),this.bodyElement.find('.page[data-page-id="'+t+'"]').addClass("present"),this.bodyElement.find('.page[data-page-id="'+t+'"]').prevAll().addClass("past"),this.bodyElement.find('.page[data-page-id="'+t+'"]').nextAll().addClass("future"),this.headerElement.find(".page-tab").removeClass("selected"),this.headerElement.find('.page-tab[data-page-id="'+t+'"]').addClass("selected")):console.warn('Template page "'+t+'" not found.')},refreshPages:function(){this.pages.forEach(function(t){t.refresh()})},bind:function(){this.layout=this.layout.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClicked=this.onClicked.bind(this),this.domElement.on("vclick",this.onClicked)},layout:function(){var t=10,e=this.domElement.outerWidth(),i=this.domElement.outerHeight(),n=this.options.width,s=this.options.height,o={};n=Math.min(n,i-2*t),s=Math.min(s,i-2*t),this.options.anchor&&(o.left=this.options.anchor.offset().left,o.top=this.options.anchor.offset().top,o.width=this.options.anchor.outerWidth(),o.height=this.options.anchor.outerHeight(),o.right=o.left+o.width,o.bottom=o.top+o.height);var r,a;this.options.anchor&&"r"===this.options.alignment?(n=Math.min(n,o.left-2*t),r=o.left-n-this.options.arrowSize-t,a=o.top+o.height/2-s/2):this.options.anchor&&"b"===this.options.alignment?(s=Math.min(s,o.top-2*t),r=o.left+o.width/2-n/2,a=o.top-s-this.options.arrowSize-t):this.options.anchor&&"l"===this.options.alignment?(n=Math.min(n,e-o.right-2*t),r=o.right+this.options.arrowSize+t,a=o.top+o.height/2-s/2):(r=(e-n)/2,a=(i-s)/2),this.innerElement.css({width:n,height:s,left:r,top:a})},show:function(t){this.options=$.extend(this.options,t),0===this.pages.length&&this.renderTemplates(),this.domElement.attr("data-alignment",this.options.alignment),this.domElement.appendTo(document.body),SL.util.skipCSSTransitions(this.domElement),$(window).on("resize",this.layout),SL.keyboard.keydown(this.onKeyDown),this.refreshPages(),this.hasSelectedDefaultPage||(this.hasSelectedDefaultPage=!0,this.selectDefaultPage()),this.layout()},hide:function(){this.domElement.detach(),$(window).off("resize",this.layout),SL.keyboard.release(this.onKeyDown)},onTemplateSelected:function(t){this.options.callback&&(this.hide(),this.options.callback(t.get("html")))},onTemplateCreateClicked:function(){return this.currentPage.isEditable()||this.showPage("user"),this.addTemplateButtonLoader.start(),this.currentPage.saveCurrentSlide().then(function(){this.addTemplateButtonLoader.stop()}.bind(this),function(){this.addTemplateButtonLoader.stop()}.bind(this)),SL.analytics.trackEditor(this.currentPage.isTeamTemplates()?"Saved team template":"Saved user template"),!1},onKeyDown:function(t){return 27===t.keyCode?(this.hide(),!1):!0},onClicked:function(t){$(t.target).is(this.domElement)&&(t.preventDefault(),this.hide())},destroy:function(){$(window).off("resize",this.layout),SL.keyboard.release(this.onKeyDown),this.domElement.remove()}}),SL("components").TextEditor=Class.extend({init:function(t){this.options=$.extend({type:"",value:""},t),this.saved=new signals.Signal,this.canceled=new signals.Signal,this.render(),this.bind(),this.originalValue=this.options.value||"","string"==typeof this.options.value&&this.setValue(this.options.value),SL.editor.controllers.Capabilities.isTouchEditor()||this.focusInput()},render:function(){this.domElement=$('<div class="sl-text-editor">').appendTo(document.body),this.innerElement=$('<div class="sl-text-editor-inner">').appendTo(this.domElement),this.domElement.attr("data-type",this.options.type),"html"===this.options.type?this.renderHTMLInput():this.renderTextInput(),this.footerElement=$(['<div class="sl-text-editor-footer">','<button class="button l outline white cancel-button">Cancel</button>','<button class="button l positive save-button">Save</button>',"</div>"].join("")).appendTo(this.innerElement),setTimeout(function(){this.domElement.addClass("visible")}.bind(this),1)},renderTextInput:function(){this.inputElement=$('<textarea class="sl-text-editor-input">').appendTo(this.innerElement),"code"===this.options.type&&this.inputElement.tabby({tabString:"    "})},renderHTMLInput:function(){this.inputElement=$('<div class="editor sl-text-editor-input">').appendTo(this.innerElement),this.codeEditor&&"function"==typeof this.codeEditor.destroy&&(this.codeEditor.destroy(),this.codeEditor=null);try{this.codeEditor=ace.edit(this.inputElement.get(0)),SL.util.setAceEditorDefaults(this.codeEditor),this.codeEditor.getSession().setMode("ace/mode/html")}catch(t){console.log("An error occurred while initializing the Ace editor.")}},bind:function(){this.footerElement.find(".save-button").on("click",this.save.bind(this)),this.footerElement.find(".cancel-button").on("click",this.cancel.bind(this)),this.onKeyDown=this.onKeyDown.bind(this),SL.keyboard.keydown(this.onKeyDown),this.onBackgroundClicked=this.onBackgroundClicked.bind(this),this.domElement.on("vclick",this.onBackgroundClicked)},save:function(){this.saved.dispatch(this.getValue()),this.destroy()},cancel:function(){var t=this.originalValue||"",e=this.getValue()||"";e!==t?this.cancelPrompt||(this.cancelPrompt=SL.prompt({title:"Discard unsaved changes?",type:"select",data:[{html:"<h3>Cancel</h3>"},{html:"<h3>Discard</h3>",selected:!0,className:"negative",callback:function(){this.canceled.dispatch(),this.destroy()}.bind(this)}]}),this.cancelPrompt.destroyed.add(function(){this.cancelPrompt=null}.bind(this))):(this.canceled.dispatch(),this.destroy())},focusInput:function(){this.codeEditor?this.codeEditor.focus():this.inputElement.focus()},setValue:function(t){this.originalValue=t||"",this.codeEditor?this.codeEditor.getSession().setValue(t||""):this.inputElement.val(t)},getValue:function(){return this.codeEditor?this.codeEditor.getSession().getValue():this.inputElement.val()},onBackgroundClicked:function(t){$(t.target).is(this.domElement)&&(this.cancel(),t.preventDefault())},onKeyDown:function(t){return 27===t.keyCode?(this.cancel(),!1):(t.metaKey||t.ctrlKey)&&83===t.keyCode?(this.save(),!1):!0},destroy:function(){this.saved.dispose(),this.canceled.dispose(),SL.keyboard.release(this.onKeyDown),this.domElement.remove()}}),SL("components").ThemeOptions=Class.extend({init:function(t){if(!t.container)throw"Cannot build theme options without container";if(!t.model)throw"Cannot build theme options without model";this.config=$.extend({center:!0,rollingLinks:!0,resolution:!1,supportsCustomFonts:!1,colors:SL.config.THEME_COLORS,fonts:SL.config.THEME_FONTS,transitions:SL.config.THEME_TRANSITIONS,backgroundTransitions:SL.config.THEME_BACKGROUND_TRANSITIONS},t),this.theme=t.model,this.changed=new signals.Signal,this.render(),this.updateSelection(),this.toggleDeprecatedOptions(),this.scrollToTop(),this.loadFonts()},render:function(){this.domElement=$('<div class="sl-themeoptions">').appendTo(this.config.container),"string"==typeof this.config.className&&this.domElement.addClass(this.config.className),this.config.themes&&this.renderThemes(),(this.config.center||this.config.rollingLinks)&&this.renderOptions(),this.config.resolution&&this.renderResolution(),this.config.colors&&this.renderColors(),this.config.fonts&&this.renderFonts(),this.config.transitions&&this.renderTransitions(),this.config.backgroundTransitions&&this.renderBackgroundTransitions()},renderThemes:function(){if(this.config.themes&&!this.config.themes.isEmpty()){var t=$('<div class="section selector theme"><h3>Theme</h3><ul></ul></div>').appendTo(this.domElement),e=t.find("ul");e.append(['<li data-theme="" class="custom">','<span class="thumb-icon icon i-equalizer"></span>','<span class="thumb-label">Custom</span>',"</li>"].join("")),this.config.themes.forEach(function(t){var i=$('<li data-theme="'+t.get("id")+'"><span class="thumb-label" title="'+t.get("name")+'">'+t.get("name")+"</span></li>").appendTo(e);t.hasThumbnail()&&i.css("background-image",'url("'+t.get("thumbnail_url")+'")')}),this.domElement.find(".theme li").on("vclick",this.onThemeClicked.bind(this))}},renderOptions:function(){var t=$('<div class="section options"><h3>Options</h3></div>').appendTo(this.domElement),e=$('<div class="options"></div>').appendTo(t);this.config.center&&(e.append('<div class="unit sl-checkbox outline"><input id="theme-center" value="center" type="checkbox"><label for="theme-center" data-tooltip="Center slide contents vertically (not visible while editing)" data-tooltip-maxwidth="220" data-tooltip-delay="500">Vertical centering</label></div>'),t.find("#theme-center").on("change",this.onOptionChanged.bind(this))),this.config.rollingLinks&&(e.append('<div class="unit sl-checkbox outline"><input id="theme-rolling_links" value="rolling_links" type="checkbox"><label for="theme-rolling_links" data-tooltip="Use a 3D hover effect on links" data-tooltip-maxwidth="220" data-tooltip-delay="500">Rolling links</label></div>'),t.find("#theme-rolling_links").on("change",this.onOptionChanged.bind(this)))},renderResolution:function(){var t=$('<div class="section resolution"><h3>Presentation Size</h3></div>').appendTo(this.domElement);this.resolutionInput=new SL.components.Resolution({values:SL.config.SLIDE_SIZES}),this.resolutionInput.domElement.appendTo(t),this.resolutionInput.changed.add(this.onResolutionChanged.bind(this))},renderColors:function(){var t=$('<div class="section selector color"><h3>Color</h3><ul></ul></div>').appendTo(this.domElement),e=t.find("ul");this.config.colors.forEach(function(t){var i=$('<li data-color="'+t.id+'"><div class="theme-body-color-block"></div><div class="theme-link-color-block"></div></li>');i.addClass("theme-color-"+t.id),i.addClass("themed"),i.appendTo(e),t.tooltip&&i.attr({"data-tooltip":t.tooltip,"data-tooltip-delay":250,"data-tooltip-maxwidth":300}),!SL.current_user.isPaid()&&t.pro&&i.attr("data-pro","true")}.bind(this)),this.domElement.find(".color li").on("vclick",this.onColorClicked.bind(this))},renderFonts:function(){var t=$('<div class="section selector font"><h3 class="section-heading">Typography</h3><ul></ul></div>').appendTo(this.domElement),e=t.find("ul");if(this.config.supportsCustomFonts){var i="You can use custom fonts from Typekit, Google or your own host. Click to learn more.",n="http://help.slides.com/knowledgebase/articles/1077976";this.config.themeEditor&&(n="http://help.slides.com/knowledgebase/articles/590055-theme-editor-custom-font"),t.find(".section-heading").append('<a href="'+n+'" target="_blank" class="info-link" data-tooltip="'+i+'" data-tooltip-maxwidth="240">Custom fonts</a>')}this.config.fonts.forEach(function(t){var i=$('<li data-font="'+t.id+'" data-name="'+t.title+'"><div class="themed"><h1>'+t.title+"</h1><a>Type</a></div></li>");i.addClass("theme-font-"+t.id),i.appendTo(e),t.deprecated===!0&&i.addClass("deprecated"),t.tooltip&&i.attr({"data-tooltip":t.tooltip,"data-tooltip-delay":250,"data-tooltip-maxwidth":300})}.bind(this)),this.domElement.find(".font li").on("vclick",this.onFontClicked.bind(this))},renderTransitions:function(){var t=$('<div class="section selector transition"><h3>Transition</h3><ul></ul></div>').appendTo(this.domElement),e=t.find("ul");this.config.transitions.forEach(function(t){var i=$('<li data-transition="'+t.id+'"></li>').appendTo(e);t.deprecated===!0&&i.addClass("deprecated"),t.title&&i.attr({"data-tooltip":t.title,"data-tooltip-oy":-5})}.bind(this)),this.domElement.find(".transition li").on("vclick",this.onTransitionClicked.bind(this))},renderBackgroundTransitions:function(){var t=$('<div class="section selector background-transition"></div>').appendTo(this.domElement);t.append('<h3>Background Transition <span class="icon i-info info-icon" data-tooltip="Background transitions apply when navigating to or from a slide that has a background image or color." data-tooltip-maxwidth="250"></span></h3>'),t.append("<ul>");var e=t.find("ul");this.config.backgroundTransitions.forEach(function(t){var i=$('<li data-background-transition="'+t.id+'"></li>').appendTo(e);t.deprecated===!0&&i.addClass("deprecated"),t.title&&i.attr({"data-tooltip":t.title,"data-tooltip-oy":-5})}.bind(this)),this.domElement.find(".background-transition li").on("vclick",this.onBackgroundTransitionClicked.bind(this))},populate:function(t){t&&(this.theme=t,this.updateSelection(),this.toggleDeprecatedOptions(),this.scrollToTop())},scrollToTop:function(){this.domElement.scrollTop(0)},loadFonts:function(){setTimeout(function(){SL.fonts.fontactive.add(this.onFontLoaded.bind(this)),SL.fonts.fontinactive.add(this.onFontLoaded.bind(this)),SL.fonts.loadAll()}.bind(this),500)},onFontLoaded:function(){$(".font li[data-font]").each(function(t,e){e=$(e),SL.fonts.isPackageLoaded(e.attr("data-font"))&&e.addClass("font-loaded")}.bind(this))},updateSelection:function(){this.config.themes&&!this.config.themes.isEmpty()&&this.domElement.toggleClass("using-theme",this.theme.has("id")),this.config.resolution&&this.resolutionInput.setValue(this.theme.get("width"),this.theme.get("height")),this.config.center&&this.domElement.find("#theme-center").prop("checked",1==this.theme.get("center")),this.config.rollingLinks&&this.domElement.find("#theme-rolling_links").prop("checked",1==this.theme.get("rolling_links")),this.domElement.find(".theme li").removeClass("selected"),this.domElement.find(".theme li[data-theme="+this.theme.get("id")+"]").addClass("selected"),0!==this.domElement.find(".theme li.selected").length||this.theme.has("id")||this.domElement.find('.theme li[data-theme=""]').addClass("selected"),this.domElement.find(".color li").removeClass("selected"),this.domElement.find(".color li[data-color="+this.theme.get("color")+"]").addClass("selected"),this.domElement.find(".font li").removeClass("selected"),this.domElement.find(".font li[data-font="+this.theme.get("font")+"]").addClass("selected"),this.domElement.find(".font li").each(function(t,e){SL.util.html.removeClasses(e,function(t){return t.match(/^theme\-color\-/gi)}),$(e).addClass("theme-color-"+this.theme.get("color"))}.bind(this)),this.domElement.find(".transition li").removeClass("selected"),this.domElement.find(".transition li[data-transition="+this.theme.get("transition")+"]").addClass("selected"),this.domElement.find(".background-transition li").removeClass("selected"),this.domElement.find(".background-transition li[data-background-transition="+this.theme.get("background_transition")+"]").addClass("selected")},applySelection:function(){SL.helpers.ThemeController.paint(this.theme,{center:!1,js:!1})},toggleDeprecatedOptions:function(){this.domElement.find(".font .deprecated").toggle(this.theme.isFontDeprecated()),this.domElement.find(".transition .deprecated").toggle(this.theme.isTransitionDeprecated()),this.domElement.find(".background-transition .deprecated").toggle(this.theme.isBackgroundTransitionDeprecated())},getTheme:function(){return this.theme},onThemeClicked:function(t){var e=$(t.currentTarget),i=e.data("theme");if(i){var n=this.config.themes.getByProperties({id:i});if(n){if(!n.isLoading()){var s=$('<div class="thumb-preloader hidden"><div class="spinner centered"></div></div>').appendTo(e),o=setTimeout(function(){s.removeClass("hidden")},1);SL.util.html.generateSpinners(),e.addClass("selected"),n.load().done(function(){this.theme=n.clone(),this.theme.loadCustomFonts(),this.updateSelection(),this.applySelection(),this.changed.dispatch()}.bind(this)).fail(function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative"),e.removeClass("selected")}.bind(this)).always(function(){clearTimeout(o),s.remove()}.bind(this))}}else SL.notify("Could not find theme data","negative")}else this.theme.set("id",null),this.theme.set("js",null),this.theme.set("css",null),this.theme.set("less",null),this.theme.set("html",null),this.updateSelection(),this.applySelection(),this.changed.dispatch();SL.analytics.trackTheming("Theme option selected")},onOptionChanged:function(){this.theme.set("center",this.domElement.find("#theme-center").is(":checked")),this.theme.set("rolling_links",this.domElement.find("#theme-rolling_links").is(":checked")),this.updateSelection(),this.applySelection(),this.changed.dispatch()},onResolutionChanged:function(){var t=this.resolutionInput.getValue();this.theme.set("width",t.width),this.theme.set("height",t.height),this.applySelection(),this.changed.dispatch()},onColorClicked:function(t){return t.preventDefault(),$(t.currentTarget).is("[data-pro]")?void window.open("/pricing"):(this.theme.set("color",$(t.currentTarget).data("color")),this.updateSelection(),this.applySelection(),SL.analytics.trackTheming("Color option selected",this.theme.get("color")),void this.changed.dispatch())},onFontClicked:function(t){t.preventDefault(),this.theme.set("font",$(t.currentTarget).data("font")),this.updateSelection(),this.applySelection(),SL.analytics.trackTheming("Font option selected",this.theme.get("font")),this.changed.dispatch()},onTransitionClicked:function(t){t.preventDefault(),this.theme.set("transition",$(t.currentTarget).data("transition")),this.updateSelection(),this.applySelection(),SL.analytics.trackTheming("Transition option selected",this.theme.get("transition")),this.changed.dispatch()},onBackgroundTransitionClicked:function(t){t.preventDefault(),this.theme.set("background_transition",$(t.currentTarget).data("background-transition")),this.updateSelection(),this.applySelection(),SL.analytics.trackTheming("Background transition option selected",this.theme.get("background_transition")),this.changed.dispatch()},destroy:function(){this.resolutionInput&&(this.resolutionInput.destroy(),this.resolutionInput=null),this.changed.dispose(),this.domElement.remove(),this.theme=null,this.config=null}}),SL.tooltip=function(){function t(){r=$("<div>").addClass("sl-tooltip"),a=$('<p class="sl-tooltip-inner">').appendTo(r),l=$('<div class="sl-tooltip-arrow">').appendTo(r),c=$('<div class="sl-tooltip-arrow-fill">').appendTo(l),e()}function e(){n=n.bind(this),$(document).on("keydown, mousedown",function(){SL.tooltip.hide()}),SL.util.device.IS_PHONE||SL.util.device.IS_TABLET||($(document.body).delegate("[data-tooltip]","mouseenter",function(t){var e=$(t.currentTarget);if(!e.is("[no-tooltip]")){var n=e.attr("data-tooltip"),s=e.attr("data-tooltip-delay"),o=e.attr("data-tooltip-align"),r=e.attr("data-tooltip-alignment"),a=e.attr("data-tooltip-maxwidth"),l=e.attr("data-tooltip-maxheight"),c=e.attr("data-tooltip-ox"),h=e.attr("data-tooltip-oy"),d=e.attr("data-tooltip-x"),u=e.attr("data-tooltip-y");if(n){var p={anchor:e,align:o,alignment:r,delay:parseInt(s,10),maxwidth:parseInt(a,10),maxheight:parseInt(l,10)};c&&(p.ox=parseFloat(c)),h&&(p.oy=parseFloat(h)),d&&u&&(p.x=parseFloat(d),p.y=parseFloat(u),p.anchor=null),i(n,p)}}}),$(document.body).delegate("[data-tooltip]","mouseleave",s))}function i(t,e){if(!SL.util.device.IS_PHONE&&!SL.util.device.IS_TABLET){h=e||{},clearTimeout(p);var s=Date.now()-m;if("number"==typeof h.delay&&s>500)return p=setTimeout(i.bind(this,t,h),h.delay),void delete h.delay;r.css("opacity",0),r.appendTo(document.body),a.html(t),r.css({left:0,top:0,"max-width":h.maxwidth?h.maxwidth:null,"max-height":h.maxheight?h.maxheight:null}),h.align&&r.css("text-align",h.align),n(),r.stop(!0,!0).animate({opacity:1},{duration:150}),$(window).on("resize scroll",n),$(h.anchor).parents(".sl-scrollable").on("scroll",n)}}function n(){var t=$(h.anchor);if(t.length){var e=h.alignment||"auto",i=10,n=$(window).scrollLeft(),s=$(window).scrollTop(),o=t.offset();o.x=o.left,o.y=o.top,h.anchor.parents(".reveal .slides").length&&"undefined"!=typeof window.Reveal&&(o=SL.util.getRevealElementGlobalOffset(h.anchor));var c=t.outerWidth(),p=t.outerHeight(),m=a.outerWidth(),f=a.outerHeight(),g=o.x-$(window).scrollLeft(),v=o.y-$(window).scrollTop(),y=m/2,b=f/2;switch("number"==typeof h.ox&&(g+=h.ox),"number"==typeof h.oy&&(v+=h.oy),"auto"===e&&(e=o.y-(f+i+d)<s?"b":"t"),e){case"t":g+=(c-m)/2,v-=f+d+u;break;case"b":g+=(c-m)/2,v+=p+d+u;break;case"l":g-=m+d+u,v+=(p-f)/2;break;case"r":g+=c+d+u,v+=(p-f)/2}g=Math.min(Math.max(g,i),window.innerWidth-m-i),v=Math.min(Math.max(v,i),window.innerHeight-f-i);var S=d+3;switch(e){case"t":y=o.x-g-n+c/2,b=f,y=Math.min(Math.max(y,S),m-S);break;case"b":y=o.x-g-n+c/2,b=-d,y=Math.min(Math.max(y,S),m-S);break;case"l":y=m,b=o.y-v-s+p/2,b=Math.min(Math.max(b,S),f-S);break;case"r":y=-d,b=o.y-v-s+p/2,b=Math.min(Math.max(b,S),f-S)}l.css({left:Math.round(y),top:Math.round(b)}),r.css({left:Math.round(g),top:Math.round(v)}).attr("data-alignment",e)}}function s(){o()&&(m=Date.now()),clearTimeout(p),r.remove().stop(!0,!0),$(window).off("resize scroll",n),h&&$(h.anchor).parents(".sl-scrollable").off("scroll",n)}function o(){return r.parent().length>0}var r,a,l,c,h,d=6,u=4,p=-1,m=-1;return t(),{show:function(t,e){i(t,e)},hide:function(){s()},isVisible:function(){return o()},anchorTo:function(t,e,i){var n={};"undefined"!=typeof e&&(n["data-tooltip"]=e),"number"==typeof i.delay&&(n["data-tooltip-delay"]=i.delay),"string"==typeof i.alignment&&(n["data-tooltip-alignment"]=i.alignment),$(t).attr(n)}}}(),SL("components").Tutorial=Class.extend({init:function(t){this.options=$.extend({steps:[]},t),this.options.steps.forEach(function(t){"undefined"==typeof t.backwards&&(t.backwards=function(){}),"undefined"==typeof t.forwards&&(t.forwards=function(){})}),this.skipped=new signals.Signal,this.finished=new signals.Signal,this.index=-1,this.render(),this.bind(),this.layout(),this.paint(),this.controlsButtons.css("width",this.controlsButtons.outerWidth()+10)},render:function(){this.domElement=$('<div class="sl-tutorial">'),this.domElement.appendTo(document.body),this.canvas=$('<canvas class="sl-tutorial-canvas">'),this.canvas.appendTo(this.domElement),this.canvas=this.canvas.get(0),this.context=this.canvas.getContext("2d"),this.controls=$('<div class="sl-tutorial-controls">'),this.controls.appendTo(this.domElement),this.controlsInner=$('<div class="sl-tutorial-controls-inner">'),this.controlsInner.appendTo(this.controls),this.renderPagination(),this.controlsButtons=$('<div class="sl-tutorial-buttons">'),this.controlsButtons.appendTo(this.controlsInner),this.nextButton=$('<button class="button no-transition white l sl-tutorial-next">Next</button>'),this.nextButton.appendTo(this.controlsButtons),this.skipButton=$('<button class="button no-transition outline white l sl-tutorial-skip">Skip tutorial</button>'),this.skipButton.appendTo(this.controlsButtons),this.messageElement=$('<div class="sl-tutorial-message no-transition">').hide(),this.messageElement.appendTo(this.domElement)},renderPagination:function(){this.pagination=$('<div class="sl-tutorial-pagination">'),this.pagination.appendTo(this.controlsInner),this.options.steps.forEach(function(t,e){$('<li class="sl-tutorial-pagination-number">').appendTo(this.pagination).on("click",this.step.bind(this,e))}.bind(this))},updatePagination:function(){this.pagination.find(".sl-tutorial-pagination-number").each(function(t,e){e=$(e),e.toggleClass("past",t<this.index),e.toggleClass("present",t===this.index),e.toggleClass("future",t>this.index)}.bind(this))},bind:function(){this.onKeyDown=this.onKeyDown.bind(this),this.onSkipClicked=this.onSkipClicked.bind(this),this.onNextClicked=this.onNextClicked.bind(this),this.onWindowResize=this.onWindowResize.bind(this),SL.keyboard.keydown(this.onKeyDown),this.skipButton.on("click",this.onSkipClicked),this.nextButton.on("click",this.onNextClicked),$(window).on("resize",this.onWindowResize)},unbind:function(){SL.keyboard.release(this.onKeyDown),this.skipButton.off("click",this.onSkipClicked),this.nextButton.off("click",this.onNextClicked),$(window).off("resize",this.onWindowResize)},prev:function(){this.step(Math.max(this.index-1,0))},next:function(){this.index+1>=this.options.steps.length?(this.finished.dispatch(),this.destroy()):this.step(Math.min(this.index+1,this.options.steps.length-1))},step:function(t){if(this.index<t){for(;this.index<t;)this.index+=1,this.options.steps[this.index].forwards.call(this.options.context);this.index+1===this.options.steps.length&&(this.skipButton.hide(),this.nextButton.text("Get started"),this.domElement.addClass("last-step"))}else if(this.index>t){for(this.index+1===this.options.steps.length&&(this.skipButton.show(),this.nextButton.text("Next"),this.domElement.removeClass("last-step"));this.index>t;)this.options.steps[this.index].backwards.call(this.options.context),this.index-=1;this.options.steps[this.index].forwards.call(this.options.context)}this.updatePagination()},layout:function(){this.width=window.innerWidth,this.height=window.innerHeight;if(this.cutoutElement){var t=this.cutoutElement.offset();this.cutoutRect={x:t.left-this.cutoutPadding,y:t.top-this.cutoutPadding,width:this.cutoutElement.outerWidth()+2*this.cutoutPadding,height:this.cutoutElement.outerHeight()+2*this.cutoutPadding}}if(this.messageElement.is(":visible")){var e=20,i=this.messageElement.outerWidth(),n=this.messageElement.outerHeight(),s={left:(window.innerWidth-i)/2,top:(window.innerHeight-n)/2};if(this.messageOptions.anchor&&this.messageOptions.alignment){var o=this.messageOptions.anchor.offset(),r=this.messageOptions.anchor.outerWidth(),a=this.messageOptions.anchor.outerHeight();switch(this.messageOptions.alignment){case"t":s.left=o.left+(r-i)/2,s.top=o.top-n-e;break;case"r":s.left=o.left+r+e,s.top=o.top+(a-n)/2;break;case"b":s.left=o.left+(r-i)/2,s.top=o.top+a+e;break;case"l":s.left=o.left-i-e,s.top=o.top+(a-n)/2;break;case"tl":s.left=o.left-i-e,s.top=o.top-20}}s.left=Math.max(s.left,10),s.top=Math.max(s.top,10);var l="translate("+Math.round(s.left)+"px,"+Math.round(s.top)+"px)";this.messageElement.css({"-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,transform:l}),setTimeout(function(){this.messageElement.removeClass("no-transition")}.bind(this),1)}},paint:function(){this.canvas.width=this.width,this.canvas.height=this.height,this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle="rgba( 0, 0, 0, 0.7 )",this.context.fillRect(0,0,this.width,this.height),this.cutoutElement&&(this.context.clearRect(this.cutoutRect.x,this.cutoutRect.y,this.cutoutRect.width,this.cutoutRect.height),this.context.strokeStyle="#ddd",this.context.lineWidth=1,this.context.strokeRect(this.cutoutRect.x+.5,this.cutoutRect.y+.5,this.cutoutRect.width-1,this.cutoutRect.height-1))},cutout:function(t,e){e=e||{},this.cutoutElement=t,this.cutoutPadding=e.padding||0,this.layout(),this.paint()},clearCutout:function(){this.cutoutElement=null,this.cutoutPadding=0,this.paint()},message:function(t,e){this.messageOptions=$.extend({maxWidth:320,alignment:""},e),this.messageElement.html(t).show(),this.messageElement.css("max-width",this.messageOptions.maxWidth),this.messageElement.attr("data-alignment",this.messageOptions.alignment),this.layout(),this.paint()},clearMessage:function(){this.messageElement.hide(),this.messageOptions={}},hasNextStep:function(){return this.index+1<this.options.steps.length},destroy:function(){this.destroyed||(this.destroyed=!0,$(window).off("resize",this.onWindowResize),this.skipped.dispose(),this.finished.dispose(),this.unbind(),this.domElement.fadeOut(400,this.domElement.remove))},onKeyDown:function(t){return 27===t.keyCode?(this.skipped.dispatch(),this.destroy(),!1):37===t.keyCode||8===t.keyCode?(this.prev(),!1):39===t.keyCode||32===t.keyCode?(this.next(),!1):!0},onSkipClicked:function(){this.skipped.dispatch(),this.destroy()},onNextClicked:function(){this.next()},onWindowResize:function(){this.layout(),this.paint()}}),SL("views").Base=Class.extend({init:function(){this.header=new SL.components.Header,this.setupAce(),this.setupSocial(),this.setupToC(),this.handleLogos(),this.handleOutlines(),this.handleFeedback(),this.handleWindowClose(),this.handleAutoRefresh(),this.parseTimes(),this.parseLinks(),this.parseMeters(),this.parseSpinners(),this.parseNotifications(),this.parseScrollLinks(),setInterval(this.parseTimes.bind(this),12e4)},setupAce:function(){"object"==typeof window.ace&&"object"==typeof window.ace.config&&"function"==typeof window.ace.config.set&&ace.config.set("workerPath","/ace")},setupSocial:function(){$(window).on("load",function(){var t=$(".facebook-share-button"),e=$(".twitter-share-button"),i=$(".google-share-button"),n={url:window.location.protocol+"//"+window.location.hostname+window.location.pathname,title:$('meta[property="og:title"]').attr("content"),description:$('meta[property="og:description"]').attr("content"),thumbnail:$('meta[property="og:image"]').attr("content")};t.length&&(t.attr("href",SL.util.social.getFacebookShareLink(n.url,n.title,n.description,n.thumbnail)),t.on("vclick",function(t){SL.util.openPopupWindow($(this).attr("href"),"Share on Facebook",600,400),t.preventDefault()})),e.length&&(e.attr("href",SL.util.social.getTwitterShareLink(n.url,n.title)),e.on("vclick",function(t){SL.util.openPopupWindow($(this).attr("href"),"Share on Twitter",600,400),t.preventDefault()
})),i.length&&(i.attr("href",SL.util.social.getGoogleShareLink(n.url)),i.on("vclick",function(t){SL.util.openPopupWindow($(this).attr("href"),"Share on Google+",600,400),t.preventDefault()}))})},setupToC:function(){function t(){n=o.find("li").toArray(),n=n.map(function(t){var e=t.querySelector("a"),i=document.getElementById(e.getAttribute("href").slice(1));return{listItem:t,anchor:e,target:i}}),n=n.filter(function(t){return!!t.target});var t,i=[];n.forEach(function(e,n){var s=e.anchor.offsetLeft,o=e.anchor.offsetTop,r=e.anchor.offsetHeight;0===n?(i.push("M",s,o,"L",s,o+r),e.pathStart=0):(t!==s&&i.push("L",t,o),i.push("L",s,o),l.setAttribute("d",i.join(" ")),e.pathStart=l.getTotalLength(),i.push("L",s,o+r)),t=s,l.setAttribute("d",i.join(" ")),e.pathEnd=l.getTotalLength()}),s=l.getTotalLength(),e()}function e(){var t=window.innerHeight,e=$(window).scrollTop();o.toggleClass("fixed",e>r);var i=s;pathEnd=0;var a=0;n.forEach(function(e){var n=e.target.getBoundingClientRect();n.bottom>t*c&&n.top<t*(1-h)?(i=Math.min(e.pathStart,i),pathEnd=Math.max(e.pathEnd,pathEnd),a+=1,e.listItem.classList.add("sl-scroll-anchor-selected")):e.listItem.classList.remove("sl-scroll-anchor-selected")}),a>0?(l.setAttribute("stroke-dashoffset","1"),l.setAttribute("stroke-dasharray","1, "+i+", "+(pathEnd-i)+", "+s),l.setAttribute("opacity",1)):l.setAttribute("opacity",0)}var i=$('.sl-scroll-anchor[href^="#"]');if(i.length){var n,s,o=$(".sl-scroll-toc"),r=o.position().top,a=$(['<svg class="sl-scroll-toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg">','<path stroke="#444" stroke-width="2" fill="transparent" stroke-dasharray="0, 0, 0, 1000" stroke-linecap="round" stroke-linejoin="round" />',"</svg>"].join("")).appendTo(o),l=a.find("path").get(0),c=.1,h=.2;$(window).on("resize",$.throttle(t.bind(this),100)),$(window).on("scroll",$.throttle(e.bind(this),100)),setTimeout(t,1)}},handleLogos:function(){setTimeout(function(){$(".logo-animation").addClass("open")},600)},handleOutlines:function(){var t=$("<style>").appendTo("head").get(0),e=function(e){t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e};$(document).on("mousedown",function(){e("a, button, .sl-select, .sl-checkbox label, .radio label { outline: none !important; }")}),$(document).on("keydown",function(){e("")})},handleFeedback:function(){$("html").on("click","[data-feedback-mode]",function(t){if(UserVoice&&"function"==typeof UserVoice.show){var e=$(this),i={target:this,mode:e.attr("data-feedback-mode")||"contact",position:e.attr("data-feedback-position")||"top",screenshot_enabled:e.attr("data-feedback-screenshot_enabled")||"true",smartvote_enabled:e.attr("data-feedback-smartvote-enabled")||"true",ticket_custom_fields:{}};SL.current_deck&&(i.ticket_custom_fields["Deck ID"]=SL.current_deck.get("id"),i.ticket_custom_fields["Deck Slug"]=SL.current_deck.get("slug"),i.ticket_custom_fields["Deck Version"]=SL.current_deck.get("version"),i.ticket_custom_fields["Deck Font"]=SL.current_deck.get("theme_font"),i.ticket_custom_fields["Deck Color"]=SL.current_deck.get("theme_color"),i.ticket_custom_fields["Deck Transition"]=SL.current_deck.get("transition"),i.ticket_custom_fields["Deck Background Transition"]=SL.current_deck.get("backgroundTransition"));var n=e.attr("data-feedback-type");n&&n.length&&(i.ticket_custom_fields.Type=n);var s=e.attr("data-feedback-contact-title");s&&s.length&&(i.contact_title=s),UserVoice.show(i),t.preventDefault()}})},handleWindowClose:function(){var t=SL.util.getQuery();if(t&&t.autoclose&&window.opener){var e=parseInt(t.autoclose,10)||0;setTimeout(function(){try{window.close()}catch(t){}},e)}},handleAutoRefresh:function(){var t=SL.util.getQuery();if(t&&t.autoRefresh){var e=parseInt(t.autoRefresh,10);!isNaN(e)&&e>0&&setTimeout(function(){window.location.reload()},e)}},parseTimes:function(){$("time.ago").each(function(){var t=$(this).attr("datetime");t&&$(this).text(moment.utc(t).fromNow())}),$("time.date").each(function(){var t=$(this).attr("datetime");t&&$(this).text(moment.utc(t).format("MMM Do, YYYY"))})},parseLinks:function(){$(".linkify").each(function(){$(this).html(SL.util.string.linkify($(this).text()))})},parseMeters:function(){$(".sl-meter").each(function(){new SL.components.Meter($(this))})},parseSpinners:function(){SL.util.html.generateSpinners()},parseNotifications:function(){var t=$(".flash-notification");t.length&&SL.notify(t.remove().text(),t.attr("data-notification-type"))},parseScrollLinks:function(){$(document).delegate("a[data-scroll-to]","click",function(t){var e=t.currentTarget,i=$(e.getAttribute("href")),n=parseInt(e.getAttribute("data-scroll-to-offset"),10),s=parseInt(e.getAttribute("data-scroll-to-duration"),10);isNaN(n)&&(n=-20),isNaN(s)&&(s=1e3),i.length&&$("html, body").animate({scrollTop:i.offset().top+n},s),t.preventDefault()})}}),SL("views.decks").EditRequiresUpgrade=SL.views.Base.extend({init:function(){this._super(),this.makePublicButton=$(".make-deck-public").first(),this.makePublicButton.on("click",this.onMakePublicClicked.bind(this)),this.makePublicLoader=Ladda.create(this.makePublicButton.get(0))},makeDeckPublic:function(){var t={type:"POST",url:SL.config.AJAX_PUBLISH_DECK(SL.current_deck.get("id")),context:this,data:{visibility:SL.models.Deck.VISIBILITY_ALL}};this.makePublicLoader.start(),$.ajax(t).done(function(){window.location=SL.routes.DECK_EDIT(SL.current_user.get("username"),SL.current_deck.get("slug"))}).fail(function(){SL.notify(SL.locale.get("DECK_VISIBILITY_CHANGED_ERROR"),"negative"),this.makePublicLoader.stop()})},onMakePublicClicked:function(t){t.preventDefault(),this.makeDeckPublic()}}),SL("views.decks").Embed=SL.views.Base.extend({init:function(){this._super(),this.footerElement=$(".embed-footer"),this.shareButton=this.footerElement.find(".embed-footer-share"),this.fullscreenButton=this.footerElement.find(".embed-footer-fullscreen"),this.revealElement=$(".reveal"),SL.util.setupReveal({embedded:!0,openLinksInTabs:!0,trackEvents:!0,maxScale:SL.config.PRESENT_UPSIZING_MAX_SCALE}),$(window).on("resize",this.layout.bind(this)),$(document).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",this.layout.bind(this)),this.shareButton.on("click",this.onShareClicked.bind(this)),this.fullscreenButton.on("click",this.onFullscreenClicked.bind(this));var t=SL.util.getQuery().style;"hidden"!==t||SL.current_deck.isPaid()||(t=null),t&&$("html").attr("data-embed-style",t),Modernizr.fullscreen===!1&&this.fullscreenButton.hide(),this.layout()},layout:function(){this.revealElement.height(this.footerElement.is(":visible")?window.innerHeight-this.footerElement.height():"100%"),Reveal.layout()},onFullscreenClicked:function(){var t=$("html").get(0);return t?(SL.helpers.Fullscreen.enter(t),!1):void 0},onShareClicked:function(){SL.popup.open(SL.components.decksharer.DeckSharer,{deck:SL.current_deck}),SL.analytics.trackPresenting("Share clicked (embed footer)")}}),SL("views.decks").Export=SL.views.Base.extend({init:function(){this._super(),SLConfig.deck.notes&&[].forEach.call(document.querySelectorAll(".reveal .slides section"),function(t){var e=SLConfig.deck.notes[t.getAttribute("data-id")];e&&"string"==typeof e&&t.setAttribute("data-notes",e)}),SL.util.deck.renderInlineMath()}}),SL("views.decks").Fullscreen=SL.views.Base.extend({init:function(){this._super(),/no-autoplay=1/.test(window.location.search)&&$(".reveal [data-autoplay]").removeAttr("data-autoplay"),SL.util.setupReveal({history:!navigator.userAgent.match(/(iphone|ipod|ipad|android)/gi),openLinksInTabs:!0,trackEvents:!0,maxScale:SL.config.PRESENT_UPSIZING_MAX_SCALE})}}),SL("views.decks").LiveClient=SL.views.Base.extend({init:function(){this._super(),SL.util.setupReveal({touch:!1,history:!1,keyboard:!1,controls:!1,progress:!1,showNotes:!1,slideNumber:!1,autoSlide:0,openLinksInTabs:!0,trackEvents:!0}),Reveal.addEventListener("ready",this.onRevealReady.bind(this)),this.stream=new SL.helpers.StreamLive({showErrors:!0}),this.stream.ready.add(this.onStreamReady.bind(this)),this.stream.stateChanged.add(this.onStreamStateChanged.bind(this)),this.stream.statusChanged.add(this.onStreamStatusChanged.bind(this)),this.render(),this.bind(),this.stream.connect()},render:function(){var t=SL.current_deck.get("user"),e=SL.routes.DECK(t.username,SL.current_deck.get("slug")),i=t.thumbnail_url;this.summaryBubble=$(['<a class="summary-bubble hidden" href="'+e+'" target="_blank">','<div class="summary-bubble-picture" style="background-image: url('+i+')"></div>','<div class="summary-bubble-content"></div>',"</a>"].join("")).appendTo(document.body),this.summaryBubbleContent=this.summaryBubble.find(".summary-bubble-content"),this.renderUserSummary()},renderUserSummary:function(){var t=SL.current_deck.get("user");this.summaryBubbleContent.html(["<h4>"+SL.current_deck.get("title")+"</h4>","<p>By "+(t.name||t.username)+"</p>"].join(""))},renderWaitingSummary:function(){this.summaryBubbleContent.html(["<h4>Waiting for presenter</h4>",'<p class="retry-status"></p>'].join("")),this.summaryBubbleRetryStatus=this.summaryBubbleContent.find(".retry-status")},renderConnectionLostSummary:function(){this.summaryBubbleContent.html(["<h4>Connection lost</h4>","<p>Attempting to reconnect</p>"].join(""))},startUpdatingTimer:function(){var t=function(){if(this.summaryBubbleRetryStatus&&this.summaryBubbleRetryStatus.length){var t=Date.now()-this.stream.getRetryStartTime(),e=Math.ceil((SL.helpers.StreamLive.CONNECTION_RETRY_INTERVAL-t)/1e3);this.summaryBubbleRetryStatus.text(isNaN(e)?"Retrying":e>0?"Retrying in "+e+"s":"Retrying now")}}.bind(this);clearInterval(this.updateTimerInterval),this.updateTimerInterval=setInterval(t,100),t()},stopUpdatingTimer:function(){clearInterval(this.updateTimerInterval)},bind:function(){this.summaryBubble.on("mouseover",this.expandSummary.bind(this)),this.summaryBubble.on("mouseout",this.collapseSummary.bind(this))},expandSummary:function(t){clearTimeout(this.collapseSummaryTimeout);var e=window.innerWidth-(this.summaryBubbleContent.find("h4, p").offset().left+40);e=Math.min(e,400),this.summaryBubbleContent.find("h4, p").css("max-width",e),this.summaryBubble.width(this.summaryBubble.height()+this.summaryBubbleContent.outerWidth()),"number"==typeof t&&(this.collapseSummaryTimeout=setTimeout(this.collapseSummary.bind(this),t))},expandSummaryError:function(){this.summaryBubbleError=!0,this.expandSummary()},collapseSummary:function(){this.summaryBubbleError||(clearTimeout(this.collapseSummaryTimeout),this.summaryBubble.width(this.summaryBubble.height()))},setPresentControls:function(t){this.summaryBubble.toggleClass("hidden",!t),Reveal.configure({slideNumber:SLConfig.deck.slide_number&&t})},setPresentNotes:function(t){Reveal.configure({showNotes:t})},setPresentUpsizing:function(t){Reveal.configure({maxScale:t?SL.config.PRESENT_UPSIZING_MAX_SCALE:1})},onRevealReady:function(){this.setPresentControls(SL.current_deck.user_settings.get("present_controls")),this.setPresentNotes(SL.current_deck.user_settings.get("present_notes")),this.setPresentUpsizing(SL.current_deck.user_settings.get("present_upsizing"))},onStreamReady:function(){this.expandSummary(5e3)},onStreamStateChanged:function(t){t&&"boolean"==typeof t.present_controls&&this.setPresentControls(t.present_controls),t&&"boolean"==typeof t.present_notes&&this.setPresentNotes(t.present_notes),t&&"boolean"==typeof t.present_upsizing&&this.setPresentUpsizing(t.present_upsizing)},onStreamStatusChanged:function(t){t===SL.helpers.StreamLive.STATUS_WAITING_FOR_PUBLISHER?(this.renderWaitingSummary(),this.expandSummaryError(),this.startUpdatingTimer()):(this.summaryBubbleError=!1,this.renderUserSummary(),this.stopUpdatingTimer())}}),SL("views.decks").LiveServer=SL.views.Base.extend({init:function(){this._super(),this.strings={speakerViewURL:SL.current_deck.getURL({view:"speaker"}),liveViewHelpURL:"http://help.slides.com/knowledgebase/articles/333924",speakerViewHelpURL:"http://help.slides.com/knowledgebase/articles/333923"},SL.util.setupReveal({history:!0,openLinksInTabs:!0,trackEvents:!0,showNotes:SL.current_deck.get("share_notes")&&SL.current_user.settings.get("present_notes"),controls:SL.current_user.settings.get("present_controls"),progress:SL.current_user.settings.get("present_controls"),maxScale:SL.current_user.settings.get("present_upsizing")?SL.config.PRESENT_UPSIZING_MAX_SCALE:1}),this.stream=new SL.helpers.StreamLive({publisher:!0,showErrors:!1}),this.stream.connect(),this.render(),this.bind(),SL.helpers.PageLoader.waitForFonts()},render:function(){this.presentationControls=$(['<div class="presentation-controls">','<div class="presentation-controls-content">',"<h2>Presentation Controls</h2>",'<div class="presentation-controls-section">',"<h2>Speaker View</h2>",'<p>The control panel for your presentation. Includes speaker notes, an upcoming slide preview and more. It can be used as a remote control when opened from a mobile device. <a href="'+this.strings.speakerViewHelpURL+'" target="_blank">Learn more.</a></p>','<a class="button l outline" href="'+this.strings.speakerViewURL+'" target="_blank">Open speaker view</a>',"</div>",'<div class="presentation-controls-section">',"<h2>Present Live</h2>",'<p class="live-description">Share this link with your audience to have them follow along with the presentation in real-time. <a href="'+this.strings.liveViewHelpURL+'" target="_blank">Learn more.</a></p>','<div class="live-share"></div>',"</div>",'<div class="presentation-controls-section sl-form">',"<h2>Options</h2>",'<div class="sl-checkbox outline fullscreen-toggle">','<input id="fullscreen-checkbox" type="checkbox">','<label for="fullscreen-checkbox">Fullscreen</label>',"</div>",'<div class="sl-checkbox outline controls-toggle" data-tooltip="Hide the presentation control arrows and progress bar." data-tooltip-alignment="r" data-tooltip-delay="500" data-tooltip-maxwidth="250">','<input id="controls-checkbox" type="checkbox">','<label for="controls-checkbox">Hide controls</label>',"</div>",'<div class="sl-checkbox outline notes-toggle" data-tooltip="Hide your speaker notes from the audience." data-tooltip-alignment="r" data-tooltip-delay="500" data-tooltip-maxwidth="250">','<input id="controls-checkbox" type="checkbox">','<label for="controls-checkbox">Hide notes</label>',"</div>",'<div class="sl-checkbox outline upsizing-toggle" data-tooltip="Your content is automatically scaled up to fill as much of the browser window as possible. This option disables that scaling and favors the original authored at size." data-tooltip-alignment="r" data-tooltip-delay="500" data-tooltip-maxwidth="300">','<input id="upsizing-checkbox" type="checkbox">','<label for="upsizing-checkbox">Disable upsizing</label>',"</div>","</div>","</div>",'<footer class="presentation-controls-footer">','<button class="button xl positive start-presentation">Start presentation</button>',"</footer>","</div>"].join("")).appendTo(document.body),this.presentationControlsExpander=$(['<div class="presentation-controls-expander" data-tooltip="Show menu" data-tooltip-alignment="r">','<span class="icon i-chevron-right"></span>',"</div>"].join("")).appendTo(document.body),$(".global-header").prependTo(this.presentationControls),this.presentationControlsScrollShadow=new SL.components.ScrollShadow({parentElement:this.presentationControls,headerElement:this.presentationControls.find(".global-header"),contentElement:this.presentationControls.find(".presentation-controls-content"),footerElement:this.presentationControls.find(".presentation-controls-footer")}),SL.helpers.Fullscreen.isEnabled()===!1&&this.presentationControls.find(".fullscreen-toggle").hide(),SL.current_deck.get("share_notes")||this.presentationControls.find(".notes-toggle").hide(),this.syncPresentationControls(),this.renderLiveShare()},bind:function(){this.presentationControls.find(".live-view-url").on("mousedown",this.onLiveURLMouseDown.bind(this)),this.presentationControls.find(".fullscreen-toggle").on("vclick",this.onFullscreenToggled.bind(this)),this.presentationControls.find(".controls-toggle").on("vclick",this.onControlsToggled.bind(this)),this.presentationControls.find(".notes-toggle").on("vclick",this.onNotesToggled.bind(this)),this.presentationControls.find(".upsizing-toggle").on("vclick",this.onUpsizingToggled.bind(this)),this.presentationControls.find(".button.start-presentation").on("vclick",this.onStartPresentationClicked.bind(this)),this.presentationControlsExpander.on("vclick",this.onStopPresentationClicked.bind(this)),$(document).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",this.onFullscreenChange.bind(this)),$(document).on("mousemove",this.onMouseMove.bind(this)),$(document).on("mouseleave",this.onMouseLeave.bind(this))},syncPresentationControls:function(){this.presentationControls.find(".fullscreen-toggle input").prop("checked",SL.helpers.Fullscreen.isActive()),this.presentationControls.find(".controls-toggle input").prop("checked",!SL.current_user.settings.get("present_controls")),this.presentationControls.find(".upsizing-toggle input").prop("checked",!SL.current_user.settings.get("present_upsizing")),this.presentationControls.find(".notes-toggle input").prop("checked",!SL.current_user.settings.get("present_notes"))},renderLiveShare:function(){this.liveShareElement=this.presentationControls.find(".live-share"),SL.current_deck.isVisibilityAll()?this.showLiveShareLink(SL.current_deck.getURL({view:"live"})):this.showLiveShareLinkGenerator()},showLiveShareLinkGenerator:function(){this.presentationControls.find(".live-description").html('Share a link with your audience to have them follow along with the presentation in real-time. Note that all private links you share point to the same live presentation session. <a href="'+this.strings.liveViewHelpURL+'" target="_blank">Learn more.</a>'),this.liveShareButton=$('<button class="button l outline ladda-button" data-style="zoom-out" data-spinner-color="#222">Share link</button>'),this.liveShareButton.appendTo(this.liveShareElement),this.liveShareButton.on("vclick",function(){"undefined"!=typeof SLConfig&&"string"==typeof SLConfig.deck.user.username&&"string"==typeof SLConfig.deck.slug?SL.popup.open(SL.components.decksharer.DeckSharer,{deck:SL.current_deck,deckView:"live"}):SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")}.bind(this))},showLiveShareLink:function(t){this.liveShareElement.html('<input class="live-view-url input-field" type="text" value="'+t+'" readonly />'),this.liveShareElement.find(".live-view-url").on("mousedown",this.onLiveURLMouseDown.bind(this))},showStatus:function(t){this.statusElement?this.statusElement.find(".stream-status-message").html(t):this.statusElement=$(['<div class="stream-status">','<p class="stream-status-message">'+t+"</p>","</div>"].join("")).appendTo(document.body)},clearStatus:function(){this.statusElement&&(this.statusElement.remove(),this.statusElement=null)},savePresentOption:function(t){this.xhrRequests=this.xhrRequests||{},this.xhrRequests[t]&&this.xhrRequests[t].abort();var e={url:SL.config.AJAX_UPDATE_USER_SETTINGS,type:"PUT",context:this,data:{user_settings:{}}};e.data.user_settings[t]=SL.current_user.settings.get(t),this.xhrRequests[t]=$.ajax(e).always(function(){this.xhrRequests[t]=null})},startPresentation:function(){$("html").addClass("presentation-started"),this.presentationStarted=!0},stopPresentation:function(){$("html").removeClass("presentation-started"),this.presentationStarted=!1,this.presentationControlsExpander.removeClass("visible")},hasStartedPresentation:function(){return!!this.presentationStarted},onLiveURLMouseDown:function(t){$(t.target).focus().select(),t.preventDefault()},onControlsToggled:function(t){t.preventDefault();var e=!Reveal.getConfig().controls;SL.current_user.settings.set("present_controls",e),Reveal.configure({controls:e,progress:e,slideNumber:SLConfig.deck.slide_number&&e}),this.syncPresentationControls(),this.savePresentOption("present_controls"),this.stream.publish(null,{present_controls:e})},onNotesToggled:function(t){t.preventDefault();var e=!Reveal.getConfig().showNotes;SL.current_user.settings.set("present_notes",e),Reveal.configure({showNotes:e}),this.syncPresentationControls(),this.savePresentOption("present_notes"),this.stream.publish(null,{present_notes:e})},onUpsizingToggled:function(t){t.preventDefault();var e=Reveal.getConfig().maxScale<=1;SL.current_user.settings.set("present_upsizing",e),Reveal.configure({maxScale:e?SL.config.PRESENT_UPSIZING_MAX_SCALE:1}),this.syncPresentationControls(),this.savePresentOption("present_upsizing"),this.stream.publish(null,{present_upsizing:e})},onFullscreenToggled:function(t){t.preventDefault(),SL.helpers.Fullscreen.toggle()},onFullscreenChange:function(){this.syncPresentationControls(),Reveal.layout()},onStartPresentationClicked:function(){this.startPresentation()},onStopPresentationClicked:function(){this.stopPresentation()},onMouseMove:function(t){this.presentationControlsExpander.toggleClass("visible",this.hasStartedPresentation()&&t.clientX<50)},onMouseLeave:function(){this.presentationControlsExpander.removeClass("visible")}}),SL("views.decks").Password=SL.views.Base.extend({OUTRO_DURATION:600,init:function(){this._super(),this.domElement=$(".password-content"),this.formElement=this.domElement.find(".sl-form"),this.inputElement=this.formElement.find(".password-input"),this.submitButton=this.formElement.find(".password-submit"),this.submitLoader=Ladda.create(this.submitButton.get(0)),this.iconElement=$(".password-icon"),this.titleElement=$(".password-title"),this.incorrectPasswordCounter=0,this.incorrectPasswordMessages=["Wrong password, please try again","Still wrong, give it another try","That one was wrong too","Nope"],this.submitButton.on("vclick",this.onSubmitClicked.bind(this)),$(document).on("keydown",this.onKeyDown.bind(this))},submit:function(){this.request||(this.submitLoader.start(),this.iconElement.removeClass("wobble"),this.request=$.ajax({url:SL.config.AJAX_ACCESS_TOKENS_PASSWORD_AUTH(SLConfig.access_token_id),type:"PUT",context:this,data:{access_token:{password:this.inputElement.val()}}}).done(function(){this.domElement.addClass("outro"),this.titleElement.text("All set! Loading deck..."),setTimeout(function(){window.location.reload()},this.OUTRO_DURATION)}).fail(function(){this.submitLoader.stop(),this.titleElement.text(this.getIncorrectPasswordMessage()),this.iconElement.addClass("wobble"),this.request=null}))},getIncorrectPasswordMessage:function(){return this.incorrectPasswordMessages[this.incorrectPasswordCounter++%this.incorrectPasswordMessages.length]},onSubmitClicked:function(t){t.preventDefault(),this.submit()},onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),this.submit())}}),SL("views.decks").Review=SL.views.Base.extend({init:function(){this._super(),$("html").toggleClass("small-mode",window.innerWidth<850),SL.util.setupReveal({help:!1,history:!0,openLinksInTabs:!0,margin:.15}),SL.helpers.PageLoader.show(),this.setupCollaboration().then(function(){SL.fonts.isReady()?SL.helpers.PageLoader.hide():SL.fonts.ready.add(SL.helpers.PageLoader.hide)}),SL.session.enforce()},setupCollaboration:function(){this.collaboration=new SL.components.collab.Collaboration({container:document.body,fixed:!$("html").hasClass("small-mode"),autofocusComment:!1});var t=new Promise(function(t){this.collaboration.loaded.add(function(){t()}.bind(this))}.bind(this));return this.collaboration.load(),t}}),SL("views.decks").Show=SL.views.Base.extend({init:function(){this._super(),SL.util.setupReveal({history:!0,embedded:!0,pause:!1,margin:.1,openLinksInTabs:!0,trackEvents:!0}),this.setupDisqus(),this.setupPills(),$("header .deck-promotion").length&&$("header").addClass("extra-wide"),Modernizr.fullscreen===!1&&$(".deck-options .fullscreen-button").hide(),this.bind(),this.layout()},bind:function(){this.editButton=$(".deck-options .edit-button"),this.editButtonOriginalLink=this.editButton.attr("href"),$(".deck-options .fork-button").on("click",this.onForkClicked.bind(this)),$(".deck-options .share-button").on("click",this.onShareClicked.bind(this)),$(".deck-options .comment-button").on("click",this.onCommentsClicked.bind(this)),$(".deck-options .fullscreen-button").on("click",this.onFullScreenClicked.bind(this)),this.visibilityButton=$(".deck-options .visibility-button"),this.visibilityButton.on("click",this.onVisibilityClicked.bind(this)),$(document).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",Reveal.layout),this.onWindowScroll=$.debounce(this.onWindowScroll,200),$(window).on("resize",this.layout.bind(this)),$(window).on("scroll",this.onWindowScroll.bind(this)),Reveal.addEventListener("slidechanged",this.onSlideChanged.bind(this)),Reveal.addEventListener("fragmentshown",this.hideSummary),Reveal.addEventListener("fragmenthidden",this.hideSummary)},setupPills:function(){this.hideSummary=this.hideSummary.bind(this),this.hideInstructions=this.hideInstructions.bind(this),this.summaryPill=$(".summary-pill"),this.instructionsPill=$(".instructions-pill"),this.summaryPill.on("click",this.hideSummary),this.instructionsPill.on("click",this.hideInstructions),this.showSummaryTimeout=setTimeout(this.showSummary.bind(this),1e3),this.hideSummaryTimeout=setTimeout(this.hideSummary.bind(this),6e3),this.showNavigationInstructions()},setupDisqus:function(){$("#disqus_thread").length?$(window).on("load",function(){{var t=window.disqus_shortname="slidesapp";window.disqus_identifier=SLConfig.deck.id}!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()}):$(".options .comment-button").hide()},showSummary:function(){this.summaryPill&&this.summaryPill.addClass("visible")},hideSummary:function(){clearTimeout(this.showSummaryTimeout),this.summaryPill&&(this.summaryPill.removeClass("visible"),this.summaryPill.on("transitionend",this.summaryPill.remove),this.summaryPill=null)},canShowInstructions:function(){return!SL.util.user.isLoggedIn()&&!SL.util.device.IS_PHONE&&!SL.util.device.IS_TABLET&&Reveal.getTotalSlides()>1&&Modernizr.localstorage},showNavigationInstructions:function(){this.showInstructions("slides-has-seen-deck-navigation-instructions",6e3,{title:"Navigation instructions",description:"Press the space key or click the arrows to the right"})},showVerticalInstructions:function(){this.showInstructions("slides-has-seen-deck-vertical-instructions",1e3,{title:"There's a vertical slide below",description:"Use the controls to the right or the keyboard arrows",icon:"down-arrow"})},showInstructions:function(t,e,i){clearTimeout(this.showInstructionsTimeout),this.instructionsPill&&this.canShowInstructions()&&!localStorage.getItem(t)&&(localStorage.setItem(t,"yes"),this.showInstructionsTimeout=setTimeout(function(){this.instructionsPill.attr("data-icon",i.icon),this.instructionsPill.find(".pill-title").text(i.title),this.instructionsPill.find(".pill-description").text(i.description),this.instructionsPill.addClass("visible"),this.layout()}.bind(this),e))},hideInstructions:function(){clearTimeout(this.showInstructionsTimeout),this.instructionsPill&&this.instructionsPill.removeClass("visible")},layout:function(){this.summaryPill&&this.summaryPill.css("left",(window.innerWidth-this.summaryPill.width())/2),this.instructionsPill&&this.instructionsPill.css("left",(window.innerWidth-this.instructionsPill.width())/2);var t=$(".reveal .playback"),e=$(".deck-kudos"),i={opacity:1};e.length&&t.length&&(i.marginLeft=t.offset().left+t.outerWidth()-10),e.css(i)},onShareClicked:function(){return"undefined"!=typeof SLConfig&&"string"==typeof SLConfig.deck.user.username&&"string"==typeof SLConfig.deck.slug?SL.popup.open(SL.components.decksharer.DeckSharer,{deck:SL.current_deck}):SL.notify(SL.locale.get("GENERIC_ERROR"),"negative"),SL.analytics.trackPresenting("Share clicked"),!1},onCommentsClicked:function(){SL.analytics.trackPresenting("Comments clicked")},onFullScreenClicked:function(){var t=$(".reveal-viewport").get(0);return t?(SL.helpers.Fullscreen.enter(t),!1):void SL.analytics.trackPresenting("Fullscreen clicked")},onForkClicked:function(){return SL.analytics.trackPresenting("Fork clicked"),$.ajax({type:"POST",url:SL.config.AJAX_FORK_DECK(SLConfig.deck.id),context:this}).done(function(){window.location=SL.current_user.getProfileURL()}).fail(function(){SL.notify(SL.locale.get("GENERIC_ERROR"),"negative")}),!1},onVisibilityClicked:function(t){t.preventDefault();var e=new SL.components.prompts.DeckVisibility(SL.current_deck,{anchor:$(t.currentTarget)});e.show(),SL.analytics.trackPresenting("Visibility menu opened")},onSlideChanged:function(t){this.hideSummary(),this.hideInstructions();var e="#";t.indexh&&(e+="/"+t.indexh,t.indexv&&(e+="/"+t.indexv)),this.editButton.attr("href",this.editButtonOriginalLink+e),t.indexh>0&&0===t.indexv&&Reveal.availableRoutes().down&&this.showVerticalInstructions()},onWindowScroll:function(){$(window).scrollTop()>10&&(this.hideSummary(),this.hideInstructions())}}),SL("views.decks").Speaker=SL.views.Base.extend({init:function(){this._super(),this.notesElement=$(".speaker-controls .notes"),this.notesValue=$(".speaker-controls .notes .value"),this.timeElement=$(".speaker-controls .time"),this.timeTimerValue=$(".speaker-controls .time .timer-value"),this.timeClockValue=$(".speaker-controls .time .clock-value"),this.subscribersElement=$(".speaker-controls .subscribers"),this.subscribersValue=$(".speaker-controls .subscribers .subscribers-value"),this.currentElement=$(".current-slide"),this.upcomingElement=$(".upcoming-slide"),this.upcomingFrame=$(".upcoming-slide iframe"),this.upcomingJumpTo=$(".upcoming-slide-jump-to"),this.speakerLayout=$(".speaker-layout-button"),this.speakerLayout.on("vclick",this.onLayoutClicked.bind(this)),$(".reveal [data-autoplay]").removeAttr("data-autoplay"),this.isMobileSpeakerView()||this.setLayout(SL.current_user.settings.get("speaker_layout")),this.upcomingFrame.length?(this.upcomingFrame.on("load",this.onUpcomingFrameLoaded.bind(this)),this.upcomingFrame.attr("src",this.upcomingFrame.attr("data-src"))):this.setup(),SL.helpers.PageLoader.show()},setup:function(){Reveal.addEventListener("ready",function(){this.currentReveal=window.Reveal,this.currentReveal.addEventListener("slidechanged",this.onCurrentSlideChanged.bind(this)),this.currentReveal.addEventListener("fragmentshown",this.onCurrentFragmentChanged.bind(this)),this.currentReveal.addEventListener("fragmenthidden",this.onCurrentFragmentChanged.bind(this)),this.currentReveal.addEventListener("paused",this.onCurrentPaused.bind(this)),this.currentReveal.addEventListener("resumed",this.onCurrentResumed.bind(this)),this.upcomingFrame.length&&(this.upcomingReveal=this.upcomingFrame.get(0).contentWindow.Reveal,this.upcomingReveal.isReady()?this.setupUpcomingReveal():this.upcomingReveal.addEventListener("ready",this.setupUpcomingReveal.bind(this))),this.setupTimer(),this.setupTouch(),this.stream=new SL.helpers.StreamLive({reveal:this.currentReveal,publisher:!0,showErrors:!0}),this.stream.ready.add(this.onStreamReady.bind(this)),this.stream.subscribersChanged.add(this.onStreamSubscribersChanged.bind(this)),this.stream.connect(),this.layout(),window.addEventListener("resize",this.layout.bind(this))}.bind(this)),SL.util.setupReveal({touch:!0,history:!1,autoSlide:0,openLinksInTabs:!0,trackEvents:!0,showNotes:!1})},setupUpcomingReveal:function(){this.upcomingReveal.configure({history:!1,controls:!1,progress:!1,overview:!1,autoSlide:0,transition:"none",backgroundTransition:"none"}),this.upcomingReveal.addEventListener("slidechanged",this.onUpcomingSlideChanged.bind(this)),this.upcomingReveal.addEventListener("fragmentshown",this.onUpcomingFragmentChanged.bind(this)),this.upcomingReveal.addEventListener("fragmenthidden",this.onUpcomingFragmentChanged.bind(this)),this.upcomingFrame.get(0).contentWindow.document.body.className+=" no-transition",this.upcomingJumpTo.on("vclick",this.onJumpToUpcomingSlide.bind(this)),this.syncJumpButton()},setupTouch:function(){if(this.isMobileSpeakerView()&&(SL.util.device.HAS_TOUCH||window.navigator.pointerEnabled)){this.touchControls=$(['<div class="touch-controls">','<div class="touch-controls-content">','<span class="status">',"Tap or Swipe to change slide","</span>",'<span class="slide-number"></span>',"</div>",'<div class="touch-controls-progress"></div>',"</div>"].join("")).appendTo(document.body),this.touchControlsProgress=this.touchControls.find(".touch-controls-progress"),this.touchControlsSlideNumber=this.touchControls.find(".slide-number"),this.touchControlsStatus=this.touchControls.find(".status"),setTimeout(function(){this.touchControls.addClass("visible")}.bind(this),1e3);var t=document.body,e=new Hammer(t);
e.get("swipe").set({direction:Hammer.DIRECTION_ALL}),e.get("press").set({threshold:1e3}),$(t).on("touchstart",function(i){1===$(i.target).closest(".notes-overflowing").length?(e.stop(),$(t).one("touchend",function(t){var e={x:i.originalEvent.pageX,y:i.originalEvent.pageY},n={x:t.originalEvent.pageX,y:t.originalEvent.pageY};SL.util.trig.distanceBetween({x:e.x,y:e.y},{x:n.x,y:n.y})<10&&(this.currentReveal.next(),this.showTouchStatus("Next slide"))}.bind(this))):i.preventDefault()}.bind(this)),e.on("swipe",function(t){switch(t.direction){case Hammer.DIRECTION_LEFT:this.currentReveal.right(),this.showTouchStatus("Next slide");break;case Hammer.DIRECTION_RIGHT:this.currentReveal.left(),this.showTouchStatus("Previous slide");break;case Hammer.DIRECTION_UP:this.currentReveal.down(),this.showTouchStatus("Next vertical slide");break;case Hammer.DIRECTION_DOWN:this.currentReveal.up(),this.showTouchStatus("Previous vertical slide")}}.bind(this)),e.on("tap",function(){this.currentReveal.next(),this.showTouchStatus("Next slide")}.bind(this)),e.on("press",function(){this.currentReveal.isPaused()&&(this.currentReveal.togglePause(!1),this.showTouchStatus("Resumed"))}.bind(this))}},setupTimer:function(){this.timeTimerValue.on("click",this.restartTimer.bind(this)),this.restartTimer(),setInterval(this.syncTimer.bind(this),1e3)},restartTimer:function(){this.startTime=Date.now(),this.syncTimer()},layout:function(){var t=window.innerHeight-this.notesValue.offset().top-10;this.isMobileSpeakerView()?this.touchControls&&(t-=this.touchControls.outerHeight()):this.subscribersElement.hasClass("visible")&&(t-=this.subscribersElement.outerHeight()),this.notesValue.height(t),this.syncNotesOverflow()},setLayout:function(t,e){$("html").attr("data-speaker-layout",t),this.currentReveal&&this.currentReveal.layout(),this.upcomingReveal&&this.upcomingReveal.layout(),this.layout(),e&&(SL.current_user.settings.set("speaker_layout",t),SL.current_user.settings.save(["speaker_layout"]))},getLayout:function(){return SL.current_user.settings.get("speaker_layout")||SL.views.decks.Speaker.LAYOUT_DEFAULT},sync:function(){setTimeout(function(){this.syncUpcomingSlide(),this.syncTouchControls(),this.syncNotes(),this.syncNotesOverflow(),this.syncTimer()}.bind(this),1)},syncTimer:function(){var t=moment();this.timeClockValue.html(t.format("hh:mm")+' <span class="dim">'+t.format("A")+"<span>"),t.hour(0).minute(0).second((Date.now()-this.startTime)/1e3);var e=t.format("HH")+":",i=t.format("mm")+":",n=t.format("ss");"00:"===e&&(e='<span class="dim">'+e+"</span>","00:"===i&&(i='<span class="dim">'+i+"</span>")),this.timeTimerValue.html(e+i+n)},syncUpcomingSlide:function(){if(this.upcomingReveal){var t=this.currentReveal.getIndices();this.upcomingReveal.slide(t.h,t.v,t.f),this.upcomingReveal.next();var e=this.upcomingReveal.getIndices();this.upcomingElement.toggleClass("is-last-slide",t.h===e.h&&t.v===e.v&&t.f===e.f)}},syncJumpButton:function(){if(this.upcomingReveal){var t=this.currentReveal.getIndices(),e=this.upcomingReveal.getIndices();this.upcomingJumpTo.toggleClass("hidden",t.h===e.h&&t.v===e.v&&t.f===e.f)}},syncNotes:function(){var t=$(this.currentReveal.getCurrentSlide()).attr("data-notes")||"";t?(this.notesElement.show(),this.notesValue.text(t),this.notesElement.removeAttr("data-note-length"),t.length<120?this.notesElement.attr("data-note-length","short"):t.length>210&&this.notesElement.attr("data-note-length","long")):this.notesElement.hide()},syncNotesOverflow:function(){this.notesValue.toggleClass("notes-overflowing",this.notesValue.prop("scrollHeight")>this.notesValue.height())},syncTouchControls:function(){if(this.touchControls){var t=this.currentReveal.getProgress();this.touchControlsProgress.css({"-webkit-transform":"scale("+t+", 1)","-moz-transform":"scale("+t+", 1)","-ms-transform":"scale("+t+", 1)",transform:"scale("+t+", 1)"});var e=$(".reveal .slides section:not(.stack)").length,i=this.currentReveal.getIndices().h+this.currentReveal.getIndices().v;i+=$(".reveal .slides>section.present").prevAll("section").find(">section:gt(0)").length,i+=1,this.touchControlsSlideNumber.html(i+"/"+e)}},showTouchStatus:function(t){clearTimeout(this.touchControlsStatusTimeout);var e=this.currentReveal&&this.currentReveal.isPaused();e&&(t="Paused (tap+hold to resume)"),this.touchControlsStatus&&(this.touchControlsStatus.text(t).removeClass("hidden"),e||(this.touchControlsStatusTimeout=setTimeout(function(){this.touchControlsStatus.addClass("hidden")}.bind(this),1e3)))},isMobileSpeakerView:function(){return $("html").hasClass("speaker-mobile")},onUpcomingFrameLoaded:function(){this.setup()},onStreamReady:function(){SL.helpers.PageLoader.hide(),this.sync()},onStreamSubscribersChanged:function(t){"number"==typeof this.subscriberCount&&(this.subscribersValue.removeClass("flash green flash-red"),t>this.subscriberCount?setTimeout(function(){this.subscribersValue.addClass("flash-green")}.bind(this),1):t<this.subscriberCount&&setTimeout(function(){this.subscribersValue.addClass("flash-red")}.bind(this),1)),this.subscriberCount=t,this.subscriberCount>0?(this.subscribersValue.html('<span class="icon i-eye"></span>'+t),this.subscribersElement.addClass("visible")):this.subscribersElement.removeClass("visible"),this.layout()},onCurrentSlideChanged:function(){this.sync()},onCurrentFragmentChanged:function(){this.sync()},onCurrentPaused:function(){this.pausedInstructions||(this.pausedInstructions=$('<h3 class="message-overlay">Paused. Press the "B" key to resume.</h3>'),this.pausedInstructions.appendTo(this.currentElement),this.pausedInstructions.addClass("visible"))},onCurrentResumed:function(){this.pausedInstructions&&(this.pausedInstructions.remove(),this.pausedInstructions=null)},onUpcomingSlideChanged:function(){this.syncJumpButton()},onUpcomingFragmentChanged:function(){this.syncJumpButton()},onJumpToUpcomingSlide:function(){var t=this.upcomingReveal.getIndices();this.currentReveal.slide(t.h,t.v,t.f),this.syncUpcomingSlide()},onLayoutClicked:function(){var t=this.getLayout();SL.prompt({anchor:this.speakerLayout,type:"select",title:"Speaker layout",className:"sl-speaker-layout-prompt",data:[{html:'<div class="speaker-layout-icon" data-speaker-layout="'+SL.views.decks.Speaker.LAYOUT_DEFAULT+'"></div><h3>Default</h3>',selected:t===SL.views.decks.Speaker.LAYOUT_DEFAULT,callback:this.setLayout.bind(this,SL.views.decks.Speaker.LAYOUT_DEFAULT,!0)},{html:'<div class="speaker-layout-icon" data-speaker-layout="'+SL.views.decks.Speaker.LAYOUT_WIDE+'"></div><h3>Wide</h3>',selected:t===SL.views.decks.Speaker.LAYOUT_WIDE,callback:this.setLayout.bind(this,SL.views.decks.Speaker.LAYOUT_WIDE,!0)},{html:'<div class="speaker-layout-icon" data-speaker-layout="'+SL.views.decks.Speaker.LAYOUT_TALL+'"></div><h3>Tall</h3>',selected:t===SL.views.decks.Speaker.LAYOUT_TALL,callback:this.setLayout.bind(this,SL.views.decks.Speaker.LAYOUT_TALL,!0)},{html:'<div class="speaker-layout-icon" data-speaker-layout="'+SL.views.decks.Speaker.LAYOUT_NOTES_ONLY+'"></div><h3>Notes only</h3>',selected:t===SL.views.decks.Speaker.LAYOUT_NOTES_ONLY,callback:this.setLayout.bind(this,SL.views.decks.Speaker.LAYOUT_NOTES_ONLY,!0)}]})}}),SL.views.decks.Speaker.LAYOUT_DEFAULT="default",SL.views.decks.Speaker.LAYOUT_WIDE="wide",SL.views.decks.Speaker.LAYOUT_TALL="tall",SL.views.decks.Speaker.LAYOUT_NOTES_ONLY="notes-only";